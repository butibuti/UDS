/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./game.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./WebGl/Component/CameraChaser.ts":
/*!*****************************************!*\
  !*** ./WebGl/Component/CameraChaser.ts ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Vector3_1 = __importDefault(__webpack_require__(/*! ../Math/Vector3 */ "./WebGl/Math/Vector3.ts"));
var Component_1 = __importDefault(__webpack_require__(/*! ./Component */ "./WebGl/Component/Component.ts"));
var zMin = -2.5;
var zMax = -2.25;
var xMin = 1.0;
var xMax = 2.0;
var CameraChaser = /** @class */ (function (_super) {
    __extends(CameraChaser, _super);
    function CameraChaser(arg_speed, arg_tragetTransform) {
        var _this = _super.call(this) || this;
        _this.speed = arg_speed;
        _this.targetTransform = arg_tragetTransform;
        _this.velocity = new Vector3_1.default(0, 0, 0);
        return _this;
    }
    CameraChaser.prototype.OnSet = function () {
        this.offsetX = this.gameObject.transform.Position.x - this.targetTransform.Position.x;
        this.offsetZ = this.gameObject.transform.Position.y - this.targetTransform.Position.y;
    };
    CameraChaser.prototype.Update = function () {
        //this.velocity.y = this.targetTransform.Position.y;
        var xlength = this.gameObject.transform.Position.x - this.targetTransform.Position.x + this.offsetX;
        if (xlength * this.speed > 1) {
            this.velocity.x = xlength / 2;
        }
        else if (xlength > xMax) {
            this.velocity.x = -1 * (xlength - xMax) * (xlength - xMax) * this.speed;
        }
        else if (xlength < xMin) {
            this.velocity.x = (xlength - xMin) * (xlength - xMin) * this.speed;
        }
        else {
            this.velocity.x = 0;
        }
        var z = this.gameObject.transform.Position.z - this.targetTransform.Position.z + this.offsetZ;
        //console.log(z);
        if (z > zMax) {
            this.velocity.z = -1 * (z - zMax) * (z - zMax) * this.speed;
        }
        else if (z < zMin) {
            this.velocity.z = (z - zMin) * (z - zMin) * this.speed * 2;
        }
        else {
            this.velocity.z = 0;
        }
        this.gameObject.transform.SetPosition.Add_b((this.velocity));
    };
    return CameraChaser;
}(Component_1.default));
exports.default = CameraChaser;


/***/ }),

/***/ "./WebGl/Component/CollisionComponent.ts":
/*!***********************************************!*\
  !*** ./WebGl/Component/CollisionComponent.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Component_1 = __importDefault(__webpack_require__(/*! ./Component */ "./WebGl/Component/Component.ts"));
var CollisionObjectCreater_1 = __importDefault(__webpack_require__(/*! ../Tool/CollisionObjectCreater */ "./WebGl/Tool/CollisionObjectCreater.ts"));
var PrimitiveType;
(function (PrimitiveType) {
    PrimitiveType[PrimitiveType["sphere"] = 0] = "sphere";
    PrimitiveType[PrimitiveType["box_AABB"] = 1] = "box_AABB";
    PrimitiveType[PrimitiveType["box_OBB"] = 2] = "box_OBB";
    PrimitiveType[PrimitiveType["point"] = 3] = "point";
})(PrimitiveType || (PrimitiveType = {}));
var CollisionComponent = /** @class */ (function (_super) {
    __extends(CollisionComponent, _super);
    function CollisionComponent(arg_type, arg_size, layer) {
        var _this = _super.call(this) || this;
        _this.layer = 0;
        _this.type = arg_type;
        _this.size = arg_size;
        if (layer) {
            _this.layer = layer;
        }
        return _this;
    }
    CollisionComponent.prototype.OnSet = function () {
        switch (this.type) {
            case PrimitiveType.sphere:
                this.collision = CollisionObjectCreater_1.default.CreateSphere(this.size.x, this.gameObject);
                break;
            case PrimitiveType.point:
                this.collision = CollisionObjectCreater_1.default.CreatePoint(this.gameObject);
                break;
            case PrimitiveType.box_AABB:
                this.collision = CollisionObjectCreater_1.default.CreateCube_AABB(this.size, this.gameObject);
                break;
            case PrimitiveType.box_OBB:
                this.collision = CollisionObjectCreater_1.default.CreateCube_OBB(this.size, this.gameObject);
                break;
        }
        this.id = this.gameObject.GetCollisionManager().Regist(this.collision, this.layer);
    };
    CollisionComponent.prototype.OnRemove = function () {
        this.gameObject.GetCollisionManager().UnRegist(this.id, this.layer);
    };
    CollisionComponent.prototype.Update = function () {
        this.collision.Update();
    };
    return CollisionComponent;
}(Component_1.default));
exports.default = CollisionComponent;


/***/ }),

/***/ "./WebGl/Component/Component.ts":
/*!**************************************!*\
  !*** ./WebGl/Component/Component.ts ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Component = /** @class */ (function () {
    function Component() {
    }
    Object.defineProperty(Component.prototype, "IsRemove", {
        get: function () {
            return this.isRemove;
        },
        enumerable: false,
        configurable: true
    });
    Component.prototype.Set = function (arg_obj) {
        this.gameObject = arg_obj;
        this.isRemove = false;
        this.OnSet();
    };
    Component.prototype.Dead = function () {
        this.isRemove = true;
    };
    Component.prototype.OnSet = function () {
    };
    Component.prototype.Remove = function () {
        this.isRemove = true;
        this.OnRemove();
        this.gameObject = null;
    };
    Component.prototype.OnRemove = function () {
    };
    Component.prototype.Release = function () {
        this.OnRelease();
        this.gameObject = null;
    };
    Component.prototype.OnRelease = function () {
    };
    Component.prototype.Update = function () {
    };
    Component.prototype.OnCollision = function (arg_gameObject) {
    };
    Component.prototype.OnCollisionEnter = function (arg_gameObject) {
    };
    Component.prototype.OnCollisionRelease = function (arg_gameObject) {
    };
    Component.prototype.GetComponentName = function () {
        return "Component";
    };
    return Component;
}());
exports.default = Component;


/***/ }),

/***/ "./WebGl/Component/ModelDrawComponent.ts":
/*!***********************************************!*\
  !*** ./WebGl/Component/ModelDrawComponent.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Component_1 = __importDefault(__webpack_require__(/*! ./Component */ "./WebGl/Component/Component.ts"));
var ModelInfo = /** @class */ (function () {
    function ModelInfo() {
        this.meshName = null;
    }
    return ModelInfo;
}());
var ModelDrawComponent = /** @class */ (function (_super) {
    __extends(ModelDrawComponent, _super);
    function ModelDrawComponent(isLighting, geometryName, materialName, shaderName, layer, isBillBoard, meshName, arg_transform) {
        var _this = _super.call(this) || this;
        _this.info = new ModelInfo();
        _this.transform = null;
        _this.layer = layer;
        if (meshName)
            _this.info.meshName = meshName;
        _this.info.geometryName = geometryName;
        _this.info.shaderName = shaderName;
        _this.info.materialName = materialName;
        if (arg_transform)
            _this.transform = arg_transform;
        _this.info.lighting = isLighting;
        _this.info.billBoard = isBillBoard;
        return _this;
    }
    Object.defineProperty(ModelDrawComponent.prototype, "Layer", {
        get: function () {
            return this.layer;
        },
        enumerable: false,
        configurable: true
    });
    ModelDrawComponent.prototype.OnSet = function () {
        if (!this.transform) {
            this.transform = this.gameObject.transform;
        }
        if (this.info.meshName) {
            this.model = this.gameObject.Manager.Scene.GetSceneManager().GetModelCreater().CreateModelFromMesh(this.info.lighting, this.info.billBoard, this.info.meshName, this.info.shaderName, this.transform);
        }
        else {
            this.model = this.gameObject.Manager.Scene.GetSceneManager().GetModelCreater().CreateModel(this.info.lighting, this.info.billBoard, this.info.geometryName, this.info.materialName, this.info.shaderName, this.transform);
        }
        this.RegistDraw();
    };
    ModelDrawComponent.prototype.OnRemove = function () {
        this.UnRegistDraw();
    };
    ModelDrawComponent.prototype.RegistDraw = function () {
        if (!this.modelID)
            this.modelID = this.gameObject.GetRenderer().Regist(this.model, this.layer);
    };
    ModelDrawComponent.prototype.UnRegistDraw = function () {
        if (this.modelID) {
            this.gameObject.GetRenderer().UnRegist(this.modelID, this.layer);
            this.modelID = null;
        }
    };
    return ModelDrawComponent;
}(Component_1.default));
exports.default = ModelDrawComponent;


/***/ }),

/***/ "./WebGl/Component/PoppingAnimation.ts":
/*!*********************************************!*\
  !*** ./WebGl/Component/PoppingAnimation.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Easing_1 = __importDefault(__webpack_require__(/*! ../Tool/Easing */ "./WebGl/Tool/Easing.ts"));
var Component_1 = __importDefault(__webpack_require__(/*! ./Component */ "./WebGl/Component/Component.ts"));
var PoppingAnimation = /** @class */ (function (_super) {
    __extends(PoppingAnimation, _super);
    function PoppingAnimation(arg_moveObject, arg_time, arg_isLoop, arg_targetTransform, arg_transform, arg_easingFunction) {
        var _this = _super.call(this) || this;
        _this.currentTime = 0;
        _this.direction = 1;
        _this.isStop = false;
        _this.playerCompoent = arg_moveObject;
        _this.time = arg_time;
        _this.linerPase = 1.0 / arg_time;
        if (arg_targetTransform)
            _this.targetTransform = arg_targetTransform;
        if (arg_transform) {
            _this.transform = arg_transform;
        }
        if (arg_easingFunction) {
            _this.easingFunction = arg_easingFunction;
        }
        else {
            _this.easingFunction = Easing_1.default.EaseInOutCubic;
        }
        if (arg_isLoop) {
            _this.TimeUpdate = _this.TimeUpdate_Loop;
        }
        else {
            _this.TimeUpdate = _this.TimeUpdate_NoLoop;
        }
        return _this;
    }
    PoppingAnimation.prototype.OnSet = function () {
        if (!this.transform) {
            this.transform = this.gameObject.transform;
        }
        if (!this.targetTransform) {
            this.targetTransform = this.gameObject.transform;
        }
        this.offset = this.targetTransform.Position.Sub(this.transform.Position);
        this.scalePase = this.targetTransform.Scale.Sub(this.transform.Scale);
        this.initPosition = this.transform.Position;
        this.initScale = this.transform.Scale;
        this.rotateQuat = this.transform.Rotation.ToQuaternion();
        this.targetRotateQuat = this.targetTransform.Rotation.ToQuaternion();
    };
    PoppingAnimation.prototype.SetTarget = function (arg_time, arg_targetTransform) {
        this.currentTime = 0;
        this.time = arg_time;
        this.targetTransform = arg_targetTransform;
        this.offset = this.targetTransform.Position.Sub(this.transform.Position);
        this.scalePase = this.targetTransform.Scale.Sub(this.transform.Scale);
        this.initPosition = this.transform.LocalPosition;
        this.initScale = this.transform.Scale;
        this.rotateQuat = this.transform.Rotation.ToQuaternion();
        this.targetRotateQuat = this.targetTransform.Rotation.ToQuaternion();
    };
    PoppingAnimation.prototype.TimeUpdate_Loop = function () {
        if (this.currentTime >= this.time) {
            this.currentTime = this.time;
            this.direction = -1;
        }
        else if (this.currentTime <= 0) {
            this.currentTime = 0;
            this.direction = 1;
        }
        this.currentTime += this.direction;
    };
    PoppingAnimation.prototype.TimeUpdate_NoLoop = function () {
        if (this.currentTime > this.time) {
        }
        else if (this.currentTime == this.time) {
            this.playerCompoent.OnMoveEnd();
        }
        this.currentTime += this.direction;
    };
    PoppingAnimation.prototype.IsMove = function () {
        if (this.currentTime > this.time + 1) {
            return false;
        }
        else {
            return true;
        }
    };
    PoppingAnimation.prototype.Stop = function () {
        this.isStop = true;
    };
    PoppingAnimation.prototype.Start = function () {
        this.isStop = false;
    };
    PoppingAnimation.prototype.Update = function () {
        if (this.isStop) {
            return;
        }
        this.TimeUpdate();
        var t = this.easingFunction(this.currentTime / this.time);
        if (t > 1) {
            return;
        }
        this.transform.Position = this.initPosition.Add(this.offset.Multiply(t).AddY(-Easing_1.default.Parabola(t) * 0.8));
        this.transform.Scale = this.initScale.Add(this.scalePase.Multiply(t));
        //this.transform.Rotation= this.transform.Rotation
        this.transform.Rotation = this.rotateQuat.SphereLerp(this.targetRotateQuat, t).ToMatrix4x4();
    };
    return PoppingAnimation;
}(Component_1.default));
exports.default = PoppingAnimation;


/***/ }),

/***/ "./WebGl/Component/SceneChanger.ts":
/*!*****************************************!*\
  !*** ./WebGl/Component/SceneChanger.ts ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Component_1 = __importDefault(__webpack_require__(/*! ./Component */ "./WebGl/Component/Component.ts"));
var SceneChanger = /** @class */ (function (_super) {
    __extends(SceneChanger, _super);
    function SceneChanger(arg_sceneName, arg_waitFrame, arg_sceneChangeValue) {
        var _this = _super.call(this) || this;
        _this.sceneName = arg_sceneName;
        _this.sceneChangeValue = arg_sceneChangeValue;
        _this.waitFrame = arg_waitFrame;
        return _this;
    }
    SceneChanger.prototype.Update = function () {
        this.waitFrame--;
        if (this.waitFrame > 0) {
            return;
        }
        this.gameObject.Manager.Scene.GetSceneManager().ChangeScene(this.sceneName, this.sceneChangeValue);
        this.Dead();
        ;
    };
    return SceneChanger;
}(Component_1.default));
exports.default = SceneChanger;


/***/ }),

/***/ "./WebGl/Component/SucideComponent.ts":
/*!********************************************!*\
  !*** ./WebGl/Component/SucideComponent.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Component_1 = __importDefault(__webpack_require__(/*! ./Component */ "./WebGl/Component/Component.ts"));
var SucideComponent = /** @class */ (function (_super) {
    __extends(SucideComponent, _super);
    function SucideComponent(arg_waitFrame) {
        var _this = _super.call(this) || this;
        _this.waitFrame = arg_waitFrame;
        return _this;
    }
    SucideComponent.prototype.Update = function () {
        this.waitFrame--;
        if (this.waitFrame > 0) {
            return;
        }
        this.gameObject.Dead();
    };
    return SucideComponent;
}(Component_1.default));
exports.default = SucideComponent;


/***/ }),

/***/ "./WebGl/Component/TextDrawComponent.ts":
/*!**********************************************!*\
  !*** ./WebGl/Component/TextDrawComponent.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Component_1 = __importDefault(__webpack_require__(/*! ./Component */ "./WebGl/Component/Component.ts"));
var ModelInfo = /** @class */ (function () {
    function ModelInfo() {
    }
    return ModelInfo;
}());
var TextDrawComponent = /** @class */ (function (_super) {
    __extends(TextDrawComponent, _super);
    function TextDrawComponent(text, fontTexName, shaderName, arg_color, layer, isBillBoard, arg_transform) {
        var _this = _super.call(this) || this;
        _this.info = new ModelInfo();
        _this.transform = null;
        _this.layer = layer;
        _this.info.shaderName = shaderName;
        _this.info.color = arg_color;
        _this.info.fontTextureName = fontTexName;
        _this.text = text;
        if (arg_transform)
            _this.transform = arg_transform;
        _this.info.billBoard = isBillBoard;
        return _this;
    }
    Object.defineProperty(TextDrawComponent.prototype, "Layer", {
        get: function () {
            return this.layer;
        },
        enumerable: false,
        configurable: true
    });
    TextDrawComponent.prototype.OnSet = function () {
        if (!this.transform) {
            this.transform = this.gameObject.transform;
        }
        this.model = this.gameObject.Manager.Scene.GetSceneManager().GetModelCreater().CreateModelFromText(this.info.billBoard, this.info.color, this.text, this.info.fontTextureName, this.info.shaderName, this.transform);
        this.RegistDraw();
    };
    TextDrawComponent.prototype.SetText = function (arg_text) {
        this.text = arg_text;
        this.UnRegistDraw();
        this.model = this.gameObject.Manager.Scene.GetSceneManager().GetModelCreater().CreateModelFromText(this.info.billBoard, this.info.color, this.text, this.info.fontTextureName, this.info.shaderName, this.transform);
        this.RegistDraw();
    };
    TextDrawComponent.prototype.RegistDraw = function () {
        if (!this.modelID)
            this.modelID = this.gameObject.GetRenderer().Regist(this.model, this.layer);
    };
    TextDrawComponent.prototype.UnRegistDraw = function () {
        if (this.modelID) {
            this.gameObject.GetRenderer().UnRegist(this.modelID, this.layer);
            this.modelID = null;
        }
    };
    TextDrawComponent.prototype.OnRemove = function () {
        this.UnRegistDraw();
    };
    return TextDrawComponent;
}(Component_1.default));
exports.default = TextDrawComponent;


/***/ }),

/***/ "./WebGl/Component/TransformAnimation.ts":
/*!***********************************************!*\
  !*** ./WebGl/Component/TransformAnimation.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Easing_1 = __importDefault(__webpack_require__(/*! ../Tool/Easing */ "./WebGl/Tool/Easing.ts"));
var Component_1 = __importDefault(__webpack_require__(/*! ./Component */ "./WebGl/Component/Component.ts"));
var TransformAnimation = /** @class */ (function (_super) {
    __extends(TransformAnimation, _super);
    function TransformAnimation(arg_time, arg_isLoop, arg_targetTransform, arg_transform, arg_easingFunction, arg_isRemain) {
        var _this = _super.call(this) || this;
        _this.currentTime = 0;
        _this.direction = 1;
        _this.time = arg_time;
        _this.linerPase = 1.0 / arg_time;
        _this.targetTransform = arg_targetTransform;
        if (arg_transform) {
            _this.transform = arg_transform;
        }
        if (arg_easingFunction) {
            _this.easingFunction = arg_easingFunction;
        }
        else {
            _this.easingFunction = Easing_1.default.EaseInOutBack;
        }
        if (arg_isLoop) {
            _this.TimeUpdate = _this.TimeUpdate_Loop;
        }
        else {
            if (arg_isRemain) {
                _this.TimeUpdate = _this.TimeUpdate_NoLoop_NoSucide;
            }
            else
                _this.TimeUpdate = _this.TimeUpdate_NoLoop;
        }
        return _this;
    }
    TransformAnimation.prototype.OnSet = function () {
        if (!this.transform) {
            this.transform = this.gameObject.transform;
        }
        this.offset = this.targetTransform.Position.Sub(this.transform.LocalPosition);
        this.scalePase = this.targetTransform.Scale.Sub(this.transform.Scale);
        this.initPosition = this.transform.LocalPosition;
        this.initScale = this.transform.Scale;
        this.rotateQuat = this.transform.Rotation.ToQuaternion();
        this.targetRotateQuat = this.targetTransform.Rotation.ToQuaternion();
    };
    TransformAnimation.prototype.ChangeTarget = function (arg_targetTransform) {
        this.targetTransform = arg_targetTransform;
        this.offset = this.targetTransform.Position.Sub(this.transform.LocalPosition);
        this.scalePase = this.targetTransform.Scale.Sub(this.transform.Scale);
        this.initPosition = this.transform.LocalPosition;
        this.initScale = this.transform.Scale;
        this.currentTime = 0;
    };
    TransformAnimation.prototype.TimeUpdate_Loop = function () {
        if (this.currentTime >= this.time) {
            this.currentTime = this.time;
            this.direction = -1;
        }
        else if (this.currentTime <= 0) {
            this.currentTime = 0;
            this.direction = 1;
        }
        this.currentTime += this.direction;
    };
    TransformAnimation.prototype.TimeUpdate_NoLoop = function () {
        if (this.currentTime >= this.time) {
            this.currentTime = this.time;
            this.Remove();
        }
        this.currentTime += this.direction;
    };
    TransformAnimation.prototype.TimeUpdate_NoLoop_NoSucide = function () {
        if (this.currentTime >= this.time) {
            this.currentTime = this.time;
        }
        this.currentTime += this.direction;
    };
    TransformAnimation.prototype.Update = function () {
        this.TimeUpdate();
        var t = this.currentTime / this.time;
        this.transform.Position = this.initPosition.Add(this.offset.Multiply(t));
        this.transform.Scale = this.initScale.Add(this.scalePase.Multiply(this.easingFunction(t)));
        //this.transform.Rotation= this.transform.Rotation
        //this.transform.Rotation=this.rotateQuat.SphereLerp(this.targetRotateQuat,t).ToMatrix4x4();
    };
    return TransformAnimation;
}(Component_1.default));
exports.default = TransformAnimation;


/***/ }),

/***/ "./WebGl/CrossyLoad_Copy/CoinComponent.ts":
/*!************************************************!*\
  !*** ./WebGl/CrossyLoad_Copy/CoinComponent.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var CollisionComponent_1 = __importDefault(__webpack_require__(/*! ../Component/CollisionComponent */ "./WebGl/Component/CollisionComponent.ts"));
var Component_1 = __importDefault(__webpack_require__(/*! ../Component/Component */ "./WebGl/Component/Component.ts"));
var ModelDrawComponent_1 = __importDefault(__webpack_require__(/*! ../Component/ModelDrawComponent */ "./WebGl/Component/ModelDrawComponent.ts"));
var Vector3_1 = __importDefault(__webpack_require__(/*! ../Math/Vector3 */ "./WebGl/Math/Vector3.ts"));
var GameObjectIDManager_1 = __importDefault(__webpack_require__(/*! ../Parts/GameObjectIDManager */ "./WebGl/Parts/GameObjectIDManager.ts"));
var PrimitiveType;
(function (PrimitiveType) {
    PrimitiveType[PrimitiveType["sphere"] = 0] = "sphere";
    PrimitiveType[PrimitiveType["box_AABB"] = 1] = "box_AABB";
    PrimitiveType[PrimitiveType["box_OBB"] = 2] = "box_OBB";
    PrimitiveType[PrimitiveType["point"] = 3] = "point";
})(PrimitiveType || (PrimitiveType = {}));
var CoinComponent = /** @class */ (function (_super) {
    __extends(CoinComponent, _super);
    function CoinComponent(arg_stage) {
        var _this = _super.call(this) || this;
        _this.isGet = false;
        _this.stage = arg_stage;
        return _this;
    }
    CoinComponent.prototype.OnSet = function () {
        this.drawComponent = new ModelDrawComponent_1.default(true, "sphere", "yellow", "pointLight", 1, false);
        this.gameObject.SetComponent(this.drawComponent);
        this.gameObject.SetComponent(new CollisionComponent_1.default(PrimitiveType.sphere, new Vector3_1.default(0.3, 0.3, 0.3), 0));
    };
    CoinComponent.prototype.Update = function () {
        this.gameObject.transform.RollY_Local_Degrees(2);
    };
    CoinComponent.prototype.OnCollision = function (arg_gameObject) {
        if (arg_gameObject.objectID != GameObjectIDManager_1.default.GetID("player") || this.isGet) {
            return;
        }
        this.stage.GetCoin();
        this.gameObject.Dead();
        this.isGet = true;
    };
    CoinComponent.prototype.ReSet = function () {
        this.drawComponent.RegistDraw();
        this.isGet = false;
    };
    return CoinComponent;
}(Component_1.default));
exports.default = CoinComponent;


/***/ }),

/***/ "./WebGl/CrossyLoad_Copy/CrossyUI.ts":
/*!*******************************************!*\
  !*** ./WebGl/CrossyLoad_Copy/CrossyUI.ts ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Component_1 = __importDefault(__webpack_require__(/*! ../Component/Component */ "./WebGl/Component/Component.ts"));
var ModelDrawComponent_1 = __importDefault(__webpack_require__(/*! ../Component/ModelDrawComponent */ "./WebGl/Component/ModelDrawComponent.ts"));
var TextDrawComponent_1 = __importDefault(__webpack_require__(/*! ../Component/TextDrawComponent */ "./WebGl/Component/TextDrawComponent.ts"));
var TransformAnimation_1 = __importDefault(__webpack_require__(/*! ../Component/TransformAnimation */ "./WebGl/Component/TransformAnimation.ts"));
var Vector3_1 = __importDefault(__webpack_require__(/*! ../Math/Vector3 */ "./WebGl/Math/Vector3.ts"));
var Vector4_1 = __importDefault(__webpack_require__(/*! ../Math/Vector4 */ "./WebGl/Math/Vector4.ts"));
var Easing_1 = __importDefault(__webpack_require__(/*! ../Tool/Easing */ "./WebGl/Tool/Easing.ts"));
var Transform_1 = __importDefault(__webpack_require__(/*! ../Transform */ "./WebGl/Transform.ts"));
var maskLinerFrame = 30;
var maskLinerFrameMax = 60;
var CrossyUI = /** @class */ (function (_super) {
    __extends(CrossyUI, _super);
    function CrossyUI() {
        var _this = _super.call(this) || this;
        _this.maskDir = -1.0;
        _this.maskPer = 0;
        _this.isMask = false;
        return _this;
    }
    CrossyUI.prototype.OnSet = function () {
        var comboBarBaseTransform = new Transform_1.default(new Vector3_1.default(400, 0, -1), new Vector3_1.default(0, 0, 0), new Vector3_1.default(1, 1.0, 1));
        var comboBarTransform = new Transform_1.default(new Vector3_1.default(0, 200, 0), new Vector3_1.default(0, 0, 0), new Vector3_1.default(50, 300, 1));
        comboBarTransform.BaseTransform = comboBarBaseTransform;
        this.feverBarDrawComponent = new ModelDrawComponent_1.default(false, "uvNormalBar", "yellow", "rainbow", 2, false, null, comboBarTransform);
        this.comboBarDrawComponent = new ModelDrawComponent_1.default(false, "uvNormalBar", "yellow", "onlyMaterial", 2, false, null, comboBarTransform);
        this.gameObject.SetComponent(this.comboBarDrawComponent);
        this.gameObject.SetComponent(this.feverBarDrawComponent);
        this.activeBarDrawComponent = this.comboBarDrawComponent;
        var arrivalTrans = new Transform_1.default(new Vector3_1.default(-400, -400, -1), new Vector3_1.default(0, 0, 0), new Vector3_1.default(50, 50, 50));
        this.arrivalText = new TextDrawComponent_1.default("0", "font", "fontShader", new Vector4_1.default(0.9, 0.9, 0.25, 1), 2, false, arrivalTrans);
        this.gameObject.SetComponent(this.arrivalText);
        var retryTrans = new Transform_1.default(new Vector3_1.default(0, 300, -1), new Vector3_1.default(0, 0, 0), new Vector3_1.default(40, 40, 40));
        this.retry = new TextDrawComponent_1.default("Press any Key", "font", "fontShader", new Vector4_1.default(0.1, 0.1, 0.1, 1), 2, false, retryTrans);
        this.retryTransform_Hide = new Transform_1.default(new Vector3_1.default(0, 300, -1), new Vector3_1.default(0, 0, 0), new Vector3_1.default(40, 40, 40));
        this.retryTransform_Show = new Transform_1.default(new Vector3_1.default(0, 200, -1), new Vector3_1.default(0, 0, 0), new Vector3_1.default(40, 40, 40));
        this.retryAnim = new TransformAnimation_1.default(40, false, this.retryTransform_Hide, retryTrans, Easing_1.default.EaseInOutQuint, true);
        this.maskColor = new Vector4_1.default(0.5, 0.5, 1.0, 0.0);
        this.mask = new ModelDrawComponent_1.default(false, "plane_position", "red", "simpleColor", 2, false, null, new Transform_1.default(new Vector3_1.default(0, 0, -0.8), new Vector3_1.default(0, 0, 0), new Vector3_1.default(600, 600, 600)));
        this.gameObject.Manager.AddGameObject("mask", new Transform_1.default(), "mask", [this.mask]);
        this.mask.UnRegistDraw();
        this.mask.model.AddExParam(4, 4, this.maskColor);
        this.gameObject.SetComponent(this.retry);
        this.gameObject.SetComponent(this.retryAnim);
        this.retry.UnRegistDraw();
        this.logo = new ModelDrawComponent_1.default(false, "plane", "logoMaterial", "texShader", 2, false, null, new Transform_1.default(new Vector3_1.default(-1110, 0, -0.5), new Vector3_1.default(0, 0, 180), new Vector3_1.default(600, 600, 600)));
        this.gameObject.SetComponent(this.logo);
        this.logoTransform_Show = new Transform_1.default(new Vector3_1.default(-20, -100, -0.5), new Vector3_1.default(0, 0, 180), new Vector3_1.default(600, 600, 600));
        this.logoTransform_Hide = new Transform_1.default(new Vector3_1.default(1100, -100, -0.5), new Vector3_1.default(0, 0, 180), new Vector3_1.default(600, 600, 600));
    };
    CrossyUI.prototype.Update = function () {
        if (this.isMask) {
            this.maskPer += this.maskDir;
            if (this.maskPer > maskLinerFrameMax) {
                this.maskPer = maskLinerFrameMax;
                this.maskDir = -1;
            }
            if (this.maskPer < 0) {
                this.maskPer = 0;
                this.isMask = false;
                this.mask.UnRegistDraw();
            }
            this.maskColor.data[3] = this.maskPer / maskLinerFrame;
        }
    };
    CrossyUI.prototype.SetCoinNum = function (arg_coin) {
        //this.comboBarDrawComponent.SetText(arg_coin+"");
    };
    CrossyUI.prototype.SetArrival = function (arg_arrival) {
        this.arrivalText.SetText(arg_arrival + "");
    };
    CrossyUI.prototype.SetComboMater = function (arg_persentage) {
        this.activeBarDrawComponent.transform.SetScaleY(arg_persentage * 300);
    };
    CrossyUI.prototype.FeverStart = function () {
        this.activeBarDrawComponent = this.feverBarDrawComponent;
        this.comboBarDrawComponent.UnRegistDraw();
        this.feverBarDrawComponent.RegistDraw();
    };
    CrossyUI.prototype.FeverEnd = function () {
        this.activeBarDrawComponent = this.comboBarDrawComponent;
        this.comboBarDrawComponent.RegistDraw();
        this.feverBarDrawComponent.UnRegistDraw();
    };
    CrossyUI.prototype.ShowRetry = function () {
        this.retryAnim.ChangeTarget(this.retryTransform_Show);
        this.retry.RegistDraw();
    };
    CrossyUI.prototype.HideRetry = function () {
        this.retryAnim.ChangeTarget(this.retryTransform_Hide);
        this.retry.UnRegistDraw();
    };
    CrossyUI.prototype.HideIn = function () {
        var logoAnim = new TransformAnimation_1.default(30, false, this.logoTransform_Show, this.logo.transform);
        this.gameObject.SetComponent(logoAnim);
    };
    CrossyUI.prototype.HideOut = function () {
        var logoAnim = new TransformAnimation_1.default(30, false, this.logoTransform_Hide, this.logo.transform);
        this.gameObject.SetComponent(logoAnim);
    };
    CrossyUI.prototype.MaskIn = function () {
        this.maskDir = 1.0;
        this.isMask = true;
        this.mask.RegistDraw();
        this.logo.UnRegistDraw();
        this.logo.RegistDraw();
    };
    CrossyUI.prototype.Reset = function () {
        this.logo.transform.Position = new Vector3_1.default(-1110, -100, -0.5);
        this.maskColor.data[3] = 0;
    };
    return CrossyUI;
}(Component_1.default));
exports.default = CrossyUI;


/***/ }),

/***/ "./WebGl/CrossyLoad_Copy/DamageObStacle.ts":
/*!*************************************************!*\
  !*** ./WebGl/CrossyLoad_Copy/DamageObStacle.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Component_1 = __importDefault(__webpack_require__(/*! ../Component/Component */ "./WebGl/Component/Component.ts"));
var CollisionComponent_1 = __importDefault(__webpack_require__(/*! ../Component/CollisionComponent */ "./WebGl/Component/CollisionComponent.ts"));
var GameObjectIDManager_1 = __importDefault(__webpack_require__(/*! ../Parts/GameObjectIDManager */ "./WebGl/Parts/GameObjectIDManager.ts"));
var PrimitiveType;
(function (PrimitiveType) {
    PrimitiveType[PrimitiveType["sphere"] = 0] = "sphere";
    PrimitiveType[PrimitiveType["box_AABB"] = 1] = "box_AABB";
    PrimitiveType[PrimitiveType["box_OBB"] = 2] = "box_OBB";
    PrimitiveType[PrimitiveType["point"] = 3] = "point";
})(PrimitiveType || (PrimitiveType = {}));
var DamageObstacleComponent = /** @class */ (function (_super) {
    __extends(DamageObstacleComponent, _super);
    function DamageObstacleComponent(arg_stage, arg_size) {
        var _this = _super.call(this) || this;
        _this.stage = arg_stage;
        _this.size = arg_size;
        return _this;
    }
    DamageObstacleComponent.prototype.OnSet = function () {
        this.gameObject.objectID = GameObjectIDManager_1.default.GetID("damageObstacle");
        this.gameObject.SetComponent(new CollisionComponent_1.default(PrimitiveType.box_AABB, this.size, 0));
    };
    DamageObstacleComponent.prototype.OnRemove = function () {
    };
    DamageObstacleComponent.prototype.Update = function () {
    };
    DamageObstacleComponent.prototype.OnCollision = function (arg_gameObject) {
        if (arg_gameObject.objectID != GameObjectIDManager_1.default.GetID("player")) {
            return;
        }
    };
    return DamageObstacleComponent;
}(Component_1.default));
exports.default = DamageObstacleComponent;


/***/ }),

/***/ "./WebGl/CrossyLoad_Copy/ObstacleComponent.ts":
/*!****************************************************!*\
  !*** ./WebGl/CrossyLoad_Copy/ObstacleComponent.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Component_1 = __importDefault(__webpack_require__(/*! ../Component/Component */ "./WebGl/Component/Component.ts"));
var CollisionComponent_1 = __importDefault(__webpack_require__(/*! ../Component/CollisionComponent */ "./WebGl/Component/CollisionComponent.ts"));
var GameObjectIDManager_1 = __importDefault(__webpack_require__(/*! ../Parts/GameObjectIDManager */ "./WebGl/Parts/GameObjectIDManager.ts"));
var PrimitiveType;
(function (PrimitiveType) {
    PrimitiveType[PrimitiveType["sphere"] = 0] = "sphere";
    PrimitiveType[PrimitiveType["box_AABB"] = 1] = "box_AABB";
    PrimitiveType[PrimitiveType["box_OBB"] = 2] = "box_OBB";
    PrimitiveType[PrimitiveType["point"] = 3] = "point";
})(PrimitiveType || (PrimitiveType = {}));
var ObstacleComponent = /** @class */ (function (_super) {
    __extends(ObstacleComponent, _super);
    function ObstacleComponent(arg_type, arg_size, arg_stage) {
        var _this = _super.call(this) || this;
        _this.type = arg_type;
        _this.size = arg_size;
        _this.stage = arg_stage;
        return _this;
    }
    ObstacleComponent.prototype.OnSet = function () {
        this.gameObject.objectID = GameObjectIDManager_1.default.GetID("obstacle");
        switch (this.type) {
            case PrimitiveType.sphere:
                this.gameObject.SetComponent(new CollisionComponent_1.default(PrimitiveType.sphere, this.size, 0));
                break;
            case PrimitiveType.point:
                break;
            case PrimitiveType.box_AABB:
                this.gameObject.SetComponent(new CollisionComponent_1.default(PrimitiveType.box_AABB, this.size, 0));
                break;
            case PrimitiveType.box_OBB:
                this.gameObject.SetComponent(new CollisionComponent_1.default(PrimitiveType.box_OBB, this.size, 0));
                break;
        }
    };
    ObstacleComponent.prototype.OnRemove = function () {
    };
    ObstacleComponent.prototype.Update = function () {
    };
    ObstacleComponent.prototype.OnCollision = function (arg_gameObject) {
        if (arg_gameObject.objectID != GameObjectIDManager_1.default.GetID("player")) {
            return;
        }
    };
    return ObstacleComponent;
}(Component_1.default));
exports.default = ObstacleComponent;


/***/ }),

/***/ "./WebGl/CrossyLoad_Copy/PlayerComponent.ts":
/*!**************************************************!*\
  !*** ./WebGl/CrossyLoad_Copy/PlayerComponent.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Vector3_1 = __importDefault(__webpack_require__(/*! ../Math/Vector3 */ "./WebGl/Math/Vector3.ts"));
var GameObjectIDManager_1 = __importDefault(__webpack_require__(/*! ../Parts/GameObjectIDManager */ "./WebGl/Parts/GameObjectIDManager.ts"));
var Input_1 = __importDefault(__webpack_require__(/*! ../Tool/Input */ "./WebGl/Tool/Input.ts"));
var Transform_1 = __importDefault(__webpack_require__(/*! ../Transform */ "./WebGl/Transform.ts"));
var Component_1 = __importDefault(__webpack_require__(/*! ../Component/Component */ "./WebGl/Component/Component.ts"));
var ModelDrawComponent_1 = __importDefault(__webpack_require__(/*! ../Component/ModelDrawComponent */ "./WebGl/Component/ModelDrawComponent.ts"));
var TransformAnimation_1 = __importDefault(__webpack_require__(/*! ../Component/TransformAnimation */ "./WebGl/Component/TransformAnimation.ts"));
var PoppingAnimation_1 = __importDefault(__webpack_require__(/*! ../Component/PoppingAnimation */ "./WebGl/Component/PoppingAnimation.ts"));
var Sensor_1 = __importDefault(__webpack_require__(/*! ./Sensor */ "./WebGl/CrossyLoad_Copy/Sensor.ts"));
var Easing_1 = __importDefault(__webpack_require__(/*! ../Tool/Easing */ "./WebGl/Tool/Easing.ts"));
var PlayerComponent = /** @class */ (function (_super) {
    __extends(PlayerComponent, _super);
    function PlayerComponent(arg_movePase, arg_stage) {
        var _this = _super.call(this) || this;
        _this.direction = 1;
        _this.isMove = false;
        _this.keyboardEvent = null;
        _this.canControll = true;
        _this.isInvisible = false;
        _this.isfailed = false;
        _this.movePase = arg_movePase;
        _this.isPush = false;
        _this.stage = arg_stage;
        _this.ary_sensor = new Array();
        return _this;
    }
    PlayerComponent.prototype.OnSet = function () {
        var _this = this;
        this.startY = this.gameObject.transform.Position.y;
        this.deadSe = this.gameObject.Manager.Scene.GetSceneManager().GetResourceContainer().GetSound("kill");
        this.upSe = this.gameObject.Manager.Scene.GetSceneManager().GetResourceContainer().GetSound("up");
        this.poppingComponent = new PoppingAnimation_1.default(this, this.movePase, false);
        this.modelTransform = new Transform_1.default(new Vector3_1.default(0, 0, 0), new Vector3_1.default(0, 0, 0), new Vector3_1.default(0.2, 0.2, 0.15));
        this.modelTransform.BaseTransform = this.gameObject.transform;
        this.gameObject.SetComponent(this.poppingComponent);
        this.gameObject.SetComponent(new ModelDrawComponent_1.default(true, "cube", "caloryMaterial", "texShader_light", 1, false, "maguro", this.modelTransform));
        var effectTransform = new Transform_1.default(new Vector3_1.default(0, 0, 0), new Vector3_1.default(0, 0, 0), new Vector3_1.default(0, 0, 0));
        effectTransform.BaseTransform = this.gameObject.transform;
        this.invisibleEffect = new ModelDrawComponent_1.default(false, "effectSphere", "yellow", "rainbowAlpha", 1, false, null, effectTransform);
        this.gameObject.SetComponent(this.invisibleEffect);
        this.invisibleEffect.UnRegistDraw();
        this.minimumTransform = new Transform_1.default(new Vector3_1.default(0, 0.1, 0), new Vector3_1.default(0, 0, 0), new Vector3_1.default(0.3, 0.16, 0.18));
        this.maximumTransform = new Transform_1.default(new Vector3_1.default(0, -0.1, 0), new Vector3_1.default(0, 0, 0), new Vector3_1.default(0.2, 0.2, 0.15));
        this.scaleComponent = new TransformAnimation_1.default(30, true, this.minimumTransform, this.modelTransform, Easing_1.default.EaseInOutCirc);
        this.gameObject.SetComponent(this.scaleComponent);
        this.ary_targets = new Array(4);
        this.ary_targets[0] = new Transform_1.default(this.gameObject.transform.Position.Add_b(new Vector3_1.default(0, 0, -1)));
        this.ary_targets[1] = new Transform_1.default(this.gameObject.transform.Position.Add_b(new Vector3_1.default(0, 0, 1)), new Vector3_1.default(0, 180, 0));
        this.ary_targets[2] = new Transform_1.default(this.gameObject.transform.Position.Add_b(new Vector3_1.default(1, 0, 0)), new Vector3_1.default(0, -90, 0));
        this.ary_targets[3] = new Transform_1.default(this.gameObject.transform.Position.Add_b(new Vector3_1.default(-1, 0, 0)), new Vector3_1.default(0, 90, 0));
        this.ary_targets.forEach(function (target) { return target.BaseTransform = _this.stage.gameObject.transform; });
        this.ary_sensor[0] = new Sensor_1.default(this.gameObject, new Vector3_1.default(0, 0, -1));
        this.ary_sensor[1] = new Sensor_1.default(this.gameObject, new Vector3_1.default(0, 0, 1));
        this.ary_sensor[2] = new Sensor_1.default(this.gameObject, new Vector3_1.default(1, 0, 0));
        this.ary_sensor[3] = new Sensor_1.default(this.gameObject, new Vector3_1.default(-1, 0, 0));
        this.ary_sensor.forEach(function (sensor) { var obj = _this.gameObject.Manager.AddGameObject("sensor", new Transform_1.default(), null, [sensor]); obj.transform.BaseTransform = _this.stage.gameObject.transform; });
        this.gameObject.ComplexHit = true;
    };
    PlayerComponent.prototype.GetComponentName = function () {
        return "PlayerComponent";
    };
    PlayerComponent.prototype.Update = function () {
        if (this.isInvisible) {
            this.invisibleEffect.transform.RollX_Local_Degrees(2);
            this.invisibleEffect.transform.RollY_Local_Degrees(2);
        }
        if (!this.canControll) {
            return;
        }
        if (this.isPush) {
        }
        if (this.keyboardEvent && !this.poppingComponent.IsMove()) {
            var target;
            switch (this.keyboardEvent.key) {
                case "w":
                    target = this.ary_targets[0];
                    if (!this.ary_sensor[0].CanMove()) {
                        target.Position = this.gameObject.transform.LocalPosition;
                    }
                    else {
                        target.Position = this.ary_sensor[0].GetPosition();
                        this.stage.GoFront(this.gameObject.transform.LocalPosition.z);
                    }
                    this.poppingComponent.SetTarget(this.movePase, target);
                    break;
                case "s":
                    if (this.gameObject.transform.Position.z > 4) {
                        break;
                    }
                    target = this.ary_targets[1];
                    if (!this.ary_sensor[1].CanMove()) {
                        target.Position = this.gameObject.transform.LocalPosition;
                    }
                    else
                        target.Position = this.ary_sensor[1].GetPosition();
                    this.poppingComponent.SetTarget(this.movePase, target);
                    break;
                case "a":
                    if (this.gameObject.transform.Position.x <= -4) {
                        break;
                    }
                    target = this.ary_targets[3];
                    if (!this.ary_sensor[3].CanMove()) {
                        target.Position = this.gameObject.transform.LocalPosition;
                    }
                    else
                        target.Position = this.ary_sensor[3].GetPosition();
                    this.poppingComponent.SetTarget(this.movePase, target);
                    break;
                case "d":
                    if (this.gameObject.transform.Position.x >= 4) {
                        break;
                    }
                    target = this.ary_targets[2];
                    if (!this.ary_sensor[2].CanMove()) {
                        target.Position = this.gameObject.transform.LocalPosition;
                    }
                    else
                        target.Position = this.ary_sensor[2].GetPosition();
                    this.poppingComponent.SetTarget(this.movePase, target);
                    break;
            }
            this.upSe.Play_new();
            this.keyboardEvent = null;
        }
    };
    PlayerComponent.prototype.FeverStart = function () {
        this.isInvisible = true;
        this.gameObject.SetComponent(new TransformAnimation_1.default(40, false, new Transform_1.default(new Vector3_1.default(0, 0, 0), new Vector3_1.default(0, 0, 0), new Vector3_1.default(1, 1, 1)), this.invisibleEffect.transform));
        this.invisibleEffect.UnRegistDraw();
        this.invisibleEffect.RegistDraw();
    };
    PlayerComponent.prototype.FeverEnd = function () {
        this.isInvisible = false;
        this.gameObject.SetComponent(new TransformAnimation_1.default(30, false, new Transform_1.default(new Vector3_1.default(0, 0, 0), new Vector3_1.default(0, 0, 0), new Vector3_1.default(0, 0, 0)), this.invisibleEffect.transform));
    };
    Object.defineProperty(PlayerComponent.prototype, "IsFever", {
        get: function () {
            return this.isInvisible;
        },
        enumerable: false,
        configurable: true
    });
    PlayerComponent.prototype.OnMoveEnd = function () {
        var _this = this;
        this.ary_sensor.forEach(function (sensor) { return sensor.SetPosition(_this.gameObject.transform.LocalPosition); });
    };
    PlayerComponent.prototype.SetCanControll = function (arg_canControll) {
        this.canControll = arg_canControll;
    };
    PlayerComponent.prototype.OnKeyDown = function (e) {
        if (this.isfailed) {
            return;
        }
        if (this.keyboardEvent != null) {
            return;
        }
        if (this.isPush) {
            return;
        }
        if (this.scaleComponent) {
            this.scaleComponent.Remove();
        }
        this.scaleComponent = new TransformAnimation_1.default(5, false, this.minimumTransform, this.modelTransform);
        this.gameObject.SetComponent(this.scaleComponent);
        this.isPush = true;
        this.keyboardEvent = e;
    };
    PlayerComponent.prototype.OnKeyUp = function (e) {
        if (this.isfailed) {
            return;
        }
        if (!this.canControll) {
            return;
        }
        if (this.keyboardEvent != null) {
            return;
        }
        if (this.scaleComponent) {
            this.scaleComponent.Remove();
        }
        this.scaleComponent = new TransformAnimation_1.default(10, false, this.maximumTransform, this.modelTransform);
        this.gameObject.SetComponent(this.scaleComponent);
        this.isPush = false;
    };
    PlayerComponent.prototype.ToStart = function () {
        Input_1.default.AddKeyUpEvent(this, "playerEvent", false);
        Input_1.default.AddKeyDownEvent(this, "playerEvent", false);
        this.isPush = false;
    };
    PlayerComponent.prototype.Reset = function () {
        Input_1.default.RemoveKeyUpEvent("playerEvent");
        Input_1.default.RemoveKeyDownEvent("playerEvent");
        this.gameObject.transform.Position = new Vector3_1.default(0, -0.5, 1);
        this.gameObject.transform.BaseTransform = this.stage.gameObject.transform;
        this.OnMoveEnd();
        var target = this.ary_targets[0];
        target.Position = new Vector3_1.default(0, -0.5, 1);
        target.BaseTransform = this.stage.gameObject.transform;
        this.modelTransform.Scale = new Vector3_1.default(0.2, 0.2, 0.15);
        this.poppingComponent.Start();
        this.poppingComponent.SetTarget(this.movePase, target);
        if (this.scaleComponent) {
            this.scaleComponent.Remove();
        }
        this.scaleComponent = new TransformAnimation_1.default(30, true, this.minimumTransform, this.modelTransform, Easing_1.default.EaseInOutCirc);
        this.gameObject.SetComponent(this.scaleComponent);
        this.isfailed = false;
        //this.invisibleEffect.UnRegistDraw();
    };
    PlayerComponent.prototype.DeadAnimation_Press = function (arg_gameObject) {
        if (this.scaleComponent) {
            this.scaleComponent.Remove();
        }
        var petanko = new Transform_1.default(new Vector3_1.default(0, 0.2, 0), new Vector3_1.default(0, 0, 0), new Vector3_1.default(0.4, 0.05, 0.22));
        this.scaleComponent = new TransformAnimation_1.default(10, false, petanko, this.modelTransform, Easing_1.default.EaseInOutCirc);
        this.gameObject.SetComponent(this.scaleComponent);
        this.poppingComponent.Stop();
    };
    PlayerComponent.prototype.DeadAnimation_Strike = function (arg_gameObject) {
        this.gameObject.transform.SetPositionX(this.gameObject.transform.Position.Sub(arg_gameObject.transform.Position).x);
        this.gameObject.transform.SetPositionY(this.gameObject.transform.LocalPosition.y);
        this.gameObject.transform.SetPositionZ(0.55);
        this.gameObject.transform.BaseTransform = arg_gameObject.transform;
        if (this.scaleComponent) {
            this.scaleComponent.Remove();
        }
        var petanko = new Transform_1.default(new Vector3_1.default(0, 0, 0), new Vector3_1.default(0, 0, 0), new Vector3_1.default(0.22, 0.22, 0.05));
        this.scaleComponent = new TransformAnimation_1.default(10, false, petanko, this.modelTransform);
        this.gameObject.SetComponent(this.scaleComponent);
        this.poppingComponent.Stop();
    };
    PlayerComponent.prototype.OnCollisionEnter = function (arg_gameObject) {
        if (arg_gameObject.objectID == GameObjectIDManager_1.default.GetID("damageObstacle") && !this.isInvisible && !this.isfailed) {
            if (arg_gameObject.transform.Position.z < this.gameObject.transform.Position.z) {
                this.DeadAnimation_Press(arg_gameObject);
                this.deadSe.Play();
                this.isfailed = true;
            }
            else {
                this.DeadAnimation_Press(arg_gameObject);
                this.deadSe.Play();
                this.isfailed = true;
            }
            this.stage.Failed();
            return;
        }
    };
    return PlayerComponent;
}(Component_1.default));
exports.default = PlayerComponent;


/***/ }),

/***/ "./WebGl/CrossyLoad_Copy/RoundTrip.ts":
/*!********************************************!*\
  !*** ./WebGl/CrossyLoad_Copy/RoundTrip.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Component_1 = __importDefault(__webpack_require__(/*! ../Component/Component */ "./WebGl/Component/Component.ts"));
var RoundTrip = /** @class */ (function (_super) {
    __extends(RoundTrip, _super);
    function RoundTrip(arg_start, arg_end, arg_time, arg_currentTime, arg_isLoop) {
        var _this = _super.call(this) || this;
        _this.currentTime = 0;
        _this.start = arg_start;
        _this.end = arg_end.Sub(_this.start);
        _this.time = arg_time;
        _this.currentTime = arg_currentTime;
        if (arg_isLoop) {
            _this.TimeUpdate = _this.TimeUpdate_Loop;
        }
        else {
            _this.TimeUpdate = _this.TimeUpdate_NoLoop;
        }
        return _this;
    }
    RoundTrip.prototype.TimeUpdate_NoLoop = function () {
        this.currentTime++;
        if (this.currentTime > this.time) {
            this.currentTime = 0;
            this.Dead();
        }
    };
    RoundTrip.prototype.TimeUpdate_Loop = function () {
        this.currentTime++;
        if (this.currentTime > this.time) {
            this.currentTime = 0;
        }
    };
    RoundTrip.prototype.Update = function () {
        this.TimeUpdate();
        this.gameObject.transform.Position = this.start.Add(this.end.Multiply(this.currentTime / this.time));
    };
    return RoundTrip;
}(Component_1.default));
exports.default = RoundTrip;


/***/ }),

/***/ "./WebGl/CrossyLoad_Copy/RoundTrip_Wait.ts":
/*!*************************************************!*\
  !*** ./WebGl/CrossyLoad_Copy/RoundTrip_Wait.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Component_1 = __importDefault(__webpack_require__(/*! ../Component/Component */ "./WebGl/Component/Component.ts"));
var RoundTrip_Wait = /** @class */ (function (_super) {
    __extends(RoundTrip_Wait, _super);
    function RoundTrip_Wait(arg_start, arg_end, arg_time, arg_currentTime, arg_waitTime, arg_waitCurrentTime, arg_isLoop) {
        var _this = _super.call(this) || this;
        _this.start = arg_start;
        _this.end = arg_end.Sub(_this.start);
        _this.time = arg_time;
        _this.currentTime = arg_currentTime;
        _this.waitTime = arg_waitTime;
        _this.currentWaitTime = arg_waitCurrentTime;
        if (_this.currentWaitTime) {
            _this.currentTime = _this.time + 1;
        }
        if (arg_isLoop) {
            _this.TimeUpdate = _this.TimeUpdate_Loop;
        }
        else {
            _this.TimeUpdate = _this.TimeUpdate_NoLoop;
        }
        return _this;
    }
    RoundTrip_Wait.prototype.TimeUpdate_NoLoop = function () {
        this.currentTime++;
        if (this.currentTime > this.time) {
            this.currentTime = 0;
            this.Dead();
        }
    };
    RoundTrip_Wait.prototype.TimeUpdate_Loop = function () {
        if (this.currentWaitTime <= 0) {
            this.currentTime++;
        }
        if (this.currentTime > this.time) {
            this.currentWaitTime++;
            if (this.currentWaitTime > this.waitTime) {
                this.currentTime = 0;
                this.currentWaitTime = 0;
            }
        }
    };
    RoundTrip_Wait.prototype.Update = function () {
        this.TimeUpdate();
        this.gameObject.transform.Position = this.start.Add(this.end.Multiply(this.currentTime / this.time));
    };
    return RoundTrip_Wait;
}(Component_1.default));
exports.default = RoundTrip_Wait;


/***/ }),

/***/ "./WebGl/CrossyLoad_Copy/Sensor.ts":
/*!*****************************************!*\
  !*** ./WebGl/CrossyLoad_Copy/Sensor.ts ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var CollisionComponent_1 = __importDefault(__webpack_require__(/*! ../Component/CollisionComponent */ "./WebGl/Component/CollisionComponent.ts"));
var Component_1 = __importDefault(__webpack_require__(/*! ../Component/Component */ "./WebGl/Component/Component.ts"));
var Vector3_1 = __importDefault(__webpack_require__(/*! ../Math/Vector3 */ "./WebGl/Math/Vector3.ts"));
var GameObjectIDManager_1 = __importDefault(__webpack_require__(/*! ../Parts/GameObjectIDManager */ "./WebGl/Parts/GameObjectIDManager.ts"));
var PrimitiveType;
(function (PrimitiveType) {
    PrimitiveType[PrimitiveType["sphere"] = 0] = "sphere";
    PrimitiveType[PrimitiveType["box_AABB"] = 1] = "box_AABB";
    PrimitiveType[PrimitiveType["box_OBB"] = 2] = "box_OBB";
    PrimitiveType[PrimitiveType["point"] = 3] = "point";
})(PrimitiveType || (PrimitiveType = {}));
var Sensor = /** @class */ (function (_super) {
    __extends(Sensor, _super);
    function Sensor(arg_parent, arg_offSet) {
        var _this = _super.call(this) || this;
        _this.hitNum = 0;
        _this.parentObject = arg_parent;
        _this.offSet = arg_offSet;
        return _this;
    }
    Sensor.prototype.OnSet = function () {
        this.gameObject.transform.Position = this.parentObject.transform.Position.Add_b(this.offSet);
        this.gameObject.transform.Scale = new Vector3_1.default(0.5, 0.5, 0.5);
        //this.gameObject.SetComponent(new ModelDrawComponent(true, "nonTexcube","red","pointLight",1,false));
        this.gameObject.ComplexHit = true;
        this.gameObject.SetComponent(new CollisionComponent_1.default(PrimitiveType.box_AABB, new Vector3_1.default(1.0, 1.0, 1.0), 0));
    };
    Sensor.prototype.SetPosition = function (arg_position) {
        this.gameObject.transform.Position = arg_position.Add(this.offSet);
    };
    Sensor.prototype.GetPosition = function () {
        return this.gameObject.transform.LocalPosition;
    };
    Sensor.prototype.CanMove = function () {
        return !this.hitNum;
    };
    Sensor.prototype.OnCollisionEnter = function (arg_gameObject) {
        if (arg_gameObject.objectID != GameObjectIDManager_1.default.GetID("obstacle")) {
            return;
        }
        this.hitNum += 1;
    };
    Sensor.prototype.OnCollisionRelease = function (arg_gameObject) {
        if (arg_gameObject.objectID != GameObjectIDManager_1.default.GetID("obstacle")) {
            return;
        }
        this.hitNum -= 1;
    };
    return Sensor;
}(Component_1.default));
exports.default = Sensor;


/***/ }),

/***/ "./WebGl/CrossyLoad_Copy/SignalComponent.ts":
/*!**************************************************!*\
  !*** ./WebGl/CrossyLoad_Copy/SignalComponent.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Component_1 = __importDefault(__webpack_require__(/*! ../Component/Component */ "./WebGl/Component/Component.ts"));
var ModelDrawComponent_1 = __importDefault(__webpack_require__(/*! ../Component/ModelDrawComponent */ "./WebGl/Component/ModelDrawComponent.ts"));
var TransformAnimation_1 = __importDefault(__webpack_require__(/*! ../Component/TransformAnimation */ "./WebGl/Component/TransformAnimation.ts"));
var Vector3_1 = __importDefault(__webpack_require__(/*! ../Math/Vector3 */ "./WebGl/Math/Vector3.ts"));
var RandomHelper_1 = __importDefault(__webpack_require__(/*! ../Tool/RandomHelper */ "./WebGl/Tool/RandomHelper.ts"));
var Transform_1 = __importDefault(__webpack_require__(/*! ../Transform */ "./WebGl/Transform.ts"));
var SignalComponent = /** @class */ (function (_super) {
    __extends(SignalComponent, _super);
    function SignalComponent(arg_time, arg_currentTime, arg_alertTiming, arg_alertTime) {
        var _this = _super.call(this) || this;
        _this.currentTime = 0;
        _this.isOn = false;
        _this.time = arg_time;
        _this.currentTime = arg_currentTime;
        _this.alertTime = arg_alertTime;
        _this.alertTiming = arg_alertTiming;
        return _this;
    }
    SignalComponent.prototype.OnSet = function () {
        var poleTransform = new Transform_1.default(new Vector3_1.default(-0.5, -1, 0.4), new Vector3_1.default(0, 0, 0), new Vector3_1.default(0.125, 2, 0.125));
        poleTransform.BaseTransform = this.gameObject.transform;
        var crownFishY = RandomHelper_1.default.GetRandomInt(2, -2) / 4.0;
        this.fishBaseTransform = new Transform_1.default(new Vector3_1.default(-0.5, -2 + crownFishY, 0.4), new Vector3_1.default(0, 0, 0), new Vector3_1.default(1.0, 1.0, 1.0));
        this.crownFishTransform = new Transform_1.default(new Vector3_1.default(0, 0, 0.5), new Vector3_1.default(0, 0, 0), new Vector3_1.default(0.0025, 0.0025, 0.0025));
        this.fishBaseTransform.BaseTransform = this.gameObject.transform;
        this.crownFishTransform.BaseTransform = this.fishBaseTransform;
        this.gameObject.SetComponent(new ModelDrawComponent_1.default(true, "nonTexcube", "blue", "pointLight", 1, false, null, poleTransform));
        this.gameObject.SetComponent(new ModelDrawComponent_1.default(true, "nonTexcube", "red", "onlyMaterial", 1, false, "clownfish", this.crownFishTransform));
        this.gameObject.SetComponent(new TransformAnimation_1.default(RandomHelper_1.default.GetRandomInt(4, 8) * 20, true, new Transform_1.default(new Vector3_1.default(0, 0.5, 0.5), new Vector3_1.default(0, 0, 0), new Vector3_1.default(0.0025, 0.0025, 0.0025)), this.crownFishTransform));
    };
    SignalComponent.prototype.SignalOn = function () {
        this.fishBaseTransform.RollY_Local_Degrees(6);
        this.isOn = true;
    };
    SignalComponent.prototype.SignalOff = function () {
        this.isOn = false;
    };
    SignalComponent.prototype.Update = function () {
        this.currentTime++;
        if (this.currentTime > this.time) {
            this.currentTime = 0;
        }
        if (this.currentTime > this.alertTiming + this.alertTime) {
            this.SignalOff();
        }
        else if (this.currentTime > this.alertTiming) {
            this.SignalOn();
        }
    };
    return SignalComponent;
}(Component_1.default));
exports.default = SignalComponent;


/***/ }),

/***/ "./WebGl/CrossyLoad_Copy/Stage.ts":
/*!****************************************!*\
  !*** ./WebGl/CrossyLoad_Copy/Stage.ts ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var CameraChaser_1 = __importDefault(__webpack_require__(/*! ../Component/CameraChaser */ "./WebGl/Component/CameraChaser.ts"));
var CollisionComponent_1 = __importDefault(__webpack_require__(/*! ../Component/CollisionComponent */ "./WebGl/Component/CollisionComponent.ts"));
var Component_1 = __importDefault(__webpack_require__(/*! ../Component/Component */ "./WebGl/Component/Component.ts"));
var Vector3_1 = __importDefault(__webpack_require__(/*! ../Math/Vector3 */ "./WebGl/Math/Vector3.ts"));
var GameObjectIDManager_1 = __importDefault(__webpack_require__(/*! ../Parts/GameObjectIDManager */ "./WebGl/Parts/GameObjectIDManager.ts"));
var Input_1 = __importDefault(__webpack_require__(/*! ../Tool/Input */ "./WebGl/Tool/Input.ts"));
var RandomHelper_1 = __importDefault(__webpack_require__(/*! ../Tool/RandomHelper */ "./WebGl/Tool/RandomHelper.ts"));
var Transform_1 = __importDefault(__webpack_require__(/*! ../Transform */ "./WebGl/Transform.ts"));
var CrossyUI_1 = __importDefault(__webpack_require__(/*! ./CrossyUI */ "./WebGl/CrossyLoad_Copy/CrossyUI.ts"));
var PlayerComponent_1 = __importDefault(__webpack_require__(/*! ./PlayerComponent */ "./WebGl/CrossyLoad_Copy/PlayerComponent.ts"));
var StageParts_Road_1 = __importDefault(__webpack_require__(/*! ./StageParts_Road */ "./WebGl/CrossyLoad_Copy/StageParts_Road.ts"));
var StageParts_Safe_1 = __importDefault(__webpack_require__(/*! ./StageParts_Safe */ "./WebGl/CrossyLoad_Copy/StageParts_Safe.ts"));
var StageParts_Rail_1 = __importDefault(__webpack_require__(/*! ./StageParts_Rail */ "./WebGl/CrossyLoad_Copy/StageParts_Rail.ts"));
var PrimitiveType;
(function (PrimitiveType) {
    PrimitiveType[PrimitiveType["sphere"] = 0] = "sphere";
    PrimitiveType[PrimitiveType["box_AABB"] = 1] = "box_AABB";
    PrimitiveType[PrimitiveType["box_OBB"] = 2] = "box_OBB";
    PrimitiveType[PrimitiveType["point"] = 3] = "point";
})(PrimitiveType || (PrimitiveType = {}));
var stageRange = [[1, 1, 2, 2, 2, 3], [1, 1, 1, 2, 2, 2], [1, 1, 2, 3, 3, 4]];
var stageArrayLength = 512;
var ary_cars = ["crab", "turtle", "turtle", "utubo"];
var ary_carSizes = [new Vector3_1.default(1, 1, 1), new Vector3_1.default(1, 1, 1), new Vector3_1.default(1, 1, 1), new Vector3_1.default(5, 1, 1)];
var ary_carRotate = [new Vector3_1.default(0, 90, 0), new Vector3_1.default(0, 0, 0), new Vector3_1.default(0, 0, 0), new Vector3_1.default(0, 180, 0)];
var Stage = /** @class */ (function (_super) {
    __extends(Stage, _super);
    function Stage(arg_scene) {
        var _this = _super.call(this) || this;
        _this.coin = 0;
        _this.arrival = 0;
        _this.fadeCount = -1;
        _this.startWait = 30;
        _this.stageStock = 2;
        _this.feverGage = 0;
        _this.gageMinLine = 0.0;
        _this.gageDownPase = 0.2;
        _this.gageUpPase = 10;
        _this.playScene = arg_scene;
        _this.startPos = new Vector3_1.default(0, -0.5, 1);
        _this.coinse = _this.playScene.GetSceneManager().GetResourceContainer().GetSound("title");
        _this.ary_stagePrts = new Array();
        _this.stageArray = new Int16Array(stageArrayLength);
        _this.StageArrayCreate();
        return _this;
    }
    Stage.prototype.StageArrayCreate = function () {
        for (var i = 0; i < stageArrayLength;) {
            var stage = RandomHelper_1.default.GetRandomInt(0, 2);
            var range = stageRange[stage][RandomHelper_1.default.GetRandomInt(1, 5)];
            for (var j = 0; j < range; j++, i++) {
                this.stageArray[i] = stage;
            }
        }
    };
    Stage.prototype.OnSet = function () {
        this.playerComponent = new PlayerComponent_1.default(15, this);
        this.player = this.playScene.GetGameManager().AddGameObject("player", new Transform_1.default(this.startPos.Clone(), new Vector3_1.default(0, 0, 0), new Vector3_1.default(1, 1, 1)), "player", [this.playerComponent]);
        this.player.SetComponent(new CollisionComponent_1.default(PrimitiveType.box_AABB, new Vector3_1.default(1.0, 1.0, 1.0), 0));
        this.player.transform.BaseTransform = this.gameObject.transform;
        this.ui = new CrossyUI_1.default();
        this.playScene.GetGameManager().AddGameObject("ui", new Transform_1.default(), "ui", [this.ui]);
        var camera = this.playScene.GetGameManager().AddGameObject("cameraman", this.playScene.GetCamera("main").transform);
        camera.SetComponent(new CameraChaser_1.default(0.02, this.player.transform));
        camera.transform.BaseTransform = this.gameObject.transform;
        this.Create();
        this.ui.HideIn();
    };
    Stage.prototype.OnRemove = function () {
        this.playScene = null;
    };
    Stage.prototype.GetRing = function () {
    };
    Stage.prototype.GetCoin = function () {
        this.coinse.Play_new();
        this.coin++;
        this.gageMinLine += this.gageUpPase;
        this.GageUp();
        this.ui.SetCoinNum(this.coin);
    };
    Stage.prototype.GageUp = function () {
        if (this.feverGage < 100 && !this.playerComponent.IsFever) {
            this.feverGage += this.gageUpPase;
        }
        this.gageDownPase = 0.2;
        if (this.feverGage >= 100) {
            this.ui.FeverStart();
            this.playerComponent.FeverStart();
            this.gageMinLine = 0.0;
        }
    };
    Stage.prototype.GoFront = function (arg_z) {
        arg_z = Math.floor(-arg_z) + 2;
        if (arg_z == 1) {
            this.ui.HideOut();
        }
        if (this.arrival < arg_z) {
            this.arrival = arg_z;
            this.GageUp();
            this.gameObject.transform.TranslateZ(1.0);
            this.ui.SetArrival(this.arrival);
            if (this.arrival > this.stageStock) {
                this.StageAdd(this.arrival + 8);
                this.StageDestroy();
            }
        }
    };
    Stage.prototype.Create = function () {
        this.CreateSafeZone(3);
        for (var i = 0; i < 11; i++) {
            this.StageAdd(i);
        }
    };
    Stage.prototype.Destroy = function () {
        this.gameObject.Manager.GetGameObjects(GameObjectIDManager_1.default.GetID("coin")).forEach(function (coin) { return coin.Dead(); });
        this.ary_stagePrts.forEach(function (parts) { return parts.Destroy(); });
        this.ary_stagePrts.length = 0;
    };
    Stage.prototype.StageAdd = function (arg_addpos) {
        var addStageTransform = new Transform_1.default(new Vector3_1.default(0, 0, -(arg_addpos)));
        addStageTransform.BaseTransform = this.gameObject.transform;
        var stageNum = this.stageArray[arg_addpos % stageArrayLength];
        var baseMaterialNameEx = "";
        if (arg_addpos % 2 != 0) {
            baseMaterialNameEx = "_d";
        }
        switch (stageNum) {
            case 0:
                var safe = new StageParts_Safe_1.default(this, "safe" + baseMaterialNameEx, RandomHelper_1.default.GetRandomInt(2, 3));
                this.ary_stagePrts.push(safe);
                this.playScene.GetGameManager().AddGameObject("safeArea", addStageTransform, "safeArea", [safe]);
                break;
            case 1:
                var carNum = RandomHelper_1.default.GetRandomInt(0, 3);
                var road = new StageParts_Road_1.default(this, "road" + baseMaterialNameEx, ary_cars[carNum], ary_carSizes[carNum].Clone(), ary_carRotate[carNum], RandomHelper_1.default.GetRandomInt(1, 2));
                this.ary_stagePrts.push(road);
                this.playScene.GetGameManager().AddGameObject("road", addStageTransform, "road", [road]);
                break;
            case 2:
                var rail = new StageParts_Rail_1.default(this, "rail" + baseMaterialNameEx, "fishes", new Vector3_1.default(1, 1, 1));
                this.ary_stagePrts.push(rail);
                this.playScene.GetGameManager().AddGameObject("rail", addStageTransform, "rail", [rail]);
                break;
        }
    };
    Stage.prototype.CreateSafeZone = function (arg_safeCount) {
        for (var i = 0; i < arg_safeCount; i++) {
            var addStageTransform = new Transform_1.default(new Vector3_1.default(0, 0, arg_safeCount - i));
            addStageTransform.BaseTransform = this.gameObject.transform;
            var baseMaterialNameEx = "";
            if ((i + 1) % 2 != 0) {
                baseMaterialNameEx = "_d";
            }
            var carCount = arg_safeCount - i == this.startPos.z;
            var safe = new StageParts_Safe_1.default(this, "safe" + baseMaterialNameEx, RandomHelper_1.default.GetRandomInt(0, arg_safeCount - i), carCount);
            this.ary_stagePrts.push(safe);
            this.playScene.GetGameManager().AddGameObject("safeArea", addStageTransform, "safeArea", [safe]);
        }
    };
    Stage.prototype.StageDestroy = function () {
        this.ary_stagePrts[0].Destroy();
        this.ary_stagePrts.splice(0, 1);
    };
    Stage.prototype.Update = function () {
        //this.gameObject.transform.TranslateZ(0.01);
        this.ui.SetComboMater(this.feverGage / 100);
        this.feverGage -= this.gageDownPase;
        if (this.feverGage < this.gageMinLine) {
            this.feverGage = this.gageMinLine;
            this.gageDownPase = 0.0;
            this.playerComponent.FeverEnd();
            this.ui.FeverEnd();
        }
        if (this.fadeCount == 0) {
            this.Reset();
            this.fadeCount = -1;
            this.startWait = 30;
        }
        else if (this.fadeCount > 0) {
            this.fadeCount--;
        }
        if (this.startWait <= 0) {
            this.playerComponent.SetCanControll(true);
        }
        else if (this.fadeCount > 0) {
            this.startWait--;
        }
    };
    Stage.prototype.Failed = function () {
        if (this.fadeCount > 0) {
            return;
        }
        this.ui.ShowRetry();
        Input_1.default.AddKeyDownEvent(this, "stage_retry", true);
        this.playerComponent.SetCanControll(false);
        this.startWait = 30;
    };
    Stage.prototype.ToStart = function () {
        this.playerComponent.ToStart();
    };
    Stage.prototype.Reset = function () {
        this.StageArrayCreate();
        this.gameObject.transform.SetPositionZ(0);
        this.playerComponent.Reset();
        this.player.Update();
        this.coin = 0;
        this.arrival = 0;
        this.Destroy();
        this.Create();
        this.ui.SetCoinNum(this.coin);
        this.ui.SetArrival(this.arrival);
        this.playScene.GetCamera("main").transform.Position = new Vector3_1.default(1, -6, 4);
        this.feverGage = 0;
        this.gageDownPase = 0.2;
        this.gageUpPase = 10;
        this.gageMinLine = 0.0;
    };
    Stage.prototype.OnKeyDown = function (e) {
        if (this.fadeCount > 0) {
            return;
        }
        Input_1.default.RemoveKeyDownEvent("stage_retry");
        this.ui.HideRetry();
        this.ui.Reset();
        this.ui.HideIn();
        this.ui.MaskIn();
        this.fadeCount = 60;
    };
    return Stage;
}(Component_1.default));
exports.default = Stage;


/***/ }),

/***/ "./WebGl/CrossyLoad_Copy/StageParts.ts":
/*!*********************************************!*\
  !*** ./WebGl/CrossyLoad_Copy/StageParts.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Component_1 = __importDefault(__webpack_require__(/*! ../Component/Component */ "./WebGl/Component/Component.ts"));
var StageParts = /** @class */ (function (_super) {
    __extends(StageParts, _super);
    function StageParts() {
        return _super.call(this) || this;
    }
    StageParts.prototype.Destroy = function () {
    };
    return StageParts;
}(Component_1.default));
exports.default = StageParts;


/***/ }),

/***/ "./WebGl/CrossyLoad_Copy/StageParts_Rail.ts":
/*!**************************************************!*\
  !*** ./WebGl/CrossyLoad_Copy/StageParts_Rail.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var ModelDrawComponent_1 = __importDefault(__webpack_require__(/*! ../Component/ModelDrawComponent */ "./WebGl/Component/ModelDrawComponent.ts"));
var Vector3_1 = __importDefault(__webpack_require__(/*! ../Math/Vector3 */ "./WebGl/Math/Vector3.ts"));
var RandomHelper_1 = __importDefault(__webpack_require__(/*! ../Tool/RandomHelper */ "./WebGl/Tool/RandomHelper.ts"));
var Transform_1 = __importDefault(__webpack_require__(/*! ../Transform */ "./WebGl/Transform.ts"));
var CoinComponent_1 = __importDefault(__webpack_require__(/*! ./CoinComponent */ "./WebGl/CrossyLoad_Copy/CoinComponent.ts"));
var DamageObStacle_1 = __importDefault(__webpack_require__(/*! ./DamageObStacle */ "./WebGl/CrossyLoad_Copy/DamageObStacle.ts"));
var RoundTrip_Wait_1 = __importDefault(__webpack_require__(/*! ./RoundTrip_Wait */ "./WebGl/CrossyLoad_Copy/RoundTrip_Wait.ts"));
var SignalComponent_1 = __importDefault(__webpack_require__(/*! ./SignalComponent */ "./WebGl/CrossyLoad_Copy/SignalComponent.ts"));
var StageParts_1 = __importDefault(__webpack_require__(/*! ./StageParts */ "./WebGl/CrossyLoad_Copy/StageParts.ts"));
var ary_positions_reset = [0, 1, 2, 3, 4, -4, -3, -2, -1,];
var randomAryLength = 9;
var ary_positions = ary_positions_reset.slice();
var ary_coinCount = [0, 0, 0, 0, 0, 0, 0, 0, 0, , 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 1, 3];
var StageParts_Rail = /** @class */ (function (_super) {
    __extends(StageParts_Rail, _super);
    function StageParts_Rail(arg_stage, arg_materialName, arg_meshName, arg_size) {
        var _this = _super.call(this) || this;
        _this.meshName = arg_meshName;
        _this.size = arg_size;
        _this.stage = arg_stage;
        _this.baseMaterialName = arg_materialName;
        return _this;
    }
    StageParts_Rail.prototype.OnSet = function () {
        var modelTransform = new Transform_1.default(new Vector3_1.default(0, 0.5, 0), new Vector3_1.default(0, 0, 0), new Vector3_1.default(9, 1, 1));
        modelTransform.BaseTransform = this.gameObject.transform;
        this.gameObject.SetComponent(new ModelDrawComponent_1.default(false, "cube_position", this.baseMaterialName, "ambient", 1, false, null, modelTransform));
        var direction = RandomHelper_1.default.GetRandomInt(0, 1);
        if (direction < 1) {
            direction = -1;
        }
        var time = RandomHelper_1.default.GetRandomInt(3, 5);
        var currentTime = RandomHelper_1.default.GetRandomInt(1, 4);
        currentTime = Math.min(time, currentTime) * 100;
        time *= 200;
        var trainTrans = new Transform_1.default();
        trainTrans.BaseTransform = this.gameObject.transform;
        var damage = new DamageObStacle_1.default(this.stage, new Vector3_1.default(15, 1, 1));
        var trainModelTransform = new Transform_1.default(new Vector3_1.default(0, 0, 0), new Vector3_1.default(180, 90 * -direction, 0), new Vector3_1.default(0.0025, 0.0025, 0.0025));
        trainModelTransform.BaseTransform = trainTrans;
        var trainModel = (new ModelDrawComponent_1.default(false, "nonTexcube", "red", "onlyMaterial", 1, false, this.meshName, trainModelTransform));
        var trip = new RoundTrip_Wait_1.default(new Vector3_1.default(20 * direction, -0.5, 0), new Vector3_1.default(-20 * direction, -0.5, 0), 70, 0, time, currentTime, true);
        this.train = (this.gameObject.Manager.AddGameObject("train", trainTrans, "train", [damage, trip, trainModel]));
        var signal = new SignalComponent_1.default(time, currentTime, time - 120, 120);
        this.gameObject.SetComponent(signal);
        var coinCount = ary_coinCount[RandomHelper_1.default.GetRandomInt(0, ary_coinCount.length - 1)];
        for (var i = 0; i < coinCount; i++) {
            var position = RandomHelper_1.default.GetRandomInt(0, randomAryLength - (i));
            var coin = new CoinComponent_1.default(this.stage);
            var coinTrans = new Transform_1.default(new Vector3_1.default(ary_positions[position], -0.5, 0));
            coinTrans.BaseTransform = this.gameObject.transform;
            this.gameObject.Manager.AddGameObject("coin", coinTrans, "coin", [coin]);
            ary_positions.splice(position, 1);
        }
        ary_positions = ary_positions_reset.slice();
    };
    StageParts_Rail.prototype.Destroy = function () {
        this.stage = null;
        this.gameObject.Dead();
        this.train.Dead();
    };
    return StageParts_Rail;
}(StageParts_1.default));
exports.default = StageParts_Rail;


/***/ }),

/***/ "./WebGl/CrossyLoad_Copy/StageParts_Road.ts":
/*!**************************************************!*\
  !*** ./WebGl/CrossyLoad_Copy/StageParts_Road.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var ModelDrawComponent_1 = __importDefault(__webpack_require__(/*! ../Component/ModelDrawComponent */ "./WebGl/Component/ModelDrawComponent.ts"));
var Vector3_1 = __importDefault(__webpack_require__(/*! ../Math/Vector3 */ "./WebGl/Math/Vector3.ts"));
var RandomHelper_1 = __importDefault(__webpack_require__(/*! ../Tool/RandomHelper */ "./WebGl/Tool/RandomHelper.ts"));
var Transform_1 = __importDefault(__webpack_require__(/*! ../Transform */ "./WebGl/Transform.ts"));
var CoinComponent_1 = __importDefault(__webpack_require__(/*! ./CoinComponent */ "./WebGl/CrossyLoad_Copy/CoinComponent.ts"));
var DamageObStacle_1 = __importDefault(__webpack_require__(/*! ./DamageObStacle */ "./WebGl/CrossyLoad_Copy/DamageObStacle.ts"));
var RoundTrip_1 = __importDefault(__webpack_require__(/*! ./RoundTrip */ "./WebGl/CrossyLoad_Copy/RoundTrip.ts"));
var StageParts_1 = __importDefault(__webpack_require__(/*! ./StageParts */ "./WebGl/CrossyLoad_Copy/StageParts.ts"));
var ary_positions_reset = [0, 1, 2, 3, 4, -4, -3, -2, -1,];
var randomAryLength = 9;
var ary_positions = ary_positions_reset.slice();
var ary_coinCount = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 1];
var StageParts_Road = /** @class */ (function (_super) {
    __extends(StageParts_Road, _super);
    function StageParts_Road(arg_stage, arg_materialName, arg_meshName, arg_size, arg_rotate, arg_carCount) {
        var _this = _super.call(this) || this;
        _this.meshName = arg_meshName;
        _this.size = arg_size;
        _this.carCount = arg_carCount;
        _this.ary_cars = new Array(_this.carCount);
        _this.rotate = arg_rotate;
        _this.stage = arg_stage;
        _this.baseMaterialName = arg_materialName;
        return _this;
    }
    StageParts_Road.prototype.OnSet = function () {
        var modelTransform = new Transform_1.default(new Vector3_1.default(0, 0.5, 0), new Vector3_1.default(0, 0, 0), new Vector3_1.default(9, 1, 1));
        modelTransform.BaseTransform = this.gameObject.transform;
        this.gameObject.SetComponent(new ModelDrawComponent_1.default(false, "cube_position", this.baseMaterialName, "ambient", 1, false, null, modelTransform));
        var direction = RandomHelper_1.default.GetRandomInt(0, 1);
        if (direction < 1) {
            direction = -1;
        }
        var time = RandomHelper_1.default.GetRandomInt(3, 6);
        for (var i = 0; i < this.carCount; i++) {
            var carTrans = new Transform_1.default(new Vector3_1.default(0, 0, 0), new Vector3_1.default(0, 0, 0));
            carTrans.BaseTransform = this.gameObject.transform;
            var damage = new DamageObStacle_1.default(this.stage, this.size);
            var carModelTransform = new Transform_1.default(new Vector3_1.default(0, 0, 0), new Vector3_1.default(180, 90 * direction, 0).Add_b(this.rotate), new Vector3_1.default(0.0025, 0.0025, 0.0025));
            carModelTransform.BaseTransform = carTrans;
            var carModel = (new ModelDrawComponent_1.default(false, "nonTexcube", "red", "onlyMaterial", 1, false, this.meshName, carModelTransform));
            var trip = new RoundTrip_1.default(new Vector3_1.default(8 * direction, -0.5, 0), new Vector3_1.default(-8 * direction, -0.5, 0), 50 * time, 50 * RandomHelper_1.default.GetRandomInt(0, time - 1), true);
            this.ary_cars.push(this.gameObject.Manager.AddGameObject("car", carTrans, "car", [damage, trip, carModel]));
        }
        var coinCount = ary_coinCount[RandomHelper_1.default.GetRandomInt(0, ary_coinCount.length - 1)];
        for (var i = 0; i < coinCount; i++) {
            var position = RandomHelper_1.default.GetRandomInt(0, randomAryLength - (i));
            var coin = new CoinComponent_1.default(this.stage);
            var coinTrans = new Transform_1.default(new Vector3_1.default(ary_positions[position], -0.5, 0));
            coinTrans.BaseTransform = this.gameObject.transform;
            this.gameObject.Manager.AddGameObject("coin", coinTrans, "coin", [coin]);
            ary_positions.splice(position, 1);
        }
        ary_positions = ary_positions_reset.slice();
    };
    StageParts_Road.prototype.Destroy = function () {
        this.stage = null;
        this.gameObject.Dead();
        this.ary_cars.forEach(function (car) { return car.Dead(); });
        this.ary_cars.length = 0;
    };
    return StageParts_Road;
}(StageParts_1.default));
exports.default = StageParts_Road;


/***/ }),

/***/ "./WebGl/CrossyLoad_Copy/StageParts_Safe.ts":
/*!**************************************************!*\
  !*** ./WebGl/CrossyLoad_Copy/StageParts_Safe.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var ModelDrawComponent_1 = __importDefault(__webpack_require__(/*! ../Component/ModelDrawComponent */ "./WebGl/Component/ModelDrawComponent.ts"));
var Vector3_1 = __importDefault(__webpack_require__(/*! ../Math/Vector3 */ "./WebGl/Math/Vector3.ts"));
var PrimitiveType_1 = __webpack_require__(/*! ../Parts/Collision/PrimitiveType */ "./WebGl/Parts/Collision/PrimitiveType.ts");
var RandomHelper_1 = __importDefault(__webpack_require__(/*! ../Tool/RandomHelper */ "./WebGl/Tool/RandomHelper.ts"));
var Transform_1 = __importDefault(__webpack_require__(/*! ../Transform */ "./WebGl/Transform.ts"));
var CoinComponent_1 = __importDefault(__webpack_require__(/*! ./CoinComponent */ "./WebGl/CrossyLoad_Copy/CoinComponent.ts"));
var ObstacleComponent_1 = __importDefault(__webpack_require__(/*! ./ObstacleComponent */ "./WebGl/CrossyLoad_Copy/ObstacleComponent.ts"));
var StageParts_1 = __importDefault(__webpack_require__(/*! ./StageParts */ "./WebGl/CrossyLoad_Copy/StageParts.ts"));
var ary_meshes = ["sango"];
var ary_deco = ["scallops", "seaweed"];
var ary_positions_reset = [0, 1, 2, 3, 4, 5, 6, -6, -5, -4, -3, -2, -1,];
var randomAryLength = 12;
var ary_decoY = [0, -0.5];
var ary_positions = ary_positions_reset.slice();
var ary_coinCount = [0, 0, 0, 1];
var StageParts_Safe = /** @class */ (function (_super) {
    __extends(StageParts_Safe, _super);
    function StageParts_Safe(arg_stage, arg_materialName, arg_carCount, isStart) {
        var _this = _super.call(this) || this;
        if (isStart) {
            ary_positions[0] = 1;
        }
        _this.carCount = arg_carCount;
        _this.ary_obstacles = new Array(_this.carCount);
        _this.stage = arg_stage;
        _this.baseMaterialName = arg_materialName;
        return _this;
    }
    StageParts_Safe.prototype.OnSet = function () {
        var modelTransform = new Transform_1.default(new Vector3_1.default(0, 0.5, 0), new Vector3_1.default(0, 0, 0), new Vector3_1.default(9, 1, 1));
        modelTransform.BaseTransform = this.gameObject.transform;
        this.gameObject.SetComponent(new ModelDrawComponent_1.default(false, "cube_position", this.baseMaterialName, "ambient", 1, false, null, modelTransform));
        for (var i = 0; i < this.carCount; i++) {
            var position = RandomHelper_1.default.GetRandomInt(0, randomAryLength - i);
            var obstacleTrans = new Transform_1.default(new Vector3_1.default(ary_positions[position], -0.5, 0));
            ary_positions.splice(position, 1);
            obstacleTrans.BaseTransform = this.gameObject.transform;
            var modelTransform = new Transform_1.default(new Vector3_1.default(0, 0.1, 0), new Vector3_1.default(180, 90 * RandomHelper_1.default.GetRandomInt(0, 3), 0), new Vector3_1.default(0.0025, 0.0025, 0.0025));
            modelTransform.BaseTransform = obstacleTrans;
            var drawComp = (new ModelDrawComponent_1.default(false, "nonTexcube", "red", "onlyMaterial", 1, false, ary_meshes[0], modelTransform));
            var obstacle = new ObstacleComponent_1.default(PrimitiveType_1.PrimitiveType.box_AABB, new Vector3_1.default(1, 1, 1), this.stage);
            var obs = this.gameObject.Manager.AddGameObject("obstacle", obstacleTrans, "obstacle", [obstacle, drawComp]);
            this.ary_obstacles.push(obs);
        }
        var decoCount = RandomHelper_1.default.GetRandomInt(1, 4);
        for (var i = 0; i < decoCount; i++) {
            var position = RandomHelper_1.default.GetRandomInt(0, randomAryLength - (i + this.carCount));
            var decoNum = RandomHelper_1.default.GetRandomInt(0, 1);
            var obstacleTrans = new Transform_1.default(new Vector3_1.default(ary_positions[position], ary_decoY[decoNum], 0));
            ary_positions.splice(position, 1);
            obstacleTrans.BaseTransform = this.gameObject.transform;
            var modelTransform = new Transform_1.default(new Vector3_1.default(0, 0, 0), new Vector3_1.default(0, 90 * RandomHelper_1.default.GetRandomInt(0, 3), 0), new Vector3_1.default(0.0025, 0.0025, 0.0025));
            modelTransform.BaseTransform = obstacleTrans;
            var drawComp = (new ModelDrawComponent_1.default(false, "nonTexcube", "red", "onlyMaterial", 1, false, ary_deco[decoNum], modelTransform));
            this.gameObject.SetComponent(drawComp);
        }
        var coinCount = ary_coinCount[RandomHelper_1.default.GetRandomInt(0, 3)];
        for (var i = 0; i < coinCount; i++) {
            var position = RandomHelper_1.default.GetRandomInt(0, randomAryLength - (i + this.carCount + decoCount));
            var coin = new CoinComponent_1.default(this.stage);
            var coinTrans = new Transform_1.default(new Vector3_1.default(ary_positions[position], -0.5, 0));
            coinTrans.BaseTransform = this.gameObject.transform;
            this.gameObject.Manager.AddGameObject("coin", coinTrans, "coin", [coin]);
            ary_positions.splice(position, 1);
        }
        ary_positions = ary_positions_reset.slice();
    };
    StageParts_Safe.prototype.Destroy = function () {
        this.stage = null;
        this.gameObject.Dead();
        this.ary_obstacles.forEach(function (obstacle) { obstacle.Dead(); });
    };
    return StageParts_Safe;
}(StageParts_1.default));
exports.default = StageParts_Safe;


/***/ }),

/***/ "./WebGl/GameObject/GameObject.ts":
/*!****************************************!*\
  !*** ./WebGl/GameObject/GameObject.ts ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var GameObjectIDManager_1 = __importDefault(__webpack_require__(/*! ../Parts/GameObjectIDManager */ "./WebGl/Parts/GameObjectIDManager.ts"));
var GameObject = /** @class */ (function () {
    function GameObject(arg_manager, arg_name, arg_transform, arg_idName, arg_ary_components) {
        var _this = this;
        this.isComplexHit = false;
        this.transform = arg_transform;
        this.Collision = this.Collision_Simple;
        this.newComponents = new Array();
        this.isRemove = false;
        this.name = arg_name;
        this.manager = arg_manager;
        if (arg_ary_components) {
            this.components = arg_ary_components;
        }
        else
            this.components = new Array();
        this.objectID = GameObjectIDManager_1.default.GetID(arg_idName);
        this.components.forEach(function (component) { return component.Set(_this); });
        this.ary_currentHitObjects = new Array();
        this.ary_befHitObjects = new Array();
    }
    Object.defineProperty(GameObject.prototype, "IsRemove", {
        get: function () {
            return this.isRemove;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameObject.prototype, "Name", {
        get: function () {
            return this.name;
        },
        set: function (arg_name) {
            this.manager.UnRegistObject(this.name);
            this.name = arg_name;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameObject.prototype, "Manager", {
        get: function () {
            return this.manager;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameObject.prototype, "ComplexHit", {
        get: function () {
            return this.isComplexHit;
        },
        set: function (other) {
            this.isComplexHit = other;
            if (this.isComplexHit) {
                this.Collision = this.Collision_Complex;
            }
            else {
                this.Collision = this.Collision_Simple;
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameObject.prototype, "GameTime", {
        get: function () {
            return this.Manager.Scene.GetSceneManager().GetGameTime();
        },
        enumerable: false,
        configurable: true
    });
    GameObject.prototype.Remove = function () {
        this.components.forEach(function (component) { return component.Remove(); });
        this.components.length = 0;
        this.manager.UnRegistObject(this.name);
        this.manager = null;
    };
    GameObject.prototype.Release = function () {
        this.components.forEach(function (component) { return component.Remove(); });
        this.components.length = 0;
        this.manager = null;
    };
    GameObject.prototype.Dead = function () {
        this.isRemove = true;
    };
    GameObject.prototype.GetRenderer = function () {
        return this.manager.Scene.GetRenderer();
    };
    GameObject.prototype.GetCollisionManager = function () {
        return this.manager.Scene.GetCollisionManager();
    };
    GameObject.prototype.Update = function () {
        this.Collision();
        this.components = this.components.concat(this.newComponents);
        this.newComponents = new Array();
        this.components.forEach(function (component) { return component.Update(); });
        var remove = this.components.filter(function (component) { return component.IsRemove; });
        remove.forEach(function (remove) { return remove.Remove(); });
        this.components = this.components.filter(function (component) { return !component.IsRemove; });
    };
    GameObject.prototype.Initialize = function () {
    };
    GameObject.prototype.SetComponent = function (arg_component) {
        arg_component.Set(this);
        this.newComponents.push(arg_component);
        return arg_component;
    };
    GameObject.prototype.GetComponent = function (arg_serchName, arg_count) {
        return this.components.filter(function (component) { return component.GetComponentName() == arg_serchName; })[arg_count];
    };
    GameObject.prototype.Hit = function (arg_object) {
        this.ary_currentHitObjects.push(arg_object);
    };
    GameObject.prototype.Collision_Simple = function () {
        var _this = this;
        this.ary_currentHitObjects.forEach(function (obj) { _this.components.forEach(function (component) { return component.OnCollision(obj); }); });
        this.ary_currentHitObjects.length = 0;
    };
    GameObject.prototype.Collision_Complex = function () {
        var _this = this;
        this.ary_currentHitObjects.forEach(function (obj) {
            if (_this.ary_befHitObjects.includes(obj))
                _this.components.forEach(function (component) { return component.OnCollision(obj); });
            else {
                _this.components.forEach(function (component) { return component.OnCollisionEnter(obj); });
            }
        });
        this.ary_befHitObjects.forEach(function (obj) {
            if (!_this.ary_currentHitObjects.includes(obj))
                _this.components.forEach(function (component) { return component.OnCollisionRelease(obj); });
        });
        this.ary_befHitObjects = this.ary_currentHitObjects;
        this.ary_currentHitObjects = new Array();
    };
    return GameObject;
}());
exports.default = GameObject;


/***/ }),

/***/ "./WebGl/GameObject/GameObjectManager.ts":
/*!***********************************************!*\
  !*** ./WebGl/GameObject/GameObjectManager.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var GameObject_1 = __importDefault(__webpack_require__(/*! ./GameObject */ "./WebGl/GameObject/GameObject.ts"));
var Transform_1 = __importDefault(__webpack_require__(/*! ../Transform */ "./WebGl/Transform.ts"));
var GameObjectManager = /** @class */ (function () {
    function GameObjectManager(arg_scene) {
        this.gameObjects = new Array();
        this.newGameObjects = new Array();
        this.map_gameObjects = new Map();
        this.scene = arg_scene;
    }
    Object.defineProperty(GameObjectManager.prototype, "Scene", {
        get: function () {
            return this.scene;
        },
        enumerable: false,
        configurable: true
    });
    GameObjectManager.prototype.AddGameObject = function (arg_name, arg_transform, arg_idName, arg_ary_componets) {
        var newObj;
        if (this.map_gameObjects[arg_name]) {
            var num = 1;
            var name = arg_name + "_" + num;
            while (this.map_gameObjects[name]) {
                num++;
                name = arg_name + "_" + num;
            }
            arg_name = name;
        }
        if (!arg_idName) {
            arg_idName = "none";
        }
        if (arg_transform) {
            if (arg_ary_componets) {
                newObj = new GameObject_1.default(this, arg_name, arg_transform, arg_idName, arg_ary_componets);
            }
            else {
                newObj = new GameObject_1.default(this, arg_name, arg_transform, arg_idName);
            }
        }
        else {
            if (arg_ary_componets)
                newObj = new GameObject_1.default(this, arg_name, new Transform_1.default(), arg_idName, arg_ary_componets);
            else {
                newObj = new GameObject_1.default(this, arg_name, new Transform_1.default(), arg_idName);
            }
        }
        this.map_gameObjects[arg_name] = newObj;
        this.newGameObjects.push(newObj);
        return newObj;
    };
    GameObjectManager.prototype.RemoveObject = function (arg_gameObjName) {
        this.map_gameObjects[arg_gameObjName].Dead();
    };
    GameObjectManager.prototype.UnRegistObject = function (arg_gameObjectName) {
        this.map_gameObjects[arg_gameObjectName] = null;
    };
    GameObjectManager.prototype.Update = function () {
        this.gameObjects = this.gameObjects.concat(this.newGameObjects);
        this.newGameObjects = new Array();
        this.gameObjects.forEach(function (obj) { return obj.Update(); });
        this.gameObjects.filter(function (obj) { return obj.IsRemove; }).forEach(function (obj) { return obj.Remove(); });
        this.gameObjects = this.gameObjects.filter(function (obj) { return !obj.IsRemove; });
    };
    GameObjectManager.prototype.GetGameObject = function (arg_gameObjectName) {
        return this.map_gameObjects[arg_gameObjectName];
    };
    GameObjectManager.prototype.GetGameObjects = function (arg_serchTag) {
        var out = this.gameObjects.filter(function (obj) { return obj.objectID.Equal(arg_serchTag); });
        return out;
    };
    GameObjectManager.prototype.RegistObj = function (obj) {
        this.map_gameObjects[obj.Name] = obj;
    };
    GameObjectManager.prototype.LogObjectCount = function () {
        console.log("gameObjectCounts:" + this.gameObjects.length);
    };
    GameObjectManager.prototype.Release = function () {
        this.map_gameObjects.clear();
        this.newGameObjects.forEach(function (obj) { return obj.Release(); });
        this.newGameObjects.length = 0;
        this.gameObjects.forEach(function (obj) { return obj.Release(); });
        this.gameObjects.length = 0;
        this.scene = null;
    };
    return GameObjectManager;
}());
exports.default = GameObjectManager;


/***/ }),

/***/ "./WebGl/Graphic/Camera.ts":
/*!*********************************!*\
  !*** ./WebGl/Graphic/Camera.ts ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Matrix_1 = __importDefault(__webpack_require__(/*! ../Math/Matrix */ "./WebGl/Math/Matrix.ts"));
var Transform_1 = __importDefault(__webpack_require__(/*! ../Transform */ "./WebGl/Transform.ts"));
var Vector4_1 = __importDefault(__webpack_require__(/*! ../Math/Vector4 */ "./WebGl/Math/Vector4.ts"));
var Camera = /** @class */ (function () {
    function Camera(arg_device, layer, isPararell, frameBuffer) {
        this.targetFrame = null;
        this.isClear = true;
        this.device = arg_device;
        this.transform = new Transform_1.default();
        this.layer = layer;
        this.clearColor = new Vector4_1.default(0, 0, 0, 0);
        if (frameBuffer) {
            this.targetFrame = frameBuffer;
            if (!isPararell) {
                this.projectionMatrix = new Matrix_1.default().Perspective(45, this.targetFrame.width / this.targetFrame.height, 0.1, 100);
            }
            else {
                this.projectionMatrix = new Matrix_1.default().Ortho(-this.targetFrame.width / 2, this.targetFrame.width / 2, this.targetFrame.height / 2, -this.targetFrame.height / 2, 0.1, 100);
            }
        }
        else {
            if (!isPararell)
                this.projectionMatrix = new Matrix_1.default().Perspective(45, this.device.GetSize().x / this.device.GetSize().y, 0.1, 100);
            else {
                this.projectionMatrix = new Matrix_1.default().Ortho(-this.device.GetSize().x / 2, this.device.GetSize().x / 2, this.device.GetSize().y / 2, -this.device.GetSize().y / 2, 0.1, 100);
            }
        }
    }
    Camera.prototype.Attach = function () {
        this.device.SetClearColor(this.clearColor);
        this.device.SetCameraStatus(this.transform.Matrix.Inverse(), this.projectionMatrix, this.transform.Rotation, this.transform.Position);
        if (this.targetFrame) {
            this.device.context.viewport(0, 0, this.targetFrame.width, this.targetFrame.height);
            this.device.context.bindFramebuffer(this.device.context.FRAMEBUFFER, this.targetFrame.frameBuffer);
            if (this.isClear)
                this.device.clearFunc();
        }
        else {
            this.device.context.viewport(0, 0, this.device.GetSize().x, this.device.GetSize().y);
            this.device.context.bindFramebuffer(this.device.context.FRAMEBUFFER, null);
            if (this.isClear)
                this.device.clearFunc();
        }
    };
    return Camera;
}());
exports.default = Camera;


/***/ }),

/***/ "./WebGl/Graphic/GraphicDevice.ts":
/*!****************************************!*\
  !*** ./WebGl/Graphic/GraphicDevice.ts ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Vector4_1 = __importDefault(__webpack_require__(/*! ../Math/Vector4 */ "./WebGl/Math/Vector4.ts"));
var Vector2_1 = __importDefault(__webpack_require__(/*! ../Math/Vector2 */ "./WebGl/Math/Vector2.ts"));
var GraphicDevice = /** @class */ (function () {
    function GraphicDevice(arg_canvas) {
        this.canvas = arg_canvas;
        this.context = this.canvas.getContext('webgl');
        this.context.enable(this.context.CULL_FACE);
        this.context.enable(this.context.DEPTH_TEST);
        this.context.depthFunc(this.context.LEQUAL);
        this.clearColor = new Vector4_1.default(0, 0, 0, 0);
        this.size = new Vector2_1.default(arg_canvas.width, arg_canvas.height);
        this.clearFunc = this.Clear;
        this.context.clearColor(this.clearColor.x, this.clearColor.y, this.clearColor.z, this.clearColor.w);
        this.context.clearDepth(1.0);
        this.context.blendFunc(this.context.SRC_ALPHA, this.context.ONE_MINUS_SRC_ALPHA);
        this.context.enable(this.context.BLEND);
    }
    Object.defineProperty(GraphicDevice.prototype, "TempMatrix", {
        get: function () {
            return this.tempMatrix;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GraphicDevice.prototype, "ViewMatrix", {
        get: function () {
            return this.viewMatrix;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GraphicDevice.prototype, "ProjectionMatrix", {
        get: function () {
            return this.projectionMatrix;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GraphicDevice.prototype, "CameraPosition", {
        get: function () {
            return this.camPosition;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GraphicDevice.prototype, "CameraRotationInv", {
        get: function () {
            return this.camRotationInv;
        },
        enumerable: false,
        configurable: true
    });
    GraphicDevice.prototype.SetClearColor = function (arg_color) {
        this.clearColor = arg_color;
        this.context.clearColor(this.clearColor.x, this.clearColor.y, this.clearColor.z, this.clearColor.w);
        return arg_color;
    };
    GraphicDevice.prototype.EnableStencil = function () {
        this.context.enable(this.context.STENCIL_TEST);
        this.context.clearStencil(0);
    };
    GraphicDevice.prototype.Clear = function () {
        this.context.clear(this.context.COLOR_BUFFER_BIT | this.context.DEPTH_BUFFER_BIT);
    };
    GraphicDevice.prototype.ClearDepth = function () {
        this.context.clear(this.context.DEPTH_BUFFER_BIT);
    };
    GraphicDevice.prototype.ClearStencil = function () {
        this.context.clear(this.context.COLOR_BUFFER_BIT | this.context.DEPTH_BUFFER_BIT | this.context.STENCIL_BUFFER_BIT);
    };
    GraphicDevice.prototype.GetSize = function () {
        return this.size;
    };
    GraphicDevice.prototype.Present = function () {
        this.context.flush();
    };
    GraphicDevice.prototype.SetShader = function (arg_shader) {
        this.shader = arg_shader;
        this.context.useProgram(this.shader.programObject);
    };
    GraphicDevice.prototype.CreateProgram = function (arg_vs, arg_fs) {
        // 
        var program = this.context.createProgram();
        // 
        this.context.attachShader(program, arg_vs);
        this.context.attachShader(program, arg_fs);
        // 
        this.context.linkProgram(program);
        // 
        if (this.context.getProgramParameter(program, this.context.LINK_STATUS)) {
            // 
            this.context.useProgram(program);
            // 
            return program;
        }
        else {
            // 
            alert(this.context.getProgramInfoLog(program));
        }
    };
    GraphicDevice.prototype.CreateVBO = function (arg_data) {
        // 
        var vbo = this.context.createBuffer();
        // 
        this.context.bindBuffer(this.context.ARRAY_BUFFER, vbo);
        // 
        this.context.bufferData(this.context.ARRAY_BUFFER, new Float32Array(arg_data), this.context.STATIC_DRAW);
        // 
        this.context.bindBuffer(this.context.ARRAY_BUFFER, null);
        // VBO
        return vbo;
    };
    GraphicDevice.prototype.CreateIBO = function (arg_data) {
        // 
        var ibo = this.context.createBuffer();
        // 
        this.context.bindBuffer(this.context.ELEMENT_ARRAY_BUFFER, ibo);
        // 
        this.context.bufferData(this.context.ELEMENT_ARRAY_BUFFER, new Int16Array(arg_data), this.context.STATIC_DRAW);
        // 
        this.context.bindBuffer(this.context.ELEMENT_ARRAY_BUFFER, null);
        // IBO
        return ibo;
    };
    GraphicDevice.prototype.CreateVertexShader = function (arg_source) {
        var shader;
        shader = this.context.createShader(this.context.VERTEX_SHADER);
        // 
        this.context.shaderSource(shader, arg_source);
        // 
        this.context.compileShader(shader);
        // 
        if (this.context.getShaderParameter(shader, this.context.COMPILE_STATUS)) {
            // 
            return shader;
        }
        else {
            console.log("vertex shader failed");
            // 
            alert(this.context.getShaderInfoLog(shader));
            return;
        }
    };
    GraphicDevice.prototype.CreateFragmentShader = function (arg_source) {
        var shader;
        shader = this.context.createShader(this.context.FRAGMENT_SHADER);
        // 
        this.context.shaderSource(shader, arg_source);
        // 
        this.context.compileShader(shader);
        // 
        if (this.context.getShaderParameter(shader, this.context.COMPILE_STATUS)) {
            // 
            return shader;
        }
        else {
            console.log("fragment shader failed");
            // 
            alert(this.context.getShaderInfoLog(shader));
            return;
        }
    };
    GraphicDevice.prototype.CreateTexture = function (arg_source, arg_texture) {
        // 
        var img = new Image();
        // 
        img.onload = OnTexLoad(img, arg_texture, arg_source, this);
        // 
        img.src = arg_source;
    };
    GraphicDevice.prototype.SetVBO = function (arg_vboList) {
        // 
        for (var i in arg_vboList) {
            // 
            this.context.bindBuffer(this.context.ARRAY_BUFFER, arg_vboList[i]);
            // attributeLocation
            this.context.enableVertexAttribArray(this.shader.attributeLocations[i]);
            // attributeLocation
            this.context.vertexAttribPointer(this.shader.attributeLocations[i], this.shader.attributeStrides[i], this.context.FLOAT, false, 0, 0);
        }
    };
    GraphicDevice.prototype.OnLoadTexture = function (img, arg_texture, arg_source) {
        // 
        var tex = this.context.createTexture();
        // 
        this.context.bindTexture(this.context.TEXTURE_2D, tex);
        // 
        this.context.texImage2D(this.context.TEXTURE_2D, 0, this.context.RGBA, this.context.RGBA, this.context.UNSIGNED_BYTE, img);
        // 
        this.context.generateMipmap(this.context.TEXTURE_2D);
        // 
        this.context.bindTexture(this.context.TEXTURE_2D, null);
        arg_texture.data = tex;
        arg_texture.Loaded();
        console.log(arg_source + " loaded");
    };
    ;
    GraphicDevice.prototype.OnLoadShader = function (arg_source, arg_shader) {
        var data = arg_source.responseText;
        console.log(data);
        arg_shader = this.context.createShader(this.context.VERTEX_SHADER);
        // 
        this.context.shaderSource(arg_shader, data);
        // 
        this.context.compileShader(arg_shader);
    };
    GraphicDevice.prototype.SetCameraStatus = function (arg_viewMatrix, arg_projectionMatrix, arg_cameraMatrix, arg_cameraPosition) {
        this.viewMatrix = arg_viewMatrix;
        this.projectionMatrix = arg_projectionMatrix;
        this.tempMatrix = this.projectionMatrix.Multiply(this.viewMatrix);
        this.camPosition = arg_cameraPosition;
        this.camRotationInv = (arg_cameraMatrix);
    };
    return GraphicDevice;
}());
exports.default = GraphicDevice;
function OnTexLoad(img, arg_texture, arg_source, device) {
    return function () {
        device.OnLoadTexture(img, arg_texture, arg_source);
    };
}
function OnShaderLoad(arg_source, arg_shader, device) {
    return function () {
        device.OnLoadShader(arg_source, arg_shader);
    };
}


/***/ }),

/***/ "./WebGl/Graphic/Model.ts":
/*!********************************!*\
  !*** ./WebGl/Graphic/Model.ts ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var ExParameter = /** @class */ (function () {
    function ExParameter(arg_slot, arg_size, arg_param) {
        this.slot = arg_slot;
        this.param = arg_param;
        this.size = arg_size;
        switch (arg_size) {
            case 1:
                this.atachFunc = this.Atach1f;
                break;
            case 2:
                this.atachFunc = this.Atach2f;
                break;
            case 3:
                this.atachFunc = this.Atach3f;
                break;
            case 4:
                this.atachFunc = this.Atach4f;
                break;
            case 16:
                this.atachFunc = this.AtachMat;
                break;
        }
    }
    ExParameter.prototype.Atach1f = function (device) {
        device.context.uniform1fv(device.shader.uniformLocations[this.slot], this.param.data);
    };
    ExParameter.prototype.Atach2f = function (device) {
        device.context.uniform2fv(device.shader.uniformLocations[this.slot], this.param.data);
    };
    ExParameter.prototype.Atach3f = function (device) {
        device.context.uniform3fv(device.shader.uniformLocations[this.slot], this.param.data);
    };
    ExParameter.prototype.Atach4f = function (device) {
        device.context.uniform4fv(device.shader.uniformLocations[this.slot], this.param.data);
    };
    ExParameter.prototype.AtachMat = function (device) {
        device.context.uniformMatrix4fv(device.shader.uniformLocations[this.slot], false, this.param.data);
    };
    return ExParameter;
}());
var Model = /** @class */ (function () {
    function Model(isLight, isBillBoard) {
        if (isBillBoard == true) {
            if (isLight)
                this.Draw = this.Draw_BillBoard_Light;
            else
                this.Draw = this.Draw_BillBoard_NonLight;
        }
        else {
            if (isLight)
                this.Draw = this.Draw_Light;
            else
                this.Draw = this.Draw_NonLight;
        }
        this.exParams = new Array();
    }
    Model.prototype.Initialize_geom = function (arg_graphicDevice, arg_geometry, arg_material, arg_Shader, arg_transform) {
        this.graphicDevice = arg_graphicDevice;
        this.geometry = arg_geometry;
        this.materials = new Array();
        this.materials.push(arg_material);
        this.subsets = new Array();
        this.subsets.push(this.geometry.GetIndexSize());
        this.shader = arg_Shader;
        this.transform = arg_transform;
        this.lights = new Array();
    };
    Model.prototype.Initialize_mesh = function (arg_graphicDevice, arg_mesh, arg_Shader, arg_transform) {
        this.graphicDevice = arg_graphicDevice;
        this.geometry = arg_mesh.geometry;
        this.materials = arg_mesh.ary_materials;
        this.subsets = this.geometry.GetSubSet();
        this.shader = arg_Shader;
        this.transform = arg_transform;
        this.lights = new Array();
    };
    Model.prototype.SetLight = function (arg_light) {
        this.lights.push(arg_light);
    };
    Model.prototype.AddExParam = function (arg_slot, arg_size, arg_param) {
        this.exParams.push(new ExParameter(arg_slot, arg_size, arg_param));
    };
    Model.prototype.Draw_NonLight = function () {
        this.shader.Attach();
        var mvpMatrix = this.graphicDevice.TempMatrix.Multiply(this.transform.Matrix);
        var invMatrix = this.transform.Matrix.Inverse();
        // uniform
        this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[0], false, mvpMatrix.data);
        this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[1], false, this.transform.Matrix.data);
        this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[2], false, invMatrix.data);
        for (var i = 0; i < this.exParams.length; i++) {
            this.exParams[i].atachFunc(this.graphicDevice);
        }
        this.geometry.Draw();
        var offset = 0;
        for (var i = 0; i < this.subsets.length; i++) {
            this.materials[i].Attach();
            this.graphicDevice.context.drawElements(this.graphicDevice.context.TRIANGLES, this.subsets[i], this.graphicDevice.context.UNSIGNED_SHORT, offset * 2);
            offset += this.subsets[i];
        }
    };
    Model.prototype.Draw_Light = function () {
        this.shader.Attach();
        var mvpMatrix = this.graphicDevice.TempMatrix.Multiply(this.transform.Matrix);
        var invMatrix = this.transform.Matrix.Inverse();
        // uniform
        this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[0], false, mvpMatrix.data);
        this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[1], false, this.transform.Matrix.data);
        this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[2], false, invMatrix.data);
        this.lights.forEach(function (light) { return light.Atach(); });
        for (var i = 0; i < this.exParams.length; i++) {
            this.exParams[i].atachFunc(this.graphicDevice);
        }
        this.geometry.Draw();
        var offset = 0;
        for (var i = 0; i < this.subsets.length; i++) {
            this.materials[i].Attach();
            this.graphicDevice.context.drawElements(this.graphicDevice.context.TRIANGLES, this.subsets[i], this.graphicDevice.context.UNSIGNED_SHORT, offset * 2);
            offset += this.subsets[i];
        }
    };
    Model.prototype.Draw_BillBoard_Light = function () {
        this.shader.Attach();
        var mMatrix = this.transform.Matrix.Multiply(this.graphicDevice.CameraRotationInv);
        var mvpMatrix = this.graphicDevice.TempMatrix.Multiply(mMatrix);
        var invMatrix = this.transform.Matrix.Inverse();
        this.lights.forEach(function (light) { return light.Atach(); });
        // uniform
        this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[0], false, mvpMatrix.data);
        this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[1], false, this.transform.Matrix.data);
        this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[2], false, invMatrix.data);
        for (var i = 0; i < this.exParams.length; i++) {
            this.exParams[i].atachFunc(this.graphicDevice);
        }
        this.geometry.Draw();
        var offset = 0;
        for (var i = 0; i < this.subsets.length; i++) {
            this.materials[i].Attach();
            this.graphicDevice.context.drawElements(this.graphicDevice.context.TRIANGLES, this.subsets[i], this.graphicDevice.context.UNSIGNED_SHORT, offset * 2);
            offset += this.subsets[i];
        }
    };
    Model.prototype.Draw_BillBoard_NonLight = function () {
        this.shader.Attach();
        //this.transform.LookAt(this.graphicDevice.CameraPosition,new Vector3(0,1,0));
        var mMatrix = this.transform.Matrix.Multiply(this.graphicDevice.CameraRotationInv);
        var mvpMatrix = this.graphicDevice.TempMatrix.Multiply(mMatrix);
        var invMatrix = this.transform.Matrix.Inverse();
        // uniform
        this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[0], false, mvpMatrix.data);
        this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[1], false, this.transform.Matrix.data);
        this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[2], false, invMatrix.data);
        for (var i = 0; i < this.exParams.length; i++) {
            this.exParams[i].atachFunc(this.graphicDevice);
        }
        this.geometry.Draw();
        var offset = 0;
        for (var i = 0; i < this.subsets.length; i++) {
            this.materials[i].Attach();
            this.graphicDevice.context.drawElements(this.graphicDevice.context.TRIANGLES, this.subsets[i], this.graphicDevice.context.UNSIGNED_SHORT, offset * 2);
            offset += this.subsets[i];
        }
    };
    return Model;
}());
exports.default = Model;


/***/ }),

/***/ "./WebGl/Graphic/TextModel.ts":
/*!************************************!*\
  !*** ./WebGl/Graphic/TextModel.ts ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var TextModel = /** @class */ (function () {
    function TextModel(isBillBoard) {
        if (isBillBoard == true) {
            this.Draw = this.Draw_BillBoard_NonLight;
        }
        else {
            this.Draw = this.Draw_NonLight;
        }
    }
    TextModel.prototype.SetUVData = function (arg_uvVBO) {
        this.uvData = arg_uvVBO;
    };
    TextModel.prototype.AddExParam = function (arg_slot, arg_size, arg_param) {
        //throw new Error("Method not implemented.")
    };
    TextModel.prototype.Initialize_geom = function (arg_graphicDevice, arg_geometry, arg_material, arg_Shader, arg_transform) {
        this.graphicDevice = arg_graphicDevice;
        this.geometry = arg_geometry;
        this.materials = arg_material;
        this.indexSize = (this.geometry.GetIndexSize());
        this.shader = arg_Shader;
        this.transform = arg_transform;
    };
    TextModel.prototype.SetLight = function (arg_light) {
    };
    TextModel.prototype.Draw_NonLight = function () {
        this.shader.Attach();
        var mvpMatrix = this.graphicDevice.TempMatrix.Multiply(this.transform.Matrix);
        var invMatrix = this.transform.Matrix.Inverse();
        // uniform
        this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[0], false, mvpMatrix.data);
        this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[1], false, this.transform.Matrix.data);
        this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[2], false, invMatrix.data);
        this.geometry.ChangeVBO(this.uvData, 1);
        this.geometry.Draw();
        this.materials.Attach();
        this.graphicDevice.context.drawElements(this.graphicDevice.context.TRIANGLES, this.indexSize, this.graphicDevice.context.UNSIGNED_SHORT, 0);
    };
    TextModel.prototype.Draw_BillBoard_NonLight = function () {
        this.shader.Attach();
        //this.transform.LookAt(this.graphicDevice.CameraPosition,new Vector3(0,1,0));
        var mMatrix = this.transform.Matrix.Multiply(this.graphicDevice.CameraRotationInv);
        var mvpMatrix = this.graphicDevice.TempMatrix.Multiply(mMatrix);
        var invMatrix = this.transform.Matrix.Inverse();
        // uniform
        this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[0], false, mvpMatrix.data);
        this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[1], false, this.transform.Matrix.data);
        this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[2], false, invMatrix.data);
        this.geometry.ChangeVBO(this.uvData, 1);
        this.geometry.Draw();
        this.materials.Attach();
        this.graphicDevice.context.drawElements(this.graphicDevice.context.TRIANGLES, this.indexSize, this.graphicDevice.context.UNSIGNED_SHORT, 0);
    };
    return TextModel;
}());
exports.default = TextModel;


/***/ }),

/***/ "./WebGl/Light/PointLight.ts":
/*!***********************************!*\
  !*** ./WebGl/Light/PointLight.ts ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Transform_1 = __importDefault(__webpack_require__(/*! ../Transform */ "./WebGl/Transform.ts"));
var PointLight = /** @class */ (function () {
    function PointLight(arg_device) {
        this.graphicDevice = arg_device;
        this.transform = new Transform_1.default();
    }
    PointLight.prototype.Atach = function () {
        this.graphicDevice.context.uniform3fv(this.graphicDevice.shader.uniformLocations[4], this.transform.Position.xyz);
    };
    return PointLight;
}());
exports.default = PointLight;


/***/ }),

/***/ "./WebGl/LoadScene.ts":
/*!****************************!*\
  !*** ./WebGl/LoadScene.ts ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Scene_1 = __importDefault(__webpack_require__(/*! ./Scene/Scene */ "./WebGl/Scene/Scene.ts"));
var ResourceCreater_1 = __importDefault(__webpack_require__(/*! ./Tool/ResourceCreater */ "./WebGl/Tool/ResourceCreater.ts"));
var GeometryGenerator_1 = __importDefault(__webpack_require__(/*! ./Tool/GeometryGenerator */ "./WebGl/Tool/GeometryGenerator.ts"));
var Quat_1 = __importDefault(__webpack_require__(/*! ./Math/Quat */ "./WebGl/Math/Quat.ts"));
var Vector4_1 = __importDefault(__webpack_require__(/*! ./Math/Vector4 */ "./WebGl/Math/Vector4.ts"));
var Vector3_1 = __importDefault(__webpack_require__(/*! ./Math/Vector3 */ "./WebGl/Math/Vector3.ts"));
var PointLight_1 = __importDefault(__webpack_require__(/*! ./Light/PointLight */ "./WebGl/Light/PointLight.ts"));
var ModelDrawComponent_1 = __importDefault(__webpack_require__(/*! ./Component/ModelDrawComponent */ "./WebGl/Component/ModelDrawComponent.ts"));
var Vector2_1 = __importDefault(__webpack_require__(/*! ./Math/Vector2 */ "./WebGl/Math/Vector2.ts"));
var TextDrawComponent_1 = __importDefault(__webpack_require__(/*! ./Component/TextDrawComponent */ "./WebGl/Component/TextDrawComponent.ts"));
var Transform_1 = __importDefault(__webpack_require__(/*! ./Transform */ "./WebGl/Transform.ts"));
var SampleScene_1 = __importDefault(__webpack_require__(/*! ./SampleScene */ "./WebGl/SampleScene.ts"));
var PrimitiveType;
(function (PrimitiveType) {
    PrimitiveType[PrimitiveType["sphere"] = 0] = "sphere";
    PrimitiveType[PrimitiveType["box_AABB"] = 1] = "box_AABB";
    PrimitiveType[PrimitiveType["box_OBB"] = 2] = "box_OBB";
    PrimitiveType[PrimitiveType["point"] = 3] = "point";
})(PrimitiveType || (PrimitiveType = {}));
var float = /** @class */ (function () {
    function float() {
        this.data = new Float32Array(1);
    }
    return float;
}());
var LoadScene = /** @class */ (function (_super) {
    __extends(LoadScene, _super);
    function LoadScene(sceneManger) {
        var _this = _super.call(this, sceneManger) || this;
        _this.aQuaternion = new Quat_1.default().Identity();
        _this.bQuaternion = new Quat_1.default().Identity();
        _this.sQuaternion = new Quat_1.default().Identity();
        _this.zoomData = new float();
        _this.zoomDirection = 1.0;
        _this.zoomData.data[0] = 0.5;
        return _this;
    }
    LoadScene.prototype.BefLoad = function () {
        this.renderer.AddLayer();
        this.AddCamera(0, 1, "main", false, this.sceneManager.GetResourceContainer().GetTexture("loadingCamera"));
        // 
        var light = new PointLight_1.default(this.sceneManager.GetGraphicDevice());
        light.transform.Position = new Vector3_1.default(-5, -5, 10);
        //this.renderer.SetLight(light,0);
        this.renderer.SetLight(light, 1);
        this.sceneManager.GetGraphicDevice().EnableStencil();
        this.GetCamera("main").transform.Position = new Vector3_1.default(0, -3, 10);
        this.GetCamera("main").transform.LookAt(new Vector3_1.default(0, 0, 0), Vector3_1.default.yAxis);
        this.GetCamera("main").clearColor = new Vector4_1.default(0.0, 0.0, 0.0, 1.0);
        this.cube = this.gameObjectManager.AddGameObject("cube");
        this.anotherCube = this.gameObjectManager.AddGameObject("cube");
        this.projectionPlane = this.gameObjectManager.AddGameObject("projectionCube");
        //this.torus.SetComponent(new ModelDrawComponent("hsvTorus","caloryMaterial","pointLight",1)) as ModelDrawComponent;
        //this.cube.SetComponent(new ModelDrawComponent(false, "cube","caloryMaterial","texShader",1,false)) as ModelDrawComponent;
        var tr = new Transform_1.default();
        tr.Position = new Vector3_1.default(1, 1, 1);
        var tr2 = new Transform_1.default();
        tr2.Position = new Vector3_1.default(-1, -1, 2);
        this.cube.SetComponent(new TextDrawComponent_1.default("loading", "font", "fontShader", new Vector4_1.default(0.75, 0.75, 0.25, 1), 1, true));
        //this.anotherCube.SetComponent(new ModelDrawComponent(false, "cube","caloryMaterial","texShader",1,true)) as ModelDrawComponent;
        this.projectionPlane.SetComponent(new ModelDrawComponent_1.default(false, "plane", "loadingCameraMaterial", "texShader", 0, false));
        this.projectionPlane.transform.Scale = new Vector3_1.default(500, 500, 1);
        this.cube.transform.Position = new Vector3_1.default(0.5, 0, 0.5);
        this.anotherCube.transform.Position = new Vector3_1.default(-1, -5, 10);
        this.projectionPlane.transform.Position = new Vector3_1.default(0, 0, -1);
    };
    LoadScene.prototype.OnLoadingUpdate = function () {
    };
    LoadScene.prototype.OnLoad = function () {
        return __awaiter(this, void 0, void 0, function () {
            var caloryTexture, material, material;
            return __generator(this, function (_a) {
                this.sceneManager.GetResourceContainer().AddShader(ResourceCreater_1.default.CreateShader('shader/PointLightVS.glsl', "shader/PointLightFS.glsl", this.sceneManager.GetGraphicDevice()), "pointLight");
                //console.log("2");
                this.sceneManager.GetResourceContainer().AddShader(ResourceCreater_1.default.CreateShader('shader/UVNormalVS.glsl', "shader/DefaultFS_light.glsl", this.sceneManager.GetGraphicDevice()), "texShader_light");
                this.sceneManager.GetResourceContainer().AddShader(ResourceCreater_1.default.CreateShader('shader/UVNormalColorVS.glsl', "shader/BlackTestFS.glsl", this.sceneManager.GetGraphicDevice()), "black");
                this.sceneManager.GetResourceContainer().AddShader(ResourceCreater_1.default.CreateShader('shader/VertexPositionVS.glsl', "shader/AmbientFS.glsl", this.sceneManager.GetGraphicDevice()), "ambient");
                this.sceneManager.GetResourceContainer().AddShader(ResourceCreater_1.default.CreateShader('shader/VertexPositionVS.glsl', "shader/SimpleColorFS.glsl", this.sceneManager.GetGraphicDevice()), "simpleColor");
                this.sceneManager.GetResourceContainer().AddShader(ResourceCreater_1.default.CreateShader('shader/UVNormalVS.glsl', "shader/OnlyMaterialFS.glsl", this.sceneManager.GetGraphicDevice()), "onlyMaterial");
                this.sceneManager.GetResourceContainer().AddShader(ResourceCreater_1.default.CreateShader('shader/UVNormalVS.glsl', "shader/RainbowFS.glsl", this.sceneManager.GetGraphicDevice()), "rainbow");
                this.sceneManager.GetResourceContainer().AddShader(ResourceCreater_1.default.CreateShader('shader/UVNormalVS.glsl', "RainbowAlpha", this.sceneManager.GetGraphicDevice(), false, true), "rainbowAlpha");
                this.sceneManager.GetResourceContainer().AddGeometry(ResourceCreater_1.default.CreateGeometry(GeometryGenerator_1.default.CreateTorus(32, 32, 0.5, 1), false, true, true, this.sceneManager.GetGraphicDevice()), "hsvTorus");
                this.sceneManager.GetResourceContainer().AddGeometry(ResourceCreater_1.default.CreateGeometry(GeometryGenerator_1.default.CreateCube(1, new Vector4_1.default(1.0, 1.0, 1.0, 1)), true, true, true, this.sceneManager.GetGraphicDevice()), "cube");
                this.sceneManager.GetResourceContainer().AddGeometry(ResourceCreater_1.default.CreateGeometry(GeometryGenerator_1.default.CreateCube(1, new Vector4_1.default(1.0, 1.0, 1.0, 1)), false, false, false, this.sceneManager.GetGraphicDevice()), "cube_position");
                this.sceneManager.GetResourceContainer().AddGeometry(ResourceCreater_1.default.CreateGeometry(GeometryGenerator_1.default.CreateCube(1, new Vector4_1.default(1.0, 1.0, 1.0, 1)), false, true, true, this.sceneManager.GetGraphicDevice()), "nonTexcube");
                this.sceneManager.GetResourceContainer().AddGeometry(ResourceCreater_1.default.CreateGeometry(GeometryGenerator_1.default.CreateSphere(12, 12, 0.5, new Vector4_1.default(0.0, 0.0, 0.0, 1)), false, true, true, this.sceneManager.GetGraphicDevice()), "sphere");
                this.sceneManager.GetResourceContainer().AddGeometry(ResourceCreater_1.default.CreateGeometry(GeometryGenerator_1.default.CreateSphere(4, 4, 0.5, new Vector4_1.default(0.0, 0.0, 0.0, 1)), true, true, false, this.sceneManager.GetGraphicDevice()), "effectSphere");
                this.sceneManager.GetResourceContainer().AddGeometry(ResourceCreater_1.default.CreateGeometry(GeometryGenerator_1.default.CreatePlane(new Vector2_1.default(1, 1), false, new Vector4_1.default(1.0, 1.0, 1.0, 1)), true, false, false, this.sceneManager.GetGraphicDevice()), "plane");
                this.sceneManager.GetResourceContainer().AddGeometry(ResourceCreater_1.default.CreateGeometry(GeometryGenerator_1.default.CreatePlane(new Vector2_1.default(1, 1), false, new Vector4_1.default(1.0, 1.0, 1.0, 1)), false, false, false, this.sceneManager.GetGraphicDevice()), "plane_position");
                this.sceneManager.GetResourceContainer().AddGeometry(ResourceCreater_1.default.CreateGeometry(GeometryGenerator_1.default.CreatePlane(new Vector2_1.default(1, 1), false, new Vector4_1.default(1.0, 1.0, 1.0, 1)), true, true, false, this.sceneManager.GetGraphicDevice()), "uvNormalPlane");
                this.sceneManager.GetResourceContainer().AddGeometry(ResourceCreater_1.default.CreateGeometry(GeometryGenerator_1.default.CreateBar(new Vector2_1.default(1, 1), false, new Vector4_1.default(1.0, 1.0, 1.0, 1)), true, true, false, this.sceneManager.GetGraphicDevice()), "uvNormalBar");
                this.sceneManager.GetResourceContainer().AddGeometry(ResourceCreater_1.default.CreateGeometry(GeometryGenerator_1.default.CreatePlane(new Vector2_1.default(1, 1), false, new Vector4_1.default(1.0, 1.0, 1.0, 1)), false, true, true, this.sceneManager.GetGraphicDevice()), "floor");
                this.sceneManager.GetResourceContainer().AddMesh(ResourceCreater_1.default.CreateMeshResourceFromFile("model/Maguro/maguro.b3m", this.sceneManager.GetResourceContainer(), this.sceneManager.GetGraphicDevice()), "maguro");
                this.sceneManager.GetResourceContainer().AddMesh(ResourceCreater_1.default.CreateMeshResourceFromFile("model/FBX/crab.b3m", this.sceneManager.GetResourceContainer(), this.sceneManager.GetGraphicDevice()), "crab");
                this.sceneManager.GetResourceContainer().AddMesh(ResourceCreater_1.default.CreateMeshResourceFromFile("model/FBX/sango.b3m", this.sceneManager.GetResourceContainer(), this.sceneManager.GetGraphicDevice()), "sango");
                this.sceneManager.GetResourceContainer().AddMesh(ResourceCreater_1.default.CreateMeshResourceFromFile("model/FBX/turtle.b3m", this.sceneManager.GetResourceContainer(), this.sceneManager.GetGraphicDevice()), "turtle");
                this.sceneManager.GetResourceContainer().AddMesh(ResourceCreater_1.default.CreateMeshResourceFromFile("model/FBX/utubo.b3m", this.sceneManager.GetResourceContainer(), this.sceneManager.GetGraphicDevice()), "utubo");
                this.sceneManager.GetResourceContainer().AddMesh(ResourceCreater_1.default.CreateMeshResourceFromFile("model/FBX/fishes.b3m", this.sceneManager.GetResourceContainer(), this.sceneManager.GetGraphicDevice()), "fishes");
                this.sceneManager.GetResourceContainer().AddMesh(ResourceCreater_1.default.CreateMeshResourceFromFile("model/FBX/clownfish.b3m", this.sceneManager.GetResourceContainer(), this.sceneManager.GetGraphicDevice()), "clownfish");
                this.sceneManager.GetResourceContainer().AddMesh(ResourceCreater_1.default.CreateMeshResourceFromFile("model/FBX/seaweed.b3m", this.sceneManager.GetResourceContainer(), this.sceneManager.GetGraphicDevice()), "seaweed");
                this.sceneManager.GetResourceContainer().AddMesh(ResourceCreater_1.default.CreateMeshResourceFromFile("model/FBX/scallops.b3m", this.sceneManager.GetResourceContainer(), this.sceneManager.GetGraphicDevice()), "scallops");
                this.sceneManager.GetResourceContainer().AddSoundFromFile("audio/kill2.wav", "kill");
                this.sceneManager.GetResourceContainer().AddSoundFromFile("audio/up_se.wav", "up");
                caloryTexture = ResourceCreater_1.default.CreateTexture('image/calory.png', this.sceneManager.GetGraphicDevice());
                this.sceneManager.GetResourceContainer().AddTexture(caloryTexture, "calory");
                this.sceneManager.GetResourceContainer().AddTextureFromFile("image/magurossy.png", this.sceneManager.GetGraphicDevice());
                this.sceneManager.GetResourceContainer().AddTextureFromFile("image/circle32.png", this.sceneManager.GetGraphicDevice());
                material = this.sceneManager.GetResourceContainer().AddMaterial(ResourceCreater_1.default.CreateMaterial(new Vector4_1.default(0.1, 0.1, 0.1, 1.0), this.sceneManager.GetGraphicDevice(), [this.sceneManager.GetResourceContainer().GetTexture("calory")]), "caloryMaterial");
                material = this.sceneManager.GetResourceContainer().AddMaterial(ResourceCreater_1.default.CreateMaterial(new Vector4_1.default(0.1, 0.1, 0.1, 1.0), this.sceneManager.GetGraphicDevice(), [this.sceneManager.GetResourceContainer().GetTexture("image/magurossy.png")]), "logoMaterial");
                material.AddExParam(4, 3, new Vector3_1.default(5, 5, 10));
                material = this.sceneManager.GetResourceContainer().AddMaterial(ResourceCreater_1.default.CreateMaterial(new Vector4_1.default(0.1, 0.1, 0.1, 1.0), this.sceneManager.GetGraphicDevice(), [this.sceneManager.GetResourceContainer().GetTexture("image/circle32.png")]), "circleMaterial");
                material.AddExParam(4, 3, new Vector3_1.default(5, 5, 10));
                material = this.sceneManager.GetResourceContainer().AddMaterial(ResourceCreater_1.default.CreateMaterial(new Vector4_1.default(1.0, 0.5, 0.5, 1.0), this.sceneManager.GetGraphicDevice()), "red");
                material = this.sceneManager.GetResourceContainer().AddMaterial(ResourceCreater_1.default.CreateMaterial(new Vector4_1.default(0.5, 0.5, 0.5, 1.0), this.sceneManager.GetGraphicDevice()), "gray");
                material = this.sceneManager.GetResourceContainer().AddMaterial(ResourceCreater_1.default.CreateMaterial(new Vector4_1.default(0.8, 0.8, 0.8, 1.0), this.sceneManager.GetGraphicDevice()), "white");
                material = this.sceneManager.GetResourceContainer().AddMaterial(ResourceCreater_1.default.CreateMaterial(new Vector4_1.default(0.9, 0.8, 0.3, 1.0), this.sceneManager.GetGraphicDevice()), "yellow");
                material = this.sceneManager.GetResourceContainer().AddMaterial(ResourceCreater_1.default.CreateMaterial(new Vector4_1.default(0.5, 0.5, 1.0, 1.0), this.sceneManager.GetGraphicDevice()), "blue");
                material = this.sceneManager.GetResourceContainer().AddMaterial(ResourceCreater_1.default.CreateMaterial(new Vector4_1.default(0.4, 0.6, 0.9, 1.0), this.sceneManager.GetGraphicDevice()), "road");
                material = this.sceneManager.GetResourceContainer().AddMaterial(ResourceCreater_1.default.CreateMaterial(new Vector4_1.default(0.36, 0.54, 0.81, 1.0), this.sceneManager.GetGraphicDevice()), "road_d");
                material = this.sceneManager.GetResourceContainer().AddMaterial(ResourceCreater_1.default.CreateMaterial(new Vector4_1.default(0.8, 0.8, 0.7, 1.0), this.sceneManager.GetGraphicDevice()), "safe");
                material = this.sceneManager.GetResourceContainer().AddMaterial(ResourceCreater_1.default.CreateMaterial(new Vector4_1.default(0.72, 0.72, 0.63, 1.0), this.sceneManager.GetGraphicDevice()), "safe_d");
                material = this.sceneManager.GetResourceContainer().AddMaterial(ResourceCreater_1.default.CreateMaterial(new Vector4_1.default(0.6, 0.5, 0.6, 1.0), this.sceneManager.GetGraphicDevice()), "rail");
                material = this.sceneManager.GetResourceContainer().AddMaterial(ResourceCreater_1.default.CreateMaterial(new Vector4_1.default(0.54, 0.45, 0.54, 1.0), this.sceneManager.GetGraphicDevice()), "rail_d");
                material = this.sceneManager.GetResourceContainer().AddMaterial(ResourceCreater_1.default.CreateMaterial(new Vector4_1.default(0.5, 1.0, 0.5, 1.0), this.sceneManager.GetGraphicDevice()), "green");
                material = this.sceneManager.GetResourceContainer().AddMaterial(ResourceCreater_1.default.CreateMaterial(new Vector4_1.default(0.1, 0.1, 0.1, 1.0), this.sceneManager.GetGraphicDevice()), "zoomEffect");
                this.sceneManager.AddScene(new SampleScene_1.default(this.sceneManager), "sample");
                return [2 /*return*/];
            });
        });
    };
    LoadScene.prototype.OnInitialize = function () {
        if (this.isCurrent)
            this.sceneManager.ChangeScene("sample");
    };
    LoadScene.prototype.OnStart = function () {
        this.sceneManager.ChangeScene("sample");
    };
    return LoadScene;
}(Scene_1.default));
exports.default = LoadScene;


/***/ }),

/***/ "./WebGl/Math/Geometry/Box_AABB.ts":
/*!*****************************************!*\
  !*** ./WebGl/Math/Geometry/Box_AABB.ts ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Box_AABB = /** @class */ (function () {
    function Box_AABB(arg_lengthes, arg_position) {
        this.halfLengthes = arg_lengthes.Multiply_b(0.5);
        if (arg_position)
            this.position = arg_position;
    }
    Box_AABB.prototype.Length = function (index) {
        return this.halfLengthes.data[index];
    };
    Box_AABB.prototype.GetMin = function (index) { return this.position.data[index] - this.halfLengthes.data[index]; };
    Box_AABB.prototype.GetMax = function (index) { return this.position.data[index] + this.halfLengthes.data[index]; };
    return Box_AABB;
}());
exports.default = Box_AABB;
;


/***/ }),

/***/ "./WebGl/Math/Geometry/Box_OBB.ts":
/*!****************************************!*\
  !*** ./WebGl/Math/Geometry/Box_OBB.ts ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Vector3_1 = __importDefault(__webpack_require__(/*! ../Vector3 */ "./WebGl/Math/Vector3.ts"));
var Box_OBB = /** @class */ (function () {
    function Box_OBB(arg_length) {
        this.halfLengthes = arg_length.Multiply(0.5);
        this.directs = new Array(3);
        this.position = new Vector3_1.default(0, 0, 0);
        this.directs[0] = Vector3_1.default.xAxis.Clone();
        this.directs[1] = Vector3_1.default.yAxis.Clone();
        this.directs[2] = Vector3_1.default.zAxis.Clone();
    }
    Box_OBB.prototype.GetDirect = function (index) {
        return this.directs[index];
    };
    Box_OBB.prototype.Length = function (index) {
        return this.halfLengthes.data[index];
    };
    Box_OBB.prototype.GetPos = function () {
        return this.position;
    };
    return Box_OBB;
}());
exports.default = Box_OBB;


/***/ }),

/***/ "./WebGl/Math/Geometry/GeometryHelper.ts":
/*!***********************************************!*\
  !*** ./WebGl/Math/Geometry/GeometryHelper.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Vector3_1 = __importDefault(__webpack_require__(/*! ../Vector3 */ "./WebGl/Math/Vector3.ts"));
function abs(arg) {
    if (arg < 0) {
        return arg * -1;
    }
    else {
        return arg;
    }
}
var GeometryHelper = /** @class */ (function () {
    function GeometryHelper() {
    }
    GeometryHelper.GetDistance = function (arg_point, arg_surfacePoint, arg_surfaceNormal) {
        return abs(arg_surfaceNormal.Dot(arg_point.Sub(arg_surfacePoint))) / arg_surfaceNormal.Length();
    };
    GeometryHelper.GetDistanceLineLine = function (arg_line, arg_otherLine) {
        var normal = arg_line.velocity.Cross(arg_otherLine.velocity).Normalize();
        return normal.Dot(arg_otherLine.point.Sub(arg_line.point));
    };
    GeometryHelper.IsHitPointLine = function (arg_point, arg_line) {
        var length = (arg_point.Sub(arg_line.point).Cross(arg_line.velocity)).Length();
        if (length) {
            return true;
        }
        else {
            return false;
        }
    };
    GeometryHelper.IsHitPointSegment = function (arg_point, arg_segment) {
        var v = arg_point.Sub(arg_segment.point);
        if (v.Cross(arg_segment.velocity).Length() && v.LengthSqr() <= arg_segment.velocity.LengthSqr()) {
            return true;
        }
        else {
            return false;
        }
    };
    GeometryHelper.GetDistancePointSegment = function (arg_point, arg_segment) {
        var v = arg_segment.GetEndPoint().Sub(arg_segment.point);
        var vp = arg_point.Sub(arg_segment.point);
        var t = v.Normalize().Dot(vp) / v.Length();
        if (t > 1) {
            return arg_segment.GetEndPoint().Sub(arg_point);
        }
        else if (t < 0) {
            return arg_segment.point.Sub(arg_point);
        }
        return v.Multiply_b(t).Sub_b(vp);
    };
    GeometryHelper.GetPolygonY = function (arg_pointA, arg_pointB, arg_pointC, objX, objZ) {
        var normal = arg_pointA.Sub(arg_pointB).Cross(arg_pointA.Sub(arg_pointC));
        if (normal.y < 0) {
            normal.Multiply(-1);
        }
        return arg_pointA.y - (normal.x * (objX - arg_pointA.x) + normal.z * (objZ - arg_pointA.z)) / normal.y;
    };
    GeometryHelper.IsHitLineLine = function (arg_linev1, arg_linev2) {
        var v3 = arg_linev2.point.Sub(arg_linev1.point);
        var normal1 = arg_linev1.velocity.Cross(arg_linev2.velocity);
        var normal2 = arg_linev1.velocity.Cross(v3);
        if (!normal2.LengthSqr()) {
            return true;
        }
        if (normal1.LengthSqr() != 0 && normal1.Cross(normal2).LengthSqr() == 0) {
            return true;
        }
        return false;
    };
    GeometryHelper.IsHitLineSurface = function (arg_line, arg_surfacePoint, arg_surfaceNormal) {
        var v1 = arg_line.point.Sub(arg_surfacePoint);
        if (v1.Dot(arg_surfaceNormal) == 0) {
            return true;
        }
        if (arg_line.velocity.Dot(arg_surfaceNormal)) {
            return true;
        }
        return false;
    };
    GeometryHelper.IsHitSegmentSurface = function (arg_segment, arg_surfacePoint, arg_surfaceNormal) {
        var v1 = arg_segment.point.Sub(arg_surfacePoint);
        var v2 = arg_segment.GetEndPoint().Sub(arg_surfacePoint);
        if (arg_surfaceNormal.Dot(v1) * arg_surfaceNormal.Dot(v2) <= 0) {
            return true;
        }
        return false;
    };
    GeometryHelper.GetDitancePointBox_AABBSqrt = function (arg_point, arg_box) {
        var SqLen = 0;
        for (var i = 0; i < 3; i++) {
            if (arg_point.data[i] < arg_box.GetMin(i))
                SqLen += (arg_point.data[i] - arg_box.GetMin(i)) * (arg_point.data[i] - arg_box.GetMin(i));
            if (arg_point.data[i] > arg_box.GetMax(i))
                SqLen += (arg_point.data[i] - arg_box.GetMax(i)) * (arg_point.data[i] - arg_box.GetMax(i));
        }
        return SqLen;
    };
    GeometryHelper.GetDitancePointBox_AABB = function (arg_point, arg_box) {
        return (GeometryHelper.GetDitancePointBox_AABBSqrt(arg_point, arg_box));
    };
    GeometryHelper.GetDitancePointBox_OBB_Static = function (arg_point, arg_box) {
        var output = new Vector3_1.default(0, 0, 0);
        for (var i = 0; i < 3; i++) {
            var L = arg_box.Length(i);
            if (L <= 0)
                continue;
            var s = (arg_point.Sub(arg_box.GetPos())).Dot(arg_box.GetDirect(i)) / L;
            // s
            s = abs(s);
            if (s > 1)
                output.Add_b(arg_box.GetDirect(i).Multiply((1 - s)).Multiply(L));
        }
        var outputLen = output.Length();
        //console.log(outputLen);
        return outputLen;
    };
    GeometryHelper.IsHitPointBox_OBB = function (arg_point, arg_box) {
        return !GeometryHelper.GetDitancePointBox_OBB_Static(arg_point, arg_box);
    };
    GeometryHelper.IsHitSphereBox_OBB = function (arg_sphere, arg_box) {
        return (arg_sphere.radius) >= GeometryHelper.GetDitancePointBox_OBB_Static(arg_sphere.position, arg_box);
    };
    GeometryHelper.IsHitPointBox_AABB = function (arg_point, arg_box) {
        return !GeometryHelper.GetDitancePointBox_AABB(arg_point, arg_box);
    };
    GeometryHelper.IsHitSphereBox_AABB = function (arg_sphere, arg_box) {
        return (arg_sphere.radius) >= GeometryHelper.GetDitancePointBox_AABB(arg_sphere.position, arg_box);
    };
    GeometryHelper.LengthSeparatedAxis = function (arg_sep, arg_e1, arg_e2, arg_e3) {
        if (arg_e3 === void 0) { arg_e3 = null; }
        var r1 = abs(arg_sep.Dot(arg_e1));
        var r2 = abs(arg_sep.Dot(arg_e2));
        var r3 = arg_e3 ? (abs(arg_sep.Dot(arg_e3))) : 0;
        return r1 + r2 + r3;
    };
    GeometryHelper.IsHitBox_AABB = function (arg_box, arg_otherBox) {
        var Ae1 = Vector3_1.default.xAxis.Multiply(arg_box.Length(0));
        var Ae2 = Vector3_1.default.yAxis.Multiply(arg_box.Length(1));
        var Ae3 = Vector3_1.default.zAxis.Multiply(arg_box.Length(2));
        var Be1 = Vector3_1.default.xAxis.Multiply(arg_otherBox.Length(0));
        var Be2 = Vector3_1.default.yAxis.Multiply(arg_otherBox.Length(1));
        var Be3 = Vector3_1.default.zAxis.Multiply(arg_otherBox.Length(2));
        var Interval = arg_box.position.Sub(arg_otherBox.position);
        //  : Ae1
        var rA = Ae1.Length();
        var rB = GeometryHelper.LengthSeparatedAxis(Vector3_1.default.xAxis, Be1, Be2, Be3);
        var L = abs(Interval.Dot(Vector3_1.default.xAxis));
        if (L > rA + rB)
            return false; // 
        //  : Ae2
        rA = Ae2.Length();
        rB = GeometryHelper.LengthSeparatedAxis(Vector3_1.default.yAxis, Be1, Be2, Be3);
        L = abs(Interval.Dot(Vector3_1.default.yAxis));
        if (L > rA + rB)
            return false;
        //  : Ae3
        rA = Ae3.Length();
        rB = GeometryHelper.LengthSeparatedAxis(Vector3_1.default.zAxis, Be1, Be2, Be3);
        L = abs(Interval.Dot(Vector3_1.default.zAxis));
        if (L > rA + rB)
            return false;
        //  : Be1
        rA = GeometryHelper.LengthSeparatedAxis(Vector3_1.default.xAxis, Ae1, Ae2, Ae3);
        rB = Be1.Length();
        L = abs(Interval.Dot(Vector3_1.default.xAxis));
        if (L > rA + rB)
            return false;
        //  : Be2
        rA = GeometryHelper.LengthSeparatedAxis(Vector3_1.default.yAxis, Ae1, Ae2, Ae3);
        rB = Be2.Length();
        L = abs(Interval.Dot(Vector3_1.default.yAxis));
        if (L > rA + rB)
            return false;
        //  : Be3
        rA = GeometryHelper.LengthSeparatedAxis(Vector3_1.default.zAxis, Ae1, Ae2, Ae3);
        rB = Be3.Length();
        L = abs(Interval.Dot(Vector3_1.default.zAxis));
        if (L > rA + rB)
            return false;
        return true;
    };
    GeometryHelper.IsHitBox_OBBBox_AABB = function (arg_box, arg_otherBox) {
        var Ae1 = Vector3_1.default.xAxis.Multiply(arg_box.Length(0));
        var Ae2 = Vector3_1.default.yAxis.Multiply(arg_box.Length(1));
        var Ae3 = Vector3_1.default.zAxis.Multiply(arg_box.Length(2));
        var NBe1 = arg_otherBox.GetDirect(0), Be1 = NBe1.Multiply(arg_otherBox.Length(0));
        var NBe2 = arg_otherBox.GetDirect(1), Be2 = NBe2.Multiply(arg_otherBox.Length(1));
        var NBe3 = arg_otherBox.GetDirect(2), Be3 = NBe3.Multiply(arg_otherBox.Length(2));
        var Interval = arg_box.position.Sub(arg_otherBox.GetPos());
        //  : Ae1
        var rA = Ae1.Length();
        var rB = GeometryHelper.LengthSeparatedAxis(Vector3_1.default.xAxis, Be1, Be2, Be3);
        var L = abs(Interval.Dot(Vector3_1.default.xAxis));
        if (L > rA + rB)
            return false; // 
        //  : Ae2
        rA = Ae2.Length();
        rB = GeometryHelper.LengthSeparatedAxis(Vector3_1.default.yAxis, Be1, Be2, Be3);
        L = abs(Interval.Dot(Vector3_1.default.yAxis));
        if (L > rA + rB)
            return false;
        //  : Ae3
        rA = Ae3.Length();
        rB = GeometryHelper.LengthSeparatedAxis(Vector3_1.default.zAxis, Be1, Be2, Be3);
        L = abs(Interval.Dot(Vector3_1.default.zAxis));
        if (L > rA + rB)
            return false;
        //  : Be1
        rA = GeometryHelper.LengthSeparatedAxis(NBe1, Ae1, Ae2, Ae3);
        rB = Be1.Length();
        L = abs(Interval.Dot(NBe1));
        if (L > rA + rB)
            return false;
        //  : Be2
        rA = GeometryHelper.LengthSeparatedAxis(NBe2, Ae1, Ae2, Ae3);
        rB = Be2.Length();
        L = abs(Interval.Dot(NBe2));
        if (L > rA + rB)
            return false;
        //  : Be3
        rA = GeometryHelper.LengthSeparatedAxis(NBe3, Ae1, Ae2, Ae3);
        rB = Be3.Length();
        L = abs(Interval.Dot(NBe3));
        if (L > rA + rB)
            return false;
        return true;
    };
    GeometryHelper.GetBox_OBBContainAABBLength = function (arg_box) {
        var Be1 = arg_box.GetDirect(0).Multiply(arg_box.Length(0));
        var Be2 = arg_box.GetDirect(1).Multiply(arg_box.Length(1));
        var Be3 = arg_box.GetDirect(2).Multiply(arg_box.Length(2));
        return new Vector3_1.default(GeometryHelper.LengthSeparatedAxis(Vector3_1.default.xAxis, Be1, Be2, Be3), GeometryHelper.LengthSeparatedAxis(Vector3_1.default.yAxis, Be1, Be2, Be3), GeometryHelper.LengthSeparatedAxis(Vector3_1.default.zAxis, Be1, Be2, Be3));
    };
    GeometryHelper.IsHitBox_OBB = function (arg_box, arg_otherBox) {
        // 
        // N***:
        var NAe1 = arg_box.GetDirect(0), Ae1 = NAe1.Multiply(arg_box.Length(0));
        var NAe2 = arg_box.GetDirect(1), Ae2 = NAe2.Multiply(arg_box.Length(1));
        var NAe3 = arg_box.GetDirect(2), Ae3 = NAe3.Multiply(arg_box.Length(2));
        var NBe1 = arg_otherBox.GetDirect(0), Be1 = NBe1.Multiply(arg_otherBox.Length(0));
        var NBe2 = arg_otherBox.GetDirect(1), Be2 = NBe2.Multiply(arg_otherBox.Length(1));
        var NBe3 = arg_otherBox.GetDirect(2), Be3 = NBe3.Multiply(arg_otherBox.Length(2));
        var Interval = arg_box.GetPos().Sub(arg_otherBox.GetPos());
        //  : Ae1
        var rA = Ae1.Length();
        var rB = GeometryHelper.LengthSeparatedAxis(NAe1, Be1, Be2, Be3);
        var L = abs(Interval.Dot(NAe1));
        if (L > rA + rB)
            return false; // 
        //  : Ae2
        rA = Ae2.Length();
        rB = GeometryHelper.LengthSeparatedAxis(NAe2, Be1, Be2, Be3);
        L = abs(Interval.Dot(NAe2));
        if (L > rA + rB)
            return false;
        //  : Ae3
        rA = Ae3.Length();
        rB = GeometryHelper.LengthSeparatedAxis(NAe3, Be1, Be2, Be3);
        L = abs(Interval.Dot(NAe3));
        if (L > rA + rB)
            return false;
        //  : Be1
        rA = GeometryHelper.LengthSeparatedAxis(NBe1, Ae1, Ae2, Ae3);
        rB = Be1.Length();
        L = abs(Interval.Dot(NBe1));
        if (L > rA + rB)
            return false;
        //  : Be2
        rA = GeometryHelper.LengthSeparatedAxis(NBe2, Ae1, Ae2, Ae3);
        rB = Be2.Length();
        L = abs(Interval.Dot(NBe2));
        if (L > rA + rB)
            return false;
        //  : Be3
        rA = GeometryHelper.LengthSeparatedAxis(NBe3, Ae1, Ae2, Ae3);
        rB = Be3.Length();
        L = abs(Interval.Dot(NBe3));
        if (L > rA + rB)
            return false;
        //  : C11
        var Cross = NAe1.Cross(NBe1);
        rA = GeometryHelper.LengthSeparatedAxis(Cross, Ae2, Ae3);
        rB = GeometryHelper.LengthSeparatedAxis(Cross, Be2, Be3);
        L = abs(Interval.Dot(Cross));
        if (L > rA + rB)
            return false;
        //  : C12
        Cross = NAe1.Cross(NBe2);
        rA = GeometryHelper.LengthSeparatedAxis(Cross, Ae2, Ae3);
        rB = GeometryHelper.LengthSeparatedAxis(Cross, Be1, Be3);
        L = abs(Interval.Dot(Cross));
        if (L > rA + rB)
            return false;
        //  : C13
        Cross = NAe1.Cross(NBe3);
        rA = GeometryHelper.LengthSeparatedAxis(Cross, Ae2, Ae3);
        rB = GeometryHelper.LengthSeparatedAxis(Cross, Be1, Be2);
        L = abs(Interval.Dot(Cross));
        if (L > rA + rB)
            return false;
        //  : C21
        Cross = NAe2.Cross(NBe1);
        rA = GeometryHelper.LengthSeparatedAxis(Cross, Ae1, Ae3);
        rB = GeometryHelper.LengthSeparatedAxis(Cross, Be2, Be3);
        L = abs(Interval.Dot(Cross));
        if (L > rA + rB)
            return false;
        //  : C22
        Cross = NAe2.Cross(NBe2);
        rA = GeometryHelper.LengthSeparatedAxis(Cross, Ae1, Ae3);
        rB = GeometryHelper.LengthSeparatedAxis(Cross, Be1, Be3);
        L = abs(Interval.Dot(Cross));
        if (L > rA + rB)
            return false;
        //  : C23
        Cross = NAe2.Cross(NBe3);
        rA = GeometryHelper.LengthSeparatedAxis(Cross, Ae1, Ae3);
        rB = GeometryHelper.LengthSeparatedAxis(Cross, Be1, Be2);
        L = abs(Interval.Dot(Cross));
        if (L > rA + rB)
            return false;
        //  : C31
        Cross = NAe3.Cross(NBe1);
        rA = GeometryHelper.LengthSeparatedAxis(Cross, Ae1, Ae2);
        rB = GeometryHelper.LengthSeparatedAxis(Cross, Be2, Be3);
        L = abs(Interval.Dot(Cross));
        if (L > rA + rB)
            return false;
        //  : C32
        Cross = NAe3.Cross(NBe2);
        rA = GeometryHelper.LengthSeparatedAxis(Cross, Ae1, Ae2);
        rB = GeometryHelper.LengthSeparatedAxis(Cross, Be1, Be3);
        L = abs(Interval.Dot(Cross));
        if (L > rA + rB)
            return false;
        //  : C33
        Cross = NAe3.Cross(NBe3);
        rA = GeometryHelper.LengthSeparatedAxis(Cross, Ae1, Ae2);
        rB = GeometryHelper.LengthSeparatedAxis(Cross, Be1, Be2);
        L = abs(Interval.Dot(Cross));
        if (L > rA + rB)
            return false;
        return true;
    };
    GeometryHelper.IsHitSphereSphere = function (arg_sphere, arg_otherSphere) {
        var distance = (arg_sphere.position.Sub(arg_otherSphere.position)).Length();
        var border = arg_sphere.radius + arg_otherSphere.radius;
        return distance <= border;
    };
    GeometryHelper.IsHitPointSphere = function (arg_point, arg_otherSphere) {
        var distance = (arg_point.Sub(arg_otherSphere.position)).Length();
        return distance <= arg_otherSphere.radius;
    };
    return GeometryHelper;
}());
exports.default = GeometryHelper;


/***/ }),

/***/ "./WebGl/Math/Geometry/Sphere.ts":
/*!***************************************!*\
  !*** ./WebGl/Math/Geometry/Sphere.ts ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Sphere = /** @class */ (function () {
    function Sphere(arg_r, arg_p, arg_s) {
        this.radius = arg_r;
        this.initRadius = arg_r;
        this.position = arg_p;
        this.radius = arg_r * arg_s;
    }
    return Sphere;
}());
exports.default = Sphere;
;


/***/ }),

/***/ "./WebGl/Math/Matrix.ts":
/*!******************************!*\
  !*** ./WebGl/Math/Matrix.ts ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Quat_1 = __importDefault(__webpack_require__(/*! ./Quat */ "./WebGl/Math/Quat.ts"));
var elem = new Array(4);
var Matrix4x4 = /** @class */ (function () {
    function Matrix4x4() {
        this.data = new Float32Array(16);
    }
    Matrix4x4.prototype.Identity = function () {
        this.data[0] = 1;
        this.data[1] = 0;
        this.data[2] = 0;
        this.data[3] = 0;
        this.data[4] = 0;
        this.data[5] = 1;
        this.data[6] = 0;
        this.data[7] = 0;
        this.data[8] = 0;
        this.data[9] = 0;
        this.data[10] = 1;
        this.data[11] = 0;
        this.data[12] = 0;
        this.data[13] = 0;
        this.data[14] = 0;
        this.data[15] = 1;
        return this;
    };
    Matrix4x4.prototype.Clone = function () {
        var output = new Matrix4x4();
        for (var i = 0; i < 16; i++) {
            output.data[i] = this.data[i];
        }
        return output;
    };
    Matrix4x4.prototype.Multiply = function (other) {
        var output = new Matrix4x4();
        var a = this.data[0], b = this.data[1], c = this.data[2], d = this.data[3], e = this.data[4], f = this.data[5], g = this.data[6], h = this.data[7], i = this.data[8], j = this.data[9], k = this.data[10], l = this.data[11], m = this.data[12], n = this.data[13], o = this.data[14], p = this.data[15], A = other.data[0], B = other.data[1], C = other.data[2], D = other.data[3], E = other.data[4], F = other.data[5], G = other.data[6], H = other.data[7], I = other.data[8], J = other.data[9], K = other.data[10], L = other.data[11], M = other.data[12], N = other.data[13], O = other.data[14], P = other.data[15];
        output.data[0] = A * a + B * e + C * i + D * m;
        output.data[1] = A * b + B * f + C * j + D * n;
        output.data[2] = A * c + B * g + C * k + D * o;
        output.data[3] = A * d + B * h + C * l + D * p;
        output.data[4] = E * a + F * e + G * i + H * m;
        output.data[5] = E * b + F * f + G * j + H * n;
        output.data[6] = E * c + F * g + G * k + H * o;
        output.data[7] = E * d + F * h + G * l + H * p;
        output.data[8] = I * a + J * e + K * i + L * m;
        output.data[9] = I * b + J * f + K * j + L * n;
        output.data[10] = I * c + J * g + K * k + L * o;
        output.data[11] = I * d + J * h + K * l + L * p;
        output.data[12] = M * a + N * e + O * i + P * m;
        output.data[13] = M * b + N * f + O * j + P * n;
        output.data[14] = M * c + N * g + O * k + P * o;
        output.data[15] = M * d + N * h + O * l + P * p;
        return output;
    };
    Matrix4x4.prototype.Multiply_b = function (other) {
        var a = this.data[0], b = this.data[1], c = this.data[2], d = this.data[3], e = this.data[4], f = this.data[5], g = this.data[6], h = this.data[7], i = this.data[8], j = this.data[9], k = this.data[10], l = this.data[11], m = this.data[12], n = this.data[13], o = this.data[14], p = this.data[15], A = other.data[0], B = other.data[1], C = other.data[2], D = other.data[3], E = other.data[4], F = other.data[5], G = other.data[6], H = other.data[7], I = other.data[8], J = other.data[9], K = other.data[10], L = other.data[11], M = other.data[12], N = other.data[13], O = other.data[14], P = other.data[15];
        this.data[0] = A * a + B * e + C * i + D * m;
        this.data[1] = A * b + B * f + C * j + D * n;
        this.data[2] = A * c + B * g + C * k + D * o;
        this.data[3] = A * d + B * h + C * l + D * p;
        this.data[4] = E * a + F * e + G * i + H * m;
        this.data[5] = E * b + F * f + G * j + H * n;
        this.data[6] = E * c + F * g + G * k + H * o;
        this.data[7] = E * d + F * h + G * l + H * p;
        this.data[8] = I * a + J * e + K * i + L * m;
        this.data[9] = I * b + J * f + K * j + L * n;
        this.data[10] = I * c + J * g + K * k + L * o;
        this.data[11] = I * d + J * h + K * l + L * p;
        this.data[12] = M * a + N * e + O * i + P * m;
        this.data[13] = M * b + N * f + O * j + P * n;
        this.data[14] = M * c + N * g + O * k + P * o;
        this.data[15] = M * d + N * h + O * l + P * p;
        return this;
    };
    Matrix4x4.prototype.Scale = function (arg_scale) {
        var output = new Matrix4x4();
        output.data[0] = this.data[0] * arg_scale.x;
        output.data[1] = this.data[1] * arg_scale.x;
        output.data[2] = this.data[2] * arg_scale.x;
        output.data[3] = this.data[3] * arg_scale.x;
        output.data[4] = this.data[4] * arg_scale.y;
        output.data[5] = this.data[5] * arg_scale.y;
        output.data[6] = this.data[6] * arg_scale.y;
        output.data[7] = this.data[7] * arg_scale.y;
        output.data[8] = this.data[8] * arg_scale.z;
        output.data[9] = this.data[9] * arg_scale.z;
        output.data[10] = this.data[10] * arg_scale.z;
        output.data[11] = this.data[11] * arg_scale.z;
        output.data[12] = this.data[12];
        output.data[13] = this.data[13];
        output.data[14] = this.data[14];
        output.data[15] = this.data[15];
        return output;
    };
    Matrix4x4.prototype.Scale_b = function (arg_scale) {
        this.data[0] = this.data[0] * arg_scale.x;
        this.data[1] = this.data[1] * arg_scale.x;
        this.data[2] = this.data[2] * arg_scale.x;
        this.data[3] = this.data[3] * arg_scale.x;
        this.data[4] = this.data[4] * arg_scale.y;
        this.data[5] = this.data[5] * arg_scale.y;
        this.data[6] = this.data[6] * arg_scale.y;
        this.data[7] = this.data[7] * arg_scale.y;
        this.data[8] = this.data[8] * arg_scale.z;
        this.data[9] = this.data[9] * arg_scale.z;
        this.data[10] = this.data[10] * arg_scale.z;
        this.data[11] = this.data[11] * arg_scale.z;
        this.data[12] = this.data[12];
        this.data[13] = this.data[13];
        this.data[14] = this.data[14];
        this.data[15] = this.data[15];
        return this;
    };
    Matrix4x4.prototype.Translate = function (arg_translate) {
        var output = new Matrix4x4();
        output.data[0] = this.data[0];
        output.data[1] = this.data[1];
        output.data[2] = this.data[2];
        output.data[3] = this.data[3];
        output.data[4] = this.data[4];
        output.data[5] = this.data[5];
        output.data[6] = this.data[6];
        output.data[7] = this.data[7];
        output.data[8] = this.data[8];
        output.data[9] = this.data[9];
        output.data[10] = this.data[10];
        output.data[11] = this.data[11];
        output.data[12] = this.data[0] * arg_translate.x + this.data[4] * arg_translate.y + this.data[8] * arg_translate.z + this.data[12];
        output.data[13] = this.data[1] * arg_translate.x + this.data[5] * arg_translate.y + this.data[9] * arg_translate.z + this.data[13];
        output.data[14] = this.data[2] * arg_translate.x + this.data[6] * arg_translate.y + this.data[10] * arg_translate.z + this.data[14];
        output.data[15] = this.data[3] * arg_translate.x + this.data[7] * arg_translate.y + this.data[11] * arg_translate.z + this.data[15];
        return output;
    };
    Matrix4x4.prototype.Translate_b = function (arg_translate) {
        this.data[12] = this.data[0] * arg_translate.x + this.data[4] * arg_translate.y + this.data[8] * arg_translate.z + this.data[12];
        this.data[13] = this.data[1] * arg_translate.x + this.data[5] * arg_translate.y + this.data[9] * arg_translate.z + this.data[13];
        this.data[14] = this.data[2] * arg_translate.x + this.data[6] * arg_translate.y + this.data[10] * arg_translate.z + this.data[14];
        this.data[15] = this.data[3] * arg_translate.x + this.data[7] * arg_translate.y + this.data[11] * arg_translate.z + this.data[15];
        return this;
    };
    Matrix4x4.prototype.Rotate = function (arg_angle, arg_axis) {
        var output = new Matrix4x4();
        var sq = arg_axis.Length();
        if (!sq) {
            return null;
        }
        var a = arg_axis.x, b = arg_axis.y, c = arg_axis.z;
        if (sq != 1) {
            sq = 1 / sq;
            a *= sq;
            b *= sq;
            c *= sq;
        }
        var d = Math.sin(arg_angle), e = Math.cos(arg_angle), f = 1 - e, g = this.data[0], h = this.data[1], i = this.data[2], j = this.data[3], k = this.data[4], l = this.data[5], m = this.data[6], n = this.data[7], o = this.data[8], p = this.data[9], q = this.data[10], r = this.data[11], s = a * a * f + e, t = b * a * f + c * d, u = c * a * f - b * d, v = a * b * f - c * d, w = b * b * f + e, x = c * b * f + a * d, y = a * c * f + b * d, z = b * c * f - a * d, A = c * c * f + e;
        if (arg_angle) {
            if (this.data != output.data) {
                output.data[12] = this.data[12];
                output.data[13] = this.data[13];
                output.data[14] = this.data[14];
                output.data[15] = this.data[15];
            }
        }
        else {
            output.data = this.data;
        }
        output.data[0] = g * s + k * t + o * u;
        output.data[1] = h * s + l * t + p * u;
        output.data[2] = i * s + m * t + q * u;
        output.data[3] = j * s + n * t + r * u;
        output.data[4] = g * v + k * w + o * x;
        output.data[5] = h * v + l * w + p * x;
        output.data[6] = i * v + m * w + q * x;
        output.data[7] = j * v + n * w + r * x;
        output.data[8] = g * y + k * z + o * A;
        output.data[9] = h * y + l * z + p * A;
        output.data[10] = i * y + m * z + q * A;
        output.data[11] = j * y + n * z + r * A;
        return output;
    };
    Matrix4x4.prototype.Rotate_b = function (arg_angle, arg_axis) {
        var sq = arg_axis.Length();
        if (!sq) {
            return null;
        }
        var a = arg_axis.x, b = arg_axis.y, c = arg_axis.z;
        if (sq != 1) {
            sq = 1 / sq;
            a *= sq;
            b *= sq;
            c *= sq;
        }
        var d = Math.sin(arg_angle), e = Math.cos(arg_angle), f = 1 - e, g = this.data[0], h = this.data[1], i = this.data[2], j = this.data[3], k = this.data[4], l = this.data[5], m = this.data[6], n = this.data[7], o = this.data[8], p = this.data[9], q = this.data[10], r = this.data[11], s = a * a * f + e, t = b * a * f + c * d, u = c * a * f - b * d, v = a * b * f - c * d, w = b * b * f + e, x = c * b * f + a * d, y = a * c * f + b * d, z = b * c * f - a * d, A = c * c * f + e;
        this.data[0] = g * s + k * t + o * u;
        this.data[1] = h * s + l * t + p * u;
        this.data[2] = i * s + m * t + q * u;
        this.data[3] = j * s + n * t + r * u;
        this.data[4] = g * v + k * w + o * x;
        this.data[5] = h * v + l * w + p * x;
        this.data[6] = i * v + m * w + q * x;
        this.data[7] = j * v + n * w + r * x;
        this.data[8] = g * y + k * z + o * A;
        this.data[9] = h * y + l * z + p * A;
        this.data[10] = i * y + m * z + q * A;
        this.data[11] = j * y + n * z + r * A;
        return this;
    };
    Matrix4x4.prototype.LookAt = function (arg_eye, arg_centerPos, arg_upAxis) {
        var eyeX = arg_eye.x, eyeY = arg_eye.y, eyeZ = arg_eye.z, upX = arg_upAxis.x, upY = arg_upAxis.y, upZ = arg_upAxis.z, centerX = arg_centerPos.x, centerY = arg_centerPos.y, centerZ = arg_centerPos.z;
        if (eyeX == centerX && eyeY == centerY && eyeZ == centerZ) {
            return this.Identity();
        }
        var x0, x1, x2, y0, y1, y2, z0, z1, z2, l;
        z0 = eyeX - arg_centerPos.x;
        z1 = eyeY - arg_centerPos.y;
        z2 = eyeZ - arg_centerPos.z;
        l = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);
        z0 *= l;
        z1 *= l;
        z2 *= l;
        x0 = upY * z2 - upZ * z1;
        x1 = upZ * z0 - upX * z2;
        x2 = upX * z1 - upY * z0;
        l = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);
        if (!l) {
            x0 = 0;
            x1 = 0;
            x2 = 0;
        }
        else {
            l = 1 / l;
            x0 *= l;
            x1 *= l;
            x2 *= l;
        }
        y0 = z1 * x2 - z2 * x1;
        y1 = z2 * x0 - z0 * x2;
        y2 = z0 * x1 - z1 * x0;
        l = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);
        if (!l) {
            y0 = 0;
            y1 = 0;
            y2 = 0;
        }
        else {
            l = 1 / l;
            y0 *= l;
            y1 *= l;
            y2 *= l;
        }
        this.data[0] = x0;
        this.data[1] = y0;
        this.data[2] = z0;
        this.data[3] = 0;
        this.data[4] = x1;
        this.data[5] = y1;
        this.data[6] = z1;
        this.data[7] = 0;
        this.data[8] = x2;
        this.data[9] = y2;
        this.data[10] = z2;
        this.data[11] = 0;
        this.data[12] = -(x0 * eyeX + x1 * eyeY + x2 * eyeZ);
        this.data[13] = -(y0 * eyeX + y1 * eyeY + y2 * eyeZ);
        this.data[14] = -(z0 * eyeX + z1 * eyeY + z2 * eyeZ);
        this.data[15] = 1;
        return this;
    };
    Matrix4x4.prototype.Perspective = function (fovy, aspect, near, far) {
        var t = near * Math.tan(fovy * Math.PI / 360);
        var r = t * aspect;
        var a = r * 2, b = t * 2, c = far - near;
        this.data[0] = near * 2 / a;
        this.data[1] = 0;
        this.data[2] = 0;
        this.data[3] = 0;
        this.data[4] = 0;
        this.data[5] = near * 2 / b;
        this.data[6] = 0;
        this.data[7] = 0;
        this.data[8] = 0;
        this.data[9] = 0;
        this.data[10] = -(far + near) / c;
        this.data[11] = -1;
        this.data[12] = 0;
        this.data[13] = 0;
        this.data[14] = -(far * near * 2) / c;
        this.data[15] = 0;
        return this;
    };
    Matrix4x4.prototype.Ortho = function (left, right, top, bottom, near, far) {
        var h = (right - left);
        var v = (top - bottom);
        var d = (far - near);
        this.data[0] = 2 / h;
        this.data[1] = 0;
        this.data[2] = 0;
        this.data[3] = 0;
        this.data[4] = 0;
        this.data[5] = 2 / v;
        this.data[6] = 0;
        this.data[7] = 0;
        this.data[8] = 0;
        this.data[9] = 0;
        this.data[10] = -2 / d;
        this.data[11] = 0;
        this.data[12] = -(left + right) / h;
        this.data[13] = -(top + bottom) / v;
        this.data[14] = -(far + near) / d;
        this.data[15] = 1;
        return this;
    };
    Matrix4x4.prototype.Transpose = function () {
        var output = new Matrix4x4();
        output.data[0] = this.data[0];
        output.data[1] = this.data[4];
        output.data[2] = this.data[8];
        output.data[3] = this.data[12];
        output.data[4] = this.data[1];
        output.data[5] = this.data[5];
        output.data[6] = this.data[9];
        output.data[7] = this.data[13];
        output.data[8] = this.data[2];
        output.data[9] = this.data[6];
        output.data[10] = this.data[10];
        output.data[11] = this.data[14];
        output.data[12] = this.data[3];
        output.data[13] = this.data[7];
        output.data[14] = this.data[11];
        output.data[15] = this.data[15];
        return output;
    };
    Matrix4x4.prototype.Transpose_b = function () {
        var temp = new Matrix4x4();
        temp.data[0] = this.data[0];
        temp.data[1] = this.data[4];
        temp.data[2] = this.data[8];
        temp.data[3] = this.data[12];
        temp.data[4] = this.data[1];
        temp.data[5] = this.data[5];
        temp.data[6] = this.data[9];
        temp.data[7] = this.data[13];
        temp.data[8] = this.data[2];
        temp.data[9] = this.data[6];
        temp.data[10] = this.data[10];
        temp.data[11] = this.data[14];
        temp.data[12] = this.data[3];
        temp.data[13] = this.data[7];
        temp.data[14] = this.data[11];
        temp.data[15] = this.data[15];
        this.data = temp.data;
        return this;
    };
    Matrix4x4.prototype.Inverse = function () {
        var output = new Matrix4x4();
        var a = this.data[0], b = this.data[1], c = this.data[2], d = this.data[3], e = this.data[4], f = this.data[5], g = this.data[6], h = this.data[7], i = this.data[8], j = this.data[9], k = this.data[10], l = this.data[11], m = this.data[12], n = this.data[13], o = this.data[14], p = this.data[15], q = a * f - b * e, r = a * g - c * e, s = a * h - d * e, t = b * g - c * f, u = b * h - d * f, v = c * h - d * g, w = i * n - j * m, x = i * o - k * m, y = i * p - l * m, z = j * o - k * n, A = j * p - l * n, B = k * p - l * o, ivd = 1 / (q * B - r * A + s * z + t * y - u * x + v * w);
        output.data[0] = (f * B - g * A + h * z) * ivd;
        output.data[1] = (-b * B + c * A - d * z) * ivd;
        output.data[2] = (n * v - o * u + p * t) * ivd;
        output.data[3] = (-j * v + k * u - l * t) * ivd;
        output.data[4] = (-e * B + g * y - h * x) * ivd;
        output.data[5] = (a * B - c * y + d * x) * ivd;
        output.data[6] = (-m * v + o * s - p * r) * ivd;
        output.data[7] = (i * v - k * s + l * r) * ivd;
        output.data[8] = (e * A - f * y + h * w) * ivd;
        output.data[9] = (-a * A + b * y - d * w) * ivd;
        output.data[10] = (m * u - n * s + p * q) * ivd;
        output.data[11] = (-i * u + j * s - l * q) * ivd;
        output.data[12] = (-e * z + f * x - g * w) * ivd;
        output.data[13] = (a * z - b * x + c * w) * ivd;
        output.data[14] = (-m * t + n * r - o * q) * ivd;
        output.data[15] = (i * t - j * r + k * q) * ivd;
        return output;
    };
    Matrix4x4.prototype.Inverse_b = function () {
        var a = this.data[0], b = this.data[1], c = this.data[2], d = this.data[3], e = this.data[4], f = this.data[5], g = this.data[6], h = this.data[7], i = this.data[8], j = this.data[9], k = this.data[10], l = this.data[11], m = this.data[12], n = this.data[13], o = this.data[14], p = this.data[15], q = a * f - b * e, r = a * g - c * e, s = a * h - d * e, t = b * g - c * f, u = b * h - d * f, v = c * h - d * g, w = i * n - j * m, x = i * o - k * m, y = i * p - l * m, z = j * o - k * n, A = j * p - l * n, B = k * p - l * o, ivd = 1 / (q * B - r * A + s * z + t * y - u * x + v * w);
        this.data[0] = (f * B - g * A + h * z) * ivd;
        this.data[1] = (-b * B + c * A - d * z) * ivd;
        this.data[2] = (n * v - o * u + p * t) * ivd;
        this.data[3] = (-j * v + k * u - l * t) * ivd;
        this.data[4] = (-e * B + g * y - h * x) * ivd;
        this.data[5] = (a * B - c * y + d * x) * ivd;
        this.data[6] = (-m * v + o * s - p * r) * ivd;
        this.data[7] = (i * v - k * s + l * r) * ivd;
        this.data[8] = (e * A - f * y + h * w) * ivd;
        this.data[9] = (-a * A + b * y - d * w) * ivd;
        this.data[10] = (m * u - n * s + p * q) * ivd;
        this.data[11] = (-i * u + j * s - l * q) * ivd;
        this.data[12] = (-e * z + f * x - g * w) * ivd;
        this.data[13] = (a * z - b * x + c * w) * ivd;
        this.data[14] = (-m * t + n * r - o * q) * ivd;
        this.data[15] = (i * t - j * r + k * q) * ivd;
        return this;
    };
    Matrix4x4.prototype.ToQuaternion = function () {
        elem[0] = this.data[0] - this.data[5] - this.data[10] + 1.0;
        elem[1] = -this.data[0] + this.data[5] - this.data[10] + 1.0;
        elem[2] = -this.data[0] - this.data[5] + this.data[10] + 1.0;
        elem[3] = this.data[0] + this.data[5] + this.data[10] + 1.0;
        var biggestIndex = 0;
        for (var i = 1; i < 4; i++) {
            if (elem[i] > elem[biggestIndex])
                biggestIndex = i;
        }
        var outQuat = new Quat_1.default();
        var v = Math.sqrt(elem[biggestIndex]) * 0.5;
        outQuat.data[biggestIndex] = v;
        var mult = 0.25 / v;
        switch (biggestIndex) {
            case 0: // x
                outQuat.data[1] = (this.data[1] + this.data[4]) * mult;
                outQuat.data[2] = (this.data[2] + this.data[8]) * mult;
                outQuat.data[3] = (this.data[9] - this.data[6]) * mult;
                break;
            case 1: // y
                outQuat.data[0] = (this.data[1] + this.data[4]) * mult;
                outQuat.data[2] = (this.data[9] + this.data[6]) * mult;
                outQuat.data[3] = (this.data[2] - this.data[8]) * mult;
                break;
            case 2: // z
                outQuat.data[0] = (this.data[2] + this.data[8]) * mult;
                outQuat.data[1] = (this.data[9] + this.data[6]) * mult;
                outQuat.data[3] = (this.data[4] - this.data[1]) * mult;
                break;
            case 3: // w
                outQuat.data[0] = (this.data[9] - this.data[6]) * mult;
                outQuat.data[1] = (this.data[2] - this.data[8]) * mult;
                outQuat.data[2] = (this.data[4] - this.data[1]) * mult;
                break;
        }
        return outQuat;
    };
    return Matrix4x4;
}());
exports.default = Matrix4x4;


/***/ }),

/***/ "./WebGl/Math/Quat.ts":
/*!****************************!*\
  !*** ./WebGl/Math/Quat.ts ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Matrix_1 = __importDefault(__webpack_require__(/*! ./Matrix */ "./WebGl/Math/Matrix.ts"));
var Vector3_1 = __importDefault(__webpack_require__(/*! ./Vector3 */ "./WebGl/Math/Vector3.ts"));
var Quaternion = /** @class */ (function () {
    function Quaternion() {
        this.data = new Float32Array(4);
    }
    Quaternion.prototype.Identity = function () {
        this.data[0] = 0;
        this.data[1] = 0;
        this.data[2] = 0;
        this.data[3] = 1;
        return this;
    };
    Quaternion.prototype.Inverse = function () {
        var output = new Quaternion();
        output.data[0] = -this.data[0];
        output.data[1] = -this.data[1];
        output.data[2] = -this.data[2];
        output.data[3] = this.data[3];
        return output;
    };
    Quaternion.prototype.Inverse_b = function () {
        this.data[0] = -this.data[0];
        this.data[1] = -this.data[1];
        this.data[2] = -this.data[2];
        this.data[3] = this.data[3];
        return this;
    };
    Quaternion.prototype.Normalize = function () {
        var output = new Quaternion();
        output.data[0] = this.data[0];
        output.data[1] = this.data[1];
        output.data[2] = this.data[2];
        output.data[3] = this.data[3];
        var x = output.data[0], y = output.data[1], z = output.data[2], w = output.data[3];
        var l = Math.sqrt(x * x + y * y + z * z + w * w);
        if (l === 0) {
            output.data[0] = 0;
            output.data[1] = 0;
            output.data[2] = 0;
            output.data[3] = 0;
        }
        else {
            l = 1 / l;
            output.data[0] = x * l;
            output.data[1] = y * l;
            output.data[2] = z * l;
            output.data[3] = w * l;
        }
        return output;
    };
    Quaternion.prototype.Normalize_b = function () {
        var l = Math.sqrt(this.data[0] * this.data[0] + this.data[1] * this.data[1] + this.data[2] * this.data[2] + this.data[3] * this.data[3]);
        if (l === 0) {
            this.data[0] = 0;
            this.data[1] = 0;
            this.data[2] = 0;
            this.data[3] = 0;
        }
        else {
            l = 1 / l;
            this.data[0] = this.data[0] * l;
            this.data[1] = this.data[1] * l;
            this.data[2] = this.data[2] * l;
            this.data[3] = this.data[3] * l;
        }
        return this;
    };
    Quaternion.prototype.Multiply = function (arg_quat) {
        var output = new Quaternion();
        var ax = this.data[0], ay = this.data[1], az = this.data[2], aw = this.data[3];
        var bx = arg_quat.data[0], by = arg_quat.data[1], bz = arg_quat.data[2], bw = arg_quat.data[3];
        output.data[0] = ax * bw + aw * bx + ay * bz - az * by;
        output.data[1] = ay * bw + aw * by + az * bx - ax * bz;
        output.data[2] = az * bw + aw * bz + ax * by - ay * bx;
        output.data[3] = aw * bw - ax * bx - ay * by - az * bz;
        return output;
    };
    Quaternion.prototype.Multiply_b = function (arg_quat) {
        var ax = this.data[0], ay = this.data[1], az = this.data[2], aw = this.data[3];
        var bx = arg_quat.data[0], by = arg_quat.data[1], bz = arg_quat.data[2], bw = arg_quat.data[3];
        this.data[0] = ax * bw + aw * bx + ay * bz - az * by;
        this.data[1] = ay * bw + aw * by + az * bx - ax * bz;
        this.data[2] = az * bw + aw * bz + ax * by - ay * bx;
        this.data[3] = aw * bw - ax * bx - ay * by - az * bz;
        return this;
    };
    Quaternion.prototype.Rotate = function (arg_angle, arg_axis) {
        var sq = arg_axis.Length();
        if (!sq) {
            return null;
        }
        var a = arg_axis.x, b = arg_axis.y, c = arg_axis.z;
        if (sq != 1) {
            sq = 1 / sq;
            a *= sq;
            b *= sq;
            c *= sq;
        }
        var s = Math.sin(arg_angle * 0.5);
        this.data[0] = a * s;
        this.data[1] = b * s;
        this.data[2] = c * s;
        this.data[3] = Math.cos(arg_angle * 0.5);
        return this;
    };
    Quaternion.prototype.ToVector3 = function (arg_vec) {
        var output = new Vector3_1.default(0, 0, 0);
        var qp = new Quaternion();
        var qq = new Quaternion();
        var qr = this.Inverse();
        qp.data[0] = arg_vec.x;
        qp.data[1] = arg_vec.y;
        qp.data[2] = arg_vec.z;
        qq = qr.Multiply(qp);
        qr = qq.Multiply(this);
        output.data[0] = qr.data[0];
        output.data[1] = qr.data[1];
        output.data[2] = qr.data[2];
        return output;
    };
    Quaternion.prototype.ToMatrix4x4 = function () {
        var output = new Matrix_1.default();
        var x = this.data[0], y = this.data[1], z = this.data[2], w = this.data[3];
        var x2 = x + x, y2 = y + y, z2 = z + z;
        var xx = x * x2, xy = x * y2, xz = x * z2;
        var yy = y * y2, yz = y * z2, zz = z * z2;
        var wx = w * x2, wy = w * y2, wz = w * z2;
        output.data[0] = 1 - (yy + zz);
        output.data[1] = xy - wz;
        output.data[2] = xz + wy;
        output.data[3] = 0;
        output.data[4] = xy + wz;
        output.data[5] = 1 - (xx + zz);
        output.data[6] = yz - wx;
        output.data[7] = 0;
        output.data[8] = xz - wy;
        output.data[9] = yz + wx;
        output.data[10] = 1 - (xx + yy);
        output.data[11] = 0;
        output.data[12] = 0;
        output.data[13] = 0;
        output.data[14] = 0;
        output.data[15] = 1;
        return output;
    };
    Quaternion.prototype.SphereLerp = function (arg_quat, time) {
        var output = new Quaternion();
        var ht = this.data[0] * arg_quat.data[0] + this.data[1] * arg_quat.data[1] + this.data[2] * arg_quat.data[2] + this.data[3] * arg_quat.data[3];
        var hs = 1.0 - ht * ht;
        if (hs <= 0.0) {
            output.data[0] = this.data[0];
            output.data[1] = this.data[1];
            output.data[2] = this.data[2];
            output.data[3] = this.data[3];
        }
        else {
            hs = Math.sqrt(hs);
            if (Math.abs(hs) < 0.0001) {
                output.data[0] = (this.data[0] * 0.5 + arg_quat.data[0] * 0.5);
                output.data[1] = (this.data[1] * 0.5 + arg_quat.data[1] * 0.5);
                output.data[2] = (this.data[2] * 0.5 + arg_quat.data[2] * 0.5);
                output.data[3] = (this.data[3] * 0.5 + arg_quat.data[3] * 0.5);
            }
            else {
                var ph = Math.acos(ht);
                var pt = ph * time;
                var t0 = Math.sin(ph - pt) / hs;
                var t1 = Math.sin(pt) / hs;
                output.data[0] = this.data[0] * t0 + arg_quat.data[0] * t1;
                output.data[1] = this.data[1] * t0 + arg_quat.data[1] * t1;
                output.data[2] = this.data[2] * t0 + arg_quat.data[2] * t1;
                output.data[3] = this.data[3] * t0 + arg_quat.data[3] * t1;
            }
        }
        return output;
    };
    Quaternion.prototype.SphereLerp_b = function (arg_quat, time) {
        var ht = this.data[0] * arg_quat.data[0] + this.data[1] * arg_quat.data[1] + this.data[2] * arg_quat.data[2] + this.data[3] * arg_quat.data[3];
        var hs = 1.0 - ht * ht;
        if (hs <= 0.0) {
            return this;
        }
        else {
            hs = Math.sqrt(hs);
            if (Math.abs(hs) < 0.0001) {
                this.data[0] = (this.data[0] * 0.5 + arg_quat.data[0] * 0.5);
                this.data[1] = (this.data[1] * 0.5 + arg_quat.data[1] * 0.5);
                this.data[2] = (this.data[2] * 0.5 + arg_quat.data[2] * 0.5);
                this.data[3] = (this.data[3] * 0.5 + arg_quat.data[3] * 0.5);
            }
            else {
                var ph = Math.acos(ht);
                var pt = ph * time;
                var t0 = Math.sin(ph - pt) / hs;
                var t1 = Math.sin(pt) / hs;
                this.data[0] = this.data[0] * t0 + arg_quat.data[0] * t1;
                this.data[1] = this.data[1] * t0 + arg_quat.data[1] * t1;
                this.data[2] = this.data[2] * t0 + arg_quat.data[2] * t1;
                this.data[3] = this.data[3] * t0 + arg_quat.data[3] * t1;
            }
        }
        return this;
    };
    return Quaternion;
}());
exports.default = Quaternion;


/***/ }),

/***/ "./WebGl/Math/Vector2.ts":
/*!*******************************!*\
  !*** ./WebGl/Math/Vector2.ts ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Vector2 = /** @class */ (function () {
    function Vector2(x, y) {
        this.data = new Float32Array(2);
        this.data[0] = x;
        this.data[1] = y;
    }
    Object.defineProperty(Vector2.prototype, "x", {
        get: function () {
            return this.data[0];
        },
        set: function (arg_v) {
            this.data[0] = arg_v;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Vector2.prototype, "y", {
        get: function () {
            return this.data[1];
        },
        set: function (arg_v) {
            this.data[1] = arg_v;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Vector2.prototype, "xy", {
        get: function () {
            return this.data;
        },
        enumerable: false,
        configurable: true
    });
    Vector2.prototype.Add = function (arg_other) {
        var output = new Vector2(0, 0);
        output.data[0] = this.data[0] + arg_other.data[0];
        output.data[1] = this.data[1] + arg_other.data[1];
        return output;
    };
    Vector2.prototype.Add_b = function (arg_other) {
        this.data[0] = this.data[0] + arg_other.data[0];
        this.data[1] = this.data[1] + arg_other.data[1];
        return this;
    };
    Vector2.prototype.Sub = function (arg_other) {
        var output = new Vector2(0, 0);
        output.data[0] = this.data[0] - arg_other.data[0];
        output.data[1] = this.data[1] - arg_other.data[1];
        return output;
    };
    Vector2.prototype.Sub_b = function (arg_other) {
        this.data[0] = this.data[0] - arg_other.data[0];
        this.data[1] = this.data[1] - arg_other.data[1];
        return this;
    };
    Vector2.prototype.Multiply = function (arg_scalar) {
        var output = new Vector2(0, 0);
        output.data[0] = this.data[0] * arg_scalar;
        output.data[1] = this.data[1] * arg_scalar;
        return output;
    };
    Vector2.prototype.Multiply_b = function (arg_scalar) {
        this.data[0] *= arg_scalar;
        this.data[1] *= arg_scalar;
        return this;
    };
    Vector2.prototype.Div = function (arg_scalar) {
        var output = new Vector2(0, 0);
        output.data[0] = this.data[0] / arg_scalar;
        output.data[1] = this.data[1] / arg_scalar;
        return output;
    };
    Vector2.prototype.Div_b = function (arg_scalar) {
        this.data[0] /= arg_scalar;
        this.data[1] /= arg_scalar;
        return this;
    };
    Vector2.prototype.Length = function () {
        return Math.sqrt(this.data[0] * this.data[0] + this.data[1] * this.data[1]);
    };
    Vector2.prototype.LengthSqr = function () {
        return this.data[0] * this.data[0] + this.data[1] * this.data[1];
    };
    Vector2.prototype.Dot = function (arg_other) {
        return this.data[0] * arg_other.data[0] + this.data[1] * arg_other.data[1];
    };
    Vector2.prototype.Cross = function (arg_other) {
        return this.x * arg_other.y - this.y * arg_other.x;
    };
    Vector2.prototype.Normalize = function () {
        var output = new Vector2(this.data[0], this.data[1]);
        var length = this.Length();
        output.Div_b(length);
        return output;
    };
    Vector2.prototype.Normalize_b = function () {
        var length = this.Length();
        this.Div_b(length);
        return this;
    };
    return Vector2;
}());
exports.default = Vector2;


/***/ }),

/***/ "./WebGl/Math/Vector3.ts":
/*!*******************************!*\
  !*** ./WebGl/Math/Vector3.ts ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Vector3 = /** @class */ (function () {
    function Vector3(x, y, z) {
        this.data = new Float32Array(3);
        this.data[0] = x;
        this.data[1] = y;
        this.data[2] = z;
    }
    Object.defineProperty(Vector3.prototype, "x", {
        get: function () {
            return this.data[0];
        },
        set: function (arg_other) {
            this.data[0] = arg_other;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Vector3.prototype, "y", {
        get: function () {
            return this.data[1];
        },
        set: function (arg_other) {
            this.data[1] = arg_other;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Vector3.prototype, "z", {
        get: function () {
            return this.data[2];
        },
        set: function (arg_other) {
            this.data[2] = arg_other;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Vector3.prototype, "xyz", {
        get: function () {
            return this.data;
        },
        enumerable: false,
        configurable: true
    });
    Vector3.prototype.Add = function (arg_other) {
        var output = new Vector3(0, 0, 0);
        output.data[0] = this.data[0] + arg_other.data[0];
        output.data[1] = this.data[1] + arg_other.data[1];
        output.data[2] = this.data[2] + arg_other.data[2];
        return output;
    };
    Vector3.prototype.Add_b = function (arg_other) {
        this.data[0] = this.data[0] + arg_other.data[0];
        this.data[1] = this.data[1] + arg_other.data[1];
        this.data[2] = this.data[2] + arg_other.data[2];
        return this;
    };
    Vector3.prototype.AddX_b = function (value) {
        this.data[0] += value;
        return this;
    };
    Vector3.prototype.AddY = function (value) {
        var output = this.Clone();
        output.data[1] += value;
        return output;
    };
    Vector3.prototype.AddY_b = function (value) {
        this.data[1] += value;
        return this;
    };
    Vector3.prototype.AddZ_b = function (value) {
        this.data[2] += value;
        return this;
    };
    Vector3.prototype.Sub = function (arg_other) {
        var output = new Vector3(0, 0, 0);
        output.data[0] = this.data[0] - arg_other.data[0];
        output.data[1] = this.data[1] - arg_other.data[1];
        output.data[2] = this.data[2] - arg_other.data[2];
        return output;
    };
    Vector3.prototype.Sub_b = function (arg_other) {
        this.data[0] = this.data[0] - arg_other.data[0];
        this.data[1] = this.data[1] - arg_other.data[1];
        this.data[2] = this.data[2] - arg_other.data[2];
        return this;
    };
    Vector3.prototype.Multiply = function (arg_scalar) {
        var output = new Vector3(0, 0, 0);
        output.data[0] = this.data[0] * arg_scalar;
        output.data[1] = this.data[1] * arg_scalar;
        output.data[2] = this.data[2] * arg_scalar;
        return output;
    };
    Vector3.prototype.Multiply_Vec3 = function (arg_vector) {
        var output = new Vector3(0, 0, 0);
        output.data[0] = this.data[0] * arg_vector.data[0];
        output.data[1] = this.data[1] * arg_vector.data[1];
        output.data[2] = this.data[2] * arg_vector.data[2];
        return output;
    };
    Vector3.prototype.Multiply_b = function (arg_scalar) {
        this.data[0] *= arg_scalar;
        this.data[1] *= arg_scalar;
        this.data[2] *= arg_scalar;
        return this;
    };
    Vector3.prototype.Multiply_Vec3_b = function (arg_vector) {
        this.data[0] = this.data[0] * arg_vector.data[0];
        this.data[1] = this.data[1] * arg_vector.data[1];
        this.data[2] = this.data[2] * arg_vector.data[2];
        return this;
    };
    Vector3.prototype.Multiply_Matrix = function (arg_matrix) {
        var output = new Vector3(0, 0, 0);
        // output.data[0]=this.data[0]*arg_matrix.data[0]+this.data[0]*arg_matrix.data[4]+this.data[0]*arg_matrix.data[8]+this.data[0]*arg_matrix.data[12];
        // output.data[1]=this.data[1]*arg_matrix.data[1]+this.data[1]*arg_matrix.data[5]+this.data[1]*arg_matrix.data[9]+this.data[1]*arg_matrix.data[13];
        // output.data[2]=this.data[2]*arg_matrix.data[2]+this.data[2]*arg_matrix.data[6]+this.data[2]*arg_matrix.data[10]+this.data[2]*arg_matrix.data[14];
        output.data[0] = this.data[0] * arg_matrix.data[0] + this.data[1] * arg_matrix.data[4] + this.data[2] * arg_matrix.data[8] + arg_matrix.data[12];
        output.data[1] = this.data[0] * arg_matrix.data[1] + this.data[1] * arg_matrix.data[5] + this.data[2] * arg_matrix.data[9] + arg_matrix.data[13];
        output.data[2] = this.data[0] * arg_matrix.data[2] + this.data[1] * arg_matrix.data[6] + this.data[2] * arg_matrix.data[10] + arg_matrix.data[14];
        return output;
    };
    Vector3.prototype.Div = function (arg_scalar) {
        var output = new Vector3(0, 0, 0);
        output.data[0] = this.data[0] / arg_scalar;
        output.data[1] = this.data[1] / arg_scalar;
        output.data[2] = this.data[2] / arg_scalar;
        return output;
    };
    Vector3.prototype.Div_b = function (arg_scalar) {
        this.data[0] /= arg_scalar;
        this.data[1] /= arg_scalar;
        this.data[2] /= arg_scalar;
        return this;
    };
    Vector3.prototype.Length = function () {
        return Math.sqrt(this.data[0] * this.data[0] + this.data[1] * this.data[1] + this.data[2] * this.data[2]);
    };
    Vector3.prototype.LengthSqr = function () {
        return this.data[0] * this.data[0] + this.data[1] * this.data[1] + this.data[2] * this.data[2];
    };
    Vector3.prototype.Dot = function (arg_other) {
        return this.data[0] * arg_other.data[0] + this.data[1] * arg_other.data[1] + this.data[2] * arg_other.data[2];
    };
    Vector3.prototype.Cross = function (arg_other) {
        var output = new Vector3(0, 0, 0);
        output.data[0] = this.data[1] * arg_other.data[2] - this.data[2] * arg_other.data[1];
        output.data[1] = this.data[2] * arg_other.data[0] - this.data[0] * arg_other.data[2];
        output.data[2] = this.data[0] * arg_other.data[1] - this.data[1] * arg_other.data[0];
        return output;
    };
    Vector3.prototype.Normalize = function () {
        var output = new Vector3(0, 0, 0);
        output.data[0] = this.data[0];
        output.data[1] = this.data[1];
        output.data[2] = this.data[2];
        var length = this.Length();
        output.Div_b(length);
        return output;
    };
    Vector3.prototype.Normalize_b = function () {
        var length = this.Length();
        this.Div_b(length);
        return this;
    };
    Vector3.prototype.Clone = function () {
        return new Vector3(this.data[0], this.data[1], this.data[2]);
    };
    Vector3.xAxis = new Vector3(1, 0, 0);
    Vector3.yAxis = new Vector3(0, 1, 0);
    Vector3.zAxis = new Vector3(0, 0, 1);
    return Vector3;
}());
exports.default = Vector3;


/***/ }),

/***/ "./WebGl/Math/Vector4.ts":
/*!*******************************!*\
  !*** ./WebGl/Math/Vector4.ts ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Vector4 = /** @class */ (function () {
    function Vector4(x, y, z, w) {
        this.data = new Float32Array(4);
        this.data[0] = x;
        this.data[1] = y;
        this.data[2] = z;
        this.data[3] = w;
    }
    Object.defineProperty(Vector4.prototype, "x", {
        get: function () {
            return this.data[0];
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Vector4.prototype, "y", {
        get: function () {
            return this.data[1];
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Vector4.prototype, "z", {
        get: function () {
            return this.data[2];
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Vector4.prototype, "w", {
        get: function () {
            return this.data[3];
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Vector4.prototype, "xyzw", {
        get: function () {
            return this.data;
        },
        enumerable: false,
        configurable: true
    });
    Vector4.prototype.Set = function (x, y, z, w) {
        this.data[0] = x;
        this.data[1] = y;
        this.data[2] = z;
        this.data[3] = w;
    };
    Vector4.prototype.Add = function (arg_other) {
        var output = new Vector4(0, 0, 0, 0);
        output.data[0] = this.data[0] + arg_other.data[0];
        output.data[1] = this.data[1] + arg_other.data[1];
        output.data[2] = this.data[2] + arg_other.data[2];
        output.data[3] = this.data[3] + arg_other.data[3];
        return output;
    };
    Vector4.prototype.Add_b = function (arg_other) {
        this.data[0] = this.data[0] + arg_other.data[0];
        this.data[1] = this.data[1] + arg_other.data[1];
        this.data[2] = this.data[2] + arg_other.data[2];
        this.data[3] = this.data[3] + arg_other.data[3];
        return this;
    };
    Vector4.prototype.Sub = function (arg_other) {
        var output = new Vector4(0, 0, 0, 0);
        output.data[0] = this.data[0] - arg_other.data[0];
        output.data[1] = this.data[1] - arg_other.data[1];
        output.data[2] = this.data[2] - arg_other.data[2];
        output.data[3] = this.data[3] - arg_other.data[3];
        return output;
    };
    Vector4.prototype.Sub_b = function (arg_other) {
        this.data[0] = this.data[0] - arg_other.data[0];
        this.data[1] = this.data[1] - arg_other.data[1];
        this.data[2] = this.data[2] - arg_other.data[2];
        this.data[3] = this.data[3] - arg_other.data[3];
        return this;
    };
    Vector4.prototype.Multiply = function (arg_scalar) {
        var output = new Vector4(0, 0, 0, 0);
        output.data[0] = this.data[0] * arg_scalar;
        output.data[1] = this.data[1] * arg_scalar;
        output.data[2] = this.data[2] * arg_scalar;
        output.data[3] = this.data[3] * arg_scalar;
        return output;
    };
    Vector4.prototype.Multiply_b = function (arg_scalar) {
        this.data[0] *= arg_scalar;
        this.data[1] *= arg_scalar;
        this.data[2] *= arg_scalar;
        this.data[3] *= arg_scalar;
        return this;
    };
    Vector4.prototype.Div = function (arg_scalar) {
        var output = new Vector4(0, 0, 0, 0);
        output.data[0] = this.data[0] / arg_scalar;
        output.data[1] = this.data[1] / arg_scalar;
        output.data[2] = this.data[2] / arg_scalar;
        output.data[3] = this.data[3] / arg_scalar;
        return output;
    };
    Vector4.prototype.Div_b = function (arg_scalar) {
        this.data[0] /= arg_scalar;
        this.data[1] /= arg_scalar;
        this.data[2] /= arg_scalar;
        this.data[3] /= arg_scalar;
        return this;
    };
    Vector4.prototype.Length = function () {
        return Math.sqrt(this.data[0] * this.data[0] + this.data[1] * this.data[1] + this.data[2] * this.data[2] + this.data[3] * this.data[3]);
    };
    Vector4.prototype.LengthSqr = function () {
        return this.data[0] * this.data[0] + this.data[1] * this.data[1] + this.data[2] * this.data[2] + this.data[3] * this.data[3];
    };
    Vector4.prototype.Dot = function (arg_other) {
        return this.data[0] * arg_other.data[0] + this.data[1] * arg_other.data[1] + this.data[2] * arg_other.data[2] + this.data[3] * arg_other.data[3];
    };
    Vector4.prototype.Normalize = function () {
        var output = new Vector4(this.data[0], this.data[1], this.data[2], this.data[3]);
        var length = this.Length();
        output.Div_b(length);
        return output;
    };
    Vector4.prototype.Normalize_b = function () {
        var length = this.Length();
        this.Div_b(length);
        return this;
    };
    return Vector4;
}());
exports.default = Vector4;


/***/ }),

/***/ "./WebGl/Parts/Collision/CollisionManager.ts":
/*!***************************************************!*\
  !*** ./WebGl/Parts/Collision/CollisionManager.ts ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Vector3_1 = __importDefault(__webpack_require__(/*! ../../Math/Vector3 */ "./WebGl/Math/Vector3.ts"));
var Octree_1 = __importDefault(__webpack_require__(/*! ./Octree */ "./WebGl/Parts/Collision/Octree.ts"));
var Layer = /** @class */ (function () {
    function Layer() {
        this.list_objStack = new Array();
        this.vec_collisionObjects = new Array();
        this.octree = new Octree_1.default(6, new Vector3_1.default(-20, -20, -20), new Vector3_1.default(20, 20, 20));
    }
    Layer.prototype.Regist = function (arg_registObj) {
        return this.octree.RegistCollisionObj(arg_registObj);
    };
    Layer.prototype.UnRegist = function (arg_ID) {
        this.octree.UnRegistCollisionObj(arg_ID);
    };
    Layer.prototype.Check = function () {
        this.octree.Update();
        this.vec_collisionObjects.length = 0;
        this.list_objStack.length = 0;
        this.octree.CreateCollisionObjectList(0, this.vec_collisionObjects, this.list_objStack);
        var length = this.vec_collisionObjects.length;
        for (var i = 0; i < length; i += 2) {
            this.vec_collisionObjects[i].HitCheck(this.vec_collisionObjects[i + 1]);
        }
    };
    Layer.prototype.Release = function () {
        this.octree.Release();
    };
    return Layer;
}());
var CollisionManager = /** @class */ (function () {
    function CollisionManager() {
        this.layers = new Array();
        this.layers.push(new Layer());
    }
    CollisionManager.prototype.Regist = function (arg_registObj, layer) {
        if (this.layers.length <= layer) {
            layer = 0;
        }
        return this.layers[layer].Regist(arg_registObj);
    };
    CollisionManager.prototype.UnRegist = function (arg_ID, layer) {
        if (this.layers.length <= layer) {
            layer = 0;
        }
        this.layers[layer].UnRegist(arg_ID);
    };
    CollisionManager.prototype.AddLayer = function () {
        this.layers.push(new Layer());
    };
    CollisionManager.prototype.Check = function () {
        this.layers.forEach(function (layer) { return layer.Check(); });
    };
    CollisionManager.prototype.Release = function () {
        this.layers.forEach(function (layer) { return layer.Release(); });
        this.layers.length = 0;
    };
    return CollisionManager;
}());
exports.default = CollisionManager;


/***/ }),

/***/ "./WebGl/Parts/Collision/CollisionObject.ts":
/*!**************************************************!*\
  !*** ./WebGl/Parts/Collision/CollisionObject.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var CollisionObject = /** @class */ (function () {
    function CollisionObject(arg_obj, arg_prim) {
        this.p_cell = null;
        this.object = arg_obj;
        this.collisionPrimitive = arg_prim;
    }
    CollisionObject.prototype.Remove = function () {
        if (this.p_cell == null)
            return false;
        if (this.shp_next) {
            this.shp_next.shp_bef = this.shp_bef;
        }
        if (this.shp_bef) {
            this.shp_bef.shp_next = this.shp_next;
        }
        this.p_cell.OnRemove(this);
        this.shp_next = null;
        this.shp_bef = null;
        this.p_cell = null;
        return true;
    };
    CollisionObject.prototype.RegistCell = function (arg_pCell) {
        this.p_cell = arg_pCell;
    };
    CollisionObject.prototype.GetBefObj = function () {
        return this.shp_bef;
    };
    CollisionObject.prototype.GetNextObj = function () {
        return this.shp_next;
    };
    CollisionObject.prototype.Update = function () {
        this.collisionPrimitive.Update();
    };
    CollisionObject.prototype.HitCheck = function (arg_collisionObject) {
        if (arg_collisionObject.collisionPrimitive.IsHit(this.collisionPrimitive)) {
            this.object.Hit(arg_collisionObject.object);
            arg_collisionObject.object.Hit(this.object);
        }
    };
    return CollisionObject;
}());
exports.default = CollisionObject;


/***/ }),

/***/ "./WebGl/Parts/Collision/OctCell.ts":
/*!******************************************!*\
  !*** ./WebGl/Parts/Collision/OctCell.ts ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var OctCell = /** @class */ (function () {
    function OctCell() {
    }
    OctCell.prototype.Release = function () {
        while (this.shp_head != null && this.shp_head.shp_next != null) {
            this.shp_head = this.shp_head.shp_next;
            this.shp_head.shp_bef = null;
        }
        this.shp_head = null;
    };
    OctCell.prototype.RegistObject = function (arg_obj) {
        if (arg_obj.p_cell == this || (arg_obj == null))
            return;
        arg_obj.Remove();
        arg_obj.p_cell = this;
        if (this.shp_head) {
            arg_obj.shp_next = this.shp_head;
            this.shp_head.shp_bef = arg_obj;
            this.shp_head = arg_obj;
        }
        this.shp_head = arg_obj;
    };
    OctCell.prototype.OnRemove = function (arg_remove) {
        if ((this.shp_head == arg_remove) && arg_remove) {
            this.shp_head = this.shp_head.shp_next;
        }
    };
    OctCell.prototype.GetHead = function () {
        return this.shp_head;
    };
    return OctCell;
}());
exports.default = OctCell;


/***/ }),

/***/ "./WebGl/Parts/Collision/Octree.ts":
/*!*****************************************!*\
  !*** ./WebGl/Parts/Collision/Octree.ts ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Vector3_1 = __importDefault(__webpack_require__(/*! ../../Math/Vector3 */ "./WebGl/Math/Vector3.ts"));
var ID_1 = __importDefault(__webpack_require__(/*! ../ID */ "./WebGl/Parts/ID.ts"));
var OctCell_1 = __importDefault(__webpack_require__(/*! ./OctCell */ "./WebGl/Parts/Collision/OctCell.ts"));
var MaxLevel = 7;
var LEVEL_FLAG = [(111 << 0), (111 << 3), (111 << 6), (111 << 9), (111 << 12), (111 << 15), (111 << 18), (111 << 21), (111 << 24), (111 << 27),];
var OctreeHelper = /** @class */ (function () {
    function OctreeHelper() {
    }
    OctreeHelper.BitSeparate = function (n) {
        var s = n;
        s = (s | s << 8) & 0x0000f00f;
        s = (s | s << 4) & 0x000c30c3;
        s = (s | s << 2) & 0x00249249;
        return s;
    };
    OctreeHelper.GetLevel = function (arg_flag, arg_level) {
        var out = 1;
        for (var i = 0; i < arg_level; i++) {
            var Check = (arg_flag >> (i * 3)) & 0x7;
            if (Check != 0)
                out = i + 1;
        }
        return out;
    };
    return OctreeHelper;
}());
;
var minPoint = new Vector3_1.default(0, 0, 0), maxPoint = new Vector3_1.default(0, 0, 0);
var CollisionLayer = /** @class */ (function () {
    function CollisionLayer(arg_level, arg_minPos, arg_maxPos) {
        this.OctPow = Array(MaxLevel + 1);
        this.OctPowSevenDevided = Array(MaxLevel + 1);
        if (arg_level <= MaxLevel)
            this.maxLevel = arg_level;
        else {
            this.maxLevel = MaxLevel;
        }
        this.rangeMax = arg_maxPos;
        this.rangeMin = arg_minPos;
        this.width = this.rangeMax.Sub(this.rangeMin);
        this.OctPow[0] = 1;
        this.OctPowSevenDevided[0] = 0;
        for (var i = 1; i < MaxLevel + 1; i++) {
            this.OctPow[i] = this.OctPow[i - 1] * 8;
            this.OctPowSevenDevided[i] = (this.OctPow[i] - 1) / 7;
        }
        this.maxCellNum = this.OctPowSevenDevided[MaxLevel - 1];
        this.unit = this.width.Div((1 << this.maxLevel));
        this.ary_cells = new Array(this.maxCellNum);
        this.CreateCell(0);
        this.vec_shp_collisionObjs = new Array();
        this.vec_index = new Array();
    }
    CollisionLayer.prototype.Release = function () {
        this.vec_shp_collisionObjs.length = 0;
        this.vec_index.length = 0;
        for (var i = 0; i < this.maxCellNum; i++) {
            if (this.ary_cells[i])
                this.ary_cells[i].Release();
        }
        this.ary_cells.length = 0;
    };
    CollisionLayer.prototype.RegistCollisionObj = function (arg_collisionObj) {
        var id = new ID_1.default(this.vec_shp_collisionObjs.length);
        this.vec_shp_collisionObjs.push(arg_collisionObj);
        this.vec_index.push(id);
        return id;
    };
    CollisionLayer.prototype.UnRegistCollisionObj = function (arg_index) {
        var index = arg_index.num;
        if (index >= this.vec_shp_collisionObjs.length) {
            return;
        }
        this.vec_shp_collisionObjs[index].Remove();
        this.vec_shp_collisionObjs.splice(index, 1);
        this.vec_index.splice(index, 1);
        for (var i = index; i < this.vec_index.length; i++) {
            this.vec_index[i].num--;
        }
    };
    CollisionLayer.prototype.Initialize = function () {
    };
    CollisionLayer.prototype.Update = function () {
        this.RegistOctree();
    };
    CollisionLayer.prototype.RegistOctree = function () {
        var size = this.vec_shp_collisionObjs.length;
        for (var itr = 0; itr < size; itr++) {
            this.vec_shp_collisionObjs[itr].collisionPrimitive.GetMaxPointAndMinPoint(maxPoint, minPoint);
            var cellNum = this.GetMortonSpace(minPoint, maxPoint);
            if (cellNum > this.maxCellNum) {
                continue;
            }
            if (!this.ary_cells[cellNum]) {
                this.CreateCell(cellNum);
            }
            this.ary_cells[cellNum].RegistObject(this.vec_shp_collisionObjs[itr]);
        }
    };
    CollisionLayer.prototype.Get3DMortonNumber = function (x, y, z) {
        return OctreeHelper.BitSeparate(x) | OctreeHelper.BitSeparate(y) << 1 | OctreeHelper.BitSeparate(z) << 2;
    };
    CollisionLayer.prototype.Get3DMortonNumber_Vec3 = function (arg_position) {
        return this.Get3DMortonNumber(((arg_position.x - this.rangeMin.x) / this.unit.x), ((arg_position.y - this.rangeMin.y) / this.unit.y), ((arg_position.z - this.rangeMin.z) / this.unit.z));
    };
    CollisionLayer.prototype.GetMortonSpace = function (arg_minPos, arg_maxPos) {
        var maxSpace = this.Get3DMortonNumber_Vec3(arg_maxPos);
        var levelCheckFlag = this.Get3DMortonNumber_Vec3(arg_minPos) ^ maxSpace;
        var level = OctreeHelper.GetLevel(levelCheckFlag, this.maxLevel);
        var num = (maxSpace >> ((level) * 3));
        num += this.OctPowSevenDevided[this.maxLevel - level];
        return num;
    };
    CollisionLayer.prototype.CreateCollisionObjectList = function (arg_cellNum, arg_output, arg_stack) {
        var objItr = this.ary_cells[arg_cellNum].GetHead();
        //var i=0;
        while (objItr != null) {
            var rObjItr = objItr.shp_next;
            while (rObjItr != null) {
                // 
                arg_output.push(objItr);
                arg_output.push(rObjItr);
                rObjItr = rObjItr.shp_next;
            }
            //  
            for (var itr = 0; itr < arg_stack.length; itr++) {
                arg_output.push(objItr);
                arg_output.push(arg_stack[itr]);
            }
            objItr = objItr.shp_next;
        }
        //console.log(i);
        var ChildFlag = false;
        //  
        var ObjNum = 0;
        var i, nextCellNum;
        for (i = 0; i < 8; i++) {
            nextCellNum = arg_cellNum * 8 + 1 + i;
            if (nextCellNum < this.maxCellNum && this.ary_cells[arg_cellNum * 8 + 1 + i]) {
                if (!ChildFlag) {
                    objItr = this.ary_cells[arg_cellNum].GetHead();
                    while (objItr) {
                        arg_stack.push(objItr);
                        ObjNum++;
                        objItr = objItr.shp_next;
                    }
                }
                ChildFlag = true;
                this.CreateCollisionObjectList(arg_cellNum * 8 + 1 + i, arg_output, arg_stack);
            }
        }
        //  
        if (ChildFlag) {
            for (i = 0; i < ObjNum; i++)
                arg_stack.pop();
        }
    };
    CollisionLayer.prototype.CreateCell = function (arg_cellNum) {
        while (!this.ary_cells[arg_cellNum]) {
            // 
            this.ary_cells[arg_cellNum] = new OctCell_1.default();
            // 
            arg_cellNum = (arg_cellNum - 1) >> 3;
            if (arg_cellNum >= this.maxCellNum)
                break;
        }
    };
    return CollisionLayer;
}());
exports.default = CollisionLayer;
;


/***/ }),

/***/ "./WebGl/Parts/Collision/PrimitiveType.ts":
/*!************************************************!*\
  !*** ./WebGl/Parts/Collision/PrimitiveType.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.PrimitiveType = void 0;
var PrimitiveType;
(function (PrimitiveType) {
    PrimitiveType[PrimitiveType["sphere"] = 0] = "sphere";
    PrimitiveType[PrimitiveType["box_AABB"] = 1] = "box_AABB";
    PrimitiveType[PrimitiveType["box_OBB"] = 2] = "box_OBB";
    PrimitiveType[PrimitiveType["point"] = 3] = "point";
})(PrimitiveType = exports.PrimitiveType || (exports.PrimitiveType = {}));


/***/ }),

/***/ "./WebGl/Parts/GameObjectIDManager.ts":
/*!********************************************!*\
  !*** ./WebGl/Parts/GameObjectIDManager.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var ID_1 = __importDefault(__webpack_require__(/*! ./ID */ "./WebGl/Parts/ID.ts"));
var map_IDs = new Map();
var GameObjectIDManager = /** @class */ (function () {
    function GameObjectIDManager() {
    }
    GameObjectIDManager.GetID = function (arg_IDName) {
        if (!map_IDs.get(arg_IDName)) {
            map_IDs.set(arg_IDName, new ID_1.default(map_IDs.size));
        }
        return map_IDs.get(arg_IDName);
    };
    return GameObjectIDManager;
}());
exports.default = GameObjectIDManager;


/***/ }),

/***/ "./WebGl/Parts/GameTime.ts":
/*!*********************************!*\
  !*** ./WebGl/Parts/GameTime.ts ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var GameTime = /** @class */ (function () {
    function GameTime() {
        this.time = new Date().getTime();
        this.absFrame = 0;
        this.relFrame = 0;
        this.timePase = 1.0;
    }
    GameTime.prototype.Count = function () {
        this.absFrame++;
        this.relFrame += this.timePase;
    };
    Object.defineProperty(GameTime.prototype, "elapsedTime", {
        get: function () {
            return this.time - new Date().getTime();
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTime.prototype, "AbsoluteFrame", {
        get: function () {
            return this.absFrame;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTime.prototype, "RelativeFrame", {
        get: function () {
            return this.relFrame;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(GameTime.prototype, "TimePase", {
        get: function () {
            return this.timePase;
        },
        set: function (arg_timePase) {
            this.timePase = arg_timePase;
        },
        enumerable: false,
        configurable: true
    });
    return GameTime;
}());
exports.default = GameTime;


/***/ }),

/***/ "./WebGl/Parts/ID.ts":
/*!***************************!*\
  !*** ./WebGl/Parts/ID.ts ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var ID = /** @class */ (function () {
    function ID(arg_num) {
        this.num = arg_num;
    }
    ID.prototype.Equal = function (other) {
        return this.num == other.num;
    };
    return ID;
}());
exports.default = ID;


/***/ }),

/***/ "./WebGl/Parts/ModelCreater.ts":
/*!*************************************!*\
  !*** ./WebGl/Parts/ModelCreater.ts ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Model_1 = __importDefault(__webpack_require__(/*! ../Graphic/Model */ "./WebGl/Graphic/Model.ts"));
var ResourceCreater_1 = __importDefault(__webpack_require__(/*! ../Tool/ResourceCreater */ "./WebGl/Tool/ResourceCreater.ts"));
var GeometryGenerator_1 = __importDefault(__webpack_require__(/*! ../Tool/GeometryGenerator */ "./WebGl/Tool/GeometryGenerator.ts"));
var TextModel_1 = __importDefault(__webpack_require__(/*! ../Graphic/TextModel */ "./WebGl/Graphic/TextModel.ts"));
var CharMap = new Map([
    [" ", 0], ["!", 1], ['"', 2], ["#", 3], ["$", 4], ["%", 5], ["&", 6], ["'", 7], ["(", 8], [")", 9],
    ["*", 10], ["+", 11], [',', 12], ["-", 13], [".", 14], ["/", 15], ["0", 16], ["1", 17], ["2", 18], ["3", 19],
    ["4", 20], ["5", 21], ['6', 22], ["7", 23], ["8", 24], ["9", 25], [":", 26], [";", 27], ["<", 28], ["=", 29],
    [">", 30], ["?", 31], ['@', 32], ["A", 33], ["B", 34], ["C", 35], ["D", 36], ["E", 37], ["F", 38], ["G", 39],
    ["H", 40], ["I", 41], ['J', 42], ["K", 43], ["L", 44], ["M", 45], ["N", 46], ["O", 47], ["P", 48], ["Q", 49],
    ["R", 50], ["S", 51], ['T', 52], ["U", 53], ["V", 54], ["W", 55], ["X", 56], ["Y", 57], ["Z", 58], ["[", 59],
    ["\\", 60], ["]", 61], ['^', 62], ["_", 63], ["`", 64], ["a", 65], ["b", 66], ["c", 67], ["d", 68], ["e", 69],
    ["f", 70], ["g", 71], ['h', 72], ["i", 73], ["j", 74], ["k", 75], ["l", 76], ["m", 77], ["n", 78], ["o", 79],
    ["p", 80], ["q", 81], ['r', 82], ["s", 83], ["t", 84], ["u", 85], ["v", 86], ["w", 87], ["x", 88], ["y", 89],
    ["z", 90], ["{", 99], ['|', 92], ["}", 93], ["~", 94],
]);
function CharChange(arg_name) {
    return CharMap.get(arg_name);
}
var ModelCreater = /** @class */ (function () {
    function ModelCreater(arg_garaphicDevice, arg_resourceContainer) {
        this.resourceContainer = arg_resourceContainer;
        this.graphicDevice = arg_garaphicDevice;
        this.fontUVContainer = new Map();
    }
    ModelCreater.prototype.CreateModel = function (isLighting, isBillBoard, geometryPath, materialPath, shaderPath, arg_transform) {
        var model = new Model_1.default(isLighting, isBillBoard);
        model.Initialize_geom(this.graphicDevice, this.resourceContainer.GetGeometry(geometryPath), this.resourceContainer.GetMaterial(materialPath), this.resourceContainer.GetShader(shaderPath), arg_transform);
        return model;
    };
    ModelCreater.prototype.CreateModelFromMesh = function (isLighting, isBillBoard, meshPath, shaderPath, arg_transform) {
        var model = new Model_1.default(isLighting, isBillBoard);
        model.Initialize_mesh(this.graphicDevice, this.resourceContainer.GetMesh(meshPath), this.resourceContainer.GetShader(shaderPath), arg_transform);
        return model;
    };
    ModelCreater.prototype.CreateModelFromText = function (isBillBoard, arg_color, text, fontTexturePath, shaderPath, arg_transform) {
        var model = new TextModel_1.default(isBillBoard);
        var materialName = arg_color.data[0] + "" + arg_color.data[1] + "" + arg_color.data[2] + "" + arg_color.data[3] + "" + fontTexturePath;
        var material = this.resourceContainer.GetMaterial(materialName);
        if (material == null) {
            material = this.resourceContainer.AddMaterial(ResourceCreater_1.default.CreateMaterial(arg_color, this.graphicDevice, [this.resourceContainer.GetTexture(fontTexturePath)]), materialName);
        }
        var geometryPath = "Text:" + text.length;
        var geometry = this.resourceContainer.GetGeometry(geometryPath);
        if (geometry == null) {
            geometry = this.resourceContainer.AddGeometry(ResourceCreater_1.default.CreateGeometry(GeometryGenerator_1.default.CreateTextGeometry(text.length), true, false, false, this.graphicDevice), geometryPath);
        }
        model.Initialize_geom(this.graphicDevice, geometry, material, this.resourceContainer.GetShader(shaderPath), arg_transform);
        var uv = this.fontUVContainer[text];
        if (!uv) {
            var data = new Array();
            var xUnit = (1.0 / 128.0) * 7;
            var yUnit = 1.0 / 14.0;
            for (var i = 0; i < text.length; i++) {
                var num = CharChange(text[i]);
                var x = num % 18;
                var y = Math.floor(num / 18);
                data.push(x * xUnit, (y + 1) * yUnit, (x + 1) * xUnit, (y + 1) * yUnit, x * xUnit, y * yUnit, (x + 1) * xUnit, y * yUnit);
            }
            uv = this.graphicDevice.CreateVBO(data);
            this.fontUVContainer[text] = uv;
        }
        model.SetUVData(uv);
        return model;
    };
    return ModelCreater;
}());
exports.default = ModelCreater;


/***/ }),

/***/ "./WebGl/Parts/Renderer.ts":
/*!*********************************!*\
  !*** ./WebGl/Parts/Renderer.ts ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var ID_1 = __importDefault(__webpack_require__(/*! ./ID */ "./WebGl/Parts/ID.ts"));
var Layer = /** @class */ (function () {
    function Layer() {
        this.ary_IDs = new Array();
        this.ary_IModels = new Array();
        this.ary_lights = new Array();
    }
    Layer.prototype.SetLight = function (arg_light) {
        this.ary_lights.push(arg_light);
        return arg_light;
    };
    Layer.prototype.Regist = function (arg_registObj) {
        if (this.ary_lights.length > 0) {
            arg_registObj.SetLight(this.ary_lights[0]);
        }
        var id = new ID_1.default(this.ary_IModels.length);
        this.ary_IModels.push(arg_registObj);
        this.ary_IDs.push(id);
        return id;
    };
    Layer.prototype.UnRegist = function (arg_ID) {
        var index = arg_ID.num;
        if (index > this.ary_IDs.length) {
            return;
        }
        this.ary_IModels.splice(arg_ID.num, 1);
        this.ary_IDs.splice(arg_ID.num, 1);
        for (var i = arg_ID.num; i < this.ary_IDs.length; i++) {
            this.ary_IDs[i].num--;
        }
    };
    Layer.prototype.Draw = function () {
        this.ary_IModels.forEach(function (imodel) { return imodel.Draw(); });
    };
    Layer.prototype.Release = function () {
        this.ary_IDs.length = 0;
        this.ary_IModels.length = 0;
        this.ary_lights.length = 0;
    };
    return Layer;
}());
var Renderer = /** @class */ (function () {
    function Renderer() {
        this.layers = new Array();
        this.layers.push(new Layer());
    }
    Renderer.prototype.Regist = function (arg_registObj, layer) {
        if (this.layers.length <= layer) {
            layer = 0;
        }
        return this.layers[layer].Regist(arg_registObj);
    };
    Renderer.prototype.UnRegist = function (arg_ID, layer) {
        if (this.layers.length <= layer) {
            layer = 0;
        }
        this.layers[layer].UnRegist(arg_ID);
    };
    Renderer.prototype.SetLight = function (arg_light, layer) {
        if (this.layers.length <= layer) {
            layer = 0;
        }
        return this.layers[layer].SetLight(arg_light);
    };
    Renderer.prototype.AddLayer = function () {
        this.layers.push(new Layer());
    };
    Renderer.prototype.Draw = function (camera) {
        if (this.layers.length <= camera.layer) {
            return;
        }
        camera.Attach();
        this.layers[camera.layer].Draw();
    };
    Renderer.prototype.Release = function () {
        this.layers.forEach(function (layer) { return layer.Release(); });
    };
    return Renderer;
}());
exports.default = Renderer;


/***/ }),

/***/ "./WebGl/Parts/ResourceContainer.ts":
/*!******************************************!*\
  !*** ./WebGl/Parts/ResourceContainer.ts ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var ResourceCreater_1 = __importDefault(__webpack_require__(/*! ../Tool/ResourceCreater */ "./WebGl/Tool/ResourceCreater.ts"));
var ResourceContainer = /** @class */ (function () {
    function ResourceContainer() {
        this.iGeometries = new Map();
        this.iMaterials = new Map();
        this.iShaders = new Map();
        this.iSounds = new Map();
        this.iTextures = new Map();
        this.iMeshes = new Map();
        this.loadingObjectCount = 0;
    }
    ResourceContainer.prototype.GetShader = function (arg_key) {
        if (this.iShaders[arg_key])
            return this.iShaders[arg_key];
        else
            console.log("key is not fond.");
        return null;
    };
    ResourceContainer.prototype.AddShader = function (arg_value, arg_key) {
        this.iShaders[arg_key] = arg_value;
        return arg_value;
    };
    ResourceContainer.prototype.RemoveShader = function (arg_key) {
        delete this.iShaders[arg_key];
    };
    ResourceContainer.prototype.GetTexture = function (arg_key) {
        if (this.iTextures[arg_key])
            return this.iTextures[arg_key];
        else
            return null;
    };
    ResourceContainer.prototype.AddTexture = function (arg_value, arg_key) {
        this.iTextures[arg_key] = arg_value;
        arg_value.SetContainer(this);
        return arg_value;
    };
    ResourceContainer.prototype.AddTextureFromFile = function (arg_value, arg_device) {
        if (this.iTextures[arg_value]) {
            return this.iTextures[arg_value];
        }
        var tex = ResourceCreater_1.default.CreateTexture(arg_value, arg_device);
        tex.SetContainer(this);
        this.iTextures[arg_value] = tex;
        return this.iTextures[arg_value];
    };
    ResourceContainer.prototype.RemoveTexture = function (arg_key) {
        delete this.iTextures[arg_key];
    };
    ResourceContainer.prototype.GetMaterial = function (arg_key) {
        if (this.iMaterials[arg_key])
            return this.iMaterials[arg_key];
        else
            return null;
    };
    ResourceContainer.prototype.AddMaterial = function (arg_value, arg_key) {
        this.iMaterials[arg_key] = arg_value;
        return arg_value;
    };
    ResourceContainer.prototype.AddMaterialFromFile = function (arg_value, arg_device) {
        if (this.iMaterials[arg_value]) {
            return this.iMaterials[arg_value];
        }
        this.iMaterials[arg_value] = ResourceCreater_1.default.CreateMaterialFromFile(arg_value, this, arg_device);
        this.LoadStart();
        return this.iMaterials[arg_value];
    };
    ResourceContainer.prototype.RemoveMaterial = function (arg_key) {
        delete this.iMaterials[arg_key];
    };
    ResourceContainer.prototype.GetGeometry = function (arg_key) {
        if (this.iGeometries[arg_key])
            return this.iGeometries[arg_key];
        else
            return null;
    };
    ResourceContainer.prototype.AddGeometry = function (arg_value, arg_key) {
        this.iGeometries[arg_key] = arg_value;
        return arg_value;
    };
    ResourceContainer.prototype.RemoveGeometry = function (arg_key) {
        delete this.iGeometries[arg_key];
    };
    ResourceContainer.prototype.GetMesh = function (arg_key) {
        if (this.iMeshes[arg_key])
            return this.iMeshes[arg_key];
        else
            return null;
    };
    ResourceContainer.prototype.AddMesh = function (arg_value, arg_key) {
        this.iMeshes[arg_key] = arg_value;
        return arg_value;
    };
    ResourceContainer.prototype.RemoveMesh = function (arg_key) {
        delete this.iMeshes[arg_key];
    };
    ResourceContainer.prototype.GetSound = function (arg_key) {
        if (this.iSounds[arg_key])
            return this.iSounds[arg_key];
        else
            return null;
    };
    ResourceContainer.prototype.AddSound = function (arg_value, arg_key) {
        this.iSounds[arg_key] = arg_value;
        return arg_value;
    };
    ResourceContainer.prototype.AddSoundFromFile = function (arg_value, arg_key) {
        this.iSounds[arg_key] = ResourceCreater_1.default.CreateSound(arg_value);
        return this.iSounds[arg_key];
    };
    ResourceContainer.prototype.RemoveSound = function (arg_key) {
        delete this.iSounds[arg_key];
    };
    ResourceContainer.prototype.LoadEnd = function () {
        this.loadingObjectCount--;
    };
    ResourceContainer.prototype.LoadStart = function () {
        this.loadingObjectCount++;
    };
    ResourceContainer.prototype.GetLoadingObjCount = function () {
        if (this.loadingObjectCount <= 0) {
            return 0;
        }
        return this.loadingObjectCount;
    };
    return ResourceContainer;
}());
exports.default = ResourceContainer;


/***/ }),

/***/ "./WebGl/Resource/FrameBufferTexture.ts":
/*!**********************************************!*\
  !*** ./WebGl/Resource/FrameBufferTexture.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var FrameBufferTexture = /** @class */ (function () {
    function FrameBufferTexture(arg_graphicDevice, width, height) {
        this.width = width;
        this.height = height;
        this.graphicDevice = arg_graphicDevice;
        // 
        this.frameBuffer = this.graphicDevice.context.createFramebuffer();
        // WebGL
        this.graphicDevice.context.bindFramebuffer(this.graphicDevice.context.FRAMEBUFFER, this.frameBuffer);
        // 
        this.depthBuffer = this.graphicDevice.context.createRenderbuffer();
        this.graphicDevice.context.bindRenderbuffer(this.graphicDevice.context.RENDERBUFFER, this.depthBuffer);
        // 
        this.graphicDevice.context.renderbufferStorage(this.graphicDevice.context.RENDERBUFFER, this.graphicDevice.context.DEPTH_COMPONENT16, width, height);
        // 
        this.graphicDevice.context.framebufferRenderbuffer(this.graphicDevice.context.FRAMEBUFFER, this.graphicDevice.context.DEPTH_ATTACHMENT, this.graphicDevice.context.RENDERBUFFER, this.depthBuffer);
        // 
        this.data = this.graphicDevice.context.createTexture();
        // 
        this.graphicDevice.context.bindTexture(this.graphicDevice.context.TEXTURE_2D, this.data);
        // 
        this.graphicDevice.context.texImage2D(this.graphicDevice.context.TEXTURE_2D, 0, this.graphicDevice.context.RGBA, width, height, 0, this.graphicDevice.context.RGBA, this.graphicDevice.context.UNSIGNED_BYTE, null);
        // 
        this.graphicDevice.context.texParameteri(this.graphicDevice.context.TEXTURE_2D, this.graphicDevice.context.TEXTURE_MAG_FILTER, this.graphicDevice.context.LINEAR);
        this.graphicDevice.context.texParameteri(this.graphicDevice.context.TEXTURE_2D, this.graphicDevice.context.TEXTURE_MIN_FILTER, this.graphicDevice.context.LINEAR);
        // 
        this.graphicDevice.context.framebufferTexture2D(this.graphicDevice.context.FRAMEBUFFER, this.graphicDevice.context.COLOR_ATTACHMENT0, this.graphicDevice.context.TEXTURE_2D, this.data, 0);
        // 
        this.graphicDevice.context.bindTexture(this.graphicDevice.context.TEXTURE_2D, null);
        this.graphicDevice.context.bindRenderbuffer(this.graphicDevice.context.RENDERBUFFER, null);
        this.graphicDevice.context.bindFramebuffer(this.graphicDevice.context.FRAMEBUFFER, null);
    }
    FrameBufferTexture.prototype.SetContainer = function (resourceContainer) {
    };
    FrameBufferTexture.prototype.Loaded = function () {
    };
    FrameBufferTexture.prototype.IsLoaded = function () {
        return true;
    };
    FrameBufferTexture.prototype.Initialize = function () {
    };
    FrameBufferTexture.prototype.Attach = function (slot) {
        this.graphicDevice.context.activeTexture(this.graphicDevice.context.TEXTURE0);
        this.graphicDevice.context.bindTexture(this.graphicDevice.context.TEXTURE_2D, this.data);
        this.graphicDevice.context.uniform1i(this.graphicDevice.shader.GetTextureSlot(slot), slot);
    };
    return FrameBufferTexture;
}());
exports.default = FrameBufferTexture;


/***/ }),

/***/ "./WebGl/Resource/Geometry.ts":
/*!************************************!*\
  !*** ./WebGl/Resource/Geometry.ts ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Geometry = /** @class */ (function () {
    function Geometry(data, isUV, isNormal, isColor, arg_device) {
        this.device = arg_device;
        this.vboList = new Array();
        this.vboList.push(arg_device.CreateVBO(data.p));
        if (isUV) {
            this.vboList.push(arg_device.CreateVBO(data.uv));
        }
        if (isNormal) {
            this.vboList.push(arg_device.CreateVBO(data.n));
        }
        if (isColor) {
            this.vboList.push(arg_device.CreateVBO(data.c));
        }
        this.ibo = arg_device.CreateIBO(data.i);
        this.indexSize = data.i.length;
        this.subset = new Array();
        this.subset.push(data.i.length);
    }
    Geometry.prototype.ChangeVBO = function (vbo, slot) {
        this.vboList[slot] = vbo;
    };
    Geometry.prototype.GetIndexSize = function () {
        return this.indexSize;
    };
    Geometry.prototype.Draw = function () {
        this.device.SetVBO(this.vboList);
        this.device.context.bindBuffer(this.device.context.ELEMENT_ARRAY_BUFFER, this.ibo);
    };
    Geometry.prototype.SetSubset = function (arg_subset) {
        this.subset = arg_subset;
    };
    Geometry.prototype.GetSubSet = function () {
        return this.subset;
    };
    return Geometry;
}());
exports.default = Geometry;


/***/ }),

/***/ "./WebGl/Resource/Material.ts":
/*!************************************!*\
  !*** ./WebGl/Resource/Material.ts ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var ExParameter = /** @class */ (function () {
    function ExParameter(arg_slot, arg_size, arg_param) {
        this.slot = arg_slot;
        this.param = arg_param;
        this.size = arg_size;
        switch (arg_size) {
            case 1:
                this.atachFunc = this.Atach1f;
                break;
            case 2:
                this.atachFunc = this.Atach2f;
                break;
            case 3:
                this.atachFunc = this.Atach3f;
                break;
            case 4:
                this.atachFunc = this.Atach4f;
                break;
            case 16:
                this.atachFunc = this.AtachMat;
                break;
        }
    }
    ExParameter.prototype.Atach1f = function (device) {
        device.context.uniform1fv(device.shader.uniformLocations[this.slot], this.param.data);
    };
    ExParameter.prototype.Atach2f = function (device) {
        device.context.uniform2fv(device.shader.uniformLocations[this.slot], this.param.data);
    };
    ExParameter.prototype.Atach3f = function (device) {
        device.context.uniform3fv(device.shader.uniformLocations[this.slot], this.param.data);
    };
    ExParameter.prototype.Atach4f = function (device) {
        device.context.uniform4fv(device.shader.uniformLocations[this.slot], this.param.data);
    };
    ExParameter.prototype.AtachMat = function (device) {
        device.context.uniformMatrix4fv(device.shader.uniformLocations[this.slot], false, this.param.data);
    };
    return ExParameter;
}());
var Material = /** @class */ (function () {
    function Material() {
    }
    Material.prototype.SetParameter = function (arg_ambient, arg_device, arg_ary_texture, arg_ary_exParms) {
        var _this = this;
        this.ambientColor = arg_ambient;
        this.device = arg_device;
        if (arg_ary_texture)
            this.textures = arg_ary_texture;
        else
            this.textures = new Array();
        this.exParams = new Array();
        if (arg_ary_exParms) {
            arg_ary_exParms.foreach(function (param) { return _this.AddExParam(param.n, param.s, param.p); });
        }
    };
    Material.prototype.SetTexture = function (arg_texture, slot) {
        this.textures[slot] = arg_texture;
    };
    Material.prototype.AddExParam = function (arg_slot, arg_size, arg_param) {
        this.exParams.push(new ExParameter(arg_slot, arg_size, arg_param));
    };
    Material.prototype.Attach = function () {
        if (this.device.shader.ambientSlot) {
            this.device.context.uniform4fv(this.device.shader.uniformLocations[this.device.shader.ambientSlot], this.ambientColor.xyzw);
        }
        for (var i = 0; i < this.textures.length; i++) {
            if (this.textures[i] != null)
                this.textures[i].Attach(i);
        }
        for (var i = 0; i < this.exParams.length; i++) {
            this.exParams[i].atachFunc(this.device);
        }
    };
    return Material;
}());
exports.default = Material;


/***/ }),

/***/ "./WebGl/Resource/Mesh.ts":
/*!********************************!*\
  !*** ./WebGl/Resource/Mesh.ts ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Mesh = /** @class */ (function () {
    function Mesh() {
    }
    Mesh.prototype.SetParameter = function (arg_geometry, arg_ary_materials) {
        this.geometry = arg_geometry;
        this.ary_materials = arg_ary_materials;
    };
    return Mesh;
}());
exports.default = Mesh;


/***/ }),

/***/ "./WebGl/Resource/Shader.ts":
/*!**********************************!*\
  !*** ./WebGl/Resource/Shader.ts ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var FileLoader_1 = __importDefault(__webpack_require__(/*! ../Tool/FileLoader */ "./WebGl/Tool/FileLoader.ts"));
function GetStride(arg_type) {
    switch (arg_type) {
        case "vec2":
            return 2;
            break;
        case "vec3":
            return 3;
            break;
        case "vec4":
            return 4;
            break;
        case "int":
            return 1;
            break;
        case "float":
            return 1;
            break;
    }
    console.log("Type undifined.");
    return 0;
}
var Shader = /** @class */ (function () {
    function Shader(vsSource, fsSource, arg_graphicDevice, vsSource_direct, fsSource_direct) {
        this.graphicDevice = arg_graphicDevice;
        var vsData;
        if (vsSource_direct) {
            vsData = document.getElementById(vsSource).text;
        }
        else
            vsData = FileLoader_1.default.LoadText(vsSource);
        var v_shader = this.graphicDevice.CreateVertexShader(vsData);
        var fsData;
        if (fsSource_direct) {
            fsData = document.getElementById(fsSource).text;
        }
        else
            fsData = FileLoader_1.default.LoadText(fsSource);
        var f_shader = this.graphicDevice.CreateFragmentShader(fsData);
        this.ambientSlot = -1;
        this.lightPosSlot = -1;
        this.lightDirSlot = -1;
        this.programObject = this.graphicDevice.CreateProgram(v_shader, f_shader);
        this.attributeLocations = new Array();
        this.attributeStrides = new Array();
        this.uniformLocations = new Array();
        this.textureSlots = new Array();
        var attributeSource = vsData.split(";");
        attributeSource = attributeSource.filter(function (source) { return source.indexOf("attribute") != -1; });
        var attributeSemantics = new Array();
        for (var i = 0; i < attributeSource.length; i++) {
            attributeSource[i] = attributeSource[i].replace(/\r?\n/g, "");
        }
        attributeSource.forEach(function (source) { return attributeSemantics.push(source.split(" ")); });
        for (var i = 0; i < attributeSemantics.length; i++) {
            attributeSemantics[i] = attributeSemantics[i].filter(function (s) { return s != ""; });
            this.attributeLocations[i] = this.graphicDevice.context.getAttribLocation(this.programObject, attributeSemantics[i][2]);
            this.attributeStrides[i] = GetStride(attributeSemantics[i][1]);
        }
        var uniSource = fsData.split(";");
        uniSource = vsData.split(";").concat(uniSource);
        uniSource = uniSource.filter(function (source) { return source.indexOf("uniform") != -1; });
        var uniSemantics = new Array();
        for (var i = 0; i < uniSource.length; i++) {
            uniSource[i] = uniSource[i].replace(/\r?\n/g, "");
        }
        uniSource.forEach(function (source) { return uniSemantics.push(source.split(" ")); });
        for (var i = 0; i < uniSemantics.length; i++) {
            uniSemantics[i] = uniSemantics[i].filter(function (s) { return s != ""; });
            this.uniformLocations.push(this.graphicDevice.context.getUniformLocation(this.programObject, uniSemantics[i][2]));
            if (uniSemantics[i][2] == "ambientColor") {
                this.ambientSlot = i;
            }
            else if (uniSemantics[i][2] == "lightPosition") {
                this.lightPosSlot = i;
            }
            else if (uniSemantics[i][2] == "lightDirection") {
                this.lightDirSlot = i;
            }
            else if (uniSemantics[i][1] == "sampler2D") {
                this.textureSlots.push(i);
            }
        }
    }
    Shader.prototype.GetTextureSlot = function (arg_slot) {
        if (this.textureSlots[arg_slot] != null) {
            return this.uniformLocations[this.textureSlots[arg_slot]];
        }
    };
    Shader.prototype.Attach = function () {
        this.graphicDevice.SetShader(this);
    };
    return Shader;
}());
exports.default = Shader;


/***/ }),

/***/ "./WebGl/Resource/Sound.ts":
/*!*********************************!*\
  !*** ./WebGl/Resource/Sound.ts ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Sound = /** @class */ (function () {
    function Sound(arg_src) {
        this.audioElement = document.createElement('audio');
        this.audioElement.src = arg_src;
        this.audioElement.preload = "auto";
    }
    Sound.prototype.Play = function () {
        this.audioElement.play();
    };
    Sound.prototype.Play_new = function () {
        var audioElement = document.createElement('audio');
        audioElement.src = this.audioElement.src;
        audioElement.preload = "auto";
        audioElement.play();
    };
    Sound.prototype.Pause = function () {
        this.audioElement.pause();
    };
    Sound.prototype.Mute = function () {
        this.audioElement.muted = true;
    };
    Sound.prototype.SetVolume = function (arg_volume) {
        this.audioElement.volume = arg_volume;
    };
    Sound.prototype.GetVolume = function () {
        return this.audioElement.volume;
    };
    Sound.prototype.DisMute = function () {
        this.audioElement.muted = false;
    };
    Sound.prototype.Reset = function () {
        this.audioElement.currentTime = 0.0;
    };
    Sound.prototype.SetLoop = function (arg_isLoop) {
        this.audioElement.loop = arg_isLoop;
    };
    return Sound;
}());
exports.default = Sound;


/***/ }),

/***/ "./WebGl/Resource/Texture.ts":
/*!***********************************!*\
  !*** ./WebGl/Resource/Texture.ts ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Texture = /** @class */ (function () {
    function Texture(arg_path, arg_device) {
        this.isLoaded = false;
        this.graphicDevice = arg_device;
        this.path = arg_path;
    }
    Texture.prototype.Loaded = function () {
        this.isLoaded = true;
        if (this.resourceContainer)
            this.resourceContainer.LoadEnd();
    };
    Texture.prototype.IsLoaded = function () {
        return this.isLoaded;
    };
    Texture.prototype.Initialize = function () {
        this.graphicDevice.CreateTexture(this.path, this);
    };
    Texture.prototype.Attach = function (slot) {
        this.graphicDevice.context.activeTexture(this.graphicDevice.context.TEXTURE0);
        this.graphicDevice.context.bindTexture(this.graphicDevice.context.TEXTURE_2D, this.data);
        this.graphicDevice.context.uniform1i(this.graphicDevice.shader.GetTextureSlot(slot), slot);
        this.graphicDevice.context.texParameteri(this.graphicDevice.context.TEXTURE_2D, this.graphicDevice.context.TEXTURE_MIN_FILTER, this.graphicDevice.context.NEAREST);
        this.graphicDevice.context.texParameteri(this.graphicDevice.context.TEXTURE_2D, this.graphicDevice.context.TEXTURE_MAG_FILTER, this.graphicDevice.context.NEAREST);
    };
    Texture.prototype.SetContainer = function (resourceContainer) {
        this.resourceContainer = resourceContainer;
        this.resourceContainer.LoadStart();
    };
    return Texture;
}());
exports.default = Texture;


/***/ }),

/***/ "./WebGl/SampleScene.ts":
/*!******************************!*\
  !*** ./WebGl/SampleScene.ts ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Scene_1 = __importDefault(__webpack_require__(/*! ./Scene/Scene */ "./WebGl/Scene/Scene.ts"));
var ResourceCreater_1 = __importDefault(__webpack_require__(/*! ./Tool/ResourceCreater */ "./WebGl/Tool/ResourceCreater.ts"));
var Quat_1 = __importDefault(__webpack_require__(/*! ./Math/Quat */ "./WebGl/Math/Quat.ts"));
var Vector4_1 = __importDefault(__webpack_require__(/*! ./Math/Vector4 */ "./WebGl/Math/Vector4.ts"));
var Vector3_1 = __importDefault(__webpack_require__(/*! ./Math/Vector3 */ "./WebGl/Math/Vector3.ts"));
var PointLight_1 = __importDefault(__webpack_require__(/*! ./Light/PointLight */ "./WebGl/Light/PointLight.ts"));
var ModelDrawComponent_1 = __importDefault(__webpack_require__(/*! ./Component/ModelDrawComponent */ "./WebGl/Component/ModelDrawComponent.ts"));
var Transform_1 = __importDefault(__webpack_require__(/*! ./Transform */ "./WebGl/Transform.ts"));
var Input_1 = __importDefault(__webpack_require__(/*! ./Tool/Input */ "./WebGl/Tool/Input.ts"));
var SceneChanger_1 = __importDefault(__webpack_require__(/*! ./Component/SceneChanger */ "./WebGl/Component/SceneChanger.ts"));
var TransformAnimation_1 = __importDefault(__webpack_require__(/*! ./Component/TransformAnimation */ "./WebGl/Component/TransformAnimation.ts"));
var Easing_1 = __importDefault(__webpack_require__(/*! ./Tool/Easing */ "./WebGl/Tool/Easing.ts"));
var SucideComponent_1 = __importDefault(__webpack_require__(/*! ./Component/SucideComponent */ "./WebGl/Component/SucideComponent.ts"));
var Stage_1 = __importDefault(__webpack_require__(/*! ./CrossyLoad_Copy/Stage */ "./WebGl/CrossyLoad_Copy/Stage.ts"));
var PrimitiveType;
(function (PrimitiveType) {
    PrimitiveType[PrimitiveType["sphere"] = 0] = "sphere";
    PrimitiveType[PrimitiveType["box_AABB"] = 1] = "box_AABB";
    PrimitiveType[PrimitiveType["box_OBB"] = 2] = "box_OBB";
    PrimitiveType[PrimitiveType["point"] = 3] = "point";
})(PrimitiveType || (PrimitiveType = {}));
var float = /** @class */ (function () {
    function float() {
        this.data = new Float32Array(1);
    }
    return float;
}());
var SampleScene = /** @class */ (function (_super) {
    __extends(SampleScene, _super);
    function SampleScene(sceneManger) {
        var _this = _super.call(this, sceneManger) || this;
        _this.aQuaternion = new Quat_1.default().Identity();
        _this.bQuaternion = new Quat_1.default().Identity();
        _this.sQuaternion = new Quat_1.default().Identity();
        _this.zoomData = new float();
        _this.zoomData.data[0] = 0.5;
        return _this;
    }
    SampleScene.prototype.LoadingUpdate = function () {
    };
    SampleScene.prototype.OnLoad = function () {
        return __awaiter(this, void 0, void 0, function () {
            var frameBuffer, material;
            return __generator(this, function (_a) {
                frameBuffer = this.sceneManager.GetResourceContainer().AddTexture(ResourceCreater_1.default.CreateFrameBuffer(1024, 1024, this.sceneManager.GetGraphicDevice()), "playCamera");
                material = this.sceneManager.GetResourceContainer().AddMaterial(ResourceCreater_1.default.CreateMaterial(new Vector4_1.default(0.1, 0.1, 0.1, 1.0), this.sceneManager.GetGraphicDevice(), [this.sceneManager.GetResourceContainer().GetTexture("playCamera")]), "playCameraMaterial");
                return [2 /*return*/];
            });
        });
    };
    SampleScene.prototype.OnInitialize = function () {
        this.renderer.AddLayer();
        this.renderer.AddLayer();
        this.UseCollisionManager();
        this.AddCamera(0, 1, "main", false, this.sceneManager.GetResourceContainer().GetTexture("playCamera"));
        this.AddCamera(1, 2, "UI", true, this.sceneManager.GetResourceContainer().GetTexture("playCamera"));
        // 
        var light = new PointLight_1.default(this.sceneManager.GetGraphicDevice());
        light.transform.Position = new Vector3_1.default(-5, -5, 10);
        //this.renderer.SetLight(light,0);
        this.renderer.SetLight(light, 1);
        this.sceneManager.GetGraphicDevice().EnableStencil();
        this.GetCamera("main").transform.Position = new Vector3_1.default(1, -6, 4);
        this.GetCamera("main").transform.LookAt(new Vector3_1.default(0, 0, -1), Vector3_1.default.yAxis);
        this.GetCamera("main").clearColor = new Vector4_1.default(0.3, 0.3, 0.3, 1.0);
        this.GetCamera("UI").isClear = false;
        this.projectionPlane = this.gameObjectManager.AddGameObject("projectionCube");
        //this.cube.SetComponent(new ModelDrawComponent(false, "cube","caloryMaterial","texShader",1,false)) as ModelDrawComponent;
        //this.anotherCube.SetComponent(new ModelDrawComponent(false, "cube","caloryMaterial","texShader",1,false)) as ModelDrawComponent;
        {
            this.projectionPlane.SetComponent(new ModelDrawComponent_1.default(false, "plane", "playCameraMaterial", "texShader", 0, false));
            this.projectionPlane.transform.Scale = new Vector3_1.default(0, 0, 0);
        }
        //this.anotherCube.transform.BaseTransform=this.cube.transform;
        this.projectionPlane.transform.Position = new Vector3_1.default(0, 0, 0);
        this.stage = new Stage_1.default(this);
        this.gameObjectManager.AddGameObject("stage", new Transform_1.default(new Vector3_1.default(0, 0, 0), new Vector3_1.default(0, 0, 0)), "stage", [this.stage]);
    };
    SampleScene.prototype.OnStart = function () {
        Input_1.default.AddKeyDownEvent(this, "sampleSceneEvent", true);
        if (this.IsLoaded()) {
            var trans = new Transform_1.default(new Vector3_1.default(0, 0, -1), new Vector3_1.default(0, 0, 0), new Vector3_1.default(300, 300, 0));
            this.projectionPlane.SetComponent(new TransformAnimation_1.default(90, false, trans, this.projectionPlane.transform, Easing_1.default.EaseInOutCirc));
            this.stage.ToStart();
        }
    };
    SampleScene.prototype.OnEnd = function () {
        Input_1.default.RemoveKeyDownEvent("sampleSceneEvent");
        this.stage.Reset();
    };
    SampleScene.prototype.OnUpdate = function () {
        // 
        var rad = (this.sceneManager.GetGameTime().AbsoluteFrame % 360) * Math.PI / 180;
        var time = 1.5;
    };
    SampleScene.prototype.OnKeyDown = function (e) {
        if (e.key == "Escape") {
            var sceneChangeObject = this.gameObjectManager.GetGameObject("sceneChanger");
            if (sceneChangeObject) {
                return;
            }
            sceneChangeObject = this.gameObjectManager.AddGameObject("sceneChanger");
            sceneChangeObject.SetComponent(new SceneChanger_1.default("title", 100, null));
            var trans = new Transform_1.default(new Vector3_1.default(0, 0, 0), new Vector3_1.default(0, 0, 0), new Vector3_1.default(0, 0, 0));
            sceneChangeObject.SetComponent(new TransformAnimation_1.default(90, false, trans, this.projectionPlane.transform, Easing_1.default.EaseInOutCirc));
            sceneChangeObject.SetComponent(new SucideComponent_1.default(100));
        }
    };
    return SampleScene;
}(Scene_1.default));
exports.default = SampleScene;


/***/ }),

/***/ "./WebGl/Scene/Scene.ts":
/*!******************************!*\
  !*** ./WebGl/Scene/Scene.ts ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Renderer_1 = __importDefault(__webpack_require__(/*! ../Parts/Renderer */ "./WebGl/Parts/Renderer.ts"));
var Camera_1 = __importDefault(__webpack_require__(/*! ../Graphic/Camera */ "./WebGl/Graphic/Camera.ts"));
var GameObjectManager_1 = __importDefault(__webpack_require__(/*! ../GameObject/GameObjectManager */ "./WebGl/GameObject/GameObjectManager.ts"));
var CollisionManager_1 = __importDefault(__webpack_require__(/*! ../Parts/Collision/CollisionManager */ "./WebGl/Parts/Collision/CollisionManager.ts"));
function Sleep(time) {
    return new Promise(function (resolve) {
        setTimeout(resolve, time);
    });
}
var Scene = /** @class */ (function () {
    function Scene(sceneManger) {
        this.isCurrent = false;
        this.isLoaded = false;
        this.renderer = new Renderer_1.default();
        this.map_camera = new Map();
        this.ary_camera = new Array();
        this.sceneManager = sceneManger;
        this.gameObjectManager = new GameObjectManager_1.default(this);
        this.Update = this.Update_WithoutCollision;
        this.AddCamera(0, 0, "last", true);
    }
    Scene.prototype.IsCurrentScene = function () {
        return this.isCurrent;
    };
    Scene.prototype.SetCurrentScene = function (arg_iscurrent) {
        this.isCurrent = arg_iscurrent;
    };
    Scene.prototype.GetGameManager = function () {
        return this.gameObjectManager;
    };
    Scene.prototype.UseCollisionManager = function () {
        this.collisionManager = new CollisionManager_1.default();
        this.Update = this.Update_WithCollision;
    };
    Scene.prototype.GetCollisionManager = function () {
        return this.collisionManager;
    };
    Scene.prototype.IsLoaded = function () {
        return this.isLoaded;
    };
    Scene.prototype.Release = function () {
        this.OnRelease();
        this.sceneManager = null;
        this.gameObjectManager.Release();
        this.collisionManager.Release();
        this.renderer.Release();
    };
    Scene.prototype.OnRelease = function () {
    };
    Scene.prototype.GetCameraCount = function () {
        return this.ary_camera.length;
    };
    Scene.prototype.AddCamera = function (order, layer, cameraName, isPararell, frameBufferTexture) {
        var newCamera;
        if (frameBufferTexture) {
            newCamera = new Camera_1.default(this.sceneManager.GetGraphicDevice(), layer, isPararell, frameBufferTexture);
        }
        else
            newCamera = new Camera_1.default(this.sceneManager.GetGraphicDevice(), layer, isPararell);
        this.ary_camera.splice(order, 0, newCamera);
        this.map_camera[cameraName] = newCamera;
        return newCamera;
    };
    Scene.prototype.GetCamera = function (cameraName) {
        return this.map_camera[cameraName];
    };
    Scene.prototype.Draw = function () {
        var _this = this;
        this.ary_camera.forEach(function (camera) { return _this.renderer.Draw(camera); });
        this.sceneManager.GetGraphicDevice().Present();
    };
    Scene.prototype.Update_WithCollision = function () {
        this.OnUpdate();
        this.gameObjectManager.Update();
        this.collisionManager.Check();
        this.Draw();
    };
    Scene.prototype.Update_WithoutCollision = function () {
        this.OnUpdate();
        this.gameObjectManager.Update();
        this.Draw();
    };
    Scene.prototype.LoadingUpdate = function () {
        this.OnLoadingUpdate();
        this.Draw();
    };
    Scene.prototype.OnLoadingUpdate = function () {
    };
    Scene.prototype.OnUpdate = function () {
    };
    Scene.prototype.Start = function (information) {
        this.OnStart(information);
    };
    Scene.prototype.OnStart = function (information) {
    };
    Scene.prototype.End = function () {
        this.OnEnd();
    };
    Scene.prototype.OnEnd = function () {
    };
    Scene.prototype.Initialize = function () {
        this.OnInitialize();
    };
    Scene.prototype.BefLoad = function () {
    };
    Scene.prototype.Load = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.BefLoad();
                        return [4 /*yield*/, this.OnLoad()];
                    case 1:
                        _a.sent();
                        _a.label = 2;
                    case 2:
                        if (!this.sceneManager.GetResourceContainer().GetLoadingObjCount()) return [3 /*break*/, 4];
                        return [4 /*yield*/, Sleep(100)];
                    case 3:
                        _a.sent();
                        return [3 /*break*/, 2];
                    case 4:
                        this.isLoaded = true;
                        this.Initialize();
                        return [2 /*return*/];
                }
            });
        });
    };
    Scene.prototype.OnLoad = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                return [2 /*return*/];
            });
        });
    };
    Scene.prototype.OnInitialize = function () {
    };
    Scene.prototype.GetRenderer = function () {
        return this.renderer;
    };
    Scene.prototype.GetSceneManager = function () {
        return this.sceneManager;
    };
    return Scene;
}());
exports.default = Scene;


/***/ }),

/***/ "./WebGl/Scene/SceneManager.ts":
/*!*************************************!*\
  !*** ./WebGl/Scene/SceneManager.ts ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var GameTime_1 = __importDefault(__webpack_require__(/*! ../Parts/GameTime */ "./WebGl/Parts/GameTime.ts"));
var SceneManager = /** @class */ (function () {
    function SceneManager(arg_modelCreater, arg_resourceContainer, arg_graphicDevice) {
        this.map_scenes = new Map();
        this.resourceContainer = arg_resourceContainer;
        this.modelCreater = arg_modelCreater;
        this.graphicDevice = arg_graphicDevice;
        this.gameTime = new GameTime_1.default();
    }
    SceneManager.prototype.GetGraphicDevice = function () {
        return this.graphicDevice;
    };
    SceneManager.prototype.GetModelCreater = function () {
        return this.modelCreater;
    };
    SceneManager.prototype.GetResourceContainer = function () {
        return this.resourceContainer;
    };
    SceneManager.prototype.GetGameTime = function () {
        return this.gameTime;
    };
    SceneManager.prototype.Update = function () {
        if (this.currentScene.IsLoaded()) {
            this.currentScene.Update();
            this.gameTime.Count();
        }
        else {
            this.currentScene.Draw();
        }
    };
    SceneManager.prototype.AddScene = function (arg_scene, key) {
        arg_scene.Load();
        this.map_scenes[key] = arg_scene;
        return arg_scene;
    };
    SceneManager.prototype.GetScene = function (key) {
        return this.map_scenes[key];
    };
    SceneManager.prototype.GetCurrentScene = function () {
        return this.currentScene;
    };
    SceneManager.prototype.ChangeScene = function (key, information) {
        if (this.currentScene) {
            this.currentScene.SetCurrentScene(false);
            this.currentScene.End();
        }
        this.currentScene = this.map_scenes[key];
        this.currentScene.SetCurrentScene(true);
        this.currentScene.Start();
    };
    SceneManager.prototype.RemoveScene = function (key) {
        if (this.map_scenes[key]) {
            this.map_scenes[key].Release();
            delete this.map_scenes[key];
        }
    };
    return SceneManager;
}());
exports.default = SceneManager;


/***/ }),

/***/ "./WebGl/TitleScene.ts":
/*!*****************************!*\
  !*** ./WebGl/TitleScene.ts ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Scene_1 = __importDefault(__webpack_require__(/*! ./Scene/Scene */ "./WebGl/Scene/Scene.ts"));
var ResourceCreater_1 = __importDefault(__webpack_require__(/*! ./Tool/ResourceCreater */ "./WebGl/Tool/ResourceCreater.ts"));
var GeometryGenerator_1 = __importDefault(__webpack_require__(/*! ./Tool/GeometryGenerator */ "./WebGl/Tool/GeometryGenerator.ts"));
var Quat_1 = __importDefault(__webpack_require__(/*! ./Math/Quat */ "./WebGl/Math/Quat.ts"));
var Vector4_1 = __importDefault(__webpack_require__(/*! ./Math/Vector4 */ "./WebGl/Math/Vector4.ts"));
var Vector3_1 = __importDefault(__webpack_require__(/*! ./Math/Vector3 */ "./WebGl/Math/Vector3.ts"));
var PointLight_1 = __importDefault(__webpack_require__(/*! ./Light/PointLight */ "./WebGl/Light/PointLight.ts"));
var ModelDrawComponent_1 = __importDefault(__webpack_require__(/*! ./Component/ModelDrawComponent */ "./WebGl/Component/ModelDrawComponent.ts"));
var Vector2_1 = __importDefault(__webpack_require__(/*! ./Math/Vector2 */ "./WebGl/Math/Vector2.ts"));
var TextDrawComponent_1 = __importDefault(__webpack_require__(/*! ./Component/TextDrawComponent */ "./WebGl/Component/TextDrawComponent.ts"));
var Transform_1 = __importDefault(__webpack_require__(/*! ./Transform */ "./WebGl/Transform.ts"));
var Input_1 = __importDefault(__webpack_require__(/*! ./Tool/Input */ "./WebGl/Tool/Input.ts"));
var TransformAnimation_1 = __importDefault(__webpack_require__(/*! ./Component/TransformAnimation */ "./WebGl/Component/TransformAnimation.ts"));
var SceneChanger_1 = __importDefault(__webpack_require__(/*! ./Component/SceneChanger */ "./WebGl/Component/SceneChanger.ts"));
var Easing_1 = __importDefault(__webpack_require__(/*! ./Tool/Easing */ "./WebGl/Tool/Easing.ts"));
var SucideComponent_1 = __importDefault(__webpack_require__(/*! ./Component/SucideComponent */ "./WebGl/Component/SucideComponent.ts"));
var float = /** @class */ (function () {
    function float() {
        this.data = new Float32Array(1);
    }
    return float;
}());
var TitleScene = /** @class */ (function (_super) {
    __extends(TitleScene, _super);
    function TitleScene(sceneManger) {
        var _this = _super.call(this, sceneManger) || this;
        _this.aQuaternion = new Quat_1.default().Identity();
        _this.bQuaternion = new Quat_1.default().Identity();
        _this.sQuaternion = new Quat_1.default().Identity();
        _this.zoomData = new float();
        _this.isLoad = false;
        _this.zoomDirection = 1.0;
        _this.zoomData.data[0] = 0.5;
        return _this;
    }
    TitleScene.prototype.LoadingUpdate = function () {
    };
    TitleScene.prototype.OnLoad = function () {
        return __awaiter(this, void 0, void 0, function () {
            var frameBuffer, material;
            return __generator(this, function (_a) {
                this.sceneManager.GetResourceContainer().AddShader(ResourceCreater_1.default.CreateShader('shader/UVNormalColorVS.glsl', "shader/DefaultFS.glsl", this.sceneManager.GetGraphicDevice()), "texShader");
                this.sceneManager.GetResourceContainer().AddShader(ResourceCreater_1.default.CreateShader('shader/UVNormalColorVS.glsl', "shader/FontShaderFS.glsl", this.sceneManager.GetGraphicDevice()), "fontShader");
                this.sceneManager.GetResourceContainer().AddGeometry(ResourceCreater_1.default.CreateGeometry(GeometryGenerator_1.default.CreatePlane(new Vector2_1.default(1, 1), false, new Vector4_1.default(1.0, 1.0, 1.0, 1)), true, false, false, this.sceneManager.GetGraphicDevice()), "plane");
                this.sceneManager.GetResourceContainer().AddSoundFromFile("audio/title_se3.wav", "title");
                // 
                this.sceneManager.GetResourceContainer().AddTexture(ResourceCreater_1.default.CreateTexture('image/charmap.png', this.sceneManager.GetGraphicDevice()), "font");
                frameBuffer = this.sceneManager.GetResourceContainer().AddTexture(ResourceCreater_1.default.CreateFrameBuffer(1024, 1024, this.sceneManager.GetGraphicDevice()), "titleCamera");
                frameBuffer = this.sceneManager.GetResourceContainer().AddTexture(ResourceCreater_1.default.CreateFrameBuffer(1024, 1024, this.sceneManager.GetGraphicDevice()), "loadingCamera");
                material = this.sceneManager.GetResourceContainer().AddMaterial(ResourceCreater_1.default.CreateMaterial(new Vector4_1.default(0.1, 0.1, 0.1, 1.0), this.sceneManager.GetGraphicDevice(), [this.sceneManager.GetResourceContainer().GetTexture("titleCamera")]), "titleCameraMaterial");
                material.AddExParam(4, 1, this.zoomData);
                material = this.sceneManager.GetResourceContainer().AddMaterial(ResourceCreater_1.default.CreateMaterial(new Vector4_1.default(0.1, 0.1, 0.1, 1.0), this.sceneManager.GetGraphicDevice(), [this.sceneManager.GetResourceContainer().GetTexture("loadingCamera")]), "loadingCameraMaterial");
                return [2 /*return*/];
            });
        });
    };
    TitleScene.prototype.OnInitialize = function () {
        this.renderer.AddLayer();
        this.AddCamera(0, 1, "main", false, this.sceneManager.GetResourceContainer().GetTexture("titleCamera"));
        // 
        var light = new PointLight_1.default(this.sceneManager.GetGraphicDevice());
        light.transform.Position = new Vector3_1.default(-5, -5, 10);
        //this.renderer.SetLight(light,0);
        this.renderer.SetLight(light, 1);
        this.sceneManager.GetGraphicDevice().EnableStencil();
        this.GetCamera("main").transform.Position = new Vector3_1.default(0, 0, 10);
        this.GetCamera("main").transform.LookAt(new Vector3_1.default(0, 0, 0), Vector3_1.default.yAxis);
        this.GetCamera("main").clearColor = new Vector4_1.default(1.0, 1.0, 1.0, 1.0);
        this.texts = this.gameObjectManager.AddGameObject("text");
        this.projectionPlane = this.gameObjectManager.AddGameObject("projectionPlane");
        //this.torus.SetComponent(new ModelDrawComponent("hsvTorus","caloryMaterial","pointLight",1)) as ModelDrawComponent;
        //this.cube.SetComponent(new ModelDrawComponent(false, "cube","caloryMaterial","texShader",1,false)) as ModelDrawComponent;
        var tr = new Transform_1.default();
        tr.Position = new Vector3_1.default(1, 1, 1);
        var tr2 = new Transform_1.default();
        tr2.Position = new Vector3_1.default(-1, -1, 2);
        var transform = new Transform_1.default();
        transform.Scale = new Vector3_1.default(0.5, 0.5, 0.5);
        transform.Position = new Vector3_1.default(0, -1.0, 0);
        var pressAnyTransform = new Transform_1.default();
        pressAnyTransform.Scale = new Vector3_1.default(0.25, 0.25, 0.25);
        pressAnyTransform.Position = new Vector3_1.default(0, 1, 0);
        var pressTarget = new Transform_1.default();
        pressTarget.Scale = new Vector3_1.default(0.4, 0.4, 0.4);
        pressTarget.Position = new Vector3_1.default(0, 1, 0);
        this.texts.SetComponent(new TextDrawComponent_1.default("Title", "font", "fontShader", new Vector4_1.default(0.75, 0.75, 0.25, 1), 1, true, transform));
        this.texts.SetComponent(new TextDrawComponent_1.default("Press Any Key", "font", "fontShader", new Vector4_1.default(0.0, 0.0, 0.0, 1), 1, true, pressAnyTransform));
        this.texts.SetComponent(new TransformAnimation_1.default(60, true, pressTarget, pressAnyTransform));
        //this.anotherCube.SetComponent(new ModelDrawComponent(false, "cube","caloryMaterial","texShader",1,true)) as ModelDrawComponent;
        this.projectionPlane.SetComponent(new ModelDrawComponent_1.default(false, "plane", "titleCameraMaterial", "texShader", 0, false));
        this.projectionPlane.transform.Scale = new Vector3_1.default(300, 300, 1);
        this.texts.transform.Position = new Vector3_1.default(0, 0, 0.5);
        this.projectionPlane.transform.Position = new Vector3_1.default(0, 0, -1);
    };
    TitleScene.prototype.OnUpdate = function () {
    };
    TitleScene.prototype.OnStart = function () {
        Input_1.default.AddKeyDownEvent(this, "titleSceneEvent", true);
        if (this.IsLoaded()) {
            var trans = new Transform_1.default(new Vector3_1.default(0, 0, -1), new Vector3_1.default(0, 0, 0), new Vector3_1.default(300, 300, 1));
            this.texts.SetComponent(new TransformAnimation_1.default(90, false, trans, this.projectionPlane.transform, Easing_1.default.EaseInOutCirc));
        }
    };
    TitleScene.prototype.OnEnd = function () {
        Input_1.default.RemoveKeyDownEvent("titleSceneEvent");
        this.gameObjectManager.GetGameObject("sceneChanger").Dead();
    };
    TitleScene.prototype.OnKeyDown = function (e) {
        if (e.key != "Escape") {
            var sceneChangeObject = this.gameObjectManager.GetGameObject("sceneChanger");
            if (sceneChangeObject) {
                return;
            }
            this.sceneManager.GetResourceContainer().GetSound("title").Play();
            sceneChangeObject = this.gameObjectManager.AddGameObject("sceneChanger");
            sceneChangeObject.SetComponent(new SceneChanger_1.default("load", 100, null));
            var trans = new Transform_1.default(new Vector3_1.default(0, 0, -1), new Vector3_1.default(0, 0, 0), new Vector3_1.default(0, 0, 0));
            sceneChangeObject.SetComponent(new TransformAnimation_1.default(90, false, trans, this.projectionPlane.transform, Easing_1.default.EaseInOutCirc));
            sceneChangeObject.SetComponent(new SucideComponent_1.default(100));
        }
    };
    return TitleScene;
}(Scene_1.default));
exports.default = TitleScene;


/***/ }),

/***/ "./WebGl/Tool/BinaryReader.ts":
/*!************************************!*\
  !*** ./WebGl/Tool/BinaryReader.ts ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var BinaryReader = /** @class */ (function () {
    function BinaryReader(arg_buffer) {
        this.bufferView = new DataView(arg_buffer);
        this.point = 0;
    }
    BinaryReader.prototype.GetString = function (size) {
        var output = "";
        for (var i = 0; i < size; i++) {
            var read = this.bufferView.getInt8(this.point);
            if (read > 9)
                output += String.fromCharCode(read);
            else {
                switch (read) {
                    case 0:
                        output += "0";
                        break;
                    case 1:
                        output += "1";
                        break;
                    case 2:
                        output += "2";
                        break;
                    case 3:
                        output += "3";
                        break;
                    case 4:
                        output += "4";
                        break;
                    case 5:
                        output += "5";
                        break;
                    case 6:
                        output += "6";
                        break;
                    case 7:
                        output += "7";
                        break;
                    case 8:
                        output += "8";
                        break;
                    case 9:
                        output += "9";
                        break;
                }
            }
            this.point++;
        }
        return output;
    };
    BinaryReader.prototype.GetWString = function (size) {
        var output = "";
        for (var i = 0; i < size * 2; i++) {
            output += String.fromCharCode(this.bufferView.getInt8(this.point));
            this.point++;
        }
        return output;
    };
    BinaryReader.prototype.GetChar = function () {
        var output = this.bufferView.getInt8(this.point);
        this.point += 1;
        return output;
    };
    BinaryReader.prototype.GetFloat = function () {
        var output = this.bufferView.getFloat32(this.point, true);
        this.point += 4;
        return output;
    };
    BinaryReader.prototype.GetDouble = function () {
        var output = this.bufferView.getFloat64(this.point, true);
        this.point += 5;
        return output;
    };
    BinaryReader.prototype.GetInt = function (size) {
        if (!size) {
            var output = this.bufferView.getInt32(this.point, true);
            this.point += 4;
            return output;
        }
        if (size == 1) {
            var output = this.bufferView.getInt8(this.point);
            this.point += 1;
            return output;
        }
        else if (size == 2) {
            var output = this.bufferView.getInt16(this.point, true);
            this.point += 2;
            return output;
        }
        else if (size == 4) {
            var output = this.bufferView.getInt32(this.point, true);
            this.point += 4;
            return output;
        }
    };
    BinaryReader.prototype.GetUInt = function (size) {
        if (!size) {
            var output = this.bufferView.getUint32(this.point, true);
            this.point += 4;
            return output;
        }
        if (size == 1) {
            var output = this.bufferView.getUint8(this.point);
            this.point += 1;
            return output;
        }
        else if (size == 2) {
            var output = this.bufferView.getUint16(this.point, true);
            this.point += 2;
            return output;
        }
        else if (size == 4) {
            var output = this.bufferView.getUint32(this.point, true);
            this.point += 4;
            return output;
        }
    };
    return BinaryReader;
}());
exports.default = BinaryReader;


/***/ }),

/***/ "./WebGl/Tool/CollisionObjectCreater.ts":
/*!**********************************************!*\
  !*** ./WebGl/Tool/CollisionObjectCreater.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Box_AABB_1 = __importDefault(__webpack_require__(/*! ../Math/Geometry/Box_AABB */ "./WebGl/Math/Geometry/Box_AABB.ts"));
var Box_OBB_1 = __importDefault(__webpack_require__(/*! ../Math/Geometry/Box_OBB */ "./WebGl/Math/Geometry/Box_OBB.ts"));
var GeometryHelper_1 = __importDefault(__webpack_require__(/*! ../Math/Geometry/GeometryHelper */ "./WebGl/Math/Geometry/GeometryHelper.ts"));
var Sphere_1 = __importDefault(__webpack_require__(/*! ../Math/Geometry/Sphere */ "./WebGl/Math/Geometry/Sphere.ts"));
var Vector3_1 = __importDefault(__webpack_require__(/*! ../Math/Vector3 */ "./WebGl/Math/Vector3.ts"));
var CollisionObject_1 = __importDefault(__webpack_require__(/*! ../Parts/Collision/CollisionObject */ "./WebGl/Parts/Collision/CollisionObject.ts"));
var CollisionObjectCreater = /** @class */ (function () {
    function CollisionObjectCreater() {
    }
    CollisionObjectCreater.CreatePoint = function (arg_gameObject) {
        return new CollisionObject_1.default(arg_gameObject, new CollisionPrimitive_Point(arg_gameObject.transform));
    };
    CollisionObjectCreater.CreateSphere = function (arg_radius, arg_gameObject) {
        return new CollisionObject_1.default(arg_gameObject, new CollisionPrimitive_Sphere(arg_radius, arg_gameObject.transform));
    };
    CollisionObjectCreater.CreateCube_AABB = function (arg_length, arg_gameObject) {
        return new CollisionObject_1.default(arg_gameObject, new CollisionPrimitive_Box_AABB(arg_length, arg_gameObject.transform));
    };
    CollisionObjectCreater.CreateCube_OBB = function (arg_length, arg_gameObject) {
        return new CollisionObject_1.default(arg_gameObject, new CollisionPrimitive_Box_OBB(arg_length, arg_gameObject.transform));
    };
    return CollisionObjectCreater;
}());
exports.default = CollisionObjectCreater;
var CollisionPrimitive_Point = /** @class */ (function () {
    function CollisionPrimitive_Point(arg_transform) {
        this.transform = arg_transform;
        this.position = this.transform.Position;
    }
    CollisionPrimitive_Point.prototype.Initialize = function () {
    };
    CollisionPrimitive_Point.prototype.PreInitialize = function () {
    };
    CollisionPrimitive_Point.prototype.Update = function () {
        this.position = this.transform.Position;
    };
    CollisionPrimitive_Point.prototype.GetPosition = function () {
        return this.transform.Position;
    };
    CollisionPrimitive_Point.prototype.IsHit = function (other) {
        return other.IsHitPoint(this);
    };
    CollisionPrimitive_Point.prototype.GetMaxPointAndMinPoint = function (arg_outputMax, arg_outputMin) {
        var point = this.transform.Position;
        arg_outputMax.data = point.data;
        arg_outputMin.data = point.data;
    };
    CollisionPrimitive_Point.prototype.IsHitPoint = function (other) {
        return other.GetPosition() == this.GetPosition();
    };
    CollisionPrimitive_Point.prototype.IsHitSphere = function (other) {
        return GeometryHelper_1.default.IsHitPointSphere(this.position, other.geometry);
    };
    CollisionPrimitive_Point.prototype.IsHitBox_AABB = function (other) {
        return GeometryHelper_1.default.IsHitPointBox_AABB(this.position, other.geometry);
    };
    CollisionPrimitive_Point.prototype.IsHitBox_OBB = function (other) {
        return GeometryHelper_1.default.IsHitPointBox_OBB(this.position, other.geometry);
    };
    return CollisionPrimitive_Point;
}());
;
var CollisionPrimitive_Sphere = /** @class */ (function () {
    function CollisionPrimitive_Sphere(arg_radius, arg_transform) {
        this.transform = arg_transform;
        this.geometry = new Sphere_1.default(arg_radius, this.transform.Position, this.transform.Scale.x);
    }
    CollisionPrimitive_Sphere.prototype.Initialize = function () {
    };
    CollisionPrimitive_Sphere.prototype.PreInitialize = function () {
    };
    CollisionPrimitive_Sphere.prototype.GetMaxPointAndMinPoint = function (arg_outputMax, arg_outputMin) {
        arg_outputMax.data = this.geometry.position.Add(new Vector3_1.default(this.geometry.radius, this.geometry.radius, this.geometry.radius)).data;
        //console.log(arg_outputMax);
        arg_outputMin.data = this.geometry.position.Sub(new Vector3_1.default(this.geometry.radius, this.geometry.radius, this.geometry.radius)).data;
    };
    CollisionPrimitive_Sphere.prototype.Update = function () {
        this.geometry.position = this.transform.Position;
        this.geometry.radius = this.transform.Scale.x * this.geometry.initRadius;
    };
    CollisionPrimitive_Sphere.prototype.IsHit = function (other) {
        return other.IsHitSphere(this);
    };
    CollisionPrimitive_Sphere.prototype.IsHitBox_OBB = function (other) {
        return GeometryHelper_1.default.IsHitSphereBox_OBB(this.geometry, other.geometry);
    };
    CollisionPrimitive_Sphere.prototype.IsHitPoint = function (other) {
        return GeometryHelper_1.default.IsHitPointSphere(other.position, this.geometry);
    };
    CollisionPrimitive_Sphere.prototype.IsHitSphere = function (other) {
        return GeometryHelper_1.default.IsHitSphereSphere(this.geometry, other.geometry);
    };
    CollisionPrimitive_Sphere.prototype.IsHitBox_AABB = function (other) {
        return GeometryHelper_1.default.IsHitSphereBox_AABB(this.geometry, other.geometry);
    };
    return CollisionPrimitive_Sphere;
}());
;
var CollisionPrimitive_Box_AABB = /** @class */ (function () {
    function CollisionPrimitive_Box_AABB(arg_length, arg_weak_transform) {
        this.geometry = new Box_AABB_1.default(arg_length, arg_weak_transform.Position);
        this.transform = arg_weak_transform;
        this.geometry.initLengthes = arg_length.Div(2);
    }
    CollisionPrimitive_Box_AABB.prototype.Initialize = function () {
    };
    CollisionPrimitive_Box_AABB.prototype.PreInitialize = function () {
    };
    CollisionPrimitive_Box_AABB.prototype.GetMaxPointAndMinPoint = function (arg_outputMax, arg_outputMin) {
        arg_outputMax.data = this.geometry.position.Add(this.geometry.halfLengthes).data;
        arg_outputMin.data = this.geometry.position.Sub(this.geometry.halfLengthes).data;
    };
    CollisionPrimitive_Box_AABB.prototype.Update = function () {
        this.geometry.position = this.transform.Position;
        this.geometry.halfLengthes = this.geometry.initLengthes.Multiply_Vec3(this.transform.Scale);
    };
    CollisionPrimitive_Box_AABB.prototype.IsHit = function (other) {
        return other.IsHitBox_AABB(this);
    };
    CollisionPrimitive_Box_AABB.prototype.IsHitBox_OBB = function (other) {
        return GeometryHelper_1.default.IsHitBox_OBBBox_AABB(this.geometry, other.geometry);
    };
    CollisionPrimitive_Box_AABB.prototype.IsHitPoint = function (other) {
        return GeometryHelper_1.default.IsHitPointBox_AABB(other.position, this.geometry);
    };
    CollisionPrimitive_Box_AABB.prototype.IsHitSphere = function (other) {
        return GeometryHelper_1.default.IsHitSphereBox_AABB(other.geometry, this.geometry);
    };
    CollisionPrimitive_Box_AABB.prototype.IsHitBox_AABB = function (other) {
        return GeometryHelper_1.default.IsHitBox_AABB(this.geometry, other.geometry);
    };
    return CollisionPrimitive_Box_AABB;
}());
;
var CollisionPrimitive_Box_OBB = /** @class */ (function () {
    function CollisionPrimitive_Box_OBB(arg_length, arg_weak_transform) {
        this.geometry = new Box_OBB_1.default(arg_length);
        this.transform = arg_weak_transform;
        this.geometry.initLengthes = arg_length.Div(2);
    }
    CollisionPrimitive_Box_OBB.prototype.Initialize = function () {
    };
    CollisionPrimitive_Box_OBB.prototype.PreInitialize = function () {
    };
    CollisionPrimitive_Box_OBB.prototype.GetMaxPointAndMinPoint = function (arg_outputMax, arg_outputMin) {
        var aabb_legthes = GeometryHelper_1.default.GetBox_OBBContainAABBLength(this.geometry);
        arg_outputMax.data = this.geometry.position.Add(aabb_legthes).data;
        arg_outputMin.data = this.geometry.position.Sub(aabb_legthes).data;
    };
    CollisionPrimitive_Box_OBB.prototype.Update = function () {
        this.geometry.position = this.transform.Position;
        this.geometry.directs[0] = this.transform.GetRight();
        this.geometry.directs[1] = this.transform.GetUp();
        this.geometry.directs[2] = this.transform.GetFront();
        //console.log(this.geometry.directs[0]);
        this.geometry.halfLengthes = this.geometry.initLengthes.Multiply_Vec3(this.transform.Scale);
    };
    CollisionPrimitive_Box_OBB.prototype.IsHit = function (other) {
        return other.IsHitBox_OBB(this);
    };
    CollisionPrimitive_Box_OBB.prototype.IsHitBox_OBB = function (other) {
        return GeometryHelper_1.default.IsHitBox_OBB(other.geometry, this.geometry);
    };
    CollisionPrimitive_Box_OBB.prototype.IsHitPoint = function (other) {
        return GeometryHelper_1.default.IsHitPointBox_OBB(other.position, this.geometry);
    };
    CollisionPrimitive_Box_OBB.prototype.IsHitSphere = function (other) {
        return GeometryHelper_1.default.IsHitSphereBox_OBB(other.geometry, this.geometry);
    };
    CollisionPrimitive_Box_OBB.prototype.IsHitBox_AABB = function (other) {
        return GeometryHelper_1.default.IsHitBox_OBBBox_AABB(other.geometry, this.geometry);
    };
    return CollisionPrimitive_Box_OBB;
}());


/***/ }),

/***/ "./WebGl/Tool/ColorController.ts":
/*!***************************************!*\
  !*** ./WebGl/Tool/ColorController.ts ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Vector4_1 = __importDefault(__webpack_require__(/*! ../Math/Vector4 */ "./WebGl/Math/Vector4.ts"));
var ColorController = /** @class */ (function () {
    function ColorController() {
    }
    ColorController.hsva = function (h, s, v, a) {
        if (s > 1 || v > 1 || a > 1) {
            return;
        }
        var th = h % 360;
        var i = Math.floor(th / 60);
        var f = th / 60 - i;
        var m = v * (1 - s);
        var n = v * (1 - s * f);
        var k = v * (1 - s * (1 - f));
        var color;
        if (!(s > 0) && !(s < 0)) {
            color = new Vector4_1.default(v, v, v, a);
        }
        else {
            var r = new Array(v, n, m, m, k, v);
            var g = new Array(k, v, v, n, m, m);
            var b = new Array(m, m, k, v, v, n);
            color = new Vector4_1.default(r[i], g[i], b[i], a);
        }
        return color;
    };
    return ColorController;
}());
exports.default = ColorController;


/***/ }),

/***/ "./WebGl/Tool/Easing.ts":
/*!******************************!*\
  !*** ./WebGl/Tool/Easing.ts ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Easing = /** @class */ (function () {
    function Easing() {
    }
    Easing.EaseInSine = function (x) {
        return 1 - Math.cos((x * Math.PI) / 2);
    };
    Easing.EaseOutSine = function (x) {
        return Math.sin((x * Math.PI) / 2);
    };
    Easing.EaseInOutSine = function (x) {
        return -(Math.cos(Math.PI * x) - 1) / 2;
    };
    Easing.EaseInQuad = function (x) {
        return x * x;
    };
    Easing.EaseOutQuad = function (x) {
        return 1 - (1 - x) * (1 - x);
    };
    Easing.EaseInOutQuad = function (x) {
        return x < 0.5 ? 2 * x * x : 1 - Math.pow(-2 * x + 2, 2) / 2;
    };
    Easing.EaseInCubic = function (x) {
        return x * x * x;
    };
    Easing.EaseOutCubic = function (x) {
        return 1 - Math.pow(1 - x, 3);
    };
    Easing.EaseInOutCubic = function (x) {
        return x < 0.5 ? 4 * x * x * x : 1 - Math.pow(-2 * x + 2, 3) / 2;
    };
    Easing.EaseInQuart = function (x) {
        return x * x * x * x;
    };
    Easing.EaseOutQuart = function (x) {
        return 1 - Math.pow(1 - x, 4);
    };
    Easing.EaseInOutQuart = function (x) {
        return x < 0.5 ? 8 * x * x * x * x : 1 - Math.pow(-2 * x + 2, 4) / 2;
    };
    Easing.EaseInCirc = function (x) {
        return 1 - Math.sqrt(1 - Math.pow(x, 2));
    };
    Easing.EaseOutCirc = function (x) {
        return Math.sqrt(1 - Math.pow(x - 1, 2));
    };
    Easing.EaseInOutCirc = function (x) {
        return x < 0.5
            ? (1 - Math.sqrt(1 - Math.pow(2 * x, 2))) / 2
            : (Math.sqrt(1 - Math.pow(-2 * x + 2, 2)) + 1) / 2;
    };
    Easing.EaseInBack = function (x) {
        var c1 = 1.70158;
        var c3 = c1 + 1;
        return c3 * x * x * x - c1 * x * x;
    };
    Easing.EaseOutBack = function (x) {
        var c1 = 1.70158;
        var c3 = c1 + 1;
        return 1 + c3 * Math.pow(x - 1, 3) + c1 * Math.pow(x - 1, 2);
    };
    Easing.EaseInOutBack = function (x) {
        var c1 = 1.70158;
        var c2 = c1 * 1.525;
        return x < 0.5
            ? (Math.pow(2 * x, 2) * ((c2 + 1) * 2 * x - c2)) / 2
            : (Math.pow(2 * x - 2, 2) * ((c2 + 1) * (x * 2 - 2) + c2) + 2) / 2;
    };
    Easing.EaseInElastic = function (x) {
        var c4 = (2 * Math.PI) / 3;
        return x === 0
            ? 0
            : x === 1
                ? 1
                : -Math.pow(2, 10 * x - 10) * Math.sin((x * 10 - 10.75) * c4);
    };
    Easing.EaseOutElastic = function (x) {
        var c4 = (2 * Math.PI) / 3;
        return x === 0
            ? 0
            : x === 1
                ? 1
                : Math.pow(2, -10 * x) * Math.sin((x * 10 - 0.75) * c4) + 1;
    };
    Easing.EaseInOutElastic = function (x) {
        var c5 = (2 * Math.PI) / 4.5;
        return x === 0
            ? 0
            : x === 1
                ? 1
                : x < 0.5
                    ? -(Math.pow(2, 20 * x - 10) * Math.sin((20 * x - 11.125) * c5)) / 2
                    : (Math.pow(2, -20 * x + 10) * Math.sin((20 * x - 11.125) * c5)) / 2 + 1;
    };
    Easing.EaseInQuint = function (x) {
        return x * x * x * x * x;
    };
    Easing.EaseOutQuint = function (x) {
        return 1 - Math.pow(1 - x, 5);
    };
    Easing.EaseInOutQuint = function (x) {
        return x < 0.5 ? 16 * x * x * x * x * x : 1 - Math.pow(-2 * x + 2, 5) / 2;
    };
    Easing.EaseInExpo = function (x) {
        return x === 0 ? 0 : Math.pow(2, 10 * x - 10);
    };
    Easing.EaseOutExpo = function (x) {
        return x === 1 ? 1 : 1 - Math.pow(2, -10 * x);
    };
    Easing.EaseInOutExpo = function (x) {
        return x === 0
            ? 0
            : x === 1
                ? 1
                : x < 0.5 ? Math.pow(2, 20 * x - 10) / 2
                    : (2 - Math.pow(2, -20 * x + 10)) / 2;
    };
    Easing.Parabola = function (x) {
        return -(x - 0.5) * (x - 0.5) * 4 + 1;
    };
    return Easing;
}());
exports.default = Easing;


/***/ }),

/***/ "./WebGl/Tool/FileLoader.ts":
/*!**********************************!*\
  !*** ./WebGl/Tool/FileLoader.ts ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var FileLoader = /** @class */ (function () {
    function FileLoader() {
    }
    FileLoader.LoadText = function (arg_filePath, isAsynch) {
        var xmlHttp = new XMLHttpRequest();
        if (isAsynch)
            xmlHttp.open("GET", arg_filePath, isAsynch);
        else {
            xmlHttp.open("GET", arg_filePath, false);
        }
        xmlHttp.send(null);
        var data = xmlHttp.responseText;
        return data;
    };
    FileLoader.LoadBin = function (arg_filePath, arg_out) {
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.open("GET", arg_filePath, true);
        xmlHttp.responseType = "arraybuffer";
        xmlHttp.onload = function () {
            OnBinLoad(arg_out, xmlHttp.response);
        };
        xmlHttp.send(null);
    };
    return FileLoader;
}());
exports.default = FileLoader;
function OnBinLoad(arg_out, arg_aryBuffer) {
    arg_out.buffer = arg_aryBuffer;
    arg_out.Initialize();
}


/***/ }),

/***/ "./WebGl/Tool/GeometryGenerator.ts":
/*!*****************************************!*\
  !*** ./WebGl/Tool/GeometryGenerator.ts ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var ColorController_1 = __importDefault(__webpack_require__(/*! ./ColorController */ "./WebGl/Tool/ColorController.ts"));
var GeometryGenerater = /** @class */ (function () {
    function GeometryGenerater() {
    }
    GeometryGenerater.CreateTorus = function (row, column, irad, orad, color) {
        var pos = new Array(), nor = new Array(), col = new Array(), st = new Array(), idx = new Array();
        for (var i = 0; i <= row; i++) {
            var r = Math.PI * 2 / row * i;
            var rr = Math.cos(r);
            var ry = Math.sin(r);
            for (var ii = 0; ii <= column; ii++) {
                var tr = Math.PI * 2 / column * ii;
                var tx = (rr * irad + orad) * Math.cos(tr);
                var ty = ry * irad;
                var tz = (rr * irad + orad) * Math.sin(tr);
                var rx = rr * Math.cos(tr);
                var rz = rr * Math.sin(tr);
                var tc;
                if (color) {
                    tc = color;
                }
                else {
                    tc = ColorController_1.default.hsva(360 / column * ii, 1, 1, 1);
                }
                var rs = 1 / column * ii;
                var rt = 1 / row * i + 0.5;
                if (rt > 1.0) {
                    rt -= 1.0;
                }
                rt = 1.0 - rt;
                pos.push(tx, ty, tz);
                nor.push(rx, ry, rz);
                col.push(tc.x, tc.y, tc.z, tc.w);
                st.push(rs, rt);
            }
        }
        for (i = 0; i < row; i++) {
            for (ii = 0; ii < column; ii++) {
                r = (column + 1) * i + ii;
                idx.push(r, r + column + 1, r + 1);
                idx.push(r + column + 1, r + column + 2, r + 1);
            }
        }
        var output = { p: pos, n: nor, c: col, uv: st, i: idx };
        return output;
    };
    GeometryGenerater.CreateSphere = function (row, column, rad, color) {
        var pos = new Array(), nor = new Array(), col = new Array(), st = new Array(), idx = new Array();
        for (var i = 0; i <= row; i++) {
            var r = Math.PI / row * i;
            var ry = Math.cos(r);
            var rr = Math.sin(r);
            for (var ii = 0; ii <= column; ii++) {
                var tr = Math.PI * 2 / column * ii;
                var tx = rr * rad * Math.cos(tr);
                var ty = ry * rad;
                var tz = rr * rad * Math.sin(tr);
                var rx = rr * Math.cos(tr);
                var rz = rr * Math.sin(tr);
                var tc;
                if (color) {
                    tc = color;
                }
                else {
                    tc = ColorController_1.default.hsva(360 / row * i, 0.5, 0.5, 1.0);
                }
                pos.push(tx, ty, tz);
                nor.push(rx, ry, rz);
                col.push(tc.data[0], tc.data[1], tc.data[2], tc.data[3]);
                st.push(1 - 1 / column * ii, 1 / row * i);
            }
        }
        r = 0;
        for (i = 0; i < row; i++) {
            for (ii = 0; ii < column; ii++) {
                r = (column + 1) * i + ii;
                idx.push(r, r + 1, r + column + 2);
                idx.push(r, r + column + 2, r + column + 1);
            }
        }
        return { p: pos, n: nor, c: col, uv: st, i: idx };
    };
    GeometryGenerater.CreateCube = function (side, color) {
        var hs = side * 0.5;
        var pos = [
            -hs, -hs, hs, hs, -hs, hs, hs, hs, hs, -hs, hs, hs,
            -hs, -hs, -hs, -hs, hs, -hs, hs, hs, -hs, hs, -hs, -hs,
            -hs, hs, -hs, -hs, hs, hs, hs, hs, hs, hs, hs, -hs,
            -hs, -hs, -hs, hs, -hs, -hs, hs, -hs, hs, -hs, -hs, hs,
            hs, -hs, -hs, hs, hs, -hs, hs, hs, hs, hs, -hs, hs,
            -hs, -hs, -hs, -hs, -hs, hs, -hs, hs, hs, -hs, hs, -hs
        ];
        var nor = [
            -1.0, -1.0, 1.0, 1.0, -1.0, 1.0, 1.0, 1.0, 1.0, -1.0, 1.0, 1.0,
            -1.0, -1.0, -1.0, -1.0, 1.0, -1.0, 1.0, 1.0, -1.0, 1.0, -1.0, -1.0,
            -1.0, 1.0, -1.0, -1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, -1.0,
            -1.0, -1.0, -1.0, 1.0, -1.0, -1.0, 1.0, -1.0, 1.0, -1.0, -1.0, 1.0,
            1.0, -1.0, -1.0, 1.0, 1.0, -1.0, 1.0, 1.0, 1.0, 1.0, -1.0, 1.0,
            -1.0, -1.0, -1.0, -1.0, -1.0, 1.0, -1.0, 1.0, 1.0, -1.0, 1.0, -1.0
        ];
        var col = new Array();
        for (var i = 0; i < pos.length / 3; i++) {
            if (color) {
                var tc = color;
            }
            else {
                tc = ColorController_1.default.hsva(360 / pos.length / 3 * i, 1, 1, 1);
            }
            col.push(tc.x, tc.y, tc.z, tc.w);
        }
        var st = [
            0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,
            0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,
            0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,
            0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,
            0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0,
            0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0
        ];
        var idx = [
            0, 1, 2, 0, 2, 3,
            4, 5, 6, 4, 6, 7,
            8, 9, 10, 8, 10, 11,
            12, 13, 14, 12, 14, 15,
            16, 17, 18, 16, 18, 19,
            20, 21, 22, 20, 22, 23
        ];
        return { p: pos, n: nor, c: col, uv: st, i: idx };
    };
    GeometryGenerater.CreatePlane = function (arg_size, isReverse, arg_color) {
        var pos = new Array();
        var nor = new Array();
        var col = new Array();
        var idx = new Array();
        var uv = new Array();
        pos = [
            -arg_size.x, arg_size.y, 0.0,
            arg_size.x, arg_size.y, 0.0,
            -arg_size.x, -arg_size.y, 0.0,
            arg_size.x, -arg_size.y, 0.0,
        ];
        nor = [
            0.0, 0.0, -1.0,
            0.0, 0.0, -1.0,
            0.0, 0.0, -1.0,
            0.0, 0.0, -1.0,
        ];
        if (arg_color) {
            col = [
                arg_color.x, arg_color.y, arg_color.z, arg_color.w,
                arg_color.x, arg_color.y, arg_color.z, arg_color.w,
                arg_color.x, arg_color.y, arg_color.z, arg_color.w,
                arg_color.x, arg_color.y, arg_color.z, arg_color.w
            ];
        }
        else {
            col = [1, 1, 1, 1,
                1, 1, 1, 1,
                1, 1, 1, 1,
                1, 1, 1, 1
            ];
        }
        idx = [
            2, 3, 1,
            2, 1, 0,
        ];
        if (isReverse)
            uv = [
                0.0, 1.0,
                1.0, 1.0,
                0.0, 0.0,
                1.0, 0.0
            ];
        else {
            uv = [
                0.0, 0.0,
                1.0, 0.0,
                0.0, 1.0,
                1.0, 1.0
            ];
        }
        return { p: pos, n: nor, c: col, i: idx, uv: uv };
    };
    GeometryGenerater.CreateBar = function (arg_size, isReverse, arg_color) {
        var pos = new Array();
        var nor = new Array();
        var col = new Array();
        var idx = new Array();
        var uv = new Array();
        pos = [
            -arg_size.x, 0, 0.0,
            arg_size.x, 0, 0.0,
            -arg_size.x, -arg_size.y * 2, 0.0,
            arg_size.x, -arg_size.y * 2, 0.0,
        ];
        nor = [
            0.0, 0.0, -1.0,
            0.0, 0.0, -1.0,
            0.0, 0.0, -1.0,
            0.0, 0.0, -1.0,
        ];
        if (arg_color) {
            col = [
                arg_color.x, arg_color.y, arg_color.z, arg_color.w,
                arg_color.x, arg_color.y, arg_color.z, arg_color.w,
                arg_color.x, arg_color.y, arg_color.z, arg_color.w,
                arg_color.x, arg_color.y, arg_color.z, arg_color.w
            ];
        }
        else {
            col = [1, 1, 1, 1,
                1, 1, 1, 1,
                1, 1, 1, 1,
                1, 1, 1, 1
            ];
        }
        idx = [
            2, 3, 1,
            2, 1, 0,
        ];
        if (isReverse)
            uv = [
                0.0, 1.0,
                1.0, 1.0,
                0.0, 0.0,
                1.0, 0.0
            ];
        else {
            uv = [
                0.0, 0.0,
                1.0, 0.0,
                0.0, 1.0,
                1.0, 1.0
            ];
        }
        return { p: pos, n: nor, c: col, i: idx, uv: uv };
    };
    GeometryGenerater.CreateTextGeometry = function (textLength) {
        var pos = new Array();
        var idx = new Array();
        var uv = new Array();
        var unit = 1.0;
        var half = textLength / 2.0;
        for (var i = 0; i < textLength; i++) {
            pos.push(-unit * 0.5 + i * unit - unit * half, unit, 0.0);
            pos.push(unit * 0.5 + i * unit - unit * half, unit, 0.0);
            pos.push(-unit * 0.5 + i * unit - unit * half, -unit, 0.0);
            pos.push(unit * 0.5 + i * unit - unit * half, -unit, 0.0);
        }
        for (var i = 0; i < textLength; i++) {
            idx.push(2 + i * 4, 3 + i * 4, 1 + i * 4);
            idx.push(2 + i * 4, 1 + i * 4, 0 + i * 4);
        }
        for (var i = 0; i < textLength; i++) {
            uv.push(0.0, 1.0);
            uv.push(1.0, 1.0);
            uv.push(0.0, 0.0);
            uv.push(1.0, 0.0);
        }
        return { p: pos, i: idx, uv: uv };
    };
    return GeometryGenerater;
}());
exports.default = GeometryGenerater;


/***/ }),

/***/ "./WebGl/Tool/Input.ts":
/*!*****************************!*\
  !*** ./WebGl/Tool/Input.ts ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Vector2_1 = __importDefault(__webpack_require__(/*! ../Math/Vector2 */ "./WebGl/Math/Vector2.ts"));
var Input = /** @class */ (function () {
    function Input() {
    }
    Input.GetCanvasPosition = function (e) {
        return new Vector2_1.default(e.clientX - this.canvas.offsetLeft - this.canvas.width * 0.5, e.clientY - this.canvas.offsetTop - this.canvas.height * 0.5);
    };
    Input.AddClickEvent = function (arg_obj, arg_eventName, isUseEvent) {
        var event = this.clickEvents[arg_eventName];
        if (!event) {
            event = { obj: arg_obj, handleEvent: OnClick };
            this.clickEvents[arg_eventName] = event;
        }
        if (isUseEvent)
            this.canvas.addEventListener("click", event, isUseEvent);
        else {
            this.canvas.addEventListener("click", event, false);
        }
    };
    Input.AddMouseDownEvent = function (arg_obj, arg_eventName, isUseEvent) {
        var event = this.mouseDownEvents[arg_eventName];
        if (!event) {
            event = { obj: arg_obj, handleEvent: OnMouseDown };
            this.mouseDownEvents[arg_eventName] = event;
        }
        if (isUseEvent)
            this.canvas.addEventListener("mousedown", event, isUseEvent);
        else {
            this.canvas.addEventListener("mousedown", event, false);
        }
    };
    Input.AddMouseUpEvent = function (arg_obj, arg_eventName, isUseEvent) {
        var event = this.mouseUpEvents[arg_eventName];
        if (!event) {
            event = { obj: arg_obj, handleEvent: OnMouseUp };
            ;
            this.mouseUpEvents[arg_eventName] = event;
        }
        if (isUseEvent)
            this.canvas.addEventListener("mouseup", event, isUseEvent);
        else {
            this.canvas.addEventListener("mouseup", event, false);
        }
    };
    Input.AddKeyUpEvent = function (arg_obj, arg_eventName, isUseEvent) {
        var event = this.keyUpEvents[arg_eventName];
        if (event) {
            return;
        }
        console.log("AddKey");
        event = { obj: arg_obj, handleEvent: OnKeyUp };
        this.keyUpEvents[arg_eventName] = event;
        if (isUseEvent)
            document.addEventListener("keyup", event, isUseEvent);
        else {
            document.addEventListener("keyup", event, false);
        }
    };
    Input.AddKeyDownEvent = function (arg_obj, arg_eventName, isUseEvent) {
        var event = this.keyDownEvents[arg_eventName];
        if (event) {
            return;
        }
        event = { obj: arg_obj, handleEvent: OnKeyDown };
        this.keyDownEvents[arg_eventName] = event;
        if (isUseEvent)
            document.addEventListener("keydown", event, isUseEvent);
        else {
            document.addEventListener("keydown", event, false);
        }
    };
    Input.AddMouseMoveEvent = function (arg_obj, arg_eventName, isUseEvent) {
        var event = this.mouseMoveEvents[arg_eventName];
        if (!event) {
            event = { obj: arg_obj, handleEvent: OnMouseMove };
            this.mouseMoveEvents[arg_eventName] = event;
        }
        if (isUseEvent)
            this.canvas.addEventListener("mousemove", event, isUseEvent);
        else {
            this.canvas.addEventListener("mousemove", event, false);
        }
    };
    Input.AddMouseWheelEvent = function (arg_obj, arg_eventName, isUseEvent) {
        var event = this.mouseWheelEvents[arg_eventName];
        if (!event) {
            event = { obj: arg_obj, handleEvent: OnMouseWheel };
            this.mouseWheelEvents[arg_eventName] = event;
        }
        if (isUseEvent)
            this.canvas.addEventListener("mousewheel", event, isUseEvent);
        else {
            this.canvas.addEventListener("mousewheel", event, false);
        }
    };
    Input.RemoveKeyDownEvent = function (arg_eventName) {
        var event = this.keyDownEvents[arg_eventName];
        if (event) {
            console.log(arg_eventName);
            document.removeEventListener("keydown", event, true);
            this.keyDownEvents[arg_eventName] = null;
        }
    };
    Input.RemoveKeyUpEvent = function (arg_eventName) {
        var event = this.keyUpEvents[arg_eventName];
        if (event) {
            document.removeEventListener("keyup", event, true);
            this.keyUpEvents[arg_eventName] = null;
        }
    };
    Input.RemoveClickEvent = function (arg_eventName) {
        var event = this.clickEvents[arg_eventName];
        if (event) {
            document.removeEventListener("click", event, true);
            this.clickEvents[arg_eventName] = null;
        }
    };
    Input.RemoveMouseUpEvent = function (arg_eventName) {
        var event = this.mouseUpEvents[arg_eventName];
        if (event) {
            document.removeEventListener("mouseup", event, true);
            this.mouseUpEvents[arg_eventName] = null;
        }
    };
    Input.RemoveMouseDownEvent = function (arg_eventName) {
        var event = this.mouseDownEvents[arg_eventName];
        if (event) {
            document.removeEventListener("mosedown", event, true);
            this.mouseDownEvents[arg_eventName] = null;
        }
    };
    Input.RemoveMouseMoveEvent = function (arg_eventName) {
        var event = this.mouseMoveEvents[arg_eventName];
        if (event) {
            document.removeEventListener("mousemove", event, true);
            this.mouseMoveEvents[arg_eventName] = null;
        }
    };
    Input.RemoveWheelEvent = function (arg_eventName) {
        var event = this.mouseWheelEvents[arg_eventName];
        if (event) {
            document.removeEventListener("mousewheel", event, true);
            this.mouseWheelEvents[arg_eventName] = null;
        }
    };
    Input.clickEvents = new Map();
    Input.mouseDownEvents = new Map();
    Input.mouseUpEvents = new Map();
    Input.keyUpEvents = new Map();
    Input.keyDownEvents = new Map();
    Input.mouseMoveEvents = new Map();
    Input.mouseWheelEvents = new Map();
    return Input;
}());
exports.default = Input;
function OnClick(e) {
    this.obj.OnClick(e);
}
function OnKeyDown(e) {
    this.obj.OnKeyDown(e);
}
function OnKeyUp(e) {
    this.obj.OnKeyUp(e);
}
function OnMouseUp(e) {
    this.obj.OnMouseUp(e);
}
function OnMouseDown(e) {
    this.obj.OnMouseUp(e);
}
function OnMouseMove(e) {
    this.obj.OnMouseMove(e);
}
function OnMouseWheel(e) {
    this.obj.OnMouseWheel(e);
}


/***/ }),

/***/ "./WebGl/Tool/MathHelper.ts":
/*!**********************************!*\
  !*** ./WebGl/Tool/MathHelper.ts ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var rad = Math.PI / 180;
var sinRets = new Float32Array(360);
var MathHelper = /** @class */ (function () {
    function MathHelper() {
    }
    Object.defineProperty(MathHelper.prototype, "Rad", {
        get: function () {
            return rad;
        },
        enumerable: false,
        configurable: true
    });
    MathHelper.InitSinRets = function () {
        if (this.isInitSin) {
            return;
        }
        for (var i = 0; i < 360; i++) {
            sinRets[i] = Math.sin(this.ToRadian(i));
        }
        this.isInitSin = true;
    };
    MathHelper.ToRadian = function (degree) {
        return degree * rad;
    };
    MathHelper.GetSinPos = function (arg_t) {
        return sinRets[arg_t % 360];
    };
    MathHelper.isInitSin = false;
    return MathHelper;
}());
exports.default = MathHelper;


/***/ }),

/***/ "./WebGl/Tool/RandomHelper.ts":
/*!************************************!*\
  !*** ./WebGl/Tool/RandomHelper.ts ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var RandomHelper = /** @class */ (function () {
    function RandomHelper() {
    }
    RandomHelper.GetRandomInt = function (min, max) {
        return Math.floor(Math.random() * Math.floor(max - min + 1)) + min;
    };
    RandomHelper.GetRandomFloat = function (min, max) {
        return (Math.random() * Math.floor(max - min + 1)) + min;
    };
    return RandomHelper;
}());
exports.default = RandomHelper;


/***/ }),

/***/ "./WebGl/Tool/ResourceCreater.ts":
/*!***************************************!*\
  !*** ./WebGl/Tool/ResourceCreater.ts ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Texture_1 = __importDefault(__webpack_require__(/*! ../Resource/Texture */ "./WebGl/Resource/Texture.ts"));
var Material_1 = __importDefault(__webpack_require__(/*! ../Resource/Material */ "./WebGl/Resource/Material.ts"));
var Shader_1 = __importDefault(__webpack_require__(/*! ../Resource/Shader */ "./WebGl/Resource/Shader.ts"));
var Geometry_1 = __importDefault(__webpack_require__(/*! ../Resource/Geometry */ "./WebGl/Resource/Geometry.ts"));
var Vector4_1 = __importDefault(__webpack_require__(/*! ../Math/Vector4 */ "./WebGl/Math/Vector4.ts"));
var FrameBufferTexture_1 = __importDefault(__webpack_require__(/*! ../Resource/FrameBufferTexture */ "./WebGl/Resource/FrameBufferTexture.ts"));
var Mesh_1 = __importDefault(__webpack_require__(/*! ../Resource/Mesh */ "./WebGl/Resource/Mesh.ts"));
var FileLoader_1 = __importDefault(__webpack_require__(/*! ./FileLoader */ "./WebGl/Tool/FileLoader.ts"));
var BinaryReader_1 = __importDefault(__webpack_require__(/*! ../Tool/BinaryReader */ "./WebGl/Tool/BinaryReader.ts"));
var Sound_1 = __importDefault(__webpack_require__(/*! ../Resource/Sound */ "./WebGl/Resource/Sound.ts"));
var VertexType;
(function (VertexType) {
    VertexType[VertexType["Vertex_UV"] = 0] = "Vertex_UV";
    VertexType[VertexType["Vertex_Normal"] = 1] = "Vertex_Normal";
    VertexType[VertexType["Vertex_UV_Normal"] = 2] = "Vertex_UV_Normal";
    VertexType[VertexType["Vertex_UV_Normal_Color"] = 3] = "Vertex_UV_Normal_Color";
    VertexType[VertexType["Vertex_Model_SingleBone"] = 4] = "Vertex_Model_SingleBone";
    VertexType[VertexType["Vertex_Model_DoubleBone"] = 5] = "Vertex_Model_DoubleBone";
    VertexType[VertexType["Vertex_Model_QuadBone"] = 6] = "Vertex_Model_QuadBone";
    VertexType[VertexType["Vertex_Model_SDEFBone"] = 7] = "Vertex_Model_SDEFBone";
    VertexType[VertexType["Vertex_Model_Mix"] = 8] = "Vertex_Model_Mix";
})(VertexType || (VertexType = {}));
function GetDirectory(arg_path) {
    var splited = arg_path.split("/");
    var output = "";
    for (var i = 0; i < splited.length - 1; i++) {
        output += splited[i] + "/";
    }
    return output;
}
var B3MHolder = /** @class */ (function () {
    function B3MHolder() {
    }
    B3MHolder.prototype.Initialize = function () {
        var geometry;
        var ary_material = new Array();
        this.bufferReader = new BinaryReader_1.default(this.buffer);
        {
            //hederTest
            var headStr = this.bufferReader.GetString(15);
            if (headStr != "Buti3DModelData")
                return;
        }
        //model  
        {
            var version = this.bufferReader.GetFloat();
            //0std::wstring ,1std::string
            var encodeType = this.bufferReader.GetChar();
            var textCount = this.bufferReader.GetInt();
            //
            {
                var nameStr;
                if (encodeType) {
                    nameStr = this.bufferReader.GetString(textCount);
                }
                else {
                    nameStr = this.bufferReader.GetWString(textCount);
                }
            }
            //(eng)
            {
                textCount = this.bufferReader.GetInt();
                var nameStr;
                if (encodeType) {
                    nameStr = this.bufferReader.GetString(textCount);
                }
                else {
                    nameStr = this.bufferReader.GetWString(textCount);
                }
            }
            //
            {
                textCount = this.bufferReader.GetInt();
                var nameWStr;
                if (encodeType) {
                    nameWStr = this.bufferReader.GetString(textCount);
                }
                else {
                    nameWStr = this.bufferReader.GetWString(textCount);
                }
            }
            //
            {
                textCount = this.bufferReader.GetInt();
                var nameWStr;
                if (encodeType) {
                    nameWStr = this.bufferReader.GetString(textCount);
                }
                else {
                    nameWStr = this.bufferReader.GetWString(textCount);
                }
            }
            //
            {
                textCount = this.bufferReader.GetInt();
                var nameWStr;
                if (encodeType) {
                    nameWStr = (this.bufferReader.GetString(textCount));
                }
                else {
                    nameWStr = this.bufferReader.GetWString(textCount);
                }
            }
            //
            {
                textCount = this.bufferReader.GetInt();
                var nameWStr;
                if (encodeType) {
                    nameWStr = this.bufferReader.GetString(textCount);
                }
                else {
                    nameWStr = this.bufferReader.GetWString(textCount);
                }
            }
        }
        //
        var vertexIndexByteSize = this.bufferReader.GetChar();
        //
        var materialIndexByteSize = this.bufferReader.GetChar();
        //
        var boneIndexByteCount = this.bufferReader.GetChar();
        //
        var morphIndexByteSize = this.bufferReader.GetChar();
        //
        var type = this.bufferReader.GetChar();
        var uvExCount = this.bufferReader.GetChar();
        var vertexCount = this.bufferReader.GetUInt(vertexIndexByteSize);
        switch (type) {
            case VertexType.Vertex_UV_Normal:
                {
                    switch (uvExCount) {
                        case 0:
                            {
                                var pos = new Array(3 * vertexCount);
                                var uv = new Array(2 * vertexCount);
                                var normal = new Array(3 * vertexCount);
                                for (var i = 0; i < vertexCount; i++) {
                                    var vertexType = this.bufferReader.GetChar();
                                    pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                }
                                var idx = this.ReadIndex(vertexIndexByteSize);
                                geometry = ResourceCreater.CreateGeometry({ p: pos, n: normal, uv: uv, i: idx }, true, true, false, this.graphicDevice);
                            }
                            break;
                        case 1:
                            {
                                var pos = new Array(3 * vertexCount);
                                var uv = new Array(2 * vertexCount);
                                var exuv_1 = new Array(4 * vertexCount);
                                var normal = new Array(3 * vertexCount);
                                for (var i = 0; i < vertexCount; i++) {
                                    var vertexType = this.bufferReader.GetChar();
                                    pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                    exuv_1.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                }
                                var idx = this.ReadIndex(vertexIndexByteSize);
                                geometry = ResourceCreater.CreateGeometry({ p: pos, n: normal, uv: uv, i: idx }, true, true, false, this.graphicDevice);
                            }
                            break;
                        case 2:
                            {
                                var pos = new Array(3 * vertexCount);
                                var uv = new Array(2 * vertexCount);
                                var exuv_1 = new Array(4 * vertexCount);
                                var exuv_2 = new Array(4 * vertexCount);
                                var normal = new Array(3 * vertexCount);
                                for (var i = 0; i < vertexCount; i++) {
                                    var vertexType = this.bufferReader.GetChar();
                                    pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                    exuv_1.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    exuv_2.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                }
                                var idx = this.ReadIndex(vertexIndexByteSize);
                                geometry = ResourceCreater.CreateGeometry({ p: pos, n: normal, uv: uv, i: idx }, true, true, false, this.graphicDevice);
                            }
                            break;
                        case 3:
                            {
                                var pos = new Array(3 * vertexCount);
                                var uv = new Array(2 * vertexCount);
                                var exuv_1 = new Array(4 * vertexCount);
                                var exuv_2 = new Array(4 * vertexCount);
                                var exuv_3 = new Array(4 * vertexCount);
                                var normal = new Array(3 * vertexCount);
                                for (var i = 0; i < vertexCount; i++) {
                                    var vertexType = this.bufferReader.GetChar();
                                    pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                    exuv_1.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    exuv_2.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    exuv_3.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                }
                                var idx = this.ReadIndex(vertexIndexByteSize);
                                geometry = ResourceCreater.CreateGeometry({ p: pos, n: normal, uv: uv, i: idx }, true, true, false, this.graphicDevice);
                            }
                            break;
                        case 4:
                            {
                                var pos = new Array(3 * vertexCount);
                                var uv = new Array(2 * vertexCount);
                                var exuv_1 = new Array(4 * vertexCount);
                                var exuv_2 = new Array(4 * vertexCount);
                                var exuv_3 = new Array(4 * vertexCount);
                                var exuv_4 = new Array(4 * vertexCount);
                                var normal = new Array(3 * vertexCount);
                                for (var i = 0; i < vertexCount; i++) {
                                    var vertexType = this.bufferReader.GetChar();
                                    pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                    exuv_1.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    exuv_2.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    exuv_3.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    exuv_4.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                }
                                var idx = this.ReadIndex(vertexIndexByteSize);
                                geometry = ResourceCreater.CreateGeometry({ p: pos, n: normal, uv: uv, i: idx }, true, true, false, this.graphicDevice);
                            }
                            break;
                        default:
                            break;
                    }
                }
                break;
            case VertexType.Vertex_Model_SingleBone:
                {
                    switch (uvExCount) {
                        case 0:
                            {
                                var pos = new Array(3 * vertexCount);
                                var uv = new Array(2 * vertexCount);
                                var normal = new Array(3 * vertexCount);
                                var boneIndex = new Array(vertexCount);
                                for (var i = 0; i < vertexCount; i++) {
                                    var vertexType = this.bufferReader.GetChar();
                                    pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                    boneIndex[i] = this.bufferReader.GetInt(2);
                                    ;
                                }
                                var idx = this.ReadIndex(vertexIndexByteSize);
                                geometry = ResourceCreater.CreateGeometry({ p: pos, n: normal, uv: uv, i: idx }, true, true, false, this.graphicDevice);
                            }
                            break;
                        case 1:
                            {
                                var pos = new Array(3 * vertexCount);
                                var uv = new Array(2 * vertexCount);
                                var exuv_1 = new Array(4 * vertexCount);
                                var normal = new Array(3 * vertexCount);
                                var boneIndex = new Array(vertexCount);
                                for (var i = 0; i < vertexCount; i++) {
                                    var vertexType = this.bufferReader.GetChar();
                                    pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                    exuv_1.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                    boneIndex[i] = this.bufferReader.GetInt(2);
                                    ;
                                }
                                var idx = this.ReadIndex(vertexIndexByteSize);
                                geometry = ResourceCreater.CreateGeometry({ p: pos, n: normal, uv: uv, i: idx }, true, true, false, this.graphicDevice);
                            }
                            break;
                        case 2:
                            {
                                var pos = new Array(3 * vertexCount);
                                var uv = new Array(2 * vertexCount);
                                var exuv_1 = new Array(4 * vertexCount);
                                var exuv_2 = new Array(4 * vertexCount);
                                var normal = new Array(3 * vertexCount);
                                var boneIndex = new Array(vertexCount);
                                for (var i = 0; i < vertexCount; i++) {
                                    var vertexType = this.bufferReader.GetChar();
                                    pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                    exuv_1.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    exuv_2.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                    boneIndex[i] = this.bufferReader.GetInt(2);
                                    ;
                                }
                                var idx = this.ReadIndex(vertexIndexByteSize);
                                geometry = ResourceCreater.CreateGeometry({ p: pos, n: normal, uv: uv, i: idx }, true, true, false, this.graphicDevice);
                            }
                            break;
                        case 3:
                            {
                                var pos = new Array(3 * vertexCount);
                                var uv = new Array(2 * vertexCount);
                                var exuv_1 = new Array(4 * vertexCount);
                                var exuv_2 = new Array(4 * vertexCount);
                                var exuv_3 = new Array(4 * vertexCount);
                                var normal = new Array(3 * vertexCount);
                                var boneIndex = new Array(vertexCount);
                                for (var i = 0; i < vertexCount; i++) {
                                    var vertexType = this.bufferReader.GetChar();
                                    pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                    exuv_1.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    exuv_2.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    exuv_3.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                    boneIndex[i] = this.bufferReader.GetInt(2);
                                    ;
                                }
                                var idx = this.ReadIndex(vertexIndexByteSize);
                                geometry = ResourceCreater.CreateGeometry({ p: pos, n: normal, uv: uv, i: idx }, true, true, false, this.graphicDevice);
                            }
                            break;
                        case 4:
                            {
                                var pos = new Array(3 * vertexCount);
                                var uv = new Array(2 * vertexCount);
                                var exuv_1 = new Array(4 * vertexCount);
                                var exuv_2 = new Array(4 * vertexCount);
                                var exuv_3 = new Array(4 * vertexCount);
                                var exuv_4 = new Array(4 * vertexCount);
                                var normal = new Array(3 * vertexCount);
                                var boneIndex = new Array(vertexCount);
                                for (var i = 0; i < vertexCount; i++) {
                                    var vertexType = this.bufferReader.GetChar();
                                    pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                    exuv_1.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    exuv_2.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    exuv_3.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    exuv_4.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                    boneIndex[i] = this.bufferReader.GetInt(2);
                                    ;
                                }
                                var idx = this.ReadIndex(vertexIndexByteSize);
                                geometry = ResourceCreater.CreateGeometry({ p: pos, n: normal, uv: uv, i: idx }, true, true, false, this.graphicDevice);
                            }
                            break;
                        default:
                            break;
                    }
                }
                break;
            case VertexType.Vertex_Model_DoubleBone:
                {
                    switch (uvExCount) {
                        case 0:
                            {
                                var pos = new Array(3 * vertexCount);
                                var uv = new Array(2 * vertexCount);
                                var normal = new Array(3 * vertexCount);
                                var boneIndex = new Array(vertexCount);
                                var boneIndex2 = new Array(vertexCount);
                                var boneWeight = new Array(vertexCount);
                                for (var i = 0; i < vertexCount; i++) {
                                    var vertexType = this.bufferReader.GetChar();
                                    pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                    boneIndex[i] = this.bufferReader.GetInt(2);
                                    ;
                                    boneIndex2[i] = this.bufferReader.GetInt(2);
                                    ;
                                    boneWeight[i] = this.bufferReader.GetFloat();
                                    ;
                                }
                                var idx = this.ReadIndex(vertexIndexByteSize);
                                geometry = ResourceCreater.CreateGeometry({ p: pos, n: normal, uv: uv, i: idx }, true, true, false, this.graphicDevice);
                            }
                            break;
                        case 1:
                            {
                                var pos = new Array(3 * vertexCount);
                                var uv = new Array(2 * vertexCount);
                                var exuv_1 = new Array(4 * vertexCount);
                                var normal = new Array(3 * vertexCount);
                                var boneIndex = new Array(vertexCount);
                                var boneIndex2 = new Array(vertexCount);
                                var boneWeight = new Array(vertexCount);
                                for (var i = 0; i < vertexCount; i++) {
                                    var vertexType = this.bufferReader.GetChar();
                                    pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                    exuv_1.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                    boneIndex[i] = this.bufferReader.GetInt(2);
                                    ;
                                    boneIndex2[i] = this.bufferReader.GetInt(2);
                                    ;
                                    boneWeight[i] = this.bufferReader.GetFloat();
                                    ;
                                }
                                var idx = this.ReadIndex(vertexIndexByteSize);
                                geometry = ResourceCreater.CreateGeometry({ p: pos, n: normal, uv: uv, i: idx }, true, true, false, this.graphicDevice);
                            }
                            break;
                        case 2:
                            {
                                var pos = new Array(3 * vertexCount);
                                var uv = new Array(2 * vertexCount);
                                var exuv_1 = new Array(4 * vertexCount);
                                var exuv_2 = new Array(4 * vertexCount);
                                var normal = new Array(3 * vertexCount);
                                var boneIndex = new Array(vertexCount);
                                var boneIndex2 = new Array(vertexCount);
                                var boneWeight = new Array(vertexCount);
                                for (var i = 0; i < vertexCount; i++) {
                                    var vertexType = this.bufferReader.GetChar();
                                    pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                    exuv_1.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    exuv_2.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                    boneIndex[i] = this.bufferReader.GetInt(2);
                                    ;
                                    boneIndex2[i] = this.bufferReader.GetInt(2);
                                    ;
                                    boneWeight[i] = this.bufferReader.GetFloat();
                                    ;
                                }
                                var idx = this.ReadIndex(vertexIndexByteSize);
                                geometry = ResourceCreater.CreateGeometry({ p: pos, n: normal, uv: uv, i: idx }, true, true, false, this.graphicDevice);
                            }
                            break;
                        case 3:
                            {
                                var pos = new Array(3 * vertexCount);
                                var uv = new Array(2 * vertexCount);
                                var exuv_1 = new Array(4 * vertexCount);
                                var exuv_2 = new Array(4 * vertexCount);
                                var exuv_3 = new Array(4 * vertexCount);
                                var normal = new Array(3 * vertexCount);
                                var boneIndex = new Array(vertexCount);
                                var boneIndex2 = new Array(vertexCount);
                                var boneWeight = new Array(vertexCount);
                                for (var i = 0; i < vertexCount; i++) {
                                    var vertexType = this.bufferReader.GetChar();
                                    pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                    exuv_1.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    exuv_2.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    exuv_3.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                    boneIndex[i] = this.bufferReader.GetInt(2);
                                    ;
                                    boneIndex2[i] = this.bufferReader.GetInt(2);
                                    ;
                                    boneWeight[i] = this.bufferReader.GetFloat();
                                    ;
                                }
                                var idx = this.ReadIndex(vertexIndexByteSize);
                                geometry = ResourceCreater.CreateGeometry({ p: pos, n: normal, uv: uv, i: idx }, true, true, false, this.graphicDevice);
                            }
                            break;
                        case 4:
                            {
                                var pos = new Array(3 * vertexCount);
                                var uv = new Array(2 * vertexCount);
                                var exuv_1 = new Array(4 * vertexCount);
                                var exuv_2 = new Array(4 * vertexCount);
                                var exuv_3 = new Array(4 * vertexCount);
                                var exuv_4 = new Array(4 * vertexCount);
                                var normal = new Array(3 * vertexCount);
                                var boneIndex = new Array(vertexCount);
                                var boneIndex2 = new Array(vertexCount);
                                var boneWeight = new Array(vertexCount);
                                for (var i = 0; i < vertexCount; i++) {
                                    var vertexType = this.bufferReader.GetChar();
                                    pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                    exuv_1.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    exuv_2.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    exuv_3.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    exuv_4.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                    boneIndex[i] = this.bufferReader.GetInt(2);
                                    ;
                                    boneIndex2[i] = this.bufferReader.GetInt(2);
                                    ;
                                    boneWeight[i] = this.bufferReader.GetFloat();
                                    ;
                                }
                                var idx = this.ReadIndex(vertexIndexByteSize);
                                geometry = ResourceCreater.CreateGeometry({ p: pos, n: normal, uv: uv, i: idx }, true, true, false, this.graphicDevice);
                            }
                            break;
                        default:
                            break;
                    }
                }
                break;
            case VertexType.Vertex_Model_QuadBone:
                {
                    switch (uvExCount) {
                        case 0:
                            {
                                var pos = new Array(3 * vertexCount);
                                var uv = new Array(2 * vertexCount);
                                var normal = new Array(3 * vertexCount);
                                var boneIndex = new Array(vertexCount);
                                var boneIndex2 = new Array(vertexCount);
                                var boneIndex3 = new Array(vertexCount);
                                var boneIndex4 = new Array(vertexCount);
                                var boneWeight = new Array(vertexCount);
                                var boneWeight2 = new Array(vertexCount);
                                var boneWeight3 = new Array(vertexCount);
                                var boneWeight4 = new Array(vertexCount);
                                for (var i = 0; i < vertexCount; i++) {
                                    var vertexType = this.bufferReader.GetChar();
                                    pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 1] = -this.bufferReader.GetFloat();
                                    pos[i * 3 + 2] = -this.bufferReader.GetFloat();
                                    uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                    boneIndex[i] = this.bufferReader.GetInt(2);
                                    boneIndex2[i] = this.bufferReader.GetInt(2);
                                    boneIndex3[i] = this.bufferReader.GetInt(2);
                                    boneIndex4[i] = this.bufferReader.GetInt(2);
                                    boneWeight[i] = this.bufferReader.GetFloat();
                                    boneWeight2[i] = this.bufferReader.GetFloat();
                                    boneWeight3[i] = this.bufferReader.GetFloat();
                                    boneWeight4[i] = this.bufferReader.GetFloat();
                                }
                                var idx = this.ReadIndex(vertexIndexByteSize);
                                geometry = ResourceCreater.CreateGeometry({ p: pos, n: normal, uv: uv, i: idx }, true, true, false, this.graphicDevice);
                            }
                            break;
                        case 1:
                            {
                                var pos = new Array(3 * vertexCount);
                                var uv = new Array(2 * vertexCount);
                                var exuv_1 = new Array(4 * vertexCount);
                                var normal = new Array(3 * vertexCount);
                                var boneIndex = new Array(vertexCount);
                                var boneIndex2 = new Array(vertexCount);
                                var boneIndex3 = new Array(vertexCount);
                                var boneIndex4 = new Array(vertexCount);
                                var boneWeight = new Array(vertexCount);
                                var boneWeight2 = new Array(vertexCount);
                                var boneWeight3 = new Array(vertexCount);
                                var boneWeight4 = new Array(vertexCount);
                                for (var i = 0; i < vertexCount; i++) {
                                    var vertexType = this.bufferReader.GetChar();
                                    pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                    exuv_1.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                    boneIndex[i] = this.bufferReader.GetInt(2);
                                    ;
                                    boneIndex2[i] = this.bufferReader.GetInt(2);
                                    ;
                                    boneIndex3[i] = this.bufferReader.GetInt(2);
                                    ;
                                    boneIndex4[i] = this.bufferReader.GetInt(2);
                                    ;
                                    boneWeight[i] = this.bufferReader.GetFloat();
                                    ;
                                    boneWeight2[i] = this.bufferReader.GetFloat();
                                    ;
                                    boneWeight3[i] = this.bufferReader.GetFloat();
                                    ;
                                    boneWeight4[i] = this.bufferReader.GetFloat();
                                    ;
                                }
                                var idx = this.ReadIndex(vertexIndexByteSize);
                                geometry = ResourceCreater.CreateGeometry({ p: pos, n: normal, uv: uv, i: idx }, true, true, false, this.graphicDevice);
                            }
                            break;
                        case 2:
                            {
                                var pos = new Array(3 * vertexCount);
                                var uv = new Array(2 * vertexCount);
                                var exuv_1 = new Array(4 * vertexCount);
                                var exuv_2 = new Array(4 * vertexCount);
                                var normal = new Array(3 * vertexCount);
                                var boneIndex = new Array(vertexCount);
                                var boneIndex2 = new Array(vertexCount);
                                var boneIndex3 = new Array(vertexCount);
                                var boneIndex4 = new Array(vertexCount);
                                var boneWeight = new Array(vertexCount);
                                var boneWeight2 = new Array(vertexCount);
                                var boneWeight3 = new Array(vertexCount);
                                var boneWeight4 = new Array(vertexCount);
                                for (var i = 0; i < vertexCount; i++) {
                                    var vertexType = this.bufferReader.GetChar();
                                    pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                    exuv_1.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    exuv_2.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                    boneIndex[i] = this.bufferReader.GetInt(2);
                                    ;
                                    boneIndex2[i] = this.bufferReader.GetInt(2);
                                    ;
                                    boneIndex3[i] = this.bufferReader.GetInt(2);
                                    ;
                                    boneIndex4[i] = this.bufferReader.GetInt(2);
                                    ;
                                    boneWeight[i] = this.bufferReader.GetFloat();
                                    ;
                                    boneWeight2[i] = this.bufferReader.GetFloat();
                                    ;
                                    boneWeight3[i] = this.bufferReader.GetFloat();
                                    ;
                                    boneWeight4[i] = this.bufferReader.GetFloat();
                                    ;
                                }
                                var idx = this.ReadIndex(vertexIndexByteSize);
                                geometry = ResourceCreater.CreateGeometry({ p: pos, n: normal, uv: uv, i: idx }, true, true, false, this.graphicDevice);
                            }
                            break;
                        case 3:
                            {
                                var pos = new Array(3 * vertexCount);
                                var uv = new Array(2 * vertexCount);
                                var exuv_1 = new Array(4 * vertexCount);
                                var exuv_2 = new Array(4 * vertexCount);
                                var exuv_3 = new Array(4 * vertexCount);
                                var normal = new Array(3 * vertexCount);
                                var boneIndex = new Array(vertexCount);
                                var boneIndex2 = new Array(vertexCount);
                                var boneIndex3 = new Array(vertexCount);
                                var boneIndex4 = new Array(vertexCount);
                                var boneWeight = new Array(vertexCount);
                                var boneWeight2 = new Array(vertexCount);
                                var boneWeight3 = new Array(vertexCount);
                                var boneWeight4 = new Array(vertexCount);
                                for (var i = 0; i < vertexCount; i++) {
                                    var vertexType = this.bufferReader.GetChar();
                                    pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                    exuv_1.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    exuv_2.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    exuv_3.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                    boneIndex[i] = this.bufferReader.GetInt(2);
                                    ;
                                    boneIndex2[i] = this.bufferReader.GetInt(2);
                                    ;
                                    boneIndex3[i] = this.bufferReader.GetInt(2);
                                    ;
                                    boneIndex4[i] = this.bufferReader.GetInt(2);
                                    ;
                                    boneWeight[i] = this.bufferReader.GetFloat();
                                    ;
                                    boneWeight2[i] = this.bufferReader.GetFloat();
                                    ;
                                    boneWeight3[i] = this.bufferReader.GetFloat();
                                    ;
                                    boneWeight4[i] = this.bufferReader.GetFloat();
                                    ;
                                }
                                var idx = this.ReadIndex(vertexIndexByteSize);
                                geometry = ResourceCreater.CreateGeometry({ p: pos, n: normal, uv: uv, i: idx }, true, true, false, this.graphicDevice);
                            }
                            break;
                        case 4:
                            {
                                var pos = new Array(3 * vertexCount);
                                var uv = new Array(2 * vertexCount);
                                var exuv_1 = new Array(4 * vertexCount);
                                var exuv_2 = new Array(4 * vertexCount);
                                var exuv_3 = new Array(4 * vertexCount);
                                var exuv_4 = new Array(4 * vertexCount);
                                var normal = new Array(3 * vertexCount);
                                var boneIndex = new Array(vertexCount);
                                var boneIndex2 = new Array(vertexCount);
                                var boneIndex3 = new Array(vertexCount);
                                var boneIndex4 = new Array(vertexCount);
                                var boneWeight = new Array(vertexCount);
                                var boneWeight2 = new Array(vertexCount);
                                var boneWeight3 = new Array(vertexCount);
                                var boneWeight4 = new Array(vertexCount);
                                for (var i = 0; i < vertexCount; i++) {
                                    var vertexType = this.bufferReader.GetChar();
                                    pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                    pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                    uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                    exuv_1.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    exuv_2.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    exuv_3.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    exuv_4.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                    normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                    normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                    boneIndex[i] = this.bufferReader.GetInt(2);
                                    ;
                                    boneIndex2[i] = this.bufferReader.GetInt(2);
                                    ;
                                    boneIndex3[i] = this.bufferReader.GetInt(2);
                                    ;
                                    boneIndex4[i] = this.bufferReader.GetInt(2);
                                    ;
                                    boneWeight[i] = this.bufferReader.GetFloat();
                                    ;
                                    boneWeight2[i] = this.bufferReader.GetFloat();
                                    ;
                                    boneWeight3[i] = this.bufferReader.GetFloat();
                                    ;
                                    boneWeight4[i] = this.bufferReader.GetFloat();
                                    ;
                                }
                                var idx = this.ReadIndex(vertexIndexByteSize);
                                geometry = ResourceCreater.CreateGeometry({ p: pos, n: normal, uv: uv, i: idx }, true, true, false, this.graphicDevice);
                            }
                            break;
                        default:
                            break;
                    }
                }
                break;
            case VertexType.Vertex_Model_SDEFBone:
                {
                    alert("sdef is not support.");
                }
                break;
            case VertexType.Vertex_Model_Mix:
                {
                    switch (uvExCount) {
                        case 0:
                            {
                                var pos = new Array(3 * vertexCount);
                                var uv = new Array(2 * vertexCount);
                                var normal = new Array(3 * vertexCount);
                                var boneIndex = new Array(vertexCount);
                                var boneIndex2 = new Array(vertexCount);
                                var boneIndex3 = new Array(vertexCount);
                                var boneIndex4 = new Array(vertexCount);
                                var boneWeight = new Array(vertexCount);
                                var boneWeight2 = new Array(vertexCount);
                                var boneWeight3 = new Array(vertexCount);
                                var boneWeight4 = new Array(vertexCount);
                                for (var i = 0; i < vertexCount; i++) {
                                    var vertexType = this.bufferReader.GetChar();
                                    switch (vertexType) {
                                        case VertexType.Vertex_Model_SingleBone:
                                            {
                                                pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                                pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                                pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                                uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                                uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                                normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                                normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                                normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                                boneIndex[i] = this.bufferReader.GetInt(2);
                                                ;
                                                boneIndex2.push(-1);
                                                boneIndex3.push(-1);
                                                boneIndex4.push(-1);
                                                boneWeight.push(1.0);
                                                boneWeight2.push(0);
                                                boneWeight3.push(0);
                                                boneWeight4.push(0);
                                            }
                                            break;
                                        case VertexType.Vertex_Model_DoubleBone:
                                            {
                                                pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                                pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                                pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                                uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                                uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                                normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                                normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                                normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                                boneIndex[i] = this.bufferReader.GetInt(2);
                                                ;
                                                boneIndex2[i] = this.bufferReader.GetInt(2);
                                                ;
                                                var weight = this.bufferReader.GetFloat();
                                                boneWeight.push(weight);
                                                boneIndex3.push(-1);
                                                boneIndex4.push(-1);
                                                boneWeight2.push(1.0 - weight);
                                                boneWeight3.push(0);
                                                boneWeight4.push(0);
                                            }
                                            break;
                                        case VertexType.Vertex_Model_QuadBone:
                                            {
                                                pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                                pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                                pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                                uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                                uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                                normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                                normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                                normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                                boneIndex[i] = this.bufferReader.GetInt(2);
                                                ;
                                                boneIndex2[i] = this.bufferReader.GetInt(2);
                                                ;
                                                boneIndex3[i] = this.bufferReader.GetInt(2);
                                                ;
                                                boneIndex4[i] = this.bufferReader.GetInt(2);
                                                ;
                                                boneWeight[i] = this.bufferReader.GetFloat();
                                                ;
                                                boneWeight2[i] = this.bufferReader.GetFloat();
                                                ;
                                                boneWeight3[i] = this.bufferReader.GetFloat();
                                                ;
                                                boneWeight4[i] = this.bufferReader.GetFloat();
                                                ;
                                            }
                                            break;
                                        case VertexType.Vertex_Model_SDEFBone:
                                            {
                                                alert("sdef is not supported.");
                                            }
                                            break;
                                        default:
                                            break;
                                    }
                                }
                                var idx = this.ReadIndex(vertexIndexByteSize);
                                geometry = ResourceCreater.CreateGeometry({ p: pos, n: normal, uv: uv, i: idx }, true, true, false, this.graphicDevice);
                            }
                            break;
                        case 1:
                            {
                                var pos = new Array(3 * vertexCount);
                                var uv = new Array(2 * vertexCount);
                                var exuv_1 = new Array(4 * vertexCount);
                                var normal = new Array(3 * vertexCount);
                                var boneIndex = new Array(vertexCount);
                                var boneIndex2 = new Array(vertexCount);
                                var boneIndex3 = new Array(vertexCount);
                                var boneIndex4 = new Array(vertexCount);
                                var boneWeight = new Array(vertexCount);
                                var boneWeight2 = new Array(vertexCount);
                                var boneWeight3 = new Array(vertexCount);
                                var boneWeight4 = new Array(vertexCount);
                                for (var i = 0; i < vertexCount; i++) {
                                    var vertexType = this.bufferReader.GetChar();
                                    switch (vertexType) {
                                        case VertexType.Vertex_Model_SingleBone:
                                            {
                                                pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                                pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                                pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                                uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                                uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                                exuv_1.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                                normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                                normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                                normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                                boneIndex[i] = this.bufferReader.GetInt(2);
                                                ;
                                                boneIndex2.push(-1);
                                                boneIndex3.push(-1);
                                                boneIndex4.push(-1);
                                                boneWeight.push(1.0);
                                                boneWeight2.push(0);
                                                boneWeight3.push(0);
                                                boneWeight4.push(0);
                                            }
                                            break;
                                        case VertexType.Vertex_Model_DoubleBone:
                                            {
                                                pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                                pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                                pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                                uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                                uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                                exuv_1.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                                normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                                normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                                normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                                boneIndex[i] = this.bufferReader.GetInt(2);
                                                ;
                                                boneIndex2[i] = this.bufferReader.GetInt(2);
                                                ;
                                                var weight = this.bufferReader.GetFloat();
                                                boneWeight.push(weight);
                                                boneIndex3.push(-1);
                                                boneIndex4.push(-1);
                                                boneWeight2.push(1.0 - weight);
                                                boneWeight3.push(0);
                                                boneWeight4.push(0);
                                            }
                                            break;
                                        case VertexType.Vertex_Model_QuadBone:
                                            {
                                                pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                                pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                                pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                                uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                                uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                                exuv_1.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                                normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                                normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                                normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                                boneIndex[i] = this.bufferReader.GetInt(2);
                                                ;
                                                boneIndex2[i] = this.bufferReader.GetInt(2);
                                                ;
                                                boneIndex3[i] = this.bufferReader.GetInt(2);
                                                ;
                                                boneIndex4[i] = this.bufferReader.GetInt(2);
                                                ;
                                                boneWeight[i] = this.bufferReader.GetFloat();
                                                ;
                                                boneWeight2[i] = this.bufferReader.GetFloat();
                                                ;
                                                boneWeight3[i] = this.bufferReader.GetFloat();
                                                ;
                                                boneWeight4[i] = this.bufferReader.GetFloat();
                                                ;
                                            }
                                            break;
                                        case VertexType.Vertex_Model_SDEFBone:
                                            {
                                                alert("sdef is not supported.");
                                            }
                                            break;
                                        default:
                                            break;
                                    }
                                }
                                var idx = this.ReadIndex(vertexIndexByteSize);
                                geometry = ResourceCreater.CreateGeometry({ p: pos, n: normal, uv: uv, i: idx }, true, true, false, this.graphicDevice);
                            }
                            break;
                        case 2:
                            {
                                var pos = new Array(3 * vertexCount);
                                var uv = new Array(2 * vertexCount);
                                var exuv_1 = new Array(4 * vertexCount);
                                var exuv_2 = new Array(4 * vertexCount);
                                var normal = new Array(3 * vertexCount);
                                var boneIndex = new Array(vertexCount);
                                var boneIndex2 = new Array(vertexCount);
                                var boneIndex3 = new Array(vertexCount);
                                var boneIndex4 = new Array(vertexCount);
                                var boneWeight = new Array(vertexCount);
                                var boneWeight2 = new Array(vertexCount);
                                var boneWeight3 = new Array(vertexCount);
                                var boneWeight4 = new Array(vertexCount);
                                for (var i = 0; i < vertexCount; i++) {
                                    var vertexType = this.bufferReader.GetChar();
                                    switch (vertexType) {
                                        case VertexType.Vertex_Model_SingleBone:
                                            {
                                                pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                                pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                                pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                                uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                                uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                                exuv_1.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                                exuv_2.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                                normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                                normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                                normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                                boneIndex[i] = this.bufferReader.GetInt(2);
                                                ;
                                                boneIndex2.push(-1);
                                                boneIndex3.push(-1);
                                                boneIndex4.push(-1);
                                                boneWeight.push(1.0);
                                                boneWeight2.push(0);
                                                boneWeight3.push(0);
                                                boneWeight4.push(0);
                                            }
                                            break;
                                        case VertexType.Vertex_Model_DoubleBone:
                                            {
                                                pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                                pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                                pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                                uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                                uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                                exuv_1.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                                exuv_2.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                                normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                                normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                                normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                                boneIndex[i] = this.bufferReader.GetInt(2);
                                                ;
                                                boneIndex2[i] = this.bufferReader.GetInt(2);
                                                ;
                                                var weight = this.bufferReader.GetFloat();
                                                boneWeight.push(weight);
                                                boneIndex3.push(-1);
                                                boneIndex4.push(-1);
                                                boneWeight2.push(1.0 - weight);
                                                boneWeight3.push(0);
                                                boneWeight4.push(0);
                                            }
                                            break;
                                        case VertexType.Vertex_Model_QuadBone:
                                            {
                                                pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                                pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                                pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                                uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                                uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                                exuv_1.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                                exuv_2.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                                normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                                normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                                normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                                boneIndex[i] = this.bufferReader.GetInt(2);
                                                ;
                                                boneIndex2[i] = this.bufferReader.GetInt(2);
                                                ;
                                                boneIndex3[i] = this.bufferReader.GetInt(2);
                                                ;
                                                boneIndex4[i] = this.bufferReader.GetInt(2);
                                                ;
                                                boneWeight[i] = this.bufferReader.GetFloat();
                                                ;
                                                boneWeight2[i] = this.bufferReader.GetFloat();
                                                ;
                                                boneWeight3[i] = this.bufferReader.GetFloat();
                                                ;
                                                boneWeight4[i] = this.bufferReader.GetFloat();
                                                ;
                                            }
                                            break;
                                        case VertexType.Vertex_Model_SDEFBone:
                                            {
                                                alert("sdef is not supported.");
                                            }
                                            break;
                                        default:
                                            break;
                                    }
                                }
                                var idx = this.ReadIndex(vertexIndexByteSize);
                                geometry = ResourceCreater.CreateGeometry({ p: pos, n: normal, uv: uv, i: idx }, true, true, false, this.graphicDevice);
                            }
                            break;
                        case 3:
                            {
                                var pos = new Array(3 * vertexCount);
                                var uv = new Array(2 * vertexCount);
                                var exuv_1 = new Array(4 * vertexCount);
                                var exuv_2 = new Array(4 * vertexCount);
                                var exuv_3 = new Array(4 * vertexCount);
                                var normal = new Array(3 * vertexCount);
                                var boneIndex = new Array(vertexCount);
                                var boneIndex2 = new Array(vertexCount);
                                var boneIndex3 = new Array(vertexCount);
                                var boneIndex4 = new Array(vertexCount);
                                var boneWeight = new Array(vertexCount);
                                var boneWeight2 = new Array(vertexCount);
                                var boneWeight3 = new Array(vertexCount);
                                var boneWeight4 = new Array(vertexCount);
                                for (var i = 0; i < vertexCount; i++) {
                                    var vertexType = this.bufferReader.GetChar();
                                    switch (vertexType) {
                                        case VertexType.Vertex_Model_SingleBone:
                                            {
                                                pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                                pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                                pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                                uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                                uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                                exuv_1.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                                exuv_2.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                                exuv_3.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                                normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                                normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                                normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                                boneIndex[i] = this.bufferReader.GetInt(2);
                                                ;
                                                boneIndex2.push(-1);
                                                boneIndex3.push(-1);
                                                boneIndex4.push(-1);
                                                boneWeight.push(1.0);
                                                boneWeight2.push(0);
                                                boneWeight3.push(0);
                                                boneWeight4.push(0);
                                            }
                                            break;
                                        case VertexType.Vertex_Model_DoubleBone:
                                            {
                                                pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                                pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                                pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                                uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                                uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                                exuv_1.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                                exuv_2.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                                exuv_3.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                                normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                                normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                                normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                                boneIndex[i] = this.bufferReader.GetInt(2);
                                                ;
                                                boneIndex2[i] = this.bufferReader.GetInt(2);
                                                ;
                                                var weight = this.bufferReader.GetFloat();
                                                boneWeight.push(weight);
                                                boneIndex3.push(-1);
                                                boneIndex4.push(-1);
                                                boneWeight2.push(1.0 - weight);
                                                boneWeight3.push(0);
                                                boneWeight4.push(0);
                                            }
                                            break;
                                        case VertexType.Vertex_Model_QuadBone:
                                            {
                                                pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                                pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                                pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                                uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                                uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                                exuv_1.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                                exuv_2.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                                exuv_3.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                                normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                                normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                                normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                                boneIndex[i] = this.bufferReader.GetInt(2);
                                                ;
                                                boneIndex2[i] = this.bufferReader.GetInt(2);
                                                ;
                                                boneIndex3[i] = this.bufferReader.GetInt(2);
                                                ;
                                                boneIndex4[i] = this.bufferReader.GetInt(2);
                                                ;
                                                boneWeight[i] = this.bufferReader.GetFloat();
                                                ;
                                                boneWeight2[i] = this.bufferReader.GetFloat();
                                                ;
                                                boneWeight3[i] = this.bufferReader.GetFloat();
                                                ;
                                                boneWeight4[i] = this.bufferReader.GetFloat();
                                                ;
                                            }
                                            break;
                                        case VertexType.Vertex_Model_SDEFBone:
                                            {
                                                alert("sdef is not supported.");
                                            }
                                            break;
                                        default:
                                            break;
                                    }
                                }
                                var idx = this.ReadIndex(vertexIndexByteSize);
                                geometry = ResourceCreater.CreateGeometry({ p: pos, n: normal, uv: uv, i: idx }, true, true, false, this.graphicDevice);
                            }
                            break;
                        case 4:
                            {
                                var pos = new Array(3 * vertexCount);
                                var uv = new Array(2 * vertexCount);
                                var exuv_1 = new Array(4 * vertexCount);
                                var exuv_2 = new Array(4 * vertexCount);
                                var exuv_3 = new Array(4 * vertexCount);
                                var exuv_4 = new Array(4 * vertexCount);
                                var normal = new Array(3 * vertexCount);
                                var boneIndex = new Array(vertexCount);
                                var boneIndex2 = new Array(vertexCount);
                                var boneIndex3 = new Array(vertexCount);
                                var boneIndex4 = new Array(vertexCount);
                                var boneWeight = new Array(vertexCount);
                                var boneWeight2 = new Array(vertexCount);
                                var boneWeight3 = new Array(vertexCount);
                                var boneWeight4 = new Array(vertexCount);
                                for (var i = 0; i < vertexCount; i++) {
                                    var vertexType = this.bufferReader.GetChar();
                                    switch (vertexType) {
                                        case VertexType.Vertex_Model_SingleBone:
                                            {
                                                pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                                pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                                pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                                uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                                uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                                exuv_1.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                                exuv_2.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                                exuv_3.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                                exuv_4.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                                normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                                normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                                normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                                boneIndex[i] = this.bufferReader.GetInt(2);
                                                ;
                                                boneIndex2.push(-1);
                                                boneIndex3.push(-1);
                                                boneIndex4.push(-1);
                                                boneWeight.push(1.0);
                                                boneWeight2.push(0);
                                                boneWeight3.push(0);
                                                boneWeight4.push(0);
                                            }
                                            break;
                                        case VertexType.Vertex_Model_DoubleBone:
                                            {
                                                pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                                pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                                pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                                uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                                uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                                exuv_1.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                                exuv_2.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                                exuv_3.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                                exuv_4.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                                normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                                normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                                normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                                boneIndex[i] = this.bufferReader.GetInt(2);
                                                ;
                                                boneIndex2[i] = this.bufferReader.GetInt(2);
                                                ;
                                                var weight = this.bufferReader.GetFloat();
                                                boneWeight.push(weight);
                                                boneIndex3.push(-1);
                                                boneIndex4.push(-1);
                                                boneWeight2.push(1.0 - weight);
                                                boneWeight3.push(0);
                                                boneWeight4.push(0);
                                            }
                                            break;
                                        case VertexType.Vertex_Model_QuadBone:
                                            {
                                                pos[i * 3 + 0] = this.bufferReader.GetFloat();
                                                pos[i * 3 + 1] = this.bufferReader.GetFloat();
                                                pos[i * 3 + 2] = this.bufferReader.GetFloat();
                                                uv[i * 2 + 0] = this.bufferReader.GetFloat();
                                                uv[i * 2 + 1] = this.bufferReader.GetFloat();
                                                exuv_1.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                                exuv_2.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                                exuv_3.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                                exuv_4.push(this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat(), this.bufferReader.GetFloat());
                                                normal[i * 3 + 0] = this.bufferReader.GetFloat();
                                                normal[i * 3 + 1] = this.bufferReader.GetFloat();
                                                normal[i * 3 + 2] = this.bufferReader.GetFloat();
                                                boneIndex[i] = this.bufferReader.GetInt(2);
                                                ;
                                                boneIndex2[i] = this.bufferReader.GetInt(2);
                                                ;
                                                boneIndex3[i] = this.bufferReader.GetInt(2);
                                                ;
                                                boneIndex4[i] = this.bufferReader.GetInt(2);
                                                ;
                                                boneWeight[i] = this.bufferReader.GetFloat();
                                                ;
                                                boneWeight2[i] = this.bufferReader.GetFloat();
                                                ;
                                                boneWeight3[i] = this.bufferReader.GetFloat();
                                                ;
                                                boneWeight4[i] = this.bufferReader.GetFloat();
                                                ;
                                            }
                                            break;
                                        case VertexType.Vertex_Model_SDEFBone:
                                            {
                                                alert("sdef is not supported.");
                                            }
                                            break;
                                        default:
                                            break;
                                    }
                                }
                                var idx = this.ReadIndex(vertexIndexByteSize);
                                geometry = ResourceCreater.CreateGeometry({ p: pos, n: normal, uv: uv, i: idx }, true, true, false, this.graphicDevice);
                            }
                            break;
                        default:
                            break;
                    }
                }
                break;
            default:
                break;
        }
        var materialCount;
        materialCount = this.bufferReader.GetInt(materialIndexByteSize);
        var subset = new Array(materialCount);
        var dir = GetDirectory(this.filePath);
        for (var i = 0; i < materialCount; i++) {
            var fileNameCount = this.bufferReader.GetInt();
            if (encodeType) {
                var materialFilePath = this.bufferReader.GetString(fileNameCount);
                ary_material.push(ResourceCreater.CreateMaterialFromFile(dir + materialFilePath, this.container, this.graphicDevice));
            }
            else {
                var materialFilePath = this.bufferReader.GetWString(fileNameCount);
                ary_material.push(ResourceCreater.CreateMaterialFromFile(dir + materialFilePath, this.container, this.graphicDevice));
            }
            subset[i] = (this.bufferReader.GetInt());
        }
        geometry.SetSubset(subset);
        this.mesh.SetParameter(geometry, ary_material);
        this.container.LoadEnd();
    };
    B3MHolder.prototype.ReadIndex = function (vertexIndexByteSize) {
        //
        var indexCount = this.bufferReader.GetInt();
        var idx = new Array(indexCount * 3);
        for (var i = 0; i < indexCount * 3; i++) {
            idx[i] = (this.bufferReader.GetUInt(vertexIndexByteSize));
        }
        return idx;
    };
    return B3MHolder;
}());
var MaterialBinLoader = /** @class */ (function () {
    function MaterialBinLoader() {
    }
    MaterialBinLoader.prototype.Initialize = function () {
        var mat;
        var materialReader = new BinaryReader_1.default(this.buffer);
        var magic = materialReader.GetString(16);
        if (magic != "ButiMaterialData") {
            console.log("");
            return;
        }
        var version = materialReader.GetFloat();
        //0std::wstring ,1std::string
        var encodeType = materialReader.GetChar();
        {
            var materialNameCount = materialReader.GetInt();
            if (encodeType) {
                materialReader.GetString(materialNameCount);
            }
            else {
                materialReader.GetWString(materialNameCount);
            }
        }
        //
        {
            var materialNameCount = materialReader.GetInt();
            if (encodeType) {
                materialReader.GetString(materialNameCount);
            }
            else {
                materialReader.GetWString(materialNameCount);
            }
        }
        //
        var textureCount = materialReader.GetChar();
        var ary_texture = new Array();
        var dir = GetDirectory(this.filePath);
        for (var i = 0; i < textureCount; i++) {
            var texNameCount = materialReader.GetInt();
            if (texNameCount < 0) {
            }
            else if (encodeType) {
                var textureName = materialReader.GetString(texNameCount);
                ary_texture.push(this.container.AddTextureFromFile(dir + "../" + textureName, this.graphicDevice));
            }
            else {
                var textureName = materialReader.GetWString(texNameCount);
                ary_texture.push(this.container.AddTextureFromFile(dir + "../" + textureName, this.graphicDevice));
            }
        }
        //
        var diffuse = new Vector4_1.default(materialReader.GetFloat(), materialReader.GetFloat(), materialReader.GetFloat(), materialReader.GetFloat());
        var specular = new Vector4_1.default(materialReader.GetFloat(), materialReader.GetFloat(), materialReader.GetFloat(), materialReader.GetFloat());
        var ambient = new Vector4_1.default(materialReader.GetFloat(), materialReader.GetFloat(), materialReader.GetFloat(), materialReader.GetFloat());
        var emissive = new Vector4_1.default(materialReader.GetFloat(), materialReader.GetFloat(), materialReader.GetFloat(), materialReader.GetFloat());
        var byteFlag = materialReader.GetChar();
        var sphereFlag = materialReader.GetChar();
        {
            var materialNameCount = materialReader.GetInt();
            if (encodeType) {
                materialReader.GetString(materialNameCount);
            }
            else {
                materialReader.GetWString(materialNameCount);
            }
        }
        this.material.SetParameter(diffuse, this.graphicDevice, ary_texture);
        this.container.LoadEnd();
    };
    return MaterialBinLoader;
}());
var ResourceCreater = /** @class */ (function () {
    function ResourceCreater() {
    }
    ResourceCreater.CreateGeometry = function (data, isUV, isNormal, isColor, arg_device) {
        return new Geometry_1.default(data, isUV, isNormal, isColor, arg_device);
    };
    ResourceCreater.CreateMaterial = function (arg_ambient, arg_device, arg_ary_texture, arg_ary_exParms) {
        var mat = new Material_1.default();
        mat.SetParameter(arg_ambient, arg_device, arg_ary_texture, arg_ary_exParms);
        return mat;
    };
    ResourceCreater.CreateShader = function (vsSource, fsSource, arg_graphicDevice, vsSource_direct, fsSource_direct) {
        return new Shader_1.default(vsSource, fsSource, arg_graphicDevice, vsSource_direct, fsSource_direct);
    };
    ResourceCreater.CreateSound = function (arg_soundSorce) {
        return new Sound_1.default(arg_soundSorce);
    };
    ResourceCreater.CreateTexture = function (arg_path, arg_device) {
        var tex = new Texture_1.default(arg_path, arg_device);
        tex.Initialize();
        return tex;
    };
    ResourceCreater.CreateFrameBuffer = function (width, height, arg_device) {
        return new FrameBufferTexture_1.default(arg_device, width, height);
    };
    ResourceCreater.CreateMeshResourceFromFile = function (arg_filePath, resourceContainer, arg_device) {
        var out = new Mesh_1.default();
        var holder = new B3MHolder();
        resourceContainer.LoadStart();
        holder.graphicDevice = arg_device;
        holder.container = resourceContainer;
        holder.filePath = arg_filePath;
        holder.mesh = out;
        FileLoader_1.default.LoadBin(arg_filePath, holder);
        return out;
    };
    ResourceCreater.CreateMaterialFromFile = function (arg_filePath, resourceContainer, arg_device) {
        var out = new Material_1.default();
        var holder = new MaterialBinLoader();
        resourceContainer.LoadStart();
        holder.graphicDevice = arg_device;
        holder.container = resourceContainer;
        holder.filePath = arg_filePath;
        holder.material = out;
        FileLoader_1.default.LoadBin(arg_filePath, holder);
        return out;
    };
    return ResourceCreater;
}());
exports.default = ResourceCreater;


/***/ }),

/***/ "./WebGl/Transform.ts":
/*!****************************!*\
  !*** ./WebGl/Transform.ts ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var Matrix_1 = __importDefault(__webpack_require__(/*! ./Math/Matrix */ "./WebGl/Math/Matrix.ts"));
var Vector3_1 = __importDefault(__webpack_require__(/*! ./Math/Vector3 */ "./WebGl/Math/Vector3.ts"));
var MathHelper_1 = __importDefault(__webpack_require__(/*! ./Tool/MathHelper */ "./WebGl/Tool/MathHelper.ts"));
var calcMatrix4x4 = new Matrix_1.default().Identity();
var Transform = /** @class */ (function () {
    function Transform(position, rotation, scale) {
        if (position) {
            this.position = position;
        }
        else
            this.position = new Vector3_1.default(0, 0, 0);
        if (scale) {
            this.scale = scale;
        }
        else {
            this.scale = new Vector3_1.default(1, 1, 1);
        }
        this.rotation = new Matrix_1.default().Identity();
        if (rotation) {
            this.rotation.Rotate_b(MathHelper_1.default.ToRadian(rotation.z), Vector3_1.default.zAxis).Multiply_b(new Matrix_1.default().Identity().Rotate_b(MathHelper_1.default.ToRadian(rotation.y), Vector3_1.default.yAxis)).Multiply_b(new Matrix_1.default().Identity().Rotate_b(MathHelper_1.default.ToRadian(rotation.x), Vector3_1.default.xAxis));
        }
        this.generateFunc = this.ScaleRotationTranslate;
    }
    Object.defineProperty(Transform.prototype, "Position", {
        get: function () {
            var mat = this.Matrix;
            return new Vector3_1.default(mat.data[12], mat.data[13], mat.data[14]);
        },
        set: function (value) {
            this.position.x = value.x;
            this.position.y = value.y;
            this.position.z = value.z;
            if (this.matrix) {
                this.matrix.data[12] = this.position.x;
                this.matrix.data[13] = this.position.y;
                this.matrix.data[14] = this.position.z;
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Transform.prototype, "LocalPosition", {
        get: function () {
            return this.position.Clone();
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Transform.prototype, "Rotation", {
        get: function () {
            if (this.baseTransform != null) {
                return this.baseTransform.Rotation.Multiply(this.rotation);
            }
            else
                return this.rotation;
        },
        set: function (value) {
            this.rotation = value.Clone();
            this.matrix = null;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Transform.prototype, "Scale", {
        get: function () {
            return this.scale.Clone();
        },
        set: function (value) {
            this.scale.x = value.x;
            this.scale.y = value.y;
            this.scale.z = value.z;
            this.matrix = null;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Transform.prototype, "Matrix", {
        get: function () {
            if (this.matrix == null)
                this.generateFunc();
            if (this.baseTransform != null) {
                return this.baseTransform.Matrix.Multiply(this.matrix);
            }
            else {
                return this.matrix;
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Transform.prototype, "LocalMatrix", {
        get: function () {
            if (this.matrix == null)
                this.generateFunc();
            return this.matrix;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Transform.prototype, "BaseTransform", {
        get: function () {
            return this.baseTransform;
        },
        set: function (arg_base) {
            this.baseTransform = arg_base;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Transform.prototype, "SetPosition", {
        get: function () {
            this.matrix = null;
            return this.position;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(Transform.prototype, "SetScale", {
        get: function () {
            this.matrix = null;
            return this.scale;
        },
        enumerable: false,
        configurable: true
    });
    Transform.prototype.GetFront = function () {
        return Vector3_1.default.zAxis.Multiply_Matrix(this.Rotation).Normalize_b();
    };
    Transform.prototype.GetRight = function () {
        return Vector3_1.default.xAxis.Multiply_Matrix(this.Rotation).Normalize_b();
    };
    Transform.prototype.GetUp = function () {
        return Vector3_1.default.yAxis.Multiply_Matrix(this.Rotation).Normalize_b();
    };
    Transform.prototype.ScaleRotationTranslate = function () {
        this.matrix = new Matrix_1.default();
        this.matrix.Identity();
        this.matrix.Translate_b(this.position);
        this.matrix.Multiply_b(this.rotation);
        this.matrix.Scale_b(this.scale);
    };
    Transform.prototype.LookAt = function (arg_targetPos, arg_upAxis) {
        this.rotation.Identity();
        var z = (arg_targetPos.Sub(this.Position)).Normalize().Multiply(-1);
        var x = arg_upAxis.Cross(z).Normalize();
        var y = z.Cross(x).Normalize();
        this.rotation.data[0] = x.x;
        this.rotation.data[1] = x.y;
        this.rotation.data[2] = x.z;
        this.rotation.data[4] = y.x;
        this.rotation.data[5] = y.y;
        this.rotation.data[6] = y.z;
        this.rotation.data[8] = z.x;
        this.rotation.data[9] = z.y;
        this.rotation.data[10] = z.z;
        this.matrix = null;
    };
    Transform.prototype.ScaleTranslateRotation = function () {
        this.matrix = new Matrix_1.default();
        this.matrix.Identity();
        this.matrix.Multiply_b(this.rotation);
        this.matrix.Translate_b(this.position);
        this.matrix.Scale_b(this.scale);
    };
    Transform.prototype.Translate = function (arg_velocity) {
        this.position.x = this.position.x + arg_velocity.x;
        this.position.y = this.position.y + arg_velocity.y;
        this.position.z = this.position.z + arg_velocity.z;
        if (this.matrix) {
            this.matrix.data[12] = this.position.x;
            this.matrix.data[13] = this.position.y;
            this.matrix.data[14] = this.position.z;
        }
    };
    Transform.prototype.TranslateX = function (arg_x) {
        this.position.data[0] += arg_x;
        if (this.matrix) {
            this.matrix.data[12] = this.position.x;
        }
    };
    Transform.prototype.TranslateY = function (arg_y) {
        this.position.data[1] += arg_y;
        if (this.matrix) {
            this.matrix.data[13] = this.position.y;
        }
    };
    Transform.prototype.TranslateZ = function (arg_z) {
        this.position.data[2] += arg_z;
        if (this.matrix) {
            this.matrix.data[14] = this.position.z;
        }
    };
    Transform.prototype.SetPositionX = function (arg_x) {
        this.position.data[0] = arg_x;
        if (this.matrix) {
            this.matrix.data[12] = this.position.x;
        }
    };
    Transform.prototype.SetPositionY = function (arg_y) {
        this.position.data[1] = arg_y;
        if (this.matrix) {
            this.matrix.data[13] = arg_y;
        }
    };
    Transform.prototype.SetPositionZ = function (arg_z) {
        this.position.data[2] = arg_z;
        if (this.matrix) {
            this.matrix.data[14] = this.position.z;
        }
    };
    Transform.prototype.SetScaleX = function (arg_x) {
        this.scale.data[0] = arg_x;
        this.matrix = null;
    };
    Transform.prototype.SetScaleY = function (arg_y) {
        this.scale.data[1] = arg_y;
        this.matrix = null;
    };
    Transform.prototype.SetScaleZ = function (arg_z) {
        this.scale.data[2] = arg_z;
        this.matrix = null;
    };
    Transform.prototype.Roll_Local = function (arg_rotateMatrix) {
        this.rotation.Multiply_b(arg_rotateMatrix);
        this.matrix = null;
    };
    Transform.prototype.Roll_World = function (arg_rotateMatrix) {
        this.rotation = arg_rotateMatrix.Multiply(this.rotation);
        this.matrix = null;
    };
    Transform.prototype.RollX_Local_Degrees = function (arg_degrees) {
        this.RollX_Local_Radians(MathHelper_1.default.ToRadian(arg_degrees));
    };
    Transform.prototype.RollX_Local_Radians = function (arg_radians) {
        calcMatrix4x4.Identity();
        calcMatrix4x4.Rotate_b(arg_radians, Vector3_1.default.xAxis);
        this.rotation.Multiply_b(calcMatrix4x4);
        this.matrix = null;
    };
    Transform.prototype.RollX_World_Degrees = function (arg_degrees) {
        this.RollX_World_Radians(MathHelper_1.default.ToRadian(arg_degrees));
    };
    Transform.prototype.RollX_World_Radians = function (arg_radians) {
        calcMatrix4x4.Identity();
        calcMatrix4x4.Rotate_b(arg_radians, Vector3_1.default.xAxis);
        this.rotation = calcMatrix4x4.Multiply(this.rotation);
        this.matrix = null;
    };
    Transform.prototype.RollY_Local_Degrees = function (arg_degrees) {
        this.RollY_Local_Radians(MathHelper_1.default.ToRadian(arg_degrees));
    };
    Transform.prototype.RollY_Local_Radians = function (arg_radians) {
        calcMatrix4x4.Identity();
        calcMatrix4x4.Rotate_b(arg_radians, Vector3_1.default.yAxis);
        this.rotation.Multiply_b(calcMatrix4x4);
        this.matrix = null;
    };
    Transform.prototype.RollY_World_Degrees = function (arg_degrees) {
        this.RollY_World_Radians(MathHelper_1.default.ToRadian(arg_degrees));
    };
    Transform.prototype.RollY_World_Radians = function (arg_radians) {
        calcMatrix4x4.Identity();
        calcMatrix4x4.Rotate_b(arg_radians, Vector3_1.default.yAxis);
        this.rotation = calcMatrix4x4.Multiply(this.rotation);
        this.matrix = null;
    };
    Transform.prototype.RollZ_Local_Degrees = function (arg_degrees) {
        this.RollZ_Local_Radians(MathHelper_1.default.ToRadian(arg_degrees));
    };
    Transform.prototype.RollZ_Local_Radians = function (arg_radians) {
        calcMatrix4x4.Identity();
        calcMatrix4x4.Rotate_b(arg_radians, Vector3_1.default.zAxis);
        this.rotation.Multiply_b(calcMatrix4x4);
        this.matrix = null;
    };
    Transform.prototype.RollZ_World_Degrees = function (arg_degrees) {
        this.RollZ_World_Radians(MathHelper_1.default.ToRadian(arg_degrees));
    };
    Transform.prototype.RollZ_World_Radians = function (arg_radians) {
        calcMatrix4x4.Identity();
        calcMatrix4x4.Rotate_b(arg_radians, Vector3_1.default.zAxis);
        this.rotation = calcMatrix4x4.Multiply(this.rotation);
        this.matrix = null;
    };
    Transform.prototype.Clone = function () {
        var out = new Transform(this.LocalPosition);
        out.scale = this.scale;
        out.rotation = this.rotation;
        out.baseTransform = this.baseTransform;
        return out;
    };
    return Transform;
}());
exports.default = Transform;


/***/ }),

/***/ "./WebGl/index.ts":
/*!************************!*\
  !*** ./WebGl/index.ts ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var GraphicDevice_1 = __importDefault(__webpack_require__(/*! ./Graphic/GraphicDevice */ "./WebGl/Graphic/GraphicDevice.ts"));
var ResourceContainer_1 = __importDefault(__webpack_require__(/*! ./Parts/ResourceContainer */ "./WebGl/Parts/ResourceContainer.ts"));
var ModelCreater_1 = __importDefault(__webpack_require__(/*! ./Parts/ModelCreater */ "./WebGl/Parts/ModelCreater.ts"));
var SceneManager_1 = __importDefault(__webpack_require__(/*! ./Scene/SceneManager */ "./WebGl/Scene/SceneManager.ts"));
var Input_1 = __importDefault(__webpack_require__(/*! ./Tool/Input */ "./WebGl/Tool/Input.ts"));
var TitleScene_1 = __importDefault(__webpack_require__(/*! ./TitleScene */ "./WebGl/TitleScene.ts"));
var LoadScene_1 = __importDefault(__webpack_require__(/*! ./LoadScene */ "./WebGl/LoadScene.ts"));
onload = function () {
    console.log("this js is webGL/index.ts");
    //canvas
    var canvas = document.getElementById('myCanvas');
    //audioElement.volume=0.0;
    canvas.setAttribute('tabindex', "");
    canvas.width = 600;
    canvas.height = 600;
    Input_1.default.canvas = canvas;
    var resourceContainer = new ResourceContainer_1.default();
    var graphicDevice = new GraphicDevice_1.default(canvas);
    var modelCreater = new ModelCreater_1.default(graphicDevice, resourceContainer);
    var sceneManager = new SceneManager_1.default(modelCreater, resourceContainer, graphicDevice);
    sceneManager.AddScene(new TitleScene_1.default(sceneManager), "title");
    sceneManager.AddScene(new LoadScene_1.default(sceneManager), "load");
    sceneManager.ChangeScene("title");
    tick();
    // 
    function tick() {
        sceneManager.Update();
        //console.log(Input.mousePosition.x+","+Input.mousePosition.x);
        requestAnimationFrame(tick);
    }
    ;
};


/***/ }),

/***/ "./game.js":
/*!*****************!*\
  !*** ./game.js ***!
  \*****************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {


__webpack_require__(/*! ./WebGl/index */ "./WebGl/index.ts")

/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vV2ViR2wvQ29tcG9uZW50L0NhbWVyYUNoYXNlci50cyIsIndlYnBhY2s6Ly8vLi9XZWJHbC9Db21wb25lbnQvQ29sbGlzaW9uQ29tcG9uZW50LnRzIiwid2VicGFjazovLy8uL1dlYkdsL0NvbXBvbmVudC9Db21wb25lbnQudHMiLCJ3ZWJwYWNrOi8vLy4vV2ViR2wvQ29tcG9uZW50L01vZGVsRHJhd0NvbXBvbmVudC50cyIsIndlYnBhY2s6Ly8vLi9XZWJHbC9Db21wb25lbnQvUG9wcGluZ0FuaW1hdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9XZWJHbC9Db21wb25lbnQvU2NlbmVDaGFuZ2VyLnRzIiwid2VicGFjazovLy8uL1dlYkdsL0NvbXBvbmVudC9TdWNpZGVDb21wb25lbnQudHMiLCJ3ZWJwYWNrOi8vLy4vV2ViR2wvQ29tcG9uZW50L1RleHREcmF3Q29tcG9uZW50LnRzIiwid2VicGFjazovLy8uL1dlYkdsL0NvbXBvbmVudC9UcmFuc2Zvcm1BbmltYXRpb24udHMiLCJ3ZWJwYWNrOi8vLy4vV2ViR2wvQ3Jvc3N5TG9hZF9Db3B5L0NvaW5Db21wb25lbnQudHMiLCJ3ZWJwYWNrOi8vLy4vV2ViR2wvQ3Jvc3N5TG9hZF9Db3B5L0Nyb3NzeVVJLnRzIiwid2VicGFjazovLy8uL1dlYkdsL0Nyb3NzeUxvYWRfQ29weS9EYW1hZ2VPYlN0YWNsZS50cyIsIndlYnBhY2s6Ly8vLi9XZWJHbC9Dcm9zc3lMb2FkX0NvcHkvT2JzdGFjbGVDb21wb25lbnQudHMiLCJ3ZWJwYWNrOi8vLy4vV2ViR2wvQ3Jvc3N5TG9hZF9Db3B5L1BsYXllckNvbXBvbmVudC50cyIsIndlYnBhY2s6Ly8vLi9XZWJHbC9Dcm9zc3lMb2FkX0NvcHkvUm91bmRUcmlwLnRzIiwid2VicGFjazovLy8uL1dlYkdsL0Nyb3NzeUxvYWRfQ29weS9Sb3VuZFRyaXBfV2FpdC50cyIsIndlYnBhY2s6Ly8vLi9XZWJHbC9Dcm9zc3lMb2FkX0NvcHkvU2Vuc29yLnRzIiwid2VicGFjazovLy8uL1dlYkdsL0Nyb3NzeUxvYWRfQ29weS9TaWduYWxDb21wb25lbnQudHMiLCJ3ZWJwYWNrOi8vLy4vV2ViR2wvQ3Jvc3N5TG9hZF9Db3B5L1N0YWdlLnRzIiwid2VicGFjazovLy8uL1dlYkdsL0Nyb3NzeUxvYWRfQ29weS9TdGFnZVBhcnRzLnRzIiwid2VicGFjazovLy8uL1dlYkdsL0Nyb3NzeUxvYWRfQ29weS9TdGFnZVBhcnRzX1JhaWwudHMiLCJ3ZWJwYWNrOi8vLy4vV2ViR2wvQ3Jvc3N5TG9hZF9Db3B5L1N0YWdlUGFydHNfUm9hZC50cyIsIndlYnBhY2s6Ly8vLi9XZWJHbC9Dcm9zc3lMb2FkX0NvcHkvU3RhZ2VQYXJ0c19TYWZlLnRzIiwid2VicGFjazovLy8uL1dlYkdsL0dhbWVPYmplY3QvR2FtZU9iamVjdC50cyIsIndlYnBhY2s6Ly8vLi9XZWJHbC9HYW1lT2JqZWN0L0dhbWVPYmplY3RNYW5hZ2VyLnRzIiwid2VicGFjazovLy8uL1dlYkdsL0dyYXBoaWMvQ2FtZXJhLnRzIiwid2VicGFjazovLy8uL1dlYkdsL0dyYXBoaWMvR3JhcGhpY0RldmljZS50cyIsIndlYnBhY2s6Ly8vLi9XZWJHbC9HcmFwaGljL01vZGVsLnRzIiwid2VicGFjazovLy8uL1dlYkdsL0dyYXBoaWMvVGV4dE1vZGVsLnRzIiwid2VicGFjazovLy8uL1dlYkdsL0xpZ2h0L1BvaW50TGlnaHQudHMiLCJ3ZWJwYWNrOi8vLy4vV2ViR2wvTG9hZFNjZW5lLnRzIiwid2VicGFjazovLy8uL1dlYkdsL01hdGgvR2VvbWV0cnkvQm94X0FBQkIudHMiLCJ3ZWJwYWNrOi8vLy4vV2ViR2wvTWF0aC9HZW9tZXRyeS9Cb3hfT0JCLnRzIiwid2VicGFjazovLy8uL1dlYkdsL01hdGgvR2VvbWV0cnkvR2VvbWV0cnlIZWxwZXIudHMiLCJ3ZWJwYWNrOi8vLy4vV2ViR2wvTWF0aC9HZW9tZXRyeS9TcGhlcmUudHMiLCJ3ZWJwYWNrOi8vLy4vV2ViR2wvTWF0aC9NYXRyaXgudHMiLCJ3ZWJwYWNrOi8vLy4vV2ViR2wvTWF0aC9RdWF0LnRzIiwid2VicGFjazovLy8uL1dlYkdsL01hdGgvVmVjdG9yMi50cyIsIndlYnBhY2s6Ly8vLi9XZWJHbC9NYXRoL1ZlY3RvcjMudHMiLCJ3ZWJwYWNrOi8vLy4vV2ViR2wvTWF0aC9WZWN0b3I0LnRzIiwid2VicGFjazovLy8uL1dlYkdsL1BhcnRzL0NvbGxpc2lvbi9Db2xsaXNpb25NYW5hZ2VyLnRzIiwid2VicGFjazovLy8uL1dlYkdsL1BhcnRzL0NvbGxpc2lvbi9Db2xsaXNpb25PYmplY3QudHMiLCJ3ZWJwYWNrOi8vLy4vV2ViR2wvUGFydHMvQ29sbGlzaW9uL09jdENlbGwudHMiLCJ3ZWJwYWNrOi8vLy4vV2ViR2wvUGFydHMvQ29sbGlzaW9uL09jdHJlZS50cyIsIndlYnBhY2s6Ly8vLi9XZWJHbC9QYXJ0cy9Db2xsaXNpb24vUHJpbWl0aXZlVHlwZS50cyIsIndlYnBhY2s6Ly8vLi9XZWJHbC9QYXJ0cy9HYW1lT2JqZWN0SURNYW5hZ2VyLnRzIiwid2VicGFjazovLy8uL1dlYkdsL1BhcnRzL0dhbWVUaW1lLnRzIiwid2VicGFjazovLy8uL1dlYkdsL1BhcnRzL0lELnRzIiwid2VicGFjazovLy8uL1dlYkdsL1BhcnRzL01vZGVsQ3JlYXRlci50cyIsIndlYnBhY2s6Ly8vLi9XZWJHbC9QYXJ0cy9SZW5kZXJlci50cyIsIndlYnBhY2s6Ly8vLi9XZWJHbC9QYXJ0cy9SZXNvdXJjZUNvbnRhaW5lci50cyIsIndlYnBhY2s6Ly8vLi9XZWJHbC9SZXNvdXJjZS9GcmFtZUJ1ZmZlclRleHR1cmUudHMiLCJ3ZWJwYWNrOi8vLy4vV2ViR2wvUmVzb3VyY2UvR2VvbWV0cnkudHMiLCJ3ZWJwYWNrOi8vLy4vV2ViR2wvUmVzb3VyY2UvTWF0ZXJpYWwudHMiLCJ3ZWJwYWNrOi8vLy4vV2ViR2wvUmVzb3VyY2UvTWVzaC50cyIsIndlYnBhY2s6Ly8vLi9XZWJHbC9SZXNvdXJjZS9TaGFkZXIudHMiLCJ3ZWJwYWNrOi8vLy4vV2ViR2wvUmVzb3VyY2UvU291bmQudHMiLCJ3ZWJwYWNrOi8vLy4vV2ViR2wvUmVzb3VyY2UvVGV4dHVyZS50cyIsIndlYnBhY2s6Ly8vLi9XZWJHbC9TYW1wbGVTY2VuZS50cyIsIndlYnBhY2s6Ly8vLi9XZWJHbC9TY2VuZS9TY2VuZS50cyIsIndlYnBhY2s6Ly8vLi9XZWJHbC9TY2VuZS9TY2VuZU1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vLy4vV2ViR2wvVGl0bGVTY2VuZS50cyIsIndlYnBhY2s6Ly8vLi9XZWJHbC9Ub29sL0JpbmFyeVJlYWRlci50cyIsIndlYnBhY2s6Ly8vLi9XZWJHbC9Ub29sL0NvbGxpc2lvbk9iamVjdENyZWF0ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vV2ViR2wvVG9vbC9Db2xvckNvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vV2ViR2wvVG9vbC9FYXNpbmcudHMiLCJ3ZWJwYWNrOi8vLy4vV2ViR2wvVG9vbC9GaWxlTG9hZGVyLnRzIiwid2VicGFjazovLy8uL1dlYkdsL1Rvb2wvR2VvbWV0cnlHZW5lcmF0b3IudHMiLCJ3ZWJwYWNrOi8vLy4vV2ViR2wvVG9vbC9JbnB1dC50cyIsIndlYnBhY2s6Ly8vLi9XZWJHbC9Ub29sL01hdGhIZWxwZXIudHMiLCJ3ZWJwYWNrOi8vLy4vV2ViR2wvVG9vbC9SYW5kb21IZWxwZXIudHMiLCJ3ZWJwYWNrOi8vLy4vV2ViR2wvVG9vbC9SZXNvdXJjZUNyZWF0ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vV2ViR2wvVHJhbnNmb3JtLnRzIiwid2VicGFjazovLy8uL1dlYkdsL2luZGV4LnRzIiwid2VicGFjazovLy8uL2dhbWUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtRQUFBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTtRQUNBOzs7UUFHQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTtR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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxtREFBbUQscUVBQXFFLEVBQUU7QUFDMUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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bkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxzQ0FBc0M7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0EsMkJBQTJCLFdBQVc7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsUUFBUTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFIQUFxSCxvQkFBb0IsRUFBRTtBQUMzSSxxREFBcUQsd0JBQXdCLEVBQUU7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG1CQUFtQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDs7Ozs7Ozs7Ozs7OztBQ3hQYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGNBQWMsZ0JBQWdCLHNDQUFzQyxpQkFBaUIsRUFBRTtBQUN2Riw2QkFBNkIsOEVBQThFO0FBQzNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0EsOENBQThDLGNBQWM7QUFDNUQsa0NBQWtDLG1CQUFPLENBQUMsOERBQXdCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7Ozs7Ozs7Ozs7Ozs7QUM1QmE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxjQUFjLGdCQUFnQixzQ0FBc0MsaUJBQWlCLEVBQUU7QUFDdkYsNkJBQTZCLDhFQUE4RTtBQUMzRztBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLDRDQUE0QztBQUM1QztBQUNBLDhDQUE4QyxjQUFjO0FBQzVELDJDQUEyQyxtQkFBTyxDQUFDLGdGQUFpQztBQUNwRixnQ0FBZ0MsbUJBQU8sQ0FBQyxnREFBaUI7QUFDekQscUNBQXFDLG1CQUFPLENBQUMsMERBQXNCO0FBQ25FLGtDQUFrQyxtQkFBTyxDQUFDLDBDQUFjO0FBQ3hELHNDQUFzQyxtQkFBTyxDQUFDLGlFQUFpQjtBQUMvRCx1Q0FBdUMsbUJBQU8sQ0FBQyxtRUFBa0I7QUFDakUsdUNBQXVDLG1CQUFPLENBQUMsbUVBQWtCO0FBQ2pFLHdDQUF3QyxtQkFBTyxDQUFDLHFFQUFtQjtBQUNuRSxtQ0FBbUMsbUJBQU8sQ0FBQywyREFBYztBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixlQUFlO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDs7Ozs7Ozs7Ozs7OztBQ2pGYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGNBQWMsZ0JBQWdCLHNDQUFzQyxpQkFBaUIsRUFBRTtBQUN2Riw2QkFBNkIsOEVBQThFO0FBQzNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0EsOENBQThDLGNBQWM7QUFDNUQsMkNBQTJDLG1CQUFPLENBQUMsZ0ZBQWlDO0FBQ3BGLGdDQUFnQyxtQkFBTyxDQUFDLGdEQUFpQjtBQUN6RCxxQ0FBcUMsbUJBQU8sQ0FBQywwREFBc0I7QUFDbkUsa0NBQWtDLG1CQUFPLENBQUMsMENBQWM7QUFDeEQsc0NBQXNDLG1CQUFPLENBQUMsaUVBQWlCO0FBQy9ELHVDQUF1QyxtQkFBTyxDQUFDLG1FQUFrQjtBQUNqRSxrQ0FBa0MsbUJBQU8sQ0FBQyx5REFBYTtBQUN2RCxtQ0FBbUMsbUJBQU8sQ0FBQywyREFBYztBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG1CQUFtQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixlQUFlO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxtQkFBbUIsRUFBRTtBQUNuRTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7Ozs7Ozs7Ozs7Ozs7QUNqRmE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxjQUFjLGdCQUFnQixzQ0FBc0MsaUJBQWlCLEVBQUU7QUFDdkYsNkJBQTZCLDhFQUE4RTtBQUMzRztBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLDRDQUE0QztBQUM1QztBQUNBLDhDQUE4QyxjQUFjO0FBQzVELDJDQUEyQyxtQkFBTyxDQUFDLGdGQUFpQztBQUNwRixnQ0FBZ0MsbUJBQU8sQ0FBQyxnREFBaUI7QUFDekQsc0JBQXNCLG1CQUFPLENBQUMsa0ZBQWtDO0FBQ2hFLHFDQUFxQyxtQkFBTyxDQUFDLDBEQUFzQjtBQUNuRSxrQ0FBa0MsbUJBQU8sQ0FBQywwQ0FBYztBQUN4RCxzQ0FBc0MsbUJBQU8sQ0FBQyxpRUFBaUI7QUFDL0QsMENBQTBDLG1CQUFPLENBQUMseUVBQXFCO0FBQ3ZFLG1DQUFtQyxtQkFBTyxDQUFDLDJEQUFjO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixtQkFBbUI7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGVBQWU7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixlQUFlO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCxpQkFBaUIsRUFBRTtBQUMzRTtBQUNBO0FBQ0EsQ0FBQztBQUNEOzs7Ozs7Ozs7Ozs7O0FDNUZhO0FBQ2I7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQSw4Q0FBOEMsY0FBYztBQUM1RCw0Q0FBNEMsbUJBQU8sQ0FBQywwRUFBOEI7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsNkJBQTZCLEVBQUU7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxzREFBc0QsMkJBQTJCLEVBQUU7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCwyQkFBMkIsRUFBRTtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCwyQkFBMkIsRUFBRTtBQUNuRixrRUFBa0UsMkJBQTJCLEVBQUU7QUFDL0YsMENBQTBDLHdCQUF3QixFQUFFO0FBQ3BFLHVFQUF1RSw0QkFBNEIsRUFBRTtBQUNyRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsc0RBQXNELEVBQUU7QUFDcEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELGdEQUFnRCxtQ0FBbUMsRUFBRSxFQUFFLEVBQUU7QUFDcEo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStELG1DQUFtQyxFQUFFO0FBQ3BHO0FBQ0EsK0RBQStELHdDQUF3QyxFQUFFO0FBQ3pHO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSwrREFBK0QsMENBQTBDLEVBQUU7QUFDM0csU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOzs7Ozs7Ozs7Ozs7O0FDM0lhO0FBQ2I7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQSw4Q0FBOEMsY0FBYztBQUM1RCxtQ0FBbUMsbUJBQU8sQ0FBQyxzREFBYztBQUN6RCxrQ0FBa0MsbUJBQU8sQ0FBQywwQ0FBYztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxxQkFBcUIsRUFBRTtBQUN4RSxnREFBZ0QscUJBQXFCLEVBQUUsMEJBQTBCLHFCQUFxQixFQUFFO0FBQ3hILG1FQUFtRSxzQkFBc0IsRUFBRTtBQUMzRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELHlDQUF5QyxFQUFFO0FBQ3JHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELHNCQUFzQixFQUFFO0FBQzVFO0FBQ0EsaURBQWlELHNCQUFzQixFQUFFO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOzs7Ozs7Ozs7Ozs7O0FDMUZhO0FBQ2I7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQSw4Q0FBOEMsY0FBYztBQUM1RCwrQkFBK0IsbUJBQU8sQ0FBQyw4Q0FBZ0I7QUFDdkQsa0NBQWtDLG1CQUFPLENBQUMsMENBQWM7QUFDeEQsZ0NBQWdDLG1CQUFPLENBQUMsZ0RBQWlCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDs7Ozs7Ozs7Ozs7OztBQ25EYTtBQUNiO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0EsOENBQThDLGNBQWM7QUFDNUQsZ0NBQWdDLG1CQUFPLENBQUMsZ0RBQWlCO0FBQ3pELGdDQUFnQyxtQkFBTyxDQUFDLGdEQUFpQjtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxlQUFlO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7Ozs7Ozs7Ozs7Ozs7QUN2V2E7QUFDYiw4Q0FBOEMsY0FBYztBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUNaYTtBQUNiO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0EsOENBQThDLGNBQWM7QUFDNUQsNkJBQTZCLG1CQUFPLENBQUMsb0NBQVE7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixRQUFRO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLE9BQU87QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDs7Ozs7Ozs7Ozs7OztBQ3JiYTtBQUNiO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0EsOENBQThDLGNBQWM7QUFDNUQsK0JBQStCLG1CQUFPLENBQUMsd0NBQVU7QUFDakQsZ0NBQWdDLG1CQUFPLENBQUMsMENBQVc7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDs7Ozs7Ozs7Ozs7OztBQ25OYTtBQUNiLDhDQUE4QyxjQUFjO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOzs7Ozs7Ozs7Ozs7O0FDeEdhO0FBQ2IsOENBQThDLGNBQWM7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDs7Ozs7Ozs7Ozs7OztBQ2pMYTtBQUNiLDhDQUE4QyxjQUFjO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLFVBQVU7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsY0FBYztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDs7Ozs7Ozs7Ozs7OztBQzNIYTtBQUNiLDhDQUE4QyxjQUFjO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDL0JhO0FBQ2I7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQSw4Q0FBOEMsY0FBYztBQUM1RCx3Q0FBd0MsbUJBQU8sQ0FBQywwREFBbUI7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixVQUFVO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixjQUFjO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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O0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDcExhO0FBQ2IsOENBQThDLGNBQWM7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLFNBQVM7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOzs7Ozs7Ozs7Ozs7O0FDaENhO0FBQ2IsOENBQThDLGNBQWM7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7Ozs7Ozs7Ozs7Ozs7QUNiYTtBQUNiO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0EsOENBQThDLGNBQWM7QUFDNUQsZ0NBQWdDLG1CQUFPLENBQUMsd0RBQXFCO0FBQzdELGlDQUFpQyxtQkFBTyxDQUFDLDBEQUFzQjtBQUMvRCwrQkFBK0IsbUJBQU8sQ0FBQyxzREFBb0I7QUFDM0QsaUNBQWlDLG1CQUFPLENBQUMsMERBQXNCO0FBQy9ELGdDQUFnQyxtQkFBTyxDQUFDLGdEQUFpQjtBQUN6RCwyQ0FBMkMsbUJBQU8sQ0FBQyw4RUFBZ0M7QUFDbkYsNkJBQTZCLG1CQUFPLENBQUMsa0RBQWtCO0FBQ3ZELG1DQUFtQyxtQkFBTyxDQUFDLGdEQUFjO0FBQ3pELHFDQUFxQyxtQkFBTyxDQUFDLDBEQUFzQjtBQUNuRSw4QkFBOEIsbUJBQU8sQ0FBQyxvREFBbUI7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsZ0NBQWdDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQix3QkFBd0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxpQkFBaUI7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJFQUEyRSxvQ0FBb0M7QUFDL0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxpQkFBaUI7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkVBQTJFLG9DQUFvQztBQUMvRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsaUJBQWlCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkVBQTJFLG9DQUFvQztBQUMvRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxpQkFBaUI7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJFQUEyRSxvQ0FBb0M7QUFDL0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxpQkFBaUI7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkVBQTJFLG9DQUFvQztBQUMvRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxpQkFBaUI7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyRUFBMkUsb0NBQW9DO0FBQy9HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxpQkFBaUI7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJFQUEyRSxvQ0FBb0M7QUFDL0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsaUJBQWlCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJFQUEyRSxvQ0FBb0M7QUFDL0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxpQkFBaUI7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyRUFBMkUsb0NBQW9DO0FBQy9HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxpQkFBaUI7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJFQUEyRSxvQ0FBb0M7QUFDL0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLGlCQUFpQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkVBQTJFLG9DQUFvQztBQUMvRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLGlCQUFpQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyRUFBMkUsb0NBQW9DO0FBQy9HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxpQkFBaUI7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyRUFBMkUsb0NBQW9DO0FBQy9HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLGlCQUFpQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkVBQTJFLG9DQUFvQztBQUMvRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLGlCQUFpQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyRUFBMkUsb0NBQW9DO0FBQy9HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsaUJBQWlCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkVBQTJFLG9DQUFvQztBQUMvRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxpQkFBaUI7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyRUFBMkUsb0NBQW9DO0FBQy9HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsaUJBQWlCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyRUFBMkUsb0NBQW9DO0FBQy9HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxpQkFBaUI7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkVBQTJFLG9DQUFvQztBQUMvRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxpQkFBaUI7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyRUFBMkUsb0NBQW9DO0FBQy9HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLGlCQUFpQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyRUFBMkUsb0NBQW9DO0FBQy9HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLGlCQUFpQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyRUFBMkUsb0NBQW9DO0FBQy9HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsaUJBQWlCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJFQUEyRSxvQ0FBb0M7QUFDL0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLGlCQUFpQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyRUFBMkUsb0NBQW9DO0FBQy9HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLGlCQUFpQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyRUFBMkUsb0NBQW9DO0FBQy9HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsbUJBQW1CO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG9CQUFvQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGtCQUFrQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDs7Ozs7Ozs7Ozs7OztBQ3ovQ2E7QUFDYjtBQUNBLDRDQUE0QztBQUM1QztBQUNBLDhDQUE4QyxjQUFjO0FBQzVELCtCQUErQixtQkFBTyxDQUFDLDZDQUFlO0FBQ3RELGdDQUFnQyxtQkFBTyxDQUFDLCtDQUFnQjtBQUN4RCxtQ0FBbUMsbUJBQU8sQ0FBQyxxREFBbUI7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDs7Ozs7Ozs7Ozs7OztBQzFTYTtBQUNiO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0EsOENBQThDLGNBQWM7QUFDNUQsc0NBQXNDLG1CQUFPLENBQUMsaUVBQXlCO0FBQ3ZFLDBDQUEwQyxtQkFBTyxDQUFDLHFFQUEyQjtBQUM3RSxxQ0FBcUMsbUJBQU8sQ0FBQywyREFBc0I7QUFDbkUscUNBQXFDLG1CQUFPLENBQUMsMkRBQXNCO0FBQ25FLDhCQUE4QixtQkFBTyxDQUFDLDJDQUFjO0FBQ3BELG1DQUFtQyxtQkFBTyxDQUFDLDJDQUFjO0FBQ3pELGtDQUFrQyxtQkFBTyxDQUFDLHlDQUFhO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDbkNBLG1CQUFPLENBQUMsdUNBQWUsQyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IFwiLi9nYW1lLmpzXCIpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIFZlY3RvcjNfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vTWF0aC9WZWN0b3IzXCIpKTtcclxudmFyIENvbXBvbmVudF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL0NvbXBvbmVudFwiKSk7XHJcbnZhciB6TWluID0gLTIuNTtcclxudmFyIHpNYXggPSAtMi4yNTtcclxudmFyIHhNaW4gPSAxLjA7XHJcbnZhciB4TWF4ID0gMi4wO1xyXG52YXIgQ2FtZXJhQ2hhc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKENhbWVyYUNoYXNlciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIENhbWVyYUNoYXNlcihhcmdfc3BlZWQsIGFyZ190cmFnZXRUcmFuc2Zvcm0pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLnNwZWVkID0gYXJnX3NwZWVkO1xyXG4gICAgICAgIF90aGlzLnRhcmdldFRyYW5zZm9ybSA9IGFyZ190cmFnZXRUcmFuc2Zvcm07XHJcbiAgICAgICAgX3RoaXMudmVsb2NpdHkgPSBuZXcgVmVjdG9yM18xLmRlZmF1bHQoMCwgMCwgMCk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgQ2FtZXJhQ2hhc2VyLnByb3RvdHlwZS5PblNldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm9mZnNldFggPSB0aGlzLmdhbWVPYmplY3QudHJhbnNmb3JtLlBvc2l0aW9uLnggLSB0aGlzLnRhcmdldFRyYW5zZm9ybS5Qb3NpdGlvbi54O1xyXG4gICAgICAgIHRoaXMub2Zmc2V0WiA9IHRoaXMuZ2FtZU9iamVjdC50cmFuc2Zvcm0uUG9zaXRpb24ueSAtIHRoaXMudGFyZ2V0VHJhbnNmb3JtLlBvc2l0aW9uLnk7XHJcbiAgICB9O1xyXG4gICAgQ2FtZXJhQ2hhc2VyLnByb3RvdHlwZS5VcGRhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy90aGlzLnZlbG9jaXR5LnkgPSB0aGlzLnRhcmdldFRyYW5zZm9ybS5Qb3NpdGlvbi55O1xyXG4gICAgICAgIHZhciB4bGVuZ3RoID0gdGhpcy5nYW1lT2JqZWN0LnRyYW5zZm9ybS5Qb3NpdGlvbi54IC0gdGhpcy50YXJnZXRUcmFuc2Zvcm0uUG9zaXRpb24ueCArIHRoaXMub2Zmc2V0WDtcclxuICAgICAgICBpZiAoeGxlbmd0aCAqIHRoaXMuc3BlZWQgPiAxKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmVsb2NpdHkueCA9IHhsZW5ndGggLyAyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh4bGVuZ3RoID4geE1heCkge1xyXG4gICAgICAgICAgICB0aGlzLnZlbG9jaXR5LnggPSAtMSAqICh4bGVuZ3RoIC0geE1heCkgKiAoeGxlbmd0aCAtIHhNYXgpICogdGhpcy5zcGVlZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoeGxlbmd0aCA8IHhNaW4pIHtcclxuICAgICAgICAgICAgdGhpcy52ZWxvY2l0eS54ID0gKHhsZW5ndGggLSB4TWluKSAqICh4bGVuZ3RoIC0geE1pbikgKiB0aGlzLnNwZWVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy52ZWxvY2l0eS54ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHogPSB0aGlzLmdhbWVPYmplY3QudHJhbnNmb3JtLlBvc2l0aW9uLnogLSB0aGlzLnRhcmdldFRyYW5zZm9ybS5Qb3NpdGlvbi56ICsgdGhpcy5vZmZzZXRaO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coeik7XHJcbiAgICAgICAgaWYgKHogPiB6TWF4KSB7XHJcbiAgICAgICAgICAgIHRoaXMudmVsb2NpdHkueiA9IC0xICogKHogLSB6TWF4KSAqICh6IC0gek1heCkgKiB0aGlzLnNwZWVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh6IDwgek1pbikge1xyXG4gICAgICAgICAgICB0aGlzLnZlbG9jaXR5LnogPSAoeiAtIHpNaW4pICogKHogLSB6TWluKSAqIHRoaXMuc3BlZWQgKiAyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy52ZWxvY2l0eS56ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5nYW1lT2JqZWN0LnRyYW5zZm9ybS5TZXRQb3NpdGlvbi5BZGRfYigodGhpcy52ZWxvY2l0eSkpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBDYW1lcmFDaGFzZXI7XHJcbn0oQ29tcG9uZW50XzEuZGVmYXVsdCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBDYW1lcmFDaGFzZXI7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBDb21wb25lbnRfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9Db21wb25lbnRcIikpO1xyXG52YXIgQ29sbGlzaW9uT2JqZWN0Q3JlYXRlcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9Ub29sL0NvbGxpc2lvbk9iamVjdENyZWF0ZXJcIikpO1xyXG52YXIgUHJpbWl0aXZlVHlwZTtcclxuKGZ1bmN0aW9uIChQcmltaXRpdmVUeXBlKSB7XHJcbiAgICBQcmltaXRpdmVUeXBlW1ByaW1pdGl2ZVR5cGVbXCJzcGhlcmVcIl0gPSAwXSA9IFwic3BoZXJlXCI7XHJcbiAgICBQcmltaXRpdmVUeXBlW1ByaW1pdGl2ZVR5cGVbXCJib3hfQUFCQlwiXSA9IDFdID0gXCJib3hfQUFCQlwiO1xyXG4gICAgUHJpbWl0aXZlVHlwZVtQcmltaXRpdmVUeXBlW1wiYm94X09CQlwiXSA9IDJdID0gXCJib3hfT0JCXCI7XHJcbiAgICBQcmltaXRpdmVUeXBlW1ByaW1pdGl2ZVR5cGVbXCJwb2ludFwiXSA9IDNdID0gXCJwb2ludFwiO1xyXG59KShQcmltaXRpdmVUeXBlIHx8IChQcmltaXRpdmVUeXBlID0ge30pKTtcclxudmFyIENvbGxpc2lvbkNvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhDb2xsaXNpb25Db21wb25lbnQsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBDb2xsaXNpb25Db21wb25lbnQoYXJnX3R5cGUsIGFyZ19zaXplLCBsYXllcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMubGF5ZXIgPSAwO1xyXG4gICAgICAgIF90aGlzLnR5cGUgPSBhcmdfdHlwZTtcclxuICAgICAgICBfdGhpcy5zaXplID0gYXJnX3NpemU7XHJcbiAgICAgICAgaWYgKGxheWVyKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmxheWVyID0gbGF5ZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIENvbGxpc2lvbkNvbXBvbmVudC5wcm90b3R5cGUuT25TZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBQcmltaXRpdmVUeXBlLnNwaGVyZTpcclxuICAgICAgICAgICAgICAgIHRoaXMuY29sbGlzaW9uID0gQ29sbGlzaW9uT2JqZWN0Q3JlYXRlcl8xLmRlZmF1bHQuQ3JlYXRlU3BoZXJlKHRoaXMuc2l6ZS54LCB0aGlzLmdhbWVPYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgUHJpbWl0aXZlVHlwZS5wb2ludDpcclxuICAgICAgICAgICAgICAgIHRoaXMuY29sbGlzaW9uID0gQ29sbGlzaW9uT2JqZWN0Q3JlYXRlcl8xLmRlZmF1bHQuQ3JlYXRlUG9pbnQodGhpcy5nYW1lT2JqZWN0KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFByaW1pdGl2ZVR5cGUuYm94X0FBQkI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbGxpc2lvbiA9IENvbGxpc2lvbk9iamVjdENyZWF0ZXJfMS5kZWZhdWx0LkNyZWF0ZUN1YmVfQUFCQih0aGlzLnNpemUsIHRoaXMuZ2FtZU9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBQcmltaXRpdmVUeXBlLmJveF9PQkI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbGxpc2lvbiA9IENvbGxpc2lvbk9iamVjdENyZWF0ZXJfMS5kZWZhdWx0LkNyZWF0ZUN1YmVfT0JCKHRoaXMuc2l6ZSwgdGhpcy5nYW1lT2JqZWN0KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmlkID0gdGhpcy5nYW1lT2JqZWN0LkdldENvbGxpc2lvbk1hbmFnZXIoKS5SZWdpc3QodGhpcy5jb2xsaXNpb24sIHRoaXMubGF5ZXIpO1xyXG4gICAgfTtcclxuICAgIENvbGxpc2lvbkNvbXBvbmVudC5wcm90b3R5cGUuT25SZW1vdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lT2JqZWN0LkdldENvbGxpc2lvbk1hbmFnZXIoKS5VblJlZ2lzdCh0aGlzLmlkLCB0aGlzLmxheWVyKTtcclxuICAgIH07XHJcbiAgICBDb2xsaXNpb25Db21wb25lbnQucHJvdG90eXBlLlVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmNvbGxpc2lvbi5VcGRhdGUoKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQ29sbGlzaW9uQ29tcG9uZW50O1xyXG59KENvbXBvbmVudF8xLmRlZmF1bHQpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gQ29sbGlzaW9uQ29tcG9uZW50O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQ29tcG9uZW50KCkge1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbXBvbmVudC5wcm90b3R5cGUsIFwiSXNSZW1vdmVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pc1JlbW92ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBDb21wb25lbnQucHJvdG90eXBlLlNldCA9IGZ1bmN0aW9uIChhcmdfb2JqKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lT2JqZWN0ID0gYXJnX29iajtcclxuICAgICAgICB0aGlzLmlzUmVtb3ZlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5PblNldCgpO1xyXG4gICAgfTtcclxuICAgIENvbXBvbmVudC5wcm90b3R5cGUuRGVhZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmlzUmVtb3ZlID0gdHJ1ZTtcclxuICAgIH07XHJcbiAgICBDb21wb25lbnQucHJvdG90eXBlLk9uU2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgfTtcclxuICAgIENvbXBvbmVudC5wcm90b3R5cGUuUmVtb3ZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuaXNSZW1vdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuT25SZW1vdmUoKTtcclxuICAgICAgICB0aGlzLmdhbWVPYmplY3QgPSBudWxsO1xyXG4gICAgfTtcclxuICAgIENvbXBvbmVudC5wcm90b3R5cGUuT25SZW1vdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB9O1xyXG4gICAgQ29tcG9uZW50LnByb3RvdHlwZS5SZWxlYXNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuT25SZWxlYXNlKCk7XHJcbiAgICAgICAgdGhpcy5nYW1lT2JqZWN0ID0gbnVsbDtcclxuICAgIH07XHJcbiAgICBDb21wb25lbnQucHJvdG90eXBlLk9uUmVsZWFzZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIH07XHJcbiAgICBDb21wb25lbnQucHJvdG90eXBlLlVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIH07XHJcbiAgICBDb21wb25lbnQucHJvdG90eXBlLk9uQ29sbGlzaW9uID0gZnVuY3Rpb24gKGFyZ19nYW1lT2JqZWN0KSB7XHJcbiAgICB9O1xyXG4gICAgQ29tcG9uZW50LnByb3RvdHlwZS5PbkNvbGxpc2lvbkVudGVyID0gZnVuY3Rpb24gKGFyZ19nYW1lT2JqZWN0KSB7XHJcbiAgICB9O1xyXG4gICAgQ29tcG9uZW50LnByb3RvdHlwZS5PbkNvbGxpc2lvblJlbGVhc2UgPSBmdW5jdGlvbiAoYXJnX2dhbWVPYmplY3QpIHtcclxuICAgIH07XHJcbiAgICBDb21wb25lbnQucHJvdG90eXBlLkdldENvbXBvbmVudE5hbWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiQ29tcG9uZW50XCI7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENvbXBvbmVudDtcclxufSgpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gQ29tcG9uZW50O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgQ29tcG9uZW50XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vQ29tcG9uZW50XCIpKTtcclxudmFyIE1vZGVsSW5mbyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE1vZGVsSW5mbygpIHtcclxuICAgICAgICB0aGlzLm1lc2hOYW1lID0gbnVsbDtcclxuICAgIH1cclxuICAgIHJldHVybiBNb2RlbEluZm87XHJcbn0oKSk7XHJcbnZhciBNb2RlbERyYXdDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoTW9kZWxEcmF3Q29tcG9uZW50LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gTW9kZWxEcmF3Q29tcG9uZW50KGlzTGlnaHRpbmcsIGdlb21ldHJ5TmFtZSwgbWF0ZXJpYWxOYW1lLCBzaGFkZXJOYW1lLCBsYXllciwgaXNCaWxsQm9hcmQsIG1lc2hOYW1lLCBhcmdfdHJhbnNmb3JtKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5pbmZvID0gbmV3IE1vZGVsSW5mbygpO1xyXG4gICAgICAgIF90aGlzLnRyYW5zZm9ybSA9IG51bGw7XHJcbiAgICAgICAgX3RoaXMubGF5ZXIgPSBsYXllcjtcclxuICAgICAgICBpZiAobWVzaE5hbWUpXHJcbiAgICAgICAgICAgIF90aGlzLmluZm8ubWVzaE5hbWUgPSBtZXNoTmFtZTtcclxuICAgICAgICBfdGhpcy5pbmZvLmdlb21ldHJ5TmFtZSA9IGdlb21ldHJ5TmFtZTtcclxuICAgICAgICBfdGhpcy5pbmZvLnNoYWRlck5hbWUgPSBzaGFkZXJOYW1lO1xyXG4gICAgICAgIF90aGlzLmluZm8ubWF0ZXJpYWxOYW1lID0gbWF0ZXJpYWxOYW1lO1xyXG4gICAgICAgIGlmIChhcmdfdHJhbnNmb3JtKVxyXG4gICAgICAgICAgICBfdGhpcy50cmFuc2Zvcm0gPSBhcmdfdHJhbnNmb3JtO1xyXG4gICAgICAgIF90aGlzLmluZm8ubGlnaHRpbmcgPSBpc0xpZ2h0aW5nO1xyXG4gICAgICAgIF90aGlzLmluZm8uYmlsbEJvYXJkID0gaXNCaWxsQm9hcmQ7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1vZGVsRHJhd0NvbXBvbmVudC5wcm90b3R5cGUsIFwiTGF5ZXJcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sYXllcjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBNb2RlbERyYXdDb21wb25lbnQucHJvdG90eXBlLk9uU2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghdGhpcy50cmFuc2Zvcm0pIHtcclxuICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm0gPSB0aGlzLmdhbWVPYmplY3QudHJhbnNmb3JtO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5pbmZvLm1lc2hOYW1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwgPSB0aGlzLmdhbWVPYmplY3QuTWFuYWdlci5TY2VuZS5HZXRTY2VuZU1hbmFnZXIoKS5HZXRNb2RlbENyZWF0ZXIoKS5DcmVhdGVNb2RlbEZyb21NZXNoKHRoaXMuaW5mby5saWdodGluZywgdGhpcy5pbmZvLmJpbGxCb2FyZCwgdGhpcy5pbmZvLm1lc2hOYW1lLCB0aGlzLmluZm8uc2hhZGVyTmFtZSwgdGhpcy50cmFuc2Zvcm0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbCA9IHRoaXMuZ2FtZU9iamVjdC5NYW5hZ2VyLlNjZW5lLkdldFNjZW5lTWFuYWdlcigpLkdldE1vZGVsQ3JlYXRlcigpLkNyZWF0ZU1vZGVsKHRoaXMuaW5mby5saWdodGluZywgdGhpcy5pbmZvLmJpbGxCb2FyZCwgdGhpcy5pbmZvLmdlb21ldHJ5TmFtZSwgdGhpcy5pbmZvLm1hdGVyaWFsTmFtZSwgdGhpcy5pbmZvLnNoYWRlck5hbWUsIHRoaXMudHJhbnNmb3JtKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5SZWdpc3REcmF3KCk7XHJcbiAgICB9O1xyXG4gICAgTW9kZWxEcmF3Q29tcG9uZW50LnByb3RvdHlwZS5PblJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLlVuUmVnaXN0RHJhdygpO1xyXG4gICAgfTtcclxuICAgIE1vZGVsRHJhd0NvbXBvbmVudC5wcm90b3R5cGUuUmVnaXN0RHJhdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIXRoaXMubW9kZWxJRClcclxuICAgICAgICAgICAgdGhpcy5tb2RlbElEID0gdGhpcy5nYW1lT2JqZWN0LkdldFJlbmRlcmVyKCkuUmVnaXN0KHRoaXMubW9kZWwsIHRoaXMubGF5ZXIpO1xyXG4gICAgfTtcclxuICAgIE1vZGVsRHJhd0NvbXBvbmVudC5wcm90b3R5cGUuVW5SZWdpc3REcmF3ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLm1vZGVsSUQpIHtcclxuICAgICAgICAgICAgdGhpcy5nYW1lT2JqZWN0LkdldFJlbmRlcmVyKCkuVW5SZWdpc3QodGhpcy5tb2RlbElELCB0aGlzLmxheWVyKTtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbElEID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE1vZGVsRHJhd0NvbXBvbmVudDtcclxufShDb21wb25lbnRfMS5kZWZhdWx0KSk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IE1vZGVsRHJhd0NvbXBvbmVudDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIEVhc2luZ18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9Ub29sL0Vhc2luZ1wiKSk7XHJcbnZhciBDb21wb25lbnRfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9Db21wb25lbnRcIikpO1xyXG52YXIgUG9wcGluZ0FuaW1hdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhQb3BwaW5nQW5pbWF0aW9uLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gUG9wcGluZ0FuaW1hdGlvbihhcmdfbW92ZU9iamVjdCwgYXJnX3RpbWUsIGFyZ19pc0xvb3AsIGFyZ190YXJnZXRUcmFuc2Zvcm0sIGFyZ190cmFuc2Zvcm0sIGFyZ19lYXNpbmdGdW5jdGlvbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuY3VycmVudFRpbWUgPSAwO1xyXG4gICAgICAgIF90aGlzLmRpcmVjdGlvbiA9IDE7XHJcbiAgICAgICAgX3RoaXMuaXNTdG9wID0gZmFsc2U7XHJcbiAgICAgICAgX3RoaXMucGxheWVyQ29tcG9lbnQgPSBhcmdfbW92ZU9iamVjdDtcclxuICAgICAgICBfdGhpcy50aW1lID0gYXJnX3RpbWU7XHJcbiAgICAgICAgX3RoaXMubGluZXJQYXNlID0gMS4wIC8gYXJnX3RpbWU7XHJcbiAgICAgICAgaWYgKGFyZ190YXJnZXRUcmFuc2Zvcm0pXHJcbiAgICAgICAgICAgIF90aGlzLnRhcmdldFRyYW5zZm9ybSA9IGFyZ190YXJnZXRUcmFuc2Zvcm07XHJcbiAgICAgICAgaWYgKGFyZ190cmFuc2Zvcm0pIHtcclxuICAgICAgICAgICAgX3RoaXMudHJhbnNmb3JtID0gYXJnX3RyYW5zZm9ybTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGFyZ19lYXNpbmdGdW5jdGlvbikge1xyXG4gICAgICAgICAgICBfdGhpcy5lYXNpbmdGdW5jdGlvbiA9IGFyZ19lYXNpbmdGdW5jdGlvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIF90aGlzLmVhc2luZ0Z1bmN0aW9uID0gRWFzaW5nXzEuZGVmYXVsdC5FYXNlSW5PdXRDdWJpYztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGFyZ19pc0xvb3ApIHtcclxuICAgICAgICAgICAgX3RoaXMuVGltZVVwZGF0ZSA9IF90aGlzLlRpbWVVcGRhdGVfTG9vcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIF90aGlzLlRpbWVVcGRhdGUgPSBfdGhpcy5UaW1lVXBkYXRlX05vTG9vcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgUG9wcGluZ0FuaW1hdGlvbi5wcm90b3R5cGUuT25TZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnRyYW5zZm9ybSkge1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IHRoaXMuZ2FtZU9iamVjdC50cmFuc2Zvcm07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy50YXJnZXRUcmFuc2Zvcm0pIHtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXRUcmFuc2Zvcm0gPSB0aGlzLmdhbWVPYmplY3QudHJhbnNmb3JtO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9mZnNldCA9IHRoaXMudGFyZ2V0VHJhbnNmb3JtLlBvc2l0aW9uLlN1Yih0aGlzLnRyYW5zZm9ybS5Qb3NpdGlvbik7XHJcbiAgICAgICAgdGhpcy5zY2FsZVBhc2UgPSB0aGlzLnRhcmdldFRyYW5zZm9ybS5TY2FsZS5TdWIodGhpcy50cmFuc2Zvcm0uU2NhbGUpO1xyXG4gICAgICAgIHRoaXMuaW5pdFBvc2l0aW9uID0gdGhpcy50cmFuc2Zvcm0uUG9zaXRpb247XHJcbiAgICAgICAgdGhpcy5pbml0U2NhbGUgPSB0aGlzLnRyYW5zZm9ybS5TY2FsZTtcclxuICAgICAgICB0aGlzLnJvdGF0ZVF1YXQgPSB0aGlzLnRyYW5zZm9ybS5Sb3RhdGlvbi5Ub1F1YXRlcm5pb24oKTtcclxuICAgICAgICB0aGlzLnRhcmdldFJvdGF0ZVF1YXQgPSB0aGlzLnRhcmdldFRyYW5zZm9ybS5Sb3RhdGlvbi5Ub1F1YXRlcm5pb24oKTtcclxuICAgIH07XHJcbiAgICBQb3BwaW5nQW5pbWF0aW9uLnByb3RvdHlwZS5TZXRUYXJnZXQgPSBmdW5jdGlvbiAoYXJnX3RpbWUsIGFyZ190YXJnZXRUcmFuc2Zvcm0pIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRUaW1lID0gMDtcclxuICAgICAgICB0aGlzLnRpbWUgPSBhcmdfdGltZTtcclxuICAgICAgICB0aGlzLnRhcmdldFRyYW5zZm9ybSA9IGFyZ190YXJnZXRUcmFuc2Zvcm07XHJcbiAgICAgICAgdGhpcy5vZmZzZXQgPSB0aGlzLnRhcmdldFRyYW5zZm9ybS5Qb3NpdGlvbi5TdWIodGhpcy50cmFuc2Zvcm0uUG9zaXRpb24pO1xyXG4gICAgICAgIHRoaXMuc2NhbGVQYXNlID0gdGhpcy50YXJnZXRUcmFuc2Zvcm0uU2NhbGUuU3ViKHRoaXMudHJhbnNmb3JtLlNjYWxlKTtcclxuICAgICAgICB0aGlzLmluaXRQb3NpdGlvbiA9IHRoaXMudHJhbnNmb3JtLkxvY2FsUG9zaXRpb247XHJcbiAgICAgICAgdGhpcy5pbml0U2NhbGUgPSB0aGlzLnRyYW5zZm9ybS5TY2FsZTtcclxuICAgICAgICB0aGlzLnJvdGF0ZVF1YXQgPSB0aGlzLnRyYW5zZm9ybS5Sb3RhdGlvbi5Ub1F1YXRlcm5pb24oKTtcclxuICAgICAgICB0aGlzLnRhcmdldFJvdGF0ZVF1YXQgPSB0aGlzLnRhcmdldFRyYW5zZm9ybS5Sb3RhdGlvbi5Ub1F1YXRlcm5pb24oKTtcclxuICAgIH07XHJcbiAgICBQb3BwaW5nQW5pbWF0aW9uLnByb3RvdHlwZS5UaW1lVXBkYXRlX0xvb3AgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFRpbWUgPj0gdGhpcy50aW1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFRpbWUgPSB0aGlzLnRpbWU7XHJcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuY3VycmVudFRpbWUgPD0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRUaW1lID0gMDtcclxuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmN1cnJlbnRUaW1lICs9IHRoaXMuZGlyZWN0aW9uO1xyXG4gICAgfTtcclxuICAgIFBvcHBpbmdBbmltYXRpb24ucHJvdG90eXBlLlRpbWVVcGRhdGVfTm9Mb29wID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRUaW1lID4gdGhpcy50aW1lKSB7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuY3VycmVudFRpbWUgPT0gdGhpcy50aW1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyQ29tcG9lbnQuT25Nb3ZlRW5kKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY3VycmVudFRpbWUgKz0gdGhpcy5kaXJlY3Rpb247XHJcbiAgICB9O1xyXG4gICAgUG9wcGluZ0FuaW1hdGlvbi5wcm90b3R5cGUuSXNNb3ZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRUaW1lID4gdGhpcy50aW1lICsgMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUG9wcGluZ0FuaW1hdGlvbi5wcm90b3R5cGUuU3RvcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmlzU3RvcCA9IHRydWU7XHJcbiAgICB9O1xyXG4gICAgUG9wcGluZ0FuaW1hdGlvbi5wcm90b3R5cGUuU3RhcnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5pc1N0b3AgPSBmYWxzZTtcclxuICAgIH07XHJcbiAgICBQb3BwaW5nQW5pbWF0aW9uLnByb3RvdHlwZS5VcGRhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNTdG9wKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5UaW1lVXBkYXRlKCk7XHJcbiAgICAgICAgdmFyIHQgPSB0aGlzLmVhc2luZ0Z1bmN0aW9uKHRoaXMuY3VycmVudFRpbWUgLyB0aGlzLnRpbWUpO1xyXG4gICAgICAgIGlmICh0ID4gMSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtLlBvc2l0aW9uID0gdGhpcy5pbml0UG9zaXRpb24uQWRkKHRoaXMub2Zmc2V0Lk11bHRpcGx5KHQpLkFkZFkoLUVhc2luZ18xLmRlZmF1bHQuUGFyYWJvbGEodCkgKiAwLjgpKTtcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybS5TY2FsZSA9IHRoaXMuaW5pdFNjYWxlLkFkZCh0aGlzLnNjYWxlUGFzZS5NdWx0aXBseSh0KSk7XHJcbiAgICAgICAgLy90aGlzLnRyYW5zZm9ybS5Sb3RhdGlvbj0gdGhpcy50cmFuc2Zvcm0uUm90YXRpb25cclxuICAgICAgICB0aGlzLnRyYW5zZm9ybS5Sb3RhdGlvbiA9IHRoaXMucm90YXRlUXVhdC5TcGhlcmVMZXJwKHRoaXMudGFyZ2V0Um90YXRlUXVhdCwgdCkuVG9NYXRyaXg0eDQoKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUG9wcGluZ0FuaW1hdGlvbjtcclxufShDb21wb25lbnRfMS5kZWZhdWx0KSk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IFBvcHBpbmdBbmltYXRpb247XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBDb21wb25lbnRfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9Db21wb25lbnRcIikpO1xyXG52YXIgU2NlbmVDaGFuZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFNjZW5lQ2hhbmdlciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFNjZW5lQ2hhbmdlcihhcmdfc2NlbmVOYW1lLCBhcmdfd2FpdEZyYW1lLCBhcmdfc2NlbmVDaGFuZ2VWYWx1ZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuc2NlbmVOYW1lID0gYXJnX3NjZW5lTmFtZTtcclxuICAgICAgICBfdGhpcy5zY2VuZUNoYW5nZVZhbHVlID0gYXJnX3NjZW5lQ2hhbmdlVmFsdWU7XHJcbiAgICAgICAgX3RoaXMud2FpdEZyYW1lID0gYXJnX3dhaXRGcmFtZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBTY2VuZUNoYW5nZXIucHJvdG90eXBlLlVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLndhaXRGcmFtZS0tO1xyXG4gICAgICAgIGlmICh0aGlzLndhaXRGcmFtZSA+IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmdhbWVPYmplY3QuTWFuYWdlci5TY2VuZS5HZXRTY2VuZU1hbmFnZXIoKS5DaGFuZ2VTY2VuZSh0aGlzLnNjZW5lTmFtZSwgdGhpcy5zY2VuZUNoYW5nZVZhbHVlKTtcclxuICAgICAgICB0aGlzLkRlYWQoKTtcclxuICAgICAgICA7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFNjZW5lQ2hhbmdlcjtcclxufShDb21wb25lbnRfMS5kZWZhdWx0KSk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IFNjZW5lQ2hhbmdlcjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIENvbXBvbmVudF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL0NvbXBvbmVudFwiKSk7XHJcbnZhciBTdWNpZGVDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoU3VjaWRlQ29tcG9uZW50LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gU3VjaWRlQ29tcG9uZW50KGFyZ193YWl0RnJhbWUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLndhaXRGcmFtZSA9IGFyZ193YWl0RnJhbWU7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgU3VjaWRlQ29tcG9uZW50LnByb3RvdHlwZS5VcGRhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy53YWl0RnJhbWUtLTtcclxuICAgICAgICBpZiAodGhpcy53YWl0RnJhbWUgPiAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5nYW1lT2JqZWN0LkRlYWQoKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gU3VjaWRlQ29tcG9uZW50O1xyXG59KENvbXBvbmVudF8xLmRlZmF1bHQpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gU3VjaWRlQ29tcG9uZW50O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgQ29tcG9uZW50XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vQ29tcG9uZW50XCIpKTtcclxudmFyIE1vZGVsSW5mbyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE1vZGVsSW5mbygpIHtcclxuICAgIH1cclxuICAgIHJldHVybiBNb2RlbEluZm87XHJcbn0oKSk7XHJcbnZhciBUZXh0RHJhd0NvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhUZXh0RHJhd0NvbXBvbmVudCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFRleHREcmF3Q29tcG9uZW50KHRleHQsIGZvbnRUZXhOYW1lLCBzaGFkZXJOYW1lLCBhcmdfY29sb3IsIGxheWVyLCBpc0JpbGxCb2FyZCwgYXJnX3RyYW5zZm9ybSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuaW5mbyA9IG5ldyBNb2RlbEluZm8oKTtcclxuICAgICAgICBfdGhpcy50cmFuc2Zvcm0gPSBudWxsO1xyXG4gICAgICAgIF90aGlzLmxheWVyID0gbGF5ZXI7XHJcbiAgICAgICAgX3RoaXMuaW5mby5zaGFkZXJOYW1lID0gc2hhZGVyTmFtZTtcclxuICAgICAgICBfdGhpcy5pbmZvLmNvbG9yID0gYXJnX2NvbG9yO1xyXG4gICAgICAgIF90aGlzLmluZm8uZm9udFRleHR1cmVOYW1lID0gZm9udFRleE5hbWU7XHJcbiAgICAgICAgX3RoaXMudGV4dCA9IHRleHQ7XHJcbiAgICAgICAgaWYgKGFyZ190cmFuc2Zvcm0pXHJcbiAgICAgICAgICAgIF90aGlzLnRyYW5zZm9ybSA9IGFyZ190cmFuc2Zvcm07XHJcbiAgICAgICAgX3RoaXMuaW5mby5iaWxsQm9hcmQgPSBpc0JpbGxCb2FyZDtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVGV4dERyYXdDb21wb25lbnQucHJvdG90eXBlLCBcIkxheWVyXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGF5ZXI7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgVGV4dERyYXdDb21wb25lbnQucHJvdG90eXBlLk9uU2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghdGhpcy50cmFuc2Zvcm0pIHtcclxuICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm0gPSB0aGlzLmdhbWVPYmplY3QudHJhbnNmb3JtO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1vZGVsID0gdGhpcy5nYW1lT2JqZWN0Lk1hbmFnZXIuU2NlbmUuR2V0U2NlbmVNYW5hZ2VyKCkuR2V0TW9kZWxDcmVhdGVyKCkuQ3JlYXRlTW9kZWxGcm9tVGV4dCh0aGlzLmluZm8uYmlsbEJvYXJkLCB0aGlzLmluZm8uY29sb3IsIHRoaXMudGV4dCwgdGhpcy5pbmZvLmZvbnRUZXh0dXJlTmFtZSwgdGhpcy5pbmZvLnNoYWRlck5hbWUsIHRoaXMudHJhbnNmb3JtKTtcclxuICAgICAgICB0aGlzLlJlZ2lzdERyYXcoKTtcclxuICAgIH07XHJcbiAgICBUZXh0RHJhd0NvbXBvbmVudC5wcm90b3R5cGUuU2V0VGV4dCA9IGZ1bmN0aW9uIChhcmdfdGV4dCkge1xyXG4gICAgICAgIHRoaXMudGV4dCA9IGFyZ190ZXh0O1xyXG4gICAgICAgIHRoaXMuVW5SZWdpc3REcmF3KCk7XHJcbiAgICAgICAgdGhpcy5tb2RlbCA9IHRoaXMuZ2FtZU9iamVjdC5NYW5hZ2VyLlNjZW5lLkdldFNjZW5lTWFuYWdlcigpLkdldE1vZGVsQ3JlYXRlcigpLkNyZWF0ZU1vZGVsRnJvbVRleHQodGhpcy5pbmZvLmJpbGxCb2FyZCwgdGhpcy5pbmZvLmNvbG9yLCB0aGlzLnRleHQsIHRoaXMuaW5mby5mb250VGV4dHVyZU5hbWUsIHRoaXMuaW5mby5zaGFkZXJOYW1lLCB0aGlzLnRyYW5zZm9ybSk7XHJcbiAgICAgICAgdGhpcy5SZWdpc3REcmF3KCk7XHJcbiAgICB9O1xyXG4gICAgVGV4dERyYXdDb21wb25lbnQucHJvdG90eXBlLlJlZ2lzdERyYXcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLm1vZGVsSUQpXHJcbiAgICAgICAgICAgIHRoaXMubW9kZWxJRCA9IHRoaXMuZ2FtZU9iamVjdC5HZXRSZW5kZXJlcigpLlJlZ2lzdCh0aGlzLm1vZGVsLCB0aGlzLmxheWVyKTtcclxuICAgIH07XHJcbiAgICBUZXh0RHJhd0NvbXBvbmVudC5wcm90b3R5cGUuVW5SZWdpc3REcmF3ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLm1vZGVsSUQpIHtcclxuICAgICAgICAgICAgdGhpcy5nYW1lT2JqZWN0LkdldFJlbmRlcmVyKCkuVW5SZWdpc3QodGhpcy5tb2RlbElELCB0aGlzLmxheWVyKTtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbElEID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgVGV4dERyYXdDb21wb25lbnQucHJvdG90eXBlLk9uUmVtb3ZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuVW5SZWdpc3REcmF3KCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFRleHREcmF3Q29tcG9uZW50O1xyXG59KENvbXBvbmVudF8xLmRlZmF1bHQpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gVGV4dERyYXdDb21wb25lbnQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBFYXNpbmdfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vVG9vbC9FYXNpbmdcIikpO1xyXG52YXIgQ29tcG9uZW50XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vQ29tcG9uZW50XCIpKTtcclxudmFyIFRyYW5zZm9ybUFuaW1hdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhUcmFuc2Zvcm1BbmltYXRpb24sIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBUcmFuc2Zvcm1BbmltYXRpb24oYXJnX3RpbWUsIGFyZ19pc0xvb3AsIGFyZ190YXJnZXRUcmFuc2Zvcm0sIGFyZ190cmFuc2Zvcm0sIGFyZ19lYXNpbmdGdW5jdGlvbiwgYXJnX2lzUmVtYWluKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5jdXJyZW50VGltZSA9IDA7XHJcbiAgICAgICAgX3RoaXMuZGlyZWN0aW9uID0gMTtcclxuICAgICAgICBfdGhpcy50aW1lID0gYXJnX3RpbWU7XHJcbiAgICAgICAgX3RoaXMubGluZXJQYXNlID0gMS4wIC8gYXJnX3RpbWU7XHJcbiAgICAgICAgX3RoaXMudGFyZ2V0VHJhbnNmb3JtID0gYXJnX3RhcmdldFRyYW5zZm9ybTtcclxuICAgICAgICBpZiAoYXJnX3RyYW5zZm9ybSkge1xyXG4gICAgICAgICAgICBfdGhpcy50cmFuc2Zvcm0gPSBhcmdfdHJhbnNmb3JtO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYXJnX2Vhc2luZ0Z1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmVhc2luZ0Z1bmN0aW9uID0gYXJnX2Vhc2luZ0Z1bmN0aW9uO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgX3RoaXMuZWFzaW5nRnVuY3Rpb24gPSBFYXNpbmdfMS5kZWZhdWx0LkVhc2VJbk91dEJhY2s7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhcmdfaXNMb29wKSB7XHJcbiAgICAgICAgICAgIF90aGlzLlRpbWVVcGRhdGUgPSBfdGhpcy5UaW1lVXBkYXRlX0xvb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoYXJnX2lzUmVtYWluKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5UaW1lVXBkYXRlID0gX3RoaXMuVGltZVVwZGF0ZV9Ob0xvb3BfTm9TdWNpZGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgX3RoaXMuVGltZVVwZGF0ZSA9IF90aGlzLlRpbWVVcGRhdGVfTm9Mb29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBUcmFuc2Zvcm1BbmltYXRpb24ucHJvdG90eXBlLk9uU2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghdGhpcy50cmFuc2Zvcm0pIHtcclxuICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm0gPSB0aGlzLmdhbWVPYmplY3QudHJhbnNmb3JtO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9mZnNldCA9IHRoaXMudGFyZ2V0VHJhbnNmb3JtLlBvc2l0aW9uLlN1Yih0aGlzLnRyYW5zZm9ybS5Mb2NhbFBvc2l0aW9uKTtcclxuICAgICAgICB0aGlzLnNjYWxlUGFzZSA9IHRoaXMudGFyZ2V0VHJhbnNmb3JtLlNjYWxlLlN1Yih0aGlzLnRyYW5zZm9ybS5TY2FsZSk7XHJcbiAgICAgICAgdGhpcy5pbml0UG9zaXRpb24gPSB0aGlzLnRyYW5zZm9ybS5Mb2NhbFBvc2l0aW9uO1xyXG4gICAgICAgIHRoaXMuaW5pdFNjYWxlID0gdGhpcy50cmFuc2Zvcm0uU2NhbGU7XHJcbiAgICAgICAgdGhpcy5yb3RhdGVRdWF0ID0gdGhpcy50cmFuc2Zvcm0uUm90YXRpb24uVG9RdWF0ZXJuaW9uKCk7XHJcbiAgICAgICAgdGhpcy50YXJnZXRSb3RhdGVRdWF0ID0gdGhpcy50YXJnZXRUcmFuc2Zvcm0uUm90YXRpb24uVG9RdWF0ZXJuaW9uKCk7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNmb3JtQW5pbWF0aW9uLnByb3RvdHlwZS5DaGFuZ2VUYXJnZXQgPSBmdW5jdGlvbiAoYXJnX3RhcmdldFRyYW5zZm9ybSkge1xyXG4gICAgICAgIHRoaXMudGFyZ2V0VHJhbnNmb3JtID0gYXJnX3RhcmdldFRyYW5zZm9ybTtcclxuICAgICAgICB0aGlzLm9mZnNldCA9IHRoaXMudGFyZ2V0VHJhbnNmb3JtLlBvc2l0aW9uLlN1Yih0aGlzLnRyYW5zZm9ybS5Mb2NhbFBvc2l0aW9uKTtcclxuICAgICAgICB0aGlzLnNjYWxlUGFzZSA9IHRoaXMudGFyZ2V0VHJhbnNmb3JtLlNjYWxlLlN1Yih0aGlzLnRyYW5zZm9ybS5TY2FsZSk7XHJcbiAgICAgICAgdGhpcy5pbml0UG9zaXRpb24gPSB0aGlzLnRyYW5zZm9ybS5Mb2NhbFBvc2l0aW9uO1xyXG4gICAgICAgIHRoaXMuaW5pdFNjYWxlID0gdGhpcy50cmFuc2Zvcm0uU2NhbGU7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50VGltZSA9IDA7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNmb3JtQW5pbWF0aW9uLnByb3RvdHlwZS5UaW1lVXBkYXRlX0xvb3AgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFRpbWUgPj0gdGhpcy50aW1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFRpbWUgPSB0aGlzLnRpbWU7XHJcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuY3VycmVudFRpbWUgPD0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRUaW1lID0gMDtcclxuICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmN1cnJlbnRUaW1lICs9IHRoaXMuZGlyZWN0aW9uO1xyXG4gICAgfTtcclxuICAgIFRyYW5zZm9ybUFuaW1hdGlvbi5wcm90b3R5cGUuVGltZVVwZGF0ZV9Ob0xvb3AgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFRpbWUgPj0gdGhpcy50aW1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFRpbWUgPSB0aGlzLnRpbWU7XHJcbiAgICAgICAgICAgIHRoaXMuUmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY3VycmVudFRpbWUgKz0gdGhpcy5kaXJlY3Rpb247XHJcbiAgICB9O1xyXG4gICAgVHJhbnNmb3JtQW5pbWF0aW9uLnByb3RvdHlwZS5UaW1lVXBkYXRlX05vTG9vcF9Ob1N1Y2lkZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50VGltZSA+PSB0aGlzLnRpbWUpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50VGltZSA9IHRoaXMudGltZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jdXJyZW50VGltZSArPSB0aGlzLmRpcmVjdGlvbjtcclxuICAgIH07XHJcbiAgICBUcmFuc2Zvcm1BbmltYXRpb24ucHJvdG90eXBlLlVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLlRpbWVVcGRhdGUoKTtcclxuICAgICAgICB2YXIgdCA9IHRoaXMuY3VycmVudFRpbWUgLyB0aGlzLnRpbWU7XHJcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0uUG9zaXRpb24gPSB0aGlzLmluaXRQb3NpdGlvbi5BZGQodGhpcy5vZmZzZXQuTXVsdGlwbHkodCkpO1xyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtLlNjYWxlID0gdGhpcy5pbml0U2NhbGUuQWRkKHRoaXMuc2NhbGVQYXNlLk11bHRpcGx5KHRoaXMuZWFzaW5nRnVuY3Rpb24odCkpKTtcclxuICAgICAgICAvL3RoaXMudHJhbnNmb3JtLlJvdGF0aW9uPSB0aGlzLnRyYW5zZm9ybS5Sb3RhdGlvblxyXG4gICAgICAgIC8vdGhpcy50cmFuc2Zvcm0uUm90YXRpb249dGhpcy5yb3RhdGVRdWF0LlNwaGVyZUxlcnAodGhpcy50YXJnZXRSb3RhdGVRdWF0LHQpLlRvTWF0cml4NHg0KCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFRyYW5zZm9ybUFuaW1hdGlvbjtcclxufShDb21wb25lbnRfMS5kZWZhdWx0KSk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IFRyYW5zZm9ybUFuaW1hdGlvbjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIENvbGxpc2lvbkNvbXBvbmVudF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9Db21wb25lbnQvQ29sbGlzaW9uQ29tcG9uZW50XCIpKTtcclxudmFyIENvbXBvbmVudF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9Db21wb25lbnQvQ29tcG9uZW50XCIpKTtcclxudmFyIE1vZGVsRHJhd0NvbXBvbmVudF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9Db21wb25lbnQvTW9kZWxEcmF3Q29tcG9uZW50XCIpKTtcclxudmFyIFZlY3RvcjNfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vTWF0aC9WZWN0b3IzXCIpKTtcclxudmFyIEdhbWVPYmplY3RJRE1hbmFnZXJfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vUGFydHMvR2FtZU9iamVjdElETWFuYWdlclwiKSk7XHJcbnZhciBQcmltaXRpdmVUeXBlO1xyXG4oZnVuY3Rpb24gKFByaW1pdGl2ZVR5cGUpIHtcclxuICAgIFByaW1pdGl2ZVR5cGVbUHJpbWl0aXZlVHlwZVtcInNwaGVyZVwiXSA9IDBdID0gXCJzcGhlcmVcIjtcclxuICAgIFByaW1pdGl2ZVR5cGVbUHJpbWl0aXZlVHlwZVtcImJveF9BQUJCXCJdID0gMV0gPSBcImJveF9BQUJCXCI7XHJcbiAgICBQcmltaXRpdmVUeXBlW1ByaW1pdGl2ZVR5cGVbXCJib3hfT0JCXCJdID0gMl0gPSBcImJveF9PQkJcIjtcclxuICAgIFByaW1pdGl2ZVR5cGVbUHJpbWl0aXZlVHlwZVtcInBvaW50XCJdID0gM10gPSBcInBvaW50XCI7XHJcbn0pKFByaW1pdGl2ZVR5cGUgfHwgKFByaW1pdGl2ZVR5cGUgPSB7fSkpO1xyXG52YXIgQ29pbkNvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhDb2luQ29tcG9uZW50LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQ29pbkNvbXBvbmVudChhcmdfc3RhZ2UpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmlzR2V0ID0gZmFsc2U7XHJcbiAgICAgICAgX3RoaXMuc3RhZ2UgPSBhcmdfc3RhZ2U7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgQ29pbkNvbXBvbmVudC5wcm90b3R5cGUuT25TZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5kcmF3Q29tcG9uZW50ID0gbmV3IE1vZGVsRHJhd0NvbXBvbmVudF8xLmRlZmF1bHQodHJ1ZSwgXCJzcGhlcmVcIiwgXCJ5ZWxsb3dcIiwgXCJwb2ludExpZ2h0XCIsIDEsIGZhbHNlKTtcclxuICAgICAgICB0aGlzLmdhbWVPYmplY3QuU2V0Q29tcG9uZW50KHRoaXMuZHJhd0NvbXBvbmVudCk7XHJcbiAgICAgICAgdGhpcy5nYW1lT2JqZWN0LlNldENvbXBvbmVudChuZXcgQ29sbGlzaW9uQ29tcG9uZW50XzEuZGVmYXVsdChQcmltaXRpdmVUeXBlLnNwaGVyZSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAuMywgMC4zLCAwLjMpLCAwKSk7XHJcbiAgICB9O1xyXG4gICAgQ29pbkNvbXBvbmVudC5wcm90b3R5cGUuVXBkYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZ2FtZU9iamVjdC50cmFuc2Zvcm0uUm9sbFlfTG9jYWxfRGVncmVlcygyKTtcclxuICAgIH07XHJcbiAgICBDb2luQ29tcG9uZW50LnByb3RvdHlwZS5PbkNvbGxpc2lvbiA9IGZ1bmN0aW9uIChhcmdfZ2FtZU9iamVjdCkge1xyXG4gICAgICAgIGlmIChhcmdfZ2FtZU9iamVjdC5vYmplY3RJRCAhPSBHYW1lT2JqZWN0SURNYW5hZ2VyXzEuZGVmYXVsdC5HZXRJRChcInBsYXllclwiKSB8fCB0aGlzLmlzR2V0KSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zdGFnZS5HZXRDb2luKCk7XHJcbiAgICAgICAgdGhpcy5nYW1lT2JqZWN0LkRlYWQoKTtcclxuICAgICAgICB0aGlzLmlzR2V0ID0gdHJ1ZTtcclxuICAgIH07XHJcbiAgICBDb2luQ29tcG9uZW50LnByb3RvdHlwZS5SZVNldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmRyYXdDb21wb25lbnQuUmVnaXN0RHJhdygpO1xyXG4gICAgICAgIHRoaXMuaXNHZXQgPSBmYWxzZTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQ29pbkNvbXBvbmVudDtcclxufShDb21wb25lbnRfMS5kZWZhdWx0KSk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IENvaW5Db21wb25lbnQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBDb21wb25lbnRfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vQ29tcG9uZW50L0NvbXBvbmVudFwiKSk7XHJcbnZhciBNb2RlbERyYXdDb21wb25lbnRfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vQ29tcG9uZW50L01vZGVsRHJhd0NvbXBvbmVudFwiKSk7XHJcbnZhciBUZXh0RHJhd0NvbXBvbmVudF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9Db21wb25lbnQvVGV4dERyYXdDb21wb25lbnRcIikpO1xyXG52YXIgVHJhbnNmb3JtQW5pbWF0aW9uXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL0NvbXBvbmVudC9UcmFuc2Zvcm1BbmltYXRpb25cIikpO1xyXG52YXIgVmVjdG9yM18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9NYXRoL1ZlY3RvcjNcIikpO1xyXG52YXIgVmVjdG9yNF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9NYXRoL1ZlY3RvcjRcIikpO1xyXG52YXIgRWFzaW5nXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL1Rvb2wvRWFzaW5nXCIpKTtcclxudmFyIFRyYW5zZm9ybV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9UcmFuc2Zvcm1cIikpO1xyXG52YXIgbWFza0xpbmVyRnJhbWUgPSAzMDtcclxudmFyIG1hc2tMaW5lckZyYW1lTWF4ID0gNjA7XHJcbnZhciBDcm9zc3lVSSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhDcm9zc3lVSSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIENyb3NzeVVJKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMubWFza0RpciA9IC0xLjA7XHJcbiAgICAgICAgX3RoaXMubWFza1BlciA9IDA7XHJcbiAgICAgICAgX3RoaXMuaXNNYXNrID0gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgQ3Jvc3N5VUkucHJvdG90eXBlLk9uU2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjb21ib0JhckJhc2VUcmFuc2Zvcm0gPSBuZXcgVHJhbnNmb3JtXzEuZGVmYXVsdChuZXcgVmVjdG9yM18xLmRlZmF1bHQoNDAwLCAwLCAtMSksIG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLCAwKSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDEsIDEuMCwgMSkpO1xyXG4gICAgICAgIHZhciBjb21ib0JhclRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm1fMS5kZWZhdWx0KG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAyMDAsIDApLCBuZXcgVmVjdG9yM18xLmRlZmF1bHQoMCwgMCwgMCksIG5ldyBWZWN0b3IzXzEuZGVmYXVsdCg1MCwgMzAwLCAxKSk7XHJcbiAgICAgICAgY29tYm9CYXJUcmFuc2Zvcm0uQmFzZVRyYW5zZm9ybSA9IGNvbWJvQmFyQmFzZVRyYW5zZm9ybTtcclxuICAgICAgICB0aGlzLmZldmVyQmFyRHJhd0NvbXBvbmVudCA9IG5ldyBNb2RlbERyYXdDb21wb25lbnRfMS5kZWZhdWx0KGZhbHNlLCBcInV2Tm9ybWFsQmFyXCIsIFwieWVsbG93XCIsIFwicmFpbmJvd1wiLCAyLCBmYWxzZSwgbnVsbCwgY29tYm9CYXJUcmFuc2Zvcm0pO1xyXG4gICAgICAgIHRoaXMuY29tYm9CYXJEcmF3Q29tcG9uZW50ID0gbmV3IE1vZGVsRHJhd0NvbXBvbmVudF8xLmRlZmF1bHQoZmFsc2UsIFwidXZOb3JtYWxCYXJcIiwgXCJ5ZWxsb3dcIiwgXCJvbmx5TWF0ZXJpYWxcIiwgMiwgZmFsc2UsIG51bGwsIGNvbWJvQmFyVHJhbnNmb3JtKTtcclxuICAgICAgICB0aGlzLmdhbWVPYmplY3QuU2V0Q29tcG9uZW50KHRoaXMuY29tYm9CYXJEcmF3Q29tcG9uZW50KTtcclxuICAgICAgICB0aGlzLmdhbWVPYmplY3QuU2V0Q29tcG9uZW50KHRoaXMuZmV2ZXJCYXJEcmF3Q29tcG9uZW50KTtcclxuICAgICAgICB0aGlzLmFjdGl2ZUJhckRyYXdDb21wb25lbnQgPSB0aGlzLmNvbWJvQmFyRHJhd0NvbXBvbmVudDtcclxuICAgICAgICB2YXIgYXJyaXZhbFRyYW5zID0gbmV3IFRyYW5zZm9ybV8xLmRlZmF1bHQobmV3IFZlY3RvcjNfMS5kZWZhdWx0KC00MDAsIC00MDAsIC0xKSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAsIDAsIDApLCBuZXcgVmVjdG9yM18xLmRlZmF1bHQoNTAsIDUwLCA1MCkpO1xyXG4gICAgICAgIHRoaXMuYXJyaXZhbFRleHQgPSBuZXcgVGV4dERyYXdDb21wb25lbnRfMS5kZWZhdWx0KFwiMFwiLCBcImZvbnRcIiwgXCJmb250U2hhZGVyXCIsIG5ldyBWZWN0b3I0XzEuZGVmYXVsdCgwLjksIDAuOSwgMC4yNSwgMSksIDIsIGZhbHNlLCBhcnJpdmFsVHJhbnMpO1xyXG4gICAgICAgIHRoaXMuZ2FtZU9iamVjdC5TZXRDb21wb25lbnQodGhpcy5hcnJpdmFsVGV4dCk7XHJcbiAgICAgICAgdmFyIHJldHJ5VHJhbnMgPSBuZXcgVHJhbnNmb3JtXzEuZGVmYXVsdChuZXcgVmVjdG9yM18xLmRlZmF1bHQoMCwgMzAwLCAtMSksIG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLCAwKSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDQwLCA0MCwgNDApKTtcclxuICAgICAgICB0aGlzLnJldHJ5ID0gbmV3IFRleHREcmF3Q29tcG9uZW50XzEuZGVmYXVsdChcIlByZXNzIGFueSBLZXlcIiwgXCJmb250XCIsIFwiZm9udFNoYWRlclwiLCBuZXcgVmVjdG9yNF8xLmRlZmF1bHQoMC4xLCAwLjEsIDAuMSwgMSksIDIsIGZhbHNlLCByZXRyeVRyYW5zKTtcclxuICAgICAgICB0aGlzLnJldHJ5VHJhbnNmb3JtX0hpZGUgPSBuZXcgVHJhbnNmb3JtXzEuZGVmYXVsdChuZXcgVmVjdG9yM18xLmRlZmF1bHQoMCwgMzAwLCAtMSksIG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLCAwKSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDQwLCA0MCwgNDApKTtcclxuICAgICAgICB0aGlzLnJldHJ5VHJhbnNmb3JtX1Nob3cgPSBuZXcgVHJhbnNmb3JtXzEuZGVmYXVsdChuZXcgVmVjdG9yM18xLmRlZmF1bHQoMCwgMjAwLCAtMSksIG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLCAwKSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDQwLCA0MCwgNDApKTtcclxuICAgICAgICB0aGlzLnJldHJ5QW5pbSA9IG5ldyBUcmFuc2Zvcm1BbmltYXRpb25fMS5kZWZhdWx0KDQwLCBmYWxzZSwgdGhpcy5yZXRyeVRyYW5zZm9ybV9IaWRlLCByZXRyeVRyYW5zLCBFYXNpbmdfMS5kZWZhdWx0LkVhc2VJbk91dFF1aW50LCB0cnVlKTtcclxuICAgICAgICB0aGlzLm1hc2tDb2xvciA9IG5ldyBWZWN0b3I0XzEuZGVmYXVsdCgwLjUsIDAuNSwgMS4wLCAwLjApO1xyXG4gICAgICAgIHRoaXMubWFzayA9IG5ldyBNb2RlbERyYXdDb21wb25lbnRfMS5kZWZhdWx0KGZhbHNlLCBcInBsYW5lX3Bvc2l0aW9uXCIsIFwicmVkXCIsIFwic2ltcGxlQ29sb3JcIiwgMiwgZmFsc2UsIG51bGwsIG5ldyBUcmFuc2Zvcm1fMS5kZWZhdWx0KG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLCAtMC44KSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAsIDAsIDApLCBuZXcgVmVjdG9yM18xLmRlZmF1bHQoNjAwLCA2MDAsIDYwMCkpKTtcclxuICAgICAgICB0aGlzLmdhbWVPYmplY3QuTWFuYWdlci5BZGRHYW1lT2JqZWN0KFwibWFza1wiLCBuZXcgVHJhbnNmb3JtXzEuZGVmYXVsdCgpLCBcIm1hc2tcIiwgW3RoaXMubWFza10pO1xyXG4gICAgICAgIHRoaXMubWFzay5VblJlZ2lzdERyYXcoKTtcclxuICAgICAgICB0aGlzLm1hc2subW9kZWwuQWRkRXhQYXJhbSg0LCA0LCB0aGlzLm1hc2tDb2xvcik7XHJcbiAgICAgICAgdGhpcy5nYW1lT2JqZWN0LlNldENvbXBvbmVudCh0aGlzLnJldHJ5KTtcclxuICAgICAgICB0aGlzLmdhbWVPYmplY3QuU2V0Q29tcG9uZW50KHRoaXMucmV0cnlBbmltKTtcclxuICAgICAgICB0aGlzLnJldHJ5LlVuUmVnaXN0RHJhdygpO1xyXG4gICAgICAgIHRoaXMubG9nbyA9IG5ldyBNb2RlbERyYXdDb21wb25lbnRfMS5kZWZhdWx0KGZhbHNlLCBcInBsYW5lXCIsIFwibG9nb01hdGVyaWFsXCIsIFwidGV4U2hhZGVyXCIsIDIsIGZhbHNlLCBudWxsLCBuZXcgVHJhbnNmb3JtXzEuZGVmYXVsdChuZXcgVmVjdG9yM18xLmRlZmF1bHQoLTExMTAsIDAsIC0wLjUpLCBuZXcgVmVjdG9yM18xLmRlZmF1bHQoMCwgMCwgMTgwKSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDYwMCwgNjAwLCA2MDApKSk7XHJcbiAgICAgICAgdGhpcy5nYW1lT2JqZWN0LlNldENvbXBvbmVudCh0aGlzLmxvZ28pO1xyXG4gICAgICAgIHRoaXMubG9nb1RyYW5zZm9ybV9TaG93ID0gbmV3IFRyYW5zZm9ybV8xLmRlZmF1bHQobmV3IFZlY3RvcjNfMS5kZWZhdWx0KC0yMCwgLTEwMCwgLTAuNSksIG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLCAxODApLCBuZXcgVmVjdG9yM18xLmRlZmF1bHQoNjAwLCA2MDAsIDYwMCkpO1xyXG4gICAgICAgIHRoaXMubG9nb1RyYW5zZm9ybV9IaWRlID0gbmV3IFRyYW5zZm9ybV8xLmRlZmF1bHQobmV3IFZlY3RvcjNfMS5kZWZhdWx0KDExMDAsIC0xMDAsIC0wLjUpLCBuZXcgVmVjdG9yM18xLmRlZmF1bHQoMCwgMCwgMTgwKSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDYwMCwgNjAwLCA2MDApKTtcclxuICAgIH07XHJcbiAgICBDcm9zc3lVSS5wcm90b3R5cGUuVXBkYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzTWFzaykge1xyXG4gICAgICAgICAgICB0aGlzLm1hc2tQZXIgKz0gdGhpcy5tYXNrRGlyO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5tYXNrUGVyID4gbWFza0xpbmVyRnJhbWVNYXgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubWFza1BlciA9IG1hc2tMaW5lckZyYW1lTWF4O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXNrRGlyID0gLTE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMubWFza1BlciA8IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubWFza1BlciA9IDA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzTWFzayA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXNrLlVuUmVnaXN0RHJhdygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubWFza0NvbG9yLmRhdGFbM10gPSB0aGlzLm1hc2tQZXIgLyBtYXNrTGluZXJGcmFtZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQ3Jvc3N5VUkucHJvdG90eXBlLlNldENvaW5OdW0gPSBmdW5jdGlvbiAoYXJnX2NvaW4pIHtcclxuICAgICAgICAvL3RoaXMuY29tYm9CYXJEcmF3Q29tcG9uZW50LlNldFRleHQoYXJnX2NvaW4rXCJcIik7XHJcbiAgICB9O1xyXG4gICAgQ3Jvc3N5VUkucHJvdG90eXBlLlNldEFycml2YWwgPSBmdW5jdGlvbiAoYXJnX2Fycml2YWwpIHtcclxuICAgICAgICB0aGlzLmFycml2YWxUZXh0LlNldFRleHQoYXJnX2Fycml2YWwgKyBcIlwiKTtcclxuICAgIH07XHJcbiAgICBDcm9zc3lVSS5wcm90b3R5cGUuU2V0Q29tYm9NYXRlciA9IGZ1bmN0aW9uIChhcmdfcGVyc2VudGFnZSkge1xyXG4gICAgICAgIHRoaXMuYWN0aXZlQmFyRHJhd0NvbXBvbmVudC50cmFuc2Zvcm0uU2V0U2NhbGVZKGFyZ19wZXJzZW50YWdlICogMzAwKTtcclxuICAgIH07XHJcbiAgICBDcm9zc3lVSS5wcm90b3R5cGUuRmV2ZXJTdGFydCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmFjdGl2ZUJhckRyYXdDb21wb25lbnQgPSB0aGlzLmZldmVyQmFyRHJhd0NvbXBvbmVudDtcclxuICAgICAgICB0aGlzLmNvbWJvQmFyRHJhd0NvbXBvbmVudC5VblJlZ2lzdERyYXcoKTtcclxuICAgICAgICB0aGlzLmZldmVyQmFyRHJhd0NvbXBvbmVudC5SZWdpc3REcmF3KCk7XHJcbiAgICB9O1xyXG4gICAgQ3Jvc3N5VUkucHJvdG90eXBlLkZldmVyRW5kID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuYWN0aXZlQmFyRHJhd0NvbXBvbmVudCA9IHRoaXMuY29tYm9CYXJEcmF3Q29tcG9uZW50O1xyXG4gICAgICAgIHRoaXMuY29tYm9CYXJEcmF3Q29tcG9uZW50LlJlZ2lzdERyYXcoKTtcclxuICAgICAgICB0aGlzLmZldmVyQmFyRHJhd0NvbXBvbmVudC5VblJlZ2lzdERyYXcoKTtcclxuICAgIH07XHJcbiAgICBDcm9zc3lVSS5wcm90b3R5cGUuU2hvd1JldHJ5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMucmV0cnlBbmltLkNoYW5nZVRhcmdldCh0aGlzLnJldHJ5VHJhbnNmb3JtX1Nob3cpO1xyXG4gICAgICAgIHRoaXMucmV0cnkuUmVnaXN0RHJhdygpO1xyXG4gICAgfTtcclxuICAgIENyb3NzeVVJLnByb3RvdHlwZS5IaWRlUmV0cnkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5yZXRyeUFuaW0uQ2hhbmdlVGFyZ2V0KHRoaXMucmV0cnlUcmFuc2Zvcm1fSGlkZSk7XHJcbiAgICAgICAgdGhpcy5yZXRyeS5VblJlZ2lzdERyYXcoKTtcclxuICAgIH07XHJcbiAgICBDcm9zc3lVSS5wcm90b3R5cGUuSGlkZUluID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBsb2dvQW5pbSA9IG5ldyBUcmFuc2Zvcm1BbmltYXRpb25fMS5kZWZhdWx0KDMwLCBmYWxzZSwgdGhpcy5sb2dvVHJhbnNmb3JtX1Nob3csIHRoaXMubG9nby50cmFuc2Zvcm0pO1xyXG4gICAgICAgIHRoaXMuZ2FtZU9iamVjdC5TZXRDb21wb25lbnQobG9nb0FuaW0pO1xyXG4gICAgfTtcclxuICAgIENyb3NzeVVJLnByb3RvdHlwZS5IaWRlT3V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBsb2dvQW5pbSA9IG5ldyBUcmFuc2Zvcm1BbmltYXRpb25fMS5kZWZhdWx0KDMwLCBmYWxzZSwgdGhpcy5sb2dvVHJhbnNmb3JtX0hpZGUsIHRoaXMubG9nby50cmFuc2Zvcm0pO1xyXG4gICAgICAgIHRoaXMuZ2FtZU9iamVjdC5TZXRDb21wb25lbnQobG9nb0FuaW0pO1xyXG4gICAgfTtcclxuICAgIENyb3NzeVVJLnByb3RvdHlwZS5NYXNrSW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5tYXNrRGlyID0gMS4wO1xyXG4gICAgICAgIHRoaXMuaXNNYXNrID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLm1hc2suUmVnaXN0RHJhdygpO1xyXG4gICAgICAgIHRoaXMubG9nby5VblJlZ2lzdERyYXcoKTtcclxuICAgICAgICB0aGlzLmxvZ28uUmVnaXN0RHJhdygpO1xyXG4gICAgfTtcclxuICAgIENyb3NzeVVJLnByb3RvdHlwZS5SZXNldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmxvZ28udHJhbnNmb3JtLlBvc2l0aW9uID0gbmV3IFZlY3RvcjNfMS5kZWZhdWx0KC0xMTEwLCAtMTAwLCAtMC41KTtcclxuICAgICAgICB0aGlzLm1hc2tDb2xvci5kYXRhWzNdID0gMDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQ3Jvc3N5VUk7XHJcbn0oQ29tcG9uZW50XzEuZGVmYXVsdCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBDcm9zc3lVSTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIENvbXBvbmVudF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9Db21wb25lbnQvQ29tcG9uZW50XCIpKTtcclxudmFyIENvbGxpc2lvbkNvbXBvbmVudF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9Db21wb25lbnQvQ29sbGlzaW9uQ29tcG9uZW50XCIpKTtcclxudmFyIEdhbWVPYmplY3RJRE1hbmFnZXJfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vUGFydHMvR2FtZU9iamVjdElETWFuYWdlclwiKSk7XHJcbnZhciBQcmltaXRpdmVUeXBlO1xyXG4oZnVuY3Rpb24gKFByaW1pdGl2ZVR5cGUpIHtcclxuICAgIFByaW1pdGl2ZVR5cGVbUHJpbWl0aXZlVHlwZVtcInNwaGVyZVwiXSA9IDBdID0gXCJzcGhlcmVcIjtcclxuICAgIFByaW1pdGl2ZVR5cGVbUHJpbWl0aXZlVHlwZVtcImJveF9BQUJCXCJdID0gMV0gPSBcImJveF9BQUJCXCI7XHJcbiAgICBQcmltaXRpdmVUeXBlW1ByaW1pdGl2ZVR5cGVbXCJib3hfT0JCXCJdID0gMl0gPSBcImJveF9PQkJcIjtcclxuICAgIFByaW1pdGl2ZVR5cGVbUHJpbWl0aXZlVHlwZVtcInBvaW50XCJdID0gM10gPSBcInBvaW50XCI7XHJcbn0pKFByaW1pdGl2ZVR5cGUgfHwgKFByaW1pdGl2ZVR5cGUgPSB7fSkpO1xyXG52YXIgRGFtYWdlT2JzdGFjbGVDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoRGFtYWdlT2JzdGFjbGVDb21wb25lbnQsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBEYW1hZ2VPYnN0YWNsZUNvbXBvbmVudChhcmdfc3RhZ2UsIGFyZ19zaXplKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5zdGFnZSA9IGFyZ19zdGFnZTtcclxuICAgICAgICBfdGhpcy5zaXplID0gYXJnX3NpemU7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgRGFtYWdlT2JzdGFjbGVDb21wb25lbnQucHJvdG90eXBlLk9uU2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZ2FtZU9iamVjdC5vYmplY3RJRCA9IEdhbWVPYmplY3RJRE1hbmFnZXJfMS5kZWZhdWx0LkdldElEKFwiZGFtYWdlT2JzdGFjbGVcIik7XHJcbiAgICAgICAgdGhpcy5nYW1lT2JqZWN0LlNldENvbXBvbmVudChuZXcgQ29sbGlzaW9uQ29tcG9uZW50XzEuZGVmYXVsdChQcmltaXRpdmVUeXBlLmJveF9BQUJCLCB0aGlzLnNpemUsIDApKTtcclxuICAgIH07XHJcbiAgICBEYW1hZ2VPYnN0YWNsZUNvbXBvbmVudC5wcm90b3R5cGUuT25SZW1vdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB9O1xyXG4gICAgRGFtYWdlT2JzdGFjbGVDb21wb25lbnQucHJvdG90eXBlLlVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIH07XHJcbiAgICBEYW1hZ2VPYnN0YWNsZUNvbXBvbmVudC5wcm90b3R5cGUuT25Db2xsaXNpb24gPSBmdW5jdGlvbiAoYXJnX2dhbWVPYmplY3QpIHtcclxuICAgICAgICBpZiAoYXJnX2dhbWVPYmplY3Qub2JqZWN0SUQgIT0gR2FtZU9iamVjdElETWFuYWdlcl8xLmRlZmF1bHQuR2V0SUQoXCJwbGF5ZXJcIikpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gRGFtYWdlT2JzdGFjbGVDb21wb25lbnQ7XHJcbn0oQ29tcG9uZW50XzEuZGVmYXVsdCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBEYW1hZ2VPYnN0YWNsZUNvbXBvbmVudDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIENvbXBvbmVudF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9Db21wb25lbnQvQ29tcG9uZW50XCIpKTtcclxudmFyIENvbGxpc2lvbkNvbXBvbmVudF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9Db21wb25lbnQvQ29sbGlzaW9uQ29tcG9uZW50XCIpKTtcclxudmFyIEdhbWVPYmplY3RJRE1hbmFnZXJfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vUGFydHMvR2FtZU9iamVjdElETWFuYWdlclwiKSk7XHJcbnZhciBQcmltaXRpdmVUeXBlO1xyXG4oZnVuY3Rpb24gKFByaW1pdGl2ZVR5cGUpIHtcclxuICAgIFByaW1pdGl2ZVR5cGVbUHJpbWl0aXZlVHlwZVtcInNwaGVyZVwiXSA9IDBdID0gXCJzcGhlcmVcIjtcclxuICAgIFByaW1pdGl2ZVR5cGVbUHJpbWl0aXZlVHlwZVtcImJveF9BQUJCXCJdID0gMV0gPSBcImJveF9BQUJCXCI7XHJcbiAgICBQcmltaXRpdmVUeXBlW1ByaW1pdGl2ZVR5cGVbXCJib3hfT0JCXCJdID0gMl0gPSBcImJveF9PQkJcIjtcclxuICAgIFByaW1pdGl2ZVR5cGVbUHJpbWl0aXZlVHlwZVtcInBvaW50XCJdID0gM10gPSBcInBvaW50XCI7XHJcbn0pKFByaW1pdGl2ZVR5cGUgfHwgKFByaW1pdGl2ZVR5cGUgPSB7fSkpO1xyXG52YXIgT2JzdGFjbGVDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoT2JzdGFjbGVDb21wb25lbnQsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBPYnN0YWNsZUNvbXBvbmVudChhcmdfdHlwZSwgYXJnX3NpemUsIGFyZ19zdGFnZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMudHlwZSA9IGFyZ190eXBlO1xyXG4gICAgICAgIF90aGlzLnNpemUgPSBhcmdfc2l6ZTtcclxuICAgICAgICBfdGhpcy5zdGFnZSA9IGFyZ19zdGFnZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBPYnN0YWNsZUNvbXBvbmVudC5wcm90b3R5cGUuT25TZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lT2JqZWN0Lm9iamVjdElEID0gR2FtZU9iamVjdElETWFuYWdlcl8xLmRlZmF1bHQuR2V0SUQoXCJvYnN0YWNsZVwiKTtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMudHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIFByaW1pdGl2ZVR5cGUuc3BoZXJlOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5nYW1lT2JqZWN0LlNldENvbXBvbmVudChuZXcgQ29sbGlzaW9uQ29tcG9uZW50XzEuZGVmYXVsdChQcmltaXRpdmVUeXBlLnNwaGVyZSwgdGhpcy5zaXplLCAwKSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBQcmltaXRpdmVUeXBlLnBvaW50OlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgUHJpbWl0aXZlVHlwZS5ib3hfQUFCQjpcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZU9iamVjdC5TZXRDb21wb25lbnQobmV3IENvbGxpc2lvbkNvbXBvbmVudF8xLmRlZmF1bHQoUHJpbWl0aXZlVHlwZS5ib3hfQUFCQiwgdGhpcy5zaXplLCAwKSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBQcmltaXRpdmVUeXBlLmJveF9PQkI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdhbWVPYmplY3QuU2V0Q29tcG9uZW50KG5ldyBDb2xsaXNpb25Db21wb25lbnRfMS5kZWZhdWx0KFByaW1pdGl2ZVR5cGUuYm94X09CQiwgdGhpcy5zaXplLCAwKSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgT2JzdGFjbGVDb21wb25lbnQucHJvdG90eXBlLk9uUmVtb3ZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgfTtcclxuICAgIE9ic3RhY2xlQ29tcG9uZW50LnByb3RvdHlwZS5VcGRhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB9O1xyXG4gICAgT2JzdGFjbGVDb21wb25lbnQucHJvdG90eXBlLk9uQ29sbGlzaW9uID0gZnVuY3Rpb24gKGFyZ19nYW1lT2JqZWN0KSB7XHJcbiAgICAgICAgaWYgKGFyZ19nYW1lT2JqZWN0Lm9iamVjdElEICE9IEdhbWVPYmplY3RJRE1hbmFnZXJfMS5kZWZhdWx0LkdldElEKFwicGxheWVyXCIpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE9ic3RhY2xlQ29tcG9uZW50O1xyXG59KENvbXBvbmVudF8xLmRlZmF1bHQpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gT2JzdGFjbGVDb21wb25lbnQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBWZWN0b3IzXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL01hdGgvVmVjdG9yM1wiKSk7XHJcbnZhciBHYW1lT2JqZWN0SURNYW5hZ2VyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL1BhcnRzL0dhbWVPYmplY3RJRE1hbmFnZXJcIikpO1xyXG52YXIgSW5wdXRfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vVG9vbC9JbnB1dFwiKSk7XHJcbnZhciBUcmFuc2Zvcm1fMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vVHJhbnNmb3JtXCIpKTtcclxudmFyIENvbXBvbmVudF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9Db21wb25lbnQvQ29tcG9uZW50XCIpKTtcclxudmFyIE1vZGVsRHJhd0NvbXBvbmVudF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9Db21wb25lbnQvTW9kZWxEcmF3Q29tcG9uZW50XCIpKTtcclxudmFyIFRyYW5zZm9ybUFuaW1hdGlvbl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9Db21wb25lbnQvVHJhbnNmb3JtQW5pbWF0aW9uXCIpKTtcclxudmFyIFBvcHBpbmdBbmltYXRpb25fMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vQ29tcG9uZW50L1BvcHBpbmdBbmltYXRpb25cIikpO1xyXG52YXIgU2Vuc29yXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vU2Vuc29yXCIpKTtcclxudmFyIEVhc2luZ18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9Ub29sL0Vhc2luZ1wiKSk7XHJcbnZhciBQbGF5ZXJDb21wb25lbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoUGxheWVyQ29tcG9uZW50LCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gUGxheWVyQ29tcG9uZW50KGFyZ19tb3ZlUGFzZSwgYXJnX3N0YWdlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5kaXJlY3Rpb24gPSAxO1xyXG4gICAgICAgIF90aGlzLmlzTW92ZSA9IGZhbHNlO1xyXG4gICAgICAgIF90aGlzLmtleWJvYXJkRXZlbnQgPSBudWxsO1xyXG4gICAgICAgIF90aGlzLmNhbkNvbnRyb2xsID0gdHJ1ZTtcclxuICAgICAgICBfdGhpcy5pc0ludmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIF90aGlzLmlzZmFpbGVkID0gZmFsc2U7XHJcbiAgICAgICAgX3RoaXMubW92ZVBhc2UgPSBhcmdfbW92ZVBhc2U7XHJcbiAgICAgICAgX3RoaXMuaXNQdXNoID0gZmFsc2U7XHJcbiAgICAgICAgX3RoaXMuc3RhZ2UgPSBhcmdfc3RhZ2U7XHJcbiAgICAgICAgX3RoaXMuYXJ5X3NlbnNvciA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFBsYXllckNvbXBvbmVudC5wcm90b3R5cGUuT25TZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnN0YXJ0WSA9IHRoaXMuZ2FtZU9iamVjdC50cmFuc2Zvcm0uUG9zaXRpb24ueTtcclxuICAgICAgICB0aGlzLmRlYWRTZSA9IHRoaXMuZ2FtZU9iamVjdC5NYW5hZ2VyLlNjZW5lLkdldFNjZW5lTWFuYWdlcigpLkdldFJlc291cmNlQ29udGFpbmVyKCkuR2V0U291bmQoXCJraWxsXCIpO1xyXG4gICAgICAgIHRoaXMudXBTZSA9IHRoaXMuZ2FtZU9iamVjdC5NYW5hZ2VyLlNjZW5lLkdldFNjZW5lTWFuYWdlcigpLkdldFJlc291cmNlQ29udGFpbmVyKCkuR2V0U291bmQoXCJ1cFwiKTtcclxuICAgICAgICB0aGlzLnBvcHBpbmdDb21wb25lbnQgPSBuZXcgUG9wcGluZ0FuaW1hdGlvbl8xLmRlZmF1bHQodGhpcywgdGhpcy5tb3ZlUGFzZSwgZmFsc2UpO1xyXG4gICAgICAgIHRoaXMubW9kZWxUcmFuc2Zvcm0gPSBuZXcgVHJhbnNmb3JtXzEuZGVmYXVsdChuZXcgVmVjdG9yM18xLmRlZmF1bHQoMCwgMCwgMCksIG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLCAwKSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAuMiwgMC4yLCAwLjE1KSk7XHJcbiAgICAgICAgdGhpcy5tb2RlbFRyYW5zZm9ybS5CYXNlVHJhbnNmb3JtID0gdGhpcy5nYW1lT2JqZWN0LnRyYW5zZm9ybTtcclxuICAgICAgICB0aGlzLmdhbWVPYmplY3QuU2V0Q29tcG9uZW50KHRoaXMucG9wcGluZ0NvbXBvbmVudCk7XHJcbiAgICAgICAgdGhpcy5nYW1lT2JqZWN0LlNldENvbXBvbmVudChuZXcgTW9kZWxEcmF3Q29tcG9uZW50XzEuZGVmYXVsdCh0cnVlLCBcImN1YmVcIiwgXCJjYWxvcnlNYXRlcmlhbFwiLCBcInRleFNoYWRlcl9saWdodFwiLCAxLCBmYWxzZSwgXCJtYWd1cm9cIiwgdGhpcy5tb2RlbFRyYW5zZm9ybSkpO1xyXG4gICAgICAgIHZhciBlZmZlY3RUcmFuc2Zvcm0gPSBuZXcgVHJhbnNmb3JtXzEuZGVmYXVsdChuZXcgVmVjdG9yM18xLmRlZmF1bHQoMCwgMCwgMCksIG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLCAwKSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAsIDAsIDApKTtcclxuICAgICAgICBlZmZlY3RUcmFuc2Zvcm0uQmFzZVRyYW5zZm9ybSA9IHRoaXMuZ2FtZU9iamVjdC50cmFuc2Zvcm07XHJcbiAgICAgICAgdGhpcy5pbnZpc2libGVFZmZlY3QgPSBuZXcgTW9kZWxEcmF3Q29tcG9uZW50XzEuZGVmYXVsdChmYWxzZSwgXCJlZmZlY3RTcGhlcmVcIiwgXCJ5ZWxsb3dcIiwgXCJyYWluYm93QWxwaGFcIiwgMSwgZmFsc2UsIG51bGwsIGVmZmVjdFRyYW5zZm9ybSk7XHJcbiAgICAgICAgdGhpcy5nYW1lT2JqZWN0LlNldENvbXBvbmVudCh0aGlzLmludmlzaWJsZUVmZmVjdCk7XHJcbiAgICAgICAgdGhpcy5pbnZpc2libGVFZmZlY3QuVW5SZWdpc3REcmF3KCk7XHJcbiAgICAgICAgdGhpcy5taW5pbXVtVHJhbnNmb3JtID0gbmV3IFRyYW5zZm9ybV8xLmRlZmF1bHQobmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAsIDAuMSwgMCksIG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLCAwKSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAuMywgMC4xNiwgMC4xOCkpO1xyXG4gICAgICAgIHRoaXMubWF4aW11bVRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm1fMS5kZWZhdWx0KG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAtMC4xLCAwKSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAsIDAsIDApLCBuZXcgVmVjdG9yM18xLmRlZmF1bHQoMC4yLCAwLjIsIDAuMTUpKTtcclxuICAgICAgICB0aGlzLnNjYWxlQ29tcG9uZW50ID0gbmV3IFRyYW5zZm9ybUFuaW1hdGlvbl8xLmRlZmF1bHQoMzAsIHRydWUsIHRoaXMubWluaW11bVRyYW5zZm9ybSwgdGhpcy5tb2RlbFRyYW5zZm9ybSwgRWFzaW5nXzEuZGVmYXVsdC5FYXNlSW5PdXRDaXJjKTtcclxuICAgICAgICB0aGlzLmdhbWVPYmplY3QuU2V0Q29tcG9uZW50KHRoaXMuc2NhbGVDb21wb25lbnQpO1xyXG4gICAgICAgIHRoaXMuYXJ5X3RhcmdldHMgPSBuZXcgQXJyYXkoNCk7XHJcbiAgICAgICAgdGhpcy5hcnlfdGFyZ2V0c1swXSA9IG5ldyBUcmFuc2Zvcm1fMS5kZWZhdWx0KHRoaXMuZ2FtZU9iamVjdC50cmFuc2Zvcm0uUG9zaXRpb24uQWRkX2IobmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAsIDAsIC0xKSkpO1xyXG4gICAgICAgIHRoaXMuYXJ5X3RhcmdldHNbMV0gPSBuZXcgVHJhbnNmb3JtXzEuZGVmYXVsdCh0aGlzLmdhbWVPYmplY3QudHJhbnNmb3JtLlBvc2l0aW9uLkFkZF9iKG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLCAxKSksIG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAxODAsIDApKTtcclxuICAgICAgICB0aGlzLmFyeV90YXJnZXRzWzJdID0gbmV3IFRyYW5zZm9ybV8xLmRlZmF1bHQodGhpcy5nYW1lT2JqZWN0LnRyYW5zZm9ybS5Qb3NpdGlvbi5BZGRfYihuZXcgVmVjdG9yM18xLmRlZmF1bHQoMSwgMCwgMCkpLCBuZXcgVmVjdG9yM18xLmRlZmF1bHQoMCwgLTkwLCAwKSk7XHJcbiAgICAgICAgdGhpcy5hcnlfdGFyZ2V0c1szXSA9IG5ldyBUcmFuc2Zvcm1fMS5kZWZhdWx0KHRoaXMuZ2FtZU9iamVjdC50cmFuc2Zvcm0uUG9zaXRpb24uQWRkX2IobmV3IFZlY3RvcjNfMS5kZWZhdWx0KC0xLCAwLCAwKSksIG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCA5MCwgMCkpO1xyXG4gICAgICAgIHRoaXMuYXJ5X3RhcmdldHMuZm9yRWFjaChmdW5jdGlvbiAodGFyZ2V0KSB7IHJldHVybiB0YXJnZXQuQmFzZVRyYW5zZm9ybSA9IF90aGlzLnN0YWdlLmdhbWVPYmplY3QudHJhbnNmb3JtOyB9KTtcclxuICAgICAgICB0aGlzLmFyeV9zZW5zb3JbMF0gPSBuZXcgU2Vuc29yXzEuZGVmYXVsdCh0aGlzLmdhbWVPYmplY3QsIG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLCAtMSkpO1xyXG4gICAgICAgIHRoaXMuYXJ5X3NlbnNvclsxXSA9IG5ldyBTZW5zb3JfMS5kZWZhdWx0KHRoaXMuZ2FtZU9iamVjdCwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAsIDAsIDEpKTtcclxuICAgICAgICB0aGlzLmFyeV9zZW5zb3JbMl0gPSBuZXcgU2Vuc29yXzEuZGVmYXVsdCh0aGlzLmdhbWVPYmplY3QsIG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgxLCAwLCAwKSk7XHJcbiAgICAgICAgdGhpcy5hcnlfc2Vuc29yWzNdID0gbmV3IFNlbnNvcl8xLmRlZmF1bHQodGhpcy5nYW1lT2JqZWN0LCBuZXcgVmVjdG9yM18xLmRlZmF1bHQoLTEsIDAsIDApKTtcclxuICAgICAgICB0aGlzLmFyeV9zZW5zb3IuZm9yRWFjaChmdW5jdGlvbiAoc2Vuc29yKSB7IHZhciBvYmogPSBfdGhpcy5nYW1lT2JqZWN0Lk1hbmFnZXIuQWRkR2FtZU9iamVjdChcInNlbnNvclwiLCBuZXcgVHJhbnNmb3JtXzEuZGVmYXVsdCgpLCBudWxsLCBbc2Vuc29yXSk7IG9iai50cmFuc2Zvcm0uQmFzZVRyYW5zZm9ybSA9IF90aGlzLnN0YWdlLmdhbWVPYmplY3QudHJhbnNmb3JtOyB9KTtcclxuICAgICAgICB0aGlzLmdhbWVPYmplY3QuQ29tcGxleEhpdCA9IHRydWU7XHJcbiAgICB9O1xyXG4gICAgUGxheWVyQ29tcG9uZW50LnByb3RvdHlwZS5HZXRDb21wb25lbnROYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBcIlBsYXllckNvbXBvbmVudFwiO1xyXG4gICAgfTtcclxuICAgIFBsYXllckNvbXBvbmVudC5wcm90b3R5cGUuVXBkYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzSW52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW52aXNpYmxlRWZmZWN0LnRyYW5zZm9ybS5Sb2xsWF9Mb2NhbF9EZWdyZWVzKDIpO1xyXG4gICAgICAgICAgICB0aGlzLmludmlzaWJsZUVmZmVjdC50cmFuc2Zvcm0uUm9sbFlfTG9jYWxfRGVncmVlcygyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmNhbkNvbnRyb2xsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaXNQdXNoKSB7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmtleWJvYXJkRXZlbnQgJiYgIXRoaXMucG9wcGluZ0NvbXBvbmVudC5Jc01vdmUoKSkge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0O1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMua2V5Ym9hcmRFdmVudC5rZXkpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJ3XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gdGhpcy5hcnlfdGFyZ2V0c1swXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuYXJ5X3NlbnNvclswXS5DYW5Nb3ZlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LlBvc2l0aW9uID0gdGhpcy5nYW1lT2JqZWN0LnRyYW5zZm9ybS5Mb2NhbFBvc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LlBvc2l0aW9uID0gdGhpcy5hcnlfc2Vuc29yWzBdLkdldFBvc2l0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhZ2UuR29Gcm9udCh0aGlzLmdhbWVPYmplY3QudHJhbnNmb3JtLkxvY2FsUG9zaXRpb24ueik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9wcGluZ0NvbXBvbmVudC5TZXRUYXJnZXQodGhpcy5tb3ZlUGFzZSwgdGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2FtZU9iamVjdC50cmFuc2Zvcm0uUG9zaXRpb24ueiA+IDQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IHRoaXMuYXJ5X3RhcmdldHNbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmFyeV9zZW5zb3JbMV0uQ2FuTW92ZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5Qb3NpdGlvbiA9IHRoaXMuZ2FtZU9iamVjdC50cmFuc2Zvcm0uTG9jYWxQb3NpdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuUG9zaXRpb24gPSB0aGlzLmFyeV9zZW5zb3JbMV0uR2V0UG9zaXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcHBpbmdDb21wb25lbnQuU2V0VGFyZ2V0KHRoaXMubW92ZVBhc2UsIHRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiYVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmdhbWVPYmplY3QudHJhbnNmb3JtLlBvc2l0aW9uLnggPD0gLTQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IHRoaXMuYXJ5X3RhcmdldHNbM107XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmFyeV9zZW5zb3JbM10uQ2FuTW92ZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5Qb3NpdGlvbiA9IHRoaXMuZ2FtZU9iamVjdC50cmFuc2Zvcm0uTG9jYWxQb3NpdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuUG9zaXRpb24gPSB0aGlzLmFyeV9zZW5zb3JbM10uR2V0UG9zaXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcHBpbmdDb21wb25lbnQuU2V0VGFyZ2V0KHRoaXMubW92ZVBhc2UsIHRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiZFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmdhbWVPYmplY3QudHJhbnNmb3JtLlBvc2l0aW9uLnggPj0gNCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gdGhpcy5hcnlfdGFyZ2V0c1syXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuYXJ5X3NlbnNvclsyXS5DYW5Nb3ZlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LlBvc2l0aW9uID0gdGhpcy5nYW1lT2JqZWN0LnRyYW5zZm9ybS5Mb2NhbFBvc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5Qb3NpdGlvbiA9IHRoaXMuYXJ5X3NlbnNvclsyXS5HZXRQb3NpdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9wcGluZ0NvbXBvbmVudC5TZXRUYXJnZXQodGhpcy5tb3ZlUGFzZSwgdGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnVwU2UuUGxheV9uZXcoKTtcclxuICAgICAgICAgICAgdGhpcy5rZXlib2FyZEV2ZW50ID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUGxheWVyQ29tcG9uZW50LnByb3RvdHlwZS5GZXZlclN0YXJ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuaXNJbnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuZ2FtZU9iamVjdC5TZXRDb21wb25lbnQobmV3IFRyYW5zZm9ybUFuaW1hdGlvbl8xLmRlZmF1bHQoNDAsIGZhbHNlLCBuZXcgVHJhbnNmb3JtXzEuZGVmYXVsdChuZXcgVmVjdG9yM18xLmRlZmF1bHQoMCwgMCwgMCksIG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLCAwKSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDEsIDEsIDEpKSwgdGhpcy5pbnZpc2libGVFZmZlY3QudHJhbnNmb3JtKSk7XHJcbiAgICAgICAgdGhpcy5pbnZpc2libGVFZmZlY3QuVW5SZWdpc3REcmF3KCk7XHJcbiAgICAgICAgdGhpcy5pbnZpc2libGVFZmZlY3QuUmVnaXN0RHJhdygpO1xyXG4gICAgfTtcclxuICAgIFBsYXllckNvbXBvbmVudC5wcm90b3R5cGUuRmV2ZXJFbmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5pc0ludmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZ2FtZU9iamVjdC5TZXRDb21wb25lbnQobmV3IFRyYW5zZm9ybUFuaW1hdGlvbl8xLmRlZmF1bHQoMzAsIGZhbHNlLCBuZXcgVHJhbnNmb3JtXzEuZGVmYXVsdChuZXcgVmVjdG9yM18xLmRlZmF1bHQoMCwgMCwgMCksIG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLCAwKSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAsIDAsIDApKSwgdGhpcy5pbnZpc2libGVFZmZlY3QudHJhbnNmb3JtKSk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFBsYXllckNvbXBvbmVudC5wcm90b3R5cGUsIFwiSXNGZXZlclwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmlzSW52aXNpYmxlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIFBsYXllckNvbXBvbmVudC5wcm90b3R5cGUuT25Nb3ZlRW5kID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5hcnlfc2Vuc29yLmZvckVhY2goZnVuY3Rpb24gKHNlbnNvcikgeyByZXR1cm4gc2Vuc29yLlNldFBvc2l0aW9uKF90aGlzLmdhbWVPYmplY3QudHJhbnNmb3JtLkxvY2FsUG9zaXRpb24pOyB9KTtcclxuICAgIH07XHJcbiAgICBQbGF5ZXJDb21wb25lbnQucHJvdG90eXBlLlNldENhbkNvbnRyb2xsID0gZnVuY3Rpb24gKGFyZ19jYW5Db250cm9sbCkge1xyXG4gICAgICAgIHRoaXMuY2FuQ29udHJvbGwgPSBhcmdfY2FuQ29udHJvbGw7XHJcbiAgICB9O1xyXG4gICAgUGxheWVyQ29tcG9uZW50LnByb3RvdHlwZS5PbktleURvd24gPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzZmFpbGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMua2V5Ym9hcmRFdmVudCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaXNQdXNoKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuc2NhbGVDb21wb25lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5zY2FsZUNvbXBvbmVudC5SZW1vdmUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zY2FsZUNvbXBvbmVudCA9IG5ldyBUcmFuc2Zvcm1BbmltYXRpb25fMS5kZWZhdWx0KDUsIGZhbHNlLCB0aGlzLm1pbmltdW1UcmFuc2Zvcm0sIHRoaXMubW9kZWxUcmFuc2Zvcm0pO1xyXG4gICAgICAgIHRoaXMuZ2FtZU9iamVjdC5TZXRDb21wb25lbnQodGhpcy5zY2FsZUNvbXBvbmVudCk7XHJcbiAgICAgICAgdGhpcy5pc1B1c2ggPSB0cnVlO1xyXG4gICAgICAgIHRoaXMua2V5Ym9hcmRFdmVudCA9IGU7XHJcbiAgICB9O1xyXG4gICAgUGxheWVyQ29tcG9uZW50LnByb3RvdHlwZS5PbktleVVwID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBpZiAodGhpcy5pc2ZhaWxlZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5jYW5Db250cm9sbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmtleWJvYXJkRXZlbnQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnNjYWxlQ29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NhbGVDb21wb25lbnQuUmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2NhbGVDb21wb25lbnQgPSBuZXcgVHJhbnNmb3JtQW5pbWF0aW9uXzEuZGVmYXVsdCgxMCwgZmFsc2UsIHRoaXMubWF4aW11bVRyYW5zZm9ybSwgdGhpcy5tb2RlbFRyYW5zZm9ybSk7XHJcbiAgICAgICAgdGhpcy5nYW1lT2JqZWN0LlNldENvbXBvbmVudCh0aGlzLnNjYWxlQ29tcG9uZW50KTtcclxuICAgICAgICB0aGlzLmlzUHVzaCA9IGZhbHNlO1xyXG4gICAgfTtcclxuICAgIFBsYXllckNvbXBvbmVudC5wcm90b3R5cGUuVG9TdGFydCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBJbnB1dF8xLmRlZmF1bHQuQWRkS2V5VXBFdmVudCh0aGlzLCBcInBsYXllckV2ZW50XCIsIGZhbHNlKTtcclxuICAgICAgICBJbnB1dF8xLmRlZmF1bHQuQWRkS2V5RG93bkV2ZW50KHRoaXMsIFwicGxheWVyRXZlbnRcIiwgZmFsc2UpO1xyXG4gICAgICAgIHRoaXMuaXNQdXNoID0gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgUGxheWVyQ29tcG9uZW50LnByb3RvdHlwZS5SZXNldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBJbnB1dF8xLmRlZmF1bHQuUmVtb3ZlS2V5VXBFdmVudChcInBsYXllckV2ZW50XCIpO1xyXG4gICAgICAgIElucHV0XzEuZGVmYXVsdC5SZW1vdmVLZXlEb3duRXZlbnQoXCJwbGF5ZXJFdmVudFwiKTtcclxuICAgICAgICB0aGlzLmdhbWVPYmplY3QudHJhbnNmb3JtLlBvc2l0aW9uID0gbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAsIC0wLjUsIDEpO1xyXG4gICAgICAgIHRoaXMuZ2FtZU9iamVjdC50cmFuc2Zvcm0uQmFzZVRyYW5zZm9ybSA9IHRoaXMuc3RhZ2UuZ2FtZU9iamVjdC50cmFuc2Zvcm07XHJcbiAgICAgICAgdGhpcy5Pbk1vdmVFbmQoKTtcclxuICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcy5hcnlfdGFyZ2V0c1swXTtcclxuICAgICAgICB0YXJnZXQuUG9zaXRpb24gPSBuZXcgVmVjdG9yM18xLmRlZmF1bHQoMCwgLTAuNSwgMSk7XHJcbiAgICAgICAgdGFyZ2V0LkJhc2VUcmFuc2Zvcm0gPSB0aGlzLnN0YWdlLmdhbWVPYmplY3QudHJhbnNmb3JtO1xyXG4gICAgICAgIHRoaXMubW9kZWxUcmFuc2Zvcm0uU2NhbGUgPSBuZXcgVmVjdG9yM18xLmRlZmF1bHQoMC4yLCAwLjIsIDAuMTUpO1xyXG4gICAgICAgIHRoaXMucG9wcGluZ0NvbXBvbmVudC5TdGFydCgpO1xyXG4gICAgICAgIHRoaXMucG9wcGluZ0NvbXBvbmVudC5TZXRUYXJnZXQodGhpcy5tb3ZlUGFzZSwgdGFyZ2V0KTtcclxuICAgICAgICBpZiAodGhpcy5zY2FsZUNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICB0aGlzLnNjYWxlQ29tcG9uZW50LlJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNjYWxlQ29tcG9uZW50ID0gbmV3IFRyYW5zZm9ybUFuaW1hdGlvbl8xLmRlZmF1bHQoMzAsIHRydWUsIHRoaXMubWluaW11bVRyYW5zZm9ybSwgdGhpcy5tb2RlbFRyYW5zZm9ybSwgRWFzaW5nXzEuZGVmYXVsdC5FYXNlSW5PdXRDaXJjKTtcclxuICAgICAgICB0aGlzLmdhbWVPYmplY3QuU2V0Q29tcG9uZW50KHRoaXMuc2NhbGVDb21wb25lbnQpO1xyXG4gICAgICAgIHRoaXMuaXNmYWlsZWQgPSBmYWxzZTtcclxuICAgICAgICAvL3RoaXMuaW52aXNpYmxlRWZmZWN0LlVuUmVnaXN0RHJhdygpO1xyXG4gICAgfTtcclxuICAgIFBsYXllckNvbXBvbmVudC5wcm90b3R5cGUuRGVhZEFuaW1hdGlvbl9QcmVzcyA9IGZ1bmN0aW9uIChhcmdfZ2FtZU9iamVjdCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNjYWxlQ29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NhbGVDb21wb25lbnQuUmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBwZXRhbmtvID0gbmV3IFRyYW5zZm9ybV8xLmRlZmF1bHQobmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAsIDAuMiwgMCksIG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLCAwKSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAuNCwgMC4wNSwgMC4yMikpO1xyXG4gICAgICAgIHRoaXMuc2NhbGVDb21wb25lbnQgPSBuZXcgVHJhbnNmb3JtQW5pbWF0aW9uXzEuZGVmYXVsdCgxMCwgZmFsc2UsIHBldGFua28sIHRoaXMubW9kZWxUcmFuc2Zvcm0sIEVhc2luZ18xLmRlZmF1bHQuRWFzZUluT3V0Q2lyYyk7XHJcbiAgICAgICAgdGhpcy5nYW1lT2JqZWN0LlNldENvbXBvbmVudCh0aGlzLnNjYWxlQ29tcG9uZW50KTtcclxuICAgICAgICB0aGlzLnBvcHBpbmdDb21wb25lbnQuU3RvcCgpO1xyXG4gICAgfTtcclxuICAgIFBsYXllckNvbXBvbmVudC5wcm90b3R5cGUuRGVhZEFuaW1hdGlvbl9TdHJpa2UgPSBmdW5jdGlvbiAoYXJnX2dhbWVPYmplY3QpIHtcclxuICAgICAgICB0aGlzLmdhbWVPYmplY3QudHJhbnNmb3JtLlNldFBvc2l0aW9uWCh0aGlzLmdhbWVPYmplY3QudHJhbnNmb3JtLlBvc2l0aW9uLlN1YihhcmdfZ2FtZU9iamVjdC50cmFuc2Zvcm0uUG9zaXRpb24pLngpO1xyXG4gICAgICAgIHRoaXMuZ2FtZU9iamVjdC50cmFuc2Zvcm0uU2V0UG9zaXRpb25ZKHRoaXMuZ2FtZU9iamVjdC50cmFuc2Zvcm0uTG9jYWxQb3NpdGlvbi55KTtcclxuICAgICAgICB0aGlzLmdhbWVPYmplY3QudHJhbnNmb3JtLlNldFBvc2l0aW9uWigwLjU1KTtcclxuICAgICAgICB0aGlzLmdhbWVPYmplY3QudHJhbnNmb3JtLkJhc2VUcmFuc2Zvcm0gPSBhcmdfZ2FtZU9iamVjdC50cmFuc2Zvcm07XHJcbiAgICAgICAgaWYgKHRoaXMuc2NhbGVDb21wb25lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5zY2FsZUNvbXBvbmVudC5SZW1vdmUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHBldGFua28gPSBuZXcgVHJhbnNmb3JtXzEuZGVmYXVsdChuZXcgVmVjdG9yM18xLmRlZmF1bHQoMCwgMCwgMCksIG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLCAwKSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAuMjIsIDAuMjIsIDAuMDUpKTtcclxuICAgICAgICB0aGlzLnNjYWxlQ29tcG9uZW50ID0gbmV3IFRyYW5zZm9ybUFuaW1hdGlvbl8xLmRlZmF1bHQoMTAsIGZhbHNlLCBwZXRhbmtvLCB0aGlzLm1vZGVsVHJhbnNmb3JtKTtcclxuICAgICAgICB0aGlzLmdhbWVPYmplY3QuU2V0Q29tcG9uZW50KHRoaXMuc2NhbGVDb21wb25lbnQpO1xyXG4gICAgICAgIHRoaXMucG9wcGluZ0NvbXBvbmVudC5TdG9wKCk7XHJcbiAgICB9O1xyXG4gICAgUGxheWVyQ29tcG9uZW50LnByb3RvdHlwZS5PbkNvbGxpc2lvbkVudGVyID0gZnVuY3Rpb24gKGFyZ19nYW1lT2JqZWN0KSB7XHJcbiAgICAgICAgaWYgKGFyZ19nYW1lT2JqZWN0Lm9iamVjdElEID09IEdhbWVPYmplY3RJRE1hbmFnZXJfMS5kZWZhdWx0LkdldElEKFwiZGFtYWdlT2JzdGFjbGVcIikgJiYgIXRoaXMuaXNJbnZpc2libGUgJiYgIXRoaXMuaXNmYWlsZWQpIHtcclxuICAgICAgICAgICAgaWYgKGFyZ19nYW1lT2JqZWN0LnRyYW5zZm9ybS5Qb3NpdGlvbi56IDwgdGhpcy5nYW1lT2JqZWN0LnRyYW5zZm9ybS5Qb3NpdGlvbi56KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRlYWRBbmltYXRpb25fUHJlc3MoYXJnX2dhbWVPYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWFkU2UuUGxheSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pc2ZhaWxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRlYWRBbmltYXRpb25fUHJlc3MoYXJnX2dhbWVPYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWFkU2UuUGxheSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pc2ZhaWxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zdGFnZS5GYWlsZWQoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gUGxheWVyQ29tcG9uZW50O1xyXG59KENvbXBvbmVudF8xLmRlZmF1bHQpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gUGxheWVyQ29tcG9uZW50O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgQ29tcG9uZW50XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL0NvbXBvbmVudC9Db21wb25lbnRcIikpO1xyXG52YXIgUm91bmRUcmlwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFJvdW5kVHJpcCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFJvdW5kVHJpcChhcmdfc3RhcnQsIGFyZ19lbmQsIGFyZ190aW1lLCBhcmdfY3VycmVudFRpbWUsIGFyZ19pc0xvb3ApIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmN1cnJlbnRUaW1lID0gMDtcclxuICAgICAgICBfdGhpcy5zdGFydCA9IGFyZ19zdGFydDtcclxuICAgICAgICBfdGhpcy5lbmQgPSBhcmdfZW5kLlN1YihfdGhpcy5zdGFydCk7XHJcbiAgICAgICAgX3RoaXMudGltZSA9IGFyZ190aW1lO1xyXG4gICAgICAgIF90aGlzLmN1cnJlbnRUaW1lID0gYXJnX2N1cnJlbnRUaW1lO1xyXG4gICAgICAgIGlmIChhcmdfaXNMb29wKSB7XHJcbiAgICAgICAgICAgIF90aGlzLlRpbWVVcGRhdGUgPSBfdGhpcy5UaW1lVXBkYXRlX0xvb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBfdGhpcy5UaW1lVXBkYXRlID0gX3RoaXMuVGltZVVwZGF0ZV9Ob0xvb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFJvdW5kVHJpcC5wcm90b3R5cGUuVGltZVVwZGF0ZV9Ob0xvb3AgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50VGltZSsrO1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRUaW1lID4gdGhpcy50aW1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFRpbWUgPSAwO1xyXG4gICAgICAgICAgICB0aGlzLkRlYWQoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUm91bmRUcmlwLnByb3RvdHlwZS5UaW1lVXBkYXRlX0xvb3AgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50VGltZSsrO1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRUaW1lID4gdGhpcy50aW1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFRpbWUgPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBSb3VuZFRyaXAucHJvdG90eXBlLlVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLlRpbWVVcGRhdGUoKTtcclxuICAgICAgICB0aGlzLmdhbWVPYmplY3QudHJhbnNmb3JtLlBvc2l0aW9uID0gdGhpcy5zdGFydC5BZGQodGhpcy5lbmQuTXVsdGlwbHkodGhpcy5jdXJyZW50VGltZSAvIHRoaXMudGltZSkpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBSb3VuZFRyaXA7XHJcbn0oQ29tcG9uZW50XzEuZGVmYXVsdCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBSb3VuZFRyaXA7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBDb21wb25lbnRfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vQ29tcG9uZW50L0NvbXBvbmVudFwiKSk7XHJcbnZhciBSb3VuZFRyaXBfV2FpdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhSb3VuZFRyaXBfV2FpdCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFJvdW5kVHJpcF9XYWl0KGFyZ19zdGFydCwgYXJnX2VuZCwgYXJnX3RpbWUsIGFyZ19jdXJyZW50VGltZSwgYXJnX3dhaXRUaW1lLCBhcmdfd2FpdEN1cnJlbnRUaW1lLCBhcmdfaXNMb29wKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5zdGFydCA9IGFyZ19zdGFydDtcclxuICAgICAgICBfdGhpcy5lbmQgPSBhcmdfZW5kLlN1YihfdGhpcy5zdGFydCk7XHJcbiAgICAgICAgX3RoaXMudGltZSA9IGFyZ190aW1lO1xyXG4gICAgICAgIF90aGlzLmN1cnJlbnRUaW1lID0gYXJnX2N1cnJlbnRUaW1lO1xyXG4gICAgICAgIF90aGlzLndhaXRUaW1lID0gYXJnX3dhaXRUaW1lO1xyXG4gICAgICAgIF90aGlzLmN1cnJlbnRXYWl0VGltZSA9IGFyZ193YWl0Q3VycmVudFRpbWU7XHJcbiAgICAgICAgaWYgKF90aGlzLmN1cnJlbnRXYWl0VGltZSkge1xyXG4gICAgICAgICAgICBfdGhpcy5jdXJyZW50VGltZSA9IF90aGlzLnRpbWUgKyAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYXJnX2lzTG9vcCkge1xyXG4gICAgICAgICAgICBfdGhpcy5UaW1lVXBkYXRlID0gX3RoaXMuVGltZVVwZGF0ZV9Mb29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgX3RoaXMuVGltZVVwZGF0ZSA9IF90aGlzLlRpbWVVcGRhdGVfTm9Mb29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBSb3VuZFRyaXBfV2FpdC5wcm90b3R5cGUuVGltZVVwZGF0ZV9Ob0xvb3AgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50VGltZSsrO1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRUaW1lID4gdGhpcy50aW1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFRpbWUgPSAwO1xyXG4gICAgICAgICAgICB0aGlzLkRlYWQoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUm91bmRUcmlwX1dhaXQucHJvdG90eXBlLlRpbWVVcGRhdGVfTG9vcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50V2FpdFRpbWUgPD0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRUaW1lKys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRUaW1lID4gdGhpcy50aW1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFdhaXRUaW1lKys7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRXYWl0VGltZSA+IHRoaXMud2FpdFRpbWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFRpbWUgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50V2FpdFRpbWUgPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFJvdW5kVHJpcF9XYWl0LnByb3RvdHlwZS5VcGRhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5UaW1lVXBkYXRlKCk7XHJcbiAgICAgICAgdGhpcy5nYW1lT2JqZWN0LnRyYW5zZm9ybS5Qb3NpdGlvbiA9IHRoaXMuc3RhcnQuQWRkKHRoaXMuZW5kLk11bHRpcGx5KHRoaXMuY3VycmVudFRpbWUgLyB0aGlzLnRpbWUpKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUm91bmRUcmlwX1dhaXQ7XHJcbn0oQ29tcG9uZW50XzEuZGVmYXVsdCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBSb3VuZFRyaXBfV2FpdDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIENvbGxpc2lvbkNvbXBvbmVudF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9Db21wb25lbnQvQ29sbGlzaW9uQ29tcG9uZW50XCIpKTtcclxudmFyIENvbXBvbmVudF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9Db21wb25lbnQvQ29tcG9uZW50XCIpKTtcclxudmFyIFZlY3RvcjNfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vTWF0aC9WZWN0b3IzXCIpKTtcclxudmFyIEdhbWVPYmplY3RJRE1hbmFnZXJfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vUGFydHMvR2FtZU9iamVjdElETWFuYWdlclwiKSk7XHJcbnZhciBQcmltaXRpdmVUeXBlO1xyXG4oZnVuY3Rpb24gKFByaW1pdGl2ZVR5cGUpIHtcclxuICAgIFByaW1pdGl2ZVR5cGVbUHJpbWl0aXZlVHlwZVtcInNwaGVyZVwiXSA9IDBdID0gXCJzcGhlcmVcIjtcclxuICAgIFByaW1pdGl2ZVR5cGVbUHJpbWl0aXZlVHlwZVtcImJveF9BQUJCXCJdID0gMV0gPSBcImJveF9BQUJCXCI7XHJcbiAgICBQcmltaXRpdmVUeXBlW1ByaW1pdGl2ZVR5cGVbXCJib3hfT0JCXCJdID0gMl0gPSBcImJveF9PQkJcIjtcclxuICAgIFByaW1pdGl2ZVR5cGVbUHJpbWl0aXZlVHlwZVtcInBvaW50XCJdID0gM10gPSBcInBvaW50XCI7XHJcbn0pKFByaW1pdGl2ZVR5cGUgfHwgKFByaW1pdGl2ZVR5cGUgPSB7fSkpO1xyXG52YXIgU2Vuc29yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFNlbnNvciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFNlbnNvcihhcmdfcGFyZW50LCBhcmdfb2ZmU2V0KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5oaXROdW0gPSAwO1xyXG4gICAgICAgIF90aGlzLnBhcmVudE9iamVjdCA9IGFyZ19wYXJlbnQ7XHJcbiAgICAgICAgX3RoaXMub2ZmU2V0ID0gYXJnX29mZlNldDtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBTZW5zb3IucHJvdG90eXBlLk9uU2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZ2FtZU9iamVjdC50cmFuc2Zvcm0uUG9zaXRpb24gPSB0aGlzLnBhcmVudE9iamVjdC50cmFuc2Zvcm0uUG9zaXRpb24uQWRkX2IodGhpcy5vZmZTZXQpO1xyXG4gICAgICAgIHRoaXMuZ2FtZU9iamVjdC50cmFuc2Zvcm0uU2NhbGUgPSBuZXcgVmVjdG9yM18xLmRlZmF1bHQoMC41LCAwLjUsIDAuNSk7XHJcbiAgICAgICAgLy90aGlzLmdhbWVPYmplY3QuU2V0Q29tcG9uZW50KG5ldyBNb2RlbERyYXdDb21wb25lbnQodHJ1ZSwgXCJub25UZXhjdWJlXCIsXCJyZWRcIixcInBvaW50TGlnaHRcIiwxLGZhbHNlKSk7XHJcbiAgICAgICAgdGhpcy5nYW1lT2JqZWN0LkNvbXBsZXhIaXQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuZ2FtZU9iamVjdC5TZXRDb21wb25lbnQobmV3IENvbGxpc2lvbkNvbXBvbmVudF8xLmRlZmF1bHQoUHJpbWl0aXZlVHlwZS5ib3hfQUFCQiwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDEuMCwgMS4wLCAxLjApLCAwKSk7XHJcbiAgICB9O1xyXG4gICAgU2Vuc29yLnByb3RvdHlwZS5TZXRQb3NpdGlvbiA9IGZ1bmN0aW9uIChhcmdfcG9zaXRpb24pIHtcclxuICAgICAgICB0aGlzLmdhbWVPYmplY3QudHJhbnNmb3JtLlBvc2l0aW9uID0gYXJnX3Bvc2l0aW9uLkFkZCh0aGlzLm9mZlNldCk7XHJcbiAgICB9O1xyXG4gICAgU2Vuc29yLnByb3RvdHlwZS5HZXRQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nYW1lT2JqZWN0LnRyYW5zZm9ybS5Mb2NhbFBvc2l0aW9uO1xyXG4gICAgfTtcclxuICAgIFNlbnNvci5wcm90b3R5cGUuQ2FuTW92ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gIXRoaXMuaGl0TnVtO1xyXG4gICAgfTtcclxuICAgIFNlbnNvci5wcm90b3R5cGUuT25Db2xsaXNpb25FbnRlciA9IGZ1bmN0aW9uIChhcmdfZ2FtZU9iamVjdCkge1xyXG4gICAgICAgIGlmIChhcmdfZ2FtZU9iamVjdC5vYmplY3RJRCAhPSBHYW1lT2JqZWN0SURNYW5hZ2VyXzEuZGVmYXVsdC5HZXRJRChcIm9ic3RhY2xlXCIpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5oaXROdW0gKz0gMTtcclxuICAgIH07XHJcbiAgICBTZW5zb3IucHJvdG90eXBlLk9uQ29sbGlzaW9uUmVsZWFzZSA9IGZ1bmN0aW9uIChhcmdfZ2FtZU9iamVjdCkge1xyXG4gICAgICAgIGlmIChhcmdfZ2FtZU9iamVjdC5vYmplY3RJRCAhPSBHYW1lT2JqZWN0SURNYW5hZ2VyXzEuZGVmYXVsdC5HZXRJRChcIm9ic3RhY2xlXCIpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5oaXROdW0gLT0gMTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gU2Vuc29yO1xyXG59KENvbXBvbmVudF8xLmRlZmF1bHQpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gU2Vuc29yO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgQ29tcG9uZW50XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL0NvbXBvbmVudC9Db21wb25lbnRcIikpO1xyXG52YXIgTW9kZWxEcmF3Q29tcG9uZW50XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL0NvbXBvbmVudC9Nb2RlbERyYXdDb21wb25lbnRcIikpO1xyXG52YXIgVHJhbnNmb3JtQW5pbWF0aW9uXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL0NvbXBvbmVudC9UcmFuc2Zvcm1BbmltYXRpb25cIikpO1xyXG52YXIgVmVjdG9yM18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9NYXRoL1ZlY3RvcjNcIikpO1xyXG52YXIgUmFuZG9tSGVscGVyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL1Rvb2wvUmFuZG9tSGVscGVyXCIpKTtcclxudmFyIFRyYW5zZm9ybV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9UcmFuc2Zvcm1cIikpO1xyXG52YXIgU2lnbmFsQ29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFNpZ25hbENvbXBvbmVudCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFNpZ25hbENvbXBvbmVudChhcmdfdGltZSwgYXJnX2N1cnJlbnRUaW1lLCBhcmdfYWxlcnRUaW1pbmcsIGFyZ19hbGVydFRpbWUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmN1cnJlbnRUaW1lID0gMDtcclxuICAgICAgICBfdGhpcy5pc09uID0gZmFsc2U7XHJcbiAgICAgICAgX3RoaXMudGltZSA9IGFyZ190aW1lO1xyXG4gICAgICAgIF90aGlzLmN1cnJlbnRUaW1lID0gYXJnX2N1cnJlbnRUaW1lO1xyXG4gICAgICAgIF90aGlzLmFsZXJ0VGltZSA9IGFyZ19hbGVydFRpbWU7XHJcbiAgICAgICAgX3RoaXMuYWxlcnRUaW1pbmcgPSBhcmdfYWxlcnRUaW1pbmc7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgU2lnbmFsQ29tcG9uZW50LnByb3RvdHlwZS5PblNldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcG9sZVRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm1fMS5kZWZhdWx0KG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgtMC41LCAtMSwgMC40KSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAsIDAsIDApLCBuZXcgVmVjdG9yM18xLmRlZmF1bHQoMC4xMjUsIDIsIDAuMTI1KSk7XHJcbiAgICAgICAgcG9sZVRyYW5zZm9ybS5CYXNlVHJhbnNmb3JtID0gdGhpcy5nYW1lT2JqZWN0LnRyYW5zZm9ybTtcclxuICAgICAgICB2YXIgY3Jvd25GaXNoWSA9IFJhbmRvbUhlbHBlcl8xLmRlZmF1bHQuR2V0UmFuZG9tSW50KDIsIC0yKSAvIDQuMDtcclxuICAgICAgICB0aGlzLmZpc2hCYXNlVHJhbnNmb3JtID0gbmV3IFRyYW5zZm9ybV8xLmRlZmF1bHQobmV3IFZlY3RvcjNfMS5kZWZhdWx0KC0wLjUsIC0yICsgY3Jvd25GaXNoWSwgMC40KSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAsIDAsIDApLCBuZXcgVmVjdG9yM18xLmRlZmF1bHQoMS4wLCAxLjAsIDEuMCkpO1xyXG4gICAgICAgIHRoaXMuY3Jvd25GaXNoVHJhbnNmb3JtID0gbmV3IFRyYW5zZm9ybV8xLmRlZmF1bHQobmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAsIDAsIDAuNSksIG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLCAwKSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAuMDAyNSwgMC4wMDI1LCAwLjAwMjUpKTtcclxuICAgICAgICB0aGlzLmZpc2hCYXNlVHJhbnNmb3JtLkJhc2VUcmFuc2Zvcm0gPSB0aGlzLmdhbWVPYmplY3QudHJhbnNmb3JtO1xyXG4gICAgICAgIHRoaXMuY3Jvd25GaXNoVHJhbnNmb3JtLkJhc2VUcmFuc2Zvcm0gPSB0aGlzLmZpc2hCYXNlVHJhbnNmb3JtO1xyXG4gICAgICAgIHRoaXMuZ2FtZU9iamVjdC5TZXRDb21wb25lbnQobmV3IE1vZGVsRHJhd0NvbXBvbmVudF8xLmRlZmF1bHQodHJ1ZSwgXCJub25UZXhjdWJlXCIsIFwiYmx1ZVwiLCBcInBvaW50TGlnaHRcIiwgMSwgZmFsc2UsIG51bGwsIHBvbGVUcmFuc2Zvcm0pKTtcclxuICAgICAgICB0aGlzLmdhbWVPYmplY3QuU2V0Q29tcG9uZW50KG5ldyBNb2RlbERyYXdDb21wb25lbnRfMS5kZWZhdWx0KHRydWUsIFwibm9uVGV4Y3ViZVwiLCBcInJlZFwiLCBcIm9ubHlNYXRlcmlhbFwiLCAxLCBmYWxzZSwgXCJjbG93bmZpc2hcIiwgdGhpcy5jcm93bkZpc2hUcmFuc2Zvcm0pKTtcclxuICAgICAgICB0aGlzLmdhbWVPYmplY3QuU2V0Q29tcG9uZW50KG5ldyBUcmFuc2Zvcm1BbmltYXRpb25fMS5kZWZhdWx0KFJhbmRvbUhlbHBlcl8xLmRlZmF1bHQuR2V0UmFuZG9tSW50KDQsIDgpICogMjAsIHRydWUsIG5ldyBUcmFuc2Zvcm1fMS5kZWZhdWx0KG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLjUsIDAuNSksIG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLCAwKSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAuMDAyNSwgMC4wMDI1LCAwLjAwMjUpKSwgdGhpcy5jcm93bkZpc2hUcmFuc2Zvcm0pKTtcclxuICAgIH07XHJcbiAgICBTaWduYWxDb21wb25lbnQucHJvdG90eXBlLlNpZ25hbE9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZmlzaEJhc2VUcmFuc2Zvcm0uUm9sbFlfTG9jYWxfRGVncmVlcyg2KTtcclxuICAgICAgICB0aGlzLmlzT24gPSB0cnVlO1xyXG4gICAgfTtcclxuICAgIFNpZ25hbENvbXBvbmVudC5wcm90b3R5cGUuU2lnbmFsT2ZmID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuaXNPbiA9IGZhbHNlO1xyXG4gICAgfTtcclxuICAgIFNpZ25hbENvbXBvbmVudC5wcm90b3R5cGUuVXBkYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuY3VycmVudFRpbWUrKztcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50VGltZSA+IHRoaXMudGltZSkge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRUaW1lID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFRpbWUgPiB0aGlzLmFsZXJ0VGltaW5nICsgdGhpcy5hbGVydFRpbWUpIHtcclxuICAgICAgICAgICAgdGhpcy5TaWduYWxPZmYoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5jdXJyZW50VGltZSA+IHRoaXMuYWxlcnRUaW1pbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5TaWduYWxPbigpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gU2lnbmFsQ29tcG9uZW50O1xyXG59KENvbXBvbmVudF8xLmRlZmF1bHQpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gU2lnbmFsQ29tcG9uZW50O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgQ2FtZXJhQ2hhc2VyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL0NvbXBvbmVudC9DYW1lcmFDaGFzZXJcIikpO1xyXG52YXIgQ29sbGlzaW9uQ29tcG9uZW50XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL0NvbXBvbmVudC9Db2xsaXNpb25Db21wb25lbnRcIikpO1xyXG52YXIgQ29tcG9uZW50XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL0NvbXBvbmVudC9Db21wb25lbnRcIikpO1xyXG52YXIgVmVjdG9yM18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9NYXRoL1ZlY3RvcjNcIikpO1xyXG52YXIgR2FtZU9iamVjdElETWFuYWdlcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9QYXJ0cy9HYW1lT2JqZWN0SURNYW5hZ2VyXCIpKTtcclxudmFyIElucHV0XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL1Rvb2wvSW5wdXRcIikpO1xyXG52YXIgUmFuZG9tSGVscGVyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL1Rvb2wvUmFuZG9tSGVscGVyXCIpKTtcclxudmFyIFRyYW5zZm9ybV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9UcmFuc2Zvcm1cIikpO1xyXG52YXIgQ3Jvc3N5VUlfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9Dcm9zc3lVSVwiKSk7XHJcbnZhciBQbGF5ZXJDb21wb25lbnRfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9QbGF5ZXJDb21wb25lbnRcIikpO1xyXG52YXIgU3RhZ2VQYXJ0c19Sb2FkXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vU3RhZ2VQYXJ0c19Sb2FkXCIpKTtcclxudmFyIFN0YWdlUGFydHNfU2FmZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1N0YWdlUGFydHNfU2FmZVwiKSk7XHJcbnZhciBTdGFnZVBhcnRzX1JhaWxfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9TdGFnZVBhcnRzX1JhaWxcIikpO1xyXG52YXIgUHJpbWl0aXZlVHlwZTtcclxuKGZ1bmN0aW9uIChQcmltaXRpdmVUeXBlKSB7XHJcbiAgICBQcmltaXRpdmVUeXBlW1ByaW1pdGl2ZVR5cGVbXCJzcGhlcmVcIl0gPSAwXSA9IFwic3BoZXJlXCI7XHJcbiAgICBQcmltaXRpdmVUeXBlW1ByaW1pdGl2ZVR5cGVbXCJib3hfQUFCQlwiXSA9IDFdID0gXCJib3hfQUFCQlwiO1xyXG4gICAgUHJpbWl0aXZlVHlwZVtQcmltaXRpdmVUeXBlW1wiYm94X09CQlwiXSA9IDJdID0gXCJib3hfT0JCXCI7XHJcbiAgICBQcmltaXRpdmVUeXBlW1ByaW1pdGl2ZVR5cGVbXCJwb2ludFwiXSA9IDNdID0gXCJwb2ludFwiO1xyXG59KShQcmltaXRpdmVUeXBlIHx8IChQcmltaXRpdmVUeXBlID0ge30pKTtcclxudmFyIHN0YWdlUmFuZ2UgPSBbWzEsIDEsIDIsIDIsIDIsIDNdLCBbMSwgMSwgMSwgMiwgMiwgMl0sIFsxLCAxLCAyLCAzLCAzLCA0XV07XHJcbnZhciBzdGFnZUFycmF5TGVuZ3RoID0gNTEyO1xyXG52YXIgYXJ5X2NhcnMgPSBbXCJjcmFiXCIsIFwidHVydGxlXCIsIFwidHVydGxlXCIsIFwidXR1Ym9cIl07XHJcbnZhciBhcnlfY2FyU2l6ZXMgPSBbbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDEsIDEsIDEpLCBuZXcgVmVjdG9yM18xLmRlZmF1bHQoMSwgMSwgMSksIG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgxLCAxLCAxKSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDUsIDEsIDEpXTtcclxudmFyIGFyeV9jYXJSb3RhdGUgPSBbbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAsIDkwLCAwKSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAsIDAsIDApLCBuZXcgVmVjdG9yM18xLmRlZmF1bHQoMCwgMCwgMCksIG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAxODAsIDApXTtcclxudmFyIFN0YWdlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFN0YWdlLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gU3RhZ2UoYXJnX3NjZW5lKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5jb2luID0gMDtcclxuICAgICAgICBfdGhpcy5hcnJpdmFsID0gMDtcclxuICAgICAgICBfdGhpcy5mYWRlQ291bnQgPSAtMTtcclxuICAgICAgICBfdGhpcy5zdGFydFdhaXQgPSAzMDtcclxuICAgICAgICBfdGhpcy5zdGFnZVN0b2NrID0gMjtcclxuICAgICAgICBfdGhpcy5mZXZlckdhZ2UgPSAwO1xyXG4gICAgICAgIF90aGlzLmdhZ2VNaW5MaW5lID0gMC4wO1xyXG4gICAgICAgIF90aGlzLmdhZ2VEb3duUGFzZSA9IDAuMjtcclxuICAgICAgICBfdGhpcy5nYWdlVXBQYXNlID0gMTA7XHJcbiAgICAgICAgX3RoaXMucGxheVNjZW5lID0gYXJnX3NjZW5lO1xyXG4gICAgICAgIF90aGlzLnN0YXJ0UG9zID0gbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAsIC0wLjUsIDEpO1xyXG4gICAgICAgIF90aGlzLmNvaW5zZSA9IF90aGlzLnBsYXlTY2VuZS5HZXRTY2VuZU1hbmFnZXIoKS5HZXRSZXNvdXJjZUNvbnRhaW5lcigpLkdldFNvdW5kKFwidGl0bGVcIik7XHJcbiAgICAgICAgX3RoaXMuYXJ5X3N0YWdlUHJ0cyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIF90aGlzLnN0YWdlQXJyYXkgPSBuZXcgSW50MTZBcnJheShzdGFnZUFycmF5TGVuZ3RoKTtcclxuICAgICAgICBfdGhpcy5TdGFnZUFycmF5Q3JlYXRlKCk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgU3RhZ2UucHJvdG90eXBlLlN0YWdlQXJyYXlDcmVhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGFnZUFycmF5TGVuZ3RoOykge1xyXG4gICAgICAgICAgICB2YXIgc3RhZ2UgPSBSYW5kb21IZWxwZXJfMS5kZWZhdWx0LkdldFJhbmRvbUludCgwLCAyKTtcclxuICAgICAgICAgICAgdmFyIHJhbmdlID0gc3RhZ2VSYW5nZVtzdGFnZV1bUmFuZG9tSGVscGVyXzEuZGVmYXVsdC5HZXRSYW5kb21JbnQoMSwgNSldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJhbmdlOyBqKyssIGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFnZUFycmF5W2ldID0gc3RhZ2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgU3RhZ2UucHJvdG90eXBlLk9uU2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMucGxheWVyQ29tcG9uZW50ID0gbmV3IFBsYXllckNvbXBvbmVudF8xLmRlZmF1bHQoMTUsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMucGxheWVyID0gdGhpcy5wbGF5U2NlbmUuR2V0R2FtZU1hbmFnZXIoKS5BZGRHYW1lT2JqZWN0KFwicGxheWVyXCIsIG5ldyBUcmFuc2Zvcm1fMS5kZWZhdWx0KHRoaXMuc3RhcnRQb3MuQ2xvbmUoKSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAsIDAsIDApLCBuZXcgVmVjdG9yM18xLmRlZmF1bHQoMSwgMSwgMSkpLCBcInBsYXllclwiLCBbdGhpcy5wbGF5ZXJDb21wb25lbnRdKTtcclxuICAgICAgICB0aGlzLnBsYXllci5TZXRDb21wb25lbnQobmV3IENvbGxpc2lvbkNvbXBvbmVudF8xLmRlZmF1bHQoUHJpbWl0aXZlVHlwZS5ib3hfQUFCQiwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDEuMCwgMS4wLCAxLjApLCAwKSk7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXIudHJhbnNmb3JtLkJhc2VUcmFuc2Zvcm0gPSB0aGlzLmdhbWVPYmplY3QudHJhbnNmb3JtO1xyXG4gICAgICAgIHRoaXMudWkgPSBuZXcgQ3Jvc3N5VUlfMS5kZWZhdWx0KCk7XHJcbiAgICAgICAgdGhpcy5wbGF5U2NlbmUuR2V0R2FtZU1hbmFnZXIoKS5BZGRHYW1lT2JqZWN0KFwidWlcIiwgbmV3IFRyYW5zZm9ybV8xLmRlZmF1bHQoKSwgXCJ1aVwiLCBbdGhpcy51aV0pO1xyXG4gICAgICAgIHZhciBjYW1lcmEgPSB0aGlzLnBsYXlTY2VuZS5HZXRHYW1lTWFuYWdlcigpLkFkZEdhbWVPYmplY3QoXCJjYW1lcmFtYW5cIiwgdGhpcy5wbGF5U2NlbmUuR2V0Q2FtZXJhKFwibWFpblwiKS50cmFuc2Zvcm0pO1xyXG4gICAgICAgIGNhbWVyYS5TZXRDb21wb25lbnQobmV3IENhbWVyYUNoYXNlcl8xLmRlZmF1bHQoMC4wMiwgdGhpcy5wbGF5ZXIudHJhbnNmb3JtKSk7XHJcbiAgICAgICAgY2FtZXJhLnRyYW5zZm9ybS5CYXNlVHJhbnNmb3JtID0gdGhpcy5nYW1lT2JqZWN0LnRyYW5zZm9ybTtcclxuICAgICAgICB0aGlzLkNyZWF0ZSgpO1xyXG4gICAgICAgIHRoaXMudWkuSGlkZUluKCk7XHJcbiAgICB9O1xyXG4gICAgU3RhZ2UucHJvdG90eXBlLk9uUmVtb3ZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMucGxheVNjZW5lID0gbnVsbDtcclxuICAgIH07XHJcbiAgICBTdGFnZS5wcm90b3R5cGUuR2V0UmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIH07XHJcbiAgICBTdGFnZS5wcm90b3R5cGUuR2V0Q29pbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmNvaW5zZS5QbGF5X25ldygpO1xyXG4gICAgICAgIHRoaXMuY29pbisrO1xyXG4gICAgICAgIHRoaXMuZ2FnZU1pbkxpbmUgKz0gdGhpcy5nYWdlVXBQYXNlO1xyXG4gICAgICAgIHRoaXMuR2FnZVVwKCk7XHJcbiAgICAgICAgdGhpcy51aS5TZXRDb2luTnVtKHRoaXMuY29pbik7XHJcbiAgICB9O1xyXG4gICAgU3RhZ2UucHJvdG90eXBlLkdhZ2VVcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5mZXZlckdhZ2UgPCAxMDAgJiYgIXRoaXMucGxheWVyQ29tcG9uZW50LklzRmV2ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5mZXZlckdhZ2UgKz0gdGhpcy5nYWdlVXBQYXNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmdhZ2VEb3duUGFzZSA9IDAuMjtcclxuICAgICAgICBpZiAodGhpcy5mZXZlckdhZ2UgPj0gMTAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMudWkuRmV2ZXJTdGFydCgpO1xyXG4gICAgICAgICAgICB0aGlzLnBsYXllckNvbXBvbmVudC5GZXZlclN0YXJ0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FnZU1pbkxpbmUgPSAwLjA7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFN0YWdlLnByb3RvdHlwZS5Hb0Zyb250ID0gZnVuY3Rpb24gKGFyZ196KSB7XHJcbiAgICAgICAgYXJnX3ogPSBNYXRoLmZsb29yKC1hcmdfeikgKyAyO1xyXG4gICAgICAgIGlmIChhcmdfeiA9PSAxKSB7XHJcbiAgICAgICAgICAgIHRoaXMudWkuSGlkZU91dCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5hcnJpdmFsIDwgYXJnX3opIHtcclxuICAgICAgICAgICAgdGhpcy5hcnJpdmFsID0gYXJnX3o7XHJcbiAgICAgICAgICAgIHRoaXMuR2FnZVVwKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZU9iamVjdC50cmFuc2Zvcm0uVHJhbnNsYXRlWigxLjApO1xyXG4gICAgICAgICAgICB0aGlzLnVpLlNldEFycml2YWwodGhpcy5hcnJpdmFsKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYXJyaXZhbCA+IHRoaXMuc3RhZ2VTdG9jaykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5TdGFnZUFkZCh0aGlzLmFycml2YWwgKyA4KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuU3RhZ2VEZXN0cm95KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgU3RhZ2UucHJvdG90eXBlLkNyZWF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLkNyZWF0ZVNhZmVab25lKDMpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTE7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLlN0YWdlQWRkKGkpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBTdGFnZS5wcm90b3R5cGUuRGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmdhbWVPYmplY3QuTWFuYWdlci5HZXRHYW1lT2JqZWN0cyhHYW1lT2JqZWN0SURNYW5hZ2VyXzEuZGVmYXVsdC5HZXRJRChcImNvaW5cIikpLmZvckVhY2goZnVuY3Rpb24gKGNvaW4pIHsgcmV0dXJuIGNvaW4uRGVhZCgpOyB9KTtcclxuICAgICAgICB0aGlzLmFyeV9zdGFnZVBydHMuZm9yRWFjaChmdW5jdGlvbiAocGFydHMpIHsgcmV0dXJuIHBhcnRzLkRlc3Ryb3koKTsgfSk7XHJcbiAgICAgICAgdGhpcy5hcnlfc3RhZ2VQcnRzLmxlbmd0aCA9IDA7XHJcbiAgICB9O1xyXG4gICAgU3RhZ2UucHJvdG90eXBlLlN0YWdlQWRkID0gZnVuY3Rpb24gKGFyZ19hZGRwb3MpIHtcclxuICAgICAgICB2YXIgYWRkU3RhZ2VUcmFuc2Zvcm0gPSBuZXcgVHJhbnNmb3JtXzEuZGVmYXVsdChuZXcgVmVjdG9yM18xLmRlZmF1bHQoMCwgMCwgLShhcmdfYWRkcG9zKSkpO1xyXG4gICAgICAgIGFkZFN0YWdlVHJhbnNmb3JtLkJhc2VUcmFuc2Zvcm0gPSB0aGlzLmdhbWVPYmplY3QudHJhbnNmb3JtO1xyXG4gICAgICAgIHZhciBzdGFnZU51bSA9IHRoaXMuc3RhZ2VBcnJheVthcmdfYWRkcG9zICUgc3RhZ2VBcnJheUxlbmd0aF07XHJcbiAgICAgICAgdmFyIGJhc2VNYXRlcmlhbE5hbWVFeCA9IFwiXCI7XHJcbiAgICAgICAgaWYgKGFyZ19hZGRwb3MgJSAyICE9IDApIHtcclxuICAgICAgICAgICAgYmFzZU1hdGVyaWFsTmFtZUV4ID0gXCJfZFwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzd2l0Y2ggKHN0YWdlTnVtKSB7XHJcbiAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgIHZhciBzYWZlID0gbmV3IFN0YWdlUGFydHNfU2FmZV8xLmRlZmF1bHQodGhpcywgXCJzYWZlXCIgKyBiYXNlTWF0ZXJpYWxOYW1lRXgsIFJhbmRvbUhlbHBlcl8xLmRlZmF1bHQuR2V0UmFuZG9tSW50KDIsIDMpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXJ5X3N0YWdlUHJ0cy5wdXNoKHNhZmUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5U2NlbmUuR2V0R2FtZU1hbmFnZXIoKS5BZGRHYW1lT2JqZWN0KFwic2FmZUFyZWFcIiwgYWRkU3RhZ2VUcmFuc2Zvcm0sIFwic2FmZUFyZWFcIiwgW3NhZmVdKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICB2YXIgY2FyTnVtID0gUmFuZG9tSGVscGVyXzEuZGVmYXVsdC5HZXRSYW5kb21JbnQoMCwgMyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcm9hZCA9IG5ldyBTdGFnZVBhcnRzX1JvYWRfMS5kZWZhdWx0KHRoaXMsIFwicm9hZFwiICsgYmFzZU1hdGVyaWFsTmFtZUV4LCBhcnlfY2Fyc1tjYXJOdW1dLCBhcnlfY2FyU2l6ZXNbY2FyTnVtXS5DbG9uZSgpLCBhcnlfY2FyUm90YXRlW2Nhck51bV0sIFJhbmRvbUhlbHBlcl8xLmRlZmF1bHQuR2V0UmFuZG9tSW50KDEsIDIpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXJ5X3N0YWdlUHJ0cy5wdXNoKHJvYWQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5U2NlbmUuR2V0R2FtZU1hbmFnZXIoKS5BZGRHYW1lT2JqZWN0KFwicm9hZFwiLCBhZGRTdGFnZVRyYW5zZm9ybSwgXCJyb2FkXCIsIFtyb2FkXSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgdmFyIHJhaWwgPSBuZXcgU3RhZ2VQYXJ0c19SYWlsXzEuZGVmYXVsdCh0aGlzLCBcInJhaWxcIiArIGJhc2VNYXRlcmlhbE5hbWVFeCwgXCJmaXNoZXNcIiwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDEsIDEsIDEpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXJ5X3N0YWdlUHJ0cy5wdXNoKHJhaWwpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5U2NlbmUuR2V0R2FtZU1hbmFnZXIoKS5BZGRHYW1lT2JqZWN0KFwicmFpbFwiLCBhZGRTdGFnZVRyYW5zZm9ybSwgXCJyYWlsXCIsIFtyYWlsXSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgU3RhZ2UucHJvdG90eXBlLkNyZWF0ZVNhZmVab25lID0gZnVuY3Rpb24gKGFyZ19zYWZlQ291bnQpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ19zYWZlQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgYWRkU3RhZ2VUcmFuc2Zvcm0gPSBuZXcgVHJhbnNmb3JtXzEuZGVmYXVsdChuZXcgVmVjdG9yM18xLmRlZmF1bHQoMCwgMCwgYXJnX3NhZmVDb3VudCAtIGkpKTtcclxuICAgICAgICAgICAgYWRkU3RhZ2VUcmFuc2Zvcm0uQmFzZVRyYW5zZm9ybSA9IHRoaXMuZ2FtZU9iamVjdC50cmFuc2Zvcm07XHJcbiAgICAgICAgICAgIHZhciBiYXNlTWF0ZXJpYWxOYW1lRXggPSBcIlwiO1xyXG4gICAgICAgICAgICBpZiAoKGkgKyAxKSAlIDIgIT0gMCkge1xyXG4gICAgICAgICAgICAgICAgYmFzZU1hdGVyaWFsTmFtZUV4ID0gXCJfZFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBjYXJDb3VudCA9IGFyZ19zYWZlQ291bnQgLSBpID09IHRoaXMuc3RhcnRQb3MuejtcclxuICAgICAgICAgICAgdmFyIHNhZmUgPSBuZXcgU3RhZ2VQYXJ0c19TYWZlXzEuZGVmYXVsdCh0aGlzLCBcInNhZmVcIiArIGJhc2VNYXRlcmlhbE5hbWVFeCwgUmFuZG9tSGVscGVyXzEuZGVmYXVsdC5HZXRSYW5kb21JbnQoMCwgYXJnX3NhZmVDb3VudCAtIGkpLCBjYXJDb3VudCk7XHJcbiAgICAgICAgICAgIHRoaXMuYXJ5X3N0YWdlUHJ0cy5wdXNoKHNhZmUpO1xyXG4gICAgICAgICAgICB0aGlzLnBsYXlTY2VuZS5HZXRHYW1lTWFuYWdlcigpLkFkZEdhbWVPYmplY3QoXCJzYWZlQXJlYVwiLCBhZGRTdGFnZVRyYW5zZm9ybSwgXCJzYWZlQXJlYVwiLCBbc2FmZV0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBTdGFnZS5wcm90b3R5cGUuU3RhZ2VEZXN0cm95ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuYXJ5X3N0YWdlUHJ0c1swXS5EZXN0cm95KCk7XHJcbiAgICAgICAgdGhpcy5hcnlfc3RhZ2VQcnRzLnNwbGljZSgwLCAxKTtcclxuICAgIH07XHJcbiAgICBTdGFnZS5wcm90b3R5cGUuVXBkYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vdGhpcy5nYW1lT2JqZWN0LnRyYW5zZm9ybS5UcmFuc2xhdGVaKDAuMDEpO1xyXG4gICAgICAgIHRoaXMudWkuU2V0Q29tYm9NYXRlcih0aGlzLmZldmVyR2FnZSAvIDEwMCk7XHJcbiAgICAgICAgdGhpcy5mZXZlckdhZ2UgLT0gdGhpcy5nYWdlRG93blBhc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuZmV2ZXJHYWdlIDwgdGhpcy5nYWdlTWluTGluZSkge1xyXG4gICAgICAgICAgICB0aGlzLmZldmVyR2FnZSA9IHRoaXMuZ2FnZU1pbkxpbmU7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FnZURvd25QYXNlID0gMC4wO1xyXG4gICAgICAgICAgICB0aGlzLnBsYXllckNvbXBvbmVudC5GZXZlckVuZCgpO1xyXG4gICAgICAgICAgICB0aGlzLnVpLkZldmVyRW5kKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmZhZGVDb3VudCA9PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuUmVzZXQoKTtcclxuICAgICAgICAgICAgdGhpcy5mYWRlQ291bnQgPSAtMTtcclxuICAgICAgICAgICAgdGhpcy5zdGFydFdhaXQgPSAzMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5mYWRlQ291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmFkZUNvdW50LS07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnN0YXJ0V2FpdCA8PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyQ29tcG9uZW50LlNldENhbkNvbnRyb2xsKHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLmZhZGVDb3VudCA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5zdGFydFdhaXQtLTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgU3RhZ2UucHJvdG90eXBlLkZhaWxlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5mYWRlQ291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy51aS5TaG93UmV0cnkoKTtcclxuICAgICAgICBJbnB1dF8xLmRlZmF1bHQuQWRkS2V5RG93bkV2ZW50KHRoaXMsIFwic3RhZ2VfcmV0cnlcIiwgdHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXJDb21wb25lbnQuU2V0Q2FuQ29udHJvbGwoZmFsc2UpO1xyXG4gICAgICAgIHRoaXMuc3RhcnRXYWl0ID0gMzA7XHJcbiAgICB9O1xyXG4gICAgU3RhZ2UucHJvdG90eXBlLlRvU3RhcnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXJDb21wb25lbnQuVG9TdGFydCgpO1xyXG4gICAgfTtcclxuICAgIFN0YWdlLnByb3RvdHlwZS5SZXNldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLlN0YWdlQXJyYXlDcmVhdGUoKTtcclxuICAgICAgICB0aGlzLmdhbWVPYmplY3QudHJhbnNmb3JtLlNldFBvc2l0aW9uWigwKTtcclxuICAgICAgICB0aGlzLnBsYXllckNvbXBvbmVudC5SZXNldCgpO1xyXG4gICAgICAgIHRoaXMucGxheWVyLlVwZGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuY29pbiA9IDA7XHJcbiAgICAgICAgdGhpcy5hcnJpdmFsID0gMDtcclxuICAgICAgICB0aGlzLkRlc3Ryb3koKTtcclxuICAgICAgICB0aGlzLkNyZWF0ZSgpO1xyXG4gICAgICAgIHRoaXMudWkuU2V0Q29pbk51bSh0aGlzLmNvaW4pO1xyXG4gICAgICAgIHRoaXMudWkuU2V0QXJyaXZhbCh0aGlzLmFycml2YWwpO1xyXG4gICAgICAgIHRoaXMucGxheVNjZW5lLkdldENhbWVyYShcIm1haW5cIikudHJhbnNmb3JtLlBvc2l0aW9uID0gbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDEsIC02LCA0KTtcclxuICAgICAgICB0aGlzLmZldmVyR2FnZSA9IDA7XHJcbiAgICAgICAgdGhpcy5nYWdlRG93blBhc2UgPSAwLjI7XHJcbiAgICAgICAgdGhpcy5nYWdlVXBQYXNlID0gMTA7XHJcbiAgICAgICAgdGhpcy5nYWdlTWluTGluZSA9IDAuMDtcclxuICAgIH07XHJcbiAgICBTdGFnZS5wcm90b3R5cGUuT25LZXlEb3duID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBpZiAodGhpcy5mYWRlQ291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgSW5wdXRfMS5kZWZhdWx0LlJlbW92ZUtleURvd25FdmVudChcInN0YWdlX3JldHJ5XCIpO1xyXG4gICAgICAgIHRoaXMudWkuSGlkZVJldHJ5KCk7XHJcbiAgICAgICAgdGhpcy51aS5SZXNldCgpO1xyXG4gICAgICAgIHRoaXMudWkuSGlkZUluKCk7XHJcbiAgICAgICAgdGhpcy51aS5NYXNrSW4oKTtcclxuICAgICAgICB0aGlzLmZhZGVDb3VudCA9IDYwO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTdGFnZTtcclxufShDb21wb25lbnRfMS5kZWZhdWx0KSk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IFN0YWdlO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgQ29tcG9uZW50XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL0NvbXBvbmVudC9Db21wb25lbnRcIikpO1xyXG52YXIgU3RhZ2VQYXJ0cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhTdGFnZVBhcnRzLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gU3RhZ2VQYXJ0cygpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgIH1cclxuICAgIFN0YWdlUGFydHMucHJvdG90eXBlLkRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFN0YWdlUGFydHM7XHJcbn0oQ29tcG9uZW50XzEuZGVmYXVsdCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBTdGFnZVBhcnRzO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgTW9kZWxEcmF3Q29tcG9uZW50XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL0NvbXBvbmVudC9Nb2RlbERyYXdDb21wb25lbnRcIikpO1xyXG52YXIgVmVjdG9yM18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9NYXRoL1ZlY3RvcjNcIikpO1xyXG52YXIgUmFuZG9tSGVscGVyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL1Rvb2wvUmFuZG9tSGVscGVyXCIpKTtcclxudmFyIFRyYW5zZm9ybV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9UcmFuc2Zvcm1cIikpO1xyXG52YXIgQ29pbkNvbXBvbmVudF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL0NvaW5Db21wb25lbnRcIikpO1xyXG52YXIgRGFtYWdlT2JTdGFjbGVfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9EYW1hZ2VPYlN0YWNsZVwiKSk7XHJcbnZhciBSb3VuZFRyaXBfV2FpdF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1JvdW5kVHJpcF9XYWl0XCIpKTtcclxudmFyIFNpZ25hbENvbXBvbmVudF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1NpZ25hbENvbXBvbmVudFwiKSk7XHJcbnZhciBTdGFnZVBhcnRzXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vU3RhZ2VQYXJ0c1wiKSk7XHJcbnZhciBhcnlfcG9zaXRpb25zX3Jlc2V0ID0gWzAsIDEsIDIsIDMsIDQsIC00LCAtMywgLTIsIC0xLF07XHJcbnZhciByYW5kb21BcnlMZW5ndGggPSA5O1xyXG52YXIgYXJ5X3Bvc2l0aW9ucyA9IGFyeV9wb3NpdGlvbnNfcmVzZXQuc2xpY2UoKTtcclxudmFyIGFyeV9jb2luQ291bnQgPSBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAyLCAxLCAzXTtcclxudmFyIFN0YWdlUGFydHNfUmFpbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhTdGFnZVBhcnRzX1JhaWwsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBTdGFnZVBhcnRzX1JhaWwoYXJnX3N0YWdlLCBhcmdfbWF0ZXJpYWxOYW1lLCBhcmdfbWVzaE5hbWUsIGFyZ19zaXplKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5tZXNoTmFtZSA9IGFyZ19tZXNoTmFtZTtcclxuICAgICAgICBfdGhpcy5zaXplID0gYXJnX3NpemU7XHJcbiAgICAgICAgX3RoaXMuc3RhZ2UgPSBhcmdfc3RhZ2U7XHJcbiAgICAgICAgX3RoaXMuYmFzZU1hdGVyaWFsTmFtZSA9IGFyZ19tYXRlcmlhbE5hbWU7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgU3RhZ2VQYXJ0c19SYWlsLnByb3RvdHlwZS5PblNldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbW9kZWxUcmFuc2Zvcm0gPSBuZXcgVHJhbnNmb3JtXzEuZGVmYXVsdChuZXcgVmVjdG9yM18xLmRlZmF1bHQoMCwgMC41LCAwKSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAsIDAsIDApLCBuZXcgVmVjdG9yM18xLmRlZmF1bHQoOSwgMSwgMSkpO1xyXG4gICAgICAgIG1vZGVsVHJhbnNmb3JtLkJhc2VUcmFuc2Zvcm0gPSB0aGlzLmdhbWVPYmplY3QudHJhbnNmb3JtO1xyXG4gICAgICAgIHRoaXMuZ2FtZU9iamVjdC5TZXRDb21wb25lbnQobmV3IE1vZGVsRHJhd0NvbXBvbmVudF8xLmRlZmF1bHQoZmFsc2UsIFwiY3ViZV9wb3NpdGlvblwiLCB0aGlzLmJhc2VNYXRlcmlhbE5hbWUsIFwiYW1iaWVudFwiLCAxLCBmYWxzZSwgbnVsbCwgbW9kZWxUcmFuc2Zvcm0pKTtcclxuICAgICAgICB2YXIgZGlyZWN0aW9uID0gUmFuZG9tSGVscGVyXzEuZGVmYXVsdC5HZXRSYW5kb21JbnQoMCwgMSk7XHJcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA8IDEpIHtcclxuICAgICAgICAgICAgZGlyZWN0aW9uID0gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB0aW1lID0gUmFuZG9tSGVscGVyXzEuZGVmYXVsdC5HZXRSYW5kb21JbnQoMywgNSk7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRUaW1lID0gUmFuZG9tSGVscGVyXzEuZGVmYXVsdC5HZXRSYW5kb21JbnQoMSwgNCk7XHJcbiAgICAgICAgY3VycmVudFRpbWUgPSBNYXRoLm1pbih0aW1lLCBjdXJyZW50VGltZSkgKiAxMDA7XHJcbiAgICAgICAgdGltZSAqPSAyMDA7XHJcbiAgICAgICAgdmFyIHRyYWluVHJhbnMgPSBuZXcgVHJhbnNmb3JtXzEuZGVmYXVsdCgpO1xyXG4gICAgICAgIHRyYWluVHJhbnMuQmFzZVRyYW5zZm9ybSA9IHRoaXMuZ2FtZU9iamVjdC50cmFuc2Zvcm07XHJcbiAgICAgICAgdmFyIGRhbWFnZSA9IG5ldyBEYW1hZ2VPYlN0YWNsZV8xLmRlZmF1bHQodGhpcy5zdGFnZSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDE1LCAxLCAxKSk7XHJcbiAgICAgICAgdmFyIHRyYWluTW9kZWxUcmFuc2Zvcm0gPSBuZXcgVHJhbnNmb3JtXzEuZGVmYXVsdChuZXcgVmVjdG9yM18xLmRlZmF1bHQoMCwgMCwgMCksIG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgxODAsIDkwICogLWRpcmVjdGlvbiwgMCksIG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLjAwMjUsIDAuMDAyNSwgMC4wMDI1KSk7XHJcbiAgICAgICAgdHJhaW5Nb2RlbFRyYW5zZm9ybS5CYXNlVHJhbnNmb3JtID0gdHJhaW5UcmFucztcclxuICAgICAgICB2YXIgdHJhaW5Nb2RlbCA9IChuZXcgTW9kZWxEcmF3Q29tcG9uZW50XzEuZGVmYXVsdChmYWxzZSwgXCJub25UZXhjdWJlXCIsIFwicmVkXCIsIFwib25seU1hdGVyaWFsXCIsIDEsIGZhbHNlLCB0aGlzLm1lc2hOYW1lLCB0cmFpbk1vZGVsVHJhbnNmb3JtKSk7XHJcbiAgICAgICAgdmFyIHRyaXAgPSBuZXcgUm91bmRUcmlwX1dhaXRfMS5kZWZhdWx0KG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgyMCAqIGRpcmVjdGlvbiwgLTAuNSwgMCksIG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgtMjAgKiBkaXJlY3Rpb24sIC0wLjUsIDApLCA3MCwgMCwgdGltZSwgY3VycmVudFRpbWUsIHRydWUpO1xyXG4gICAgICAgIHRoaXMudHJhaW4gPSAodGhpcy5nYW1lT2JqZWN0Lk1hbmFnZXIuQWRkR2FtZU9iamVjdChcInRyYWluXCIsIHRyYWluVHJhbnMsIFwidHJhaW5cIiwgW2RhbWFnZSwgdHJpcCwgdHJhaW5Nb2RlbF0pKTtcclxuICAgICAgICB2YXIgc2lnbmFsID0gbmV3IFNpZ25hbENvbXBvbmVudF8xLmRlZmF1bHQodGltZSwgY3VycmVudFRpbWUsIHRpbWUgLSAxMjAsIDEyMCk7XHJcbiAgICAgICAgdGhpcy5nYW1lT2JqZWN0LlNldENvbXBvbmVudChzaWduYWwpO1xyXG4gICAgICAgIHZhciBjb2luQ291bnQgPSBhcnlfY29pbkNvdW50W1JhbmRvbUhlbHBlcl8xLmRlZmF1bHQuR2V0UmFuZG9tSW50KDAsIGFyeV9jb2luQ291bnQubGVuZ3RoIC0gMSldO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29pbkNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gUmFuZG9tSGVscGVyXzEuZGVmYXVsdC5HZXRSYW5kb21JbnQoMCwgcmFuZG9tQXJ5TGVuZ3RoIC0gKGkpKTtcclxuICAgICAgICAgICAgdmFyIGNvaW4gPSBuZXcgQ29pbkNvbXBvbmVudF8xLmRlZmF1bHQodGhpcy5zdGFnZSk7XHJcbiAgICAgICAgICAgIHZhciBjb2luVHJhbnMgPSBuZXcgVHJhbnNmb3JtXzEuZGVmYXVsdChuZXcgVmVjdG9yM18xLmRlZmF1bHQoYXJ5X3Bvc2l0aW9uc1twb3NpdGlvbl0sIC0wLjUsIDApKTtcclxuICAgICAgICAgICAgY29pblRyYW5zLkJhc2VUcmFuc2Zvcm0gPSB0aGlzLmdhbWVPYmplY3QudHJhbnNmb3JtO1xyXG4gICAgICAgICAgICB0aGlzLmdhbWVPYmplY3QuTWFuYWdlci5BZGRHYW1lT2JqZWN0KFwiY29pblwiLCBjb2luVHJhbnMsIFwiY29pblwiLCBbY29pbl0pO1xyXG4gICAgICAgICAgICBhcnlfcG9zaXRpb25zLnNwbGljZShwb3NpdGlvbiwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFyeV9wb3NpdGlvbnMgPSBhcnlfcG9zaXRpb25zX3Jlc2V0LnNsaWNlKCk7XHJcbiAgICB9O1xyXG4gICAgU3RhZ2VQYXJ0c19SYWlsLnByb3RvdHlwZS5EZXN0cm95ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuc3RhZ2UgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZ2FtZU9iamVjdC5EZWFkKCk7XHJcbiAgICAgICAgdGhpcy50cmFpbi5EZWFkKCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFN0YWdlUGFydHNfUmFpbDtcclxufShTdGFnZVBhcnRzXzEuZGVmYXVsdCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBTdGFnZVBhcnRzX1JhaWw7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBNb2RlbERyYXdDb21wb25lbnRfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vQ29tcG9uZW50L01vZGVsRHJhd0NvbXBvbmVudFwiKSk7XHJcbnZhciBWZWN0b3IzXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL01hdGgvVmVjdG9yM1wiKSk7XHJcbnZhciBSYW5kb21IZWxwZXJfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vVG9vbC9SYW5kb21IZWxwZXJcIikpO1xyXG52YXIgVHJhbnNmb3JtXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL1RyYW5zZm9ybVwiKSk7XHJcbnZhciBDb2luQ29tcG9uZW50XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vQ29pbkNvbXBvbmVudFwiKSk7XHJcbnZhciBEYW1hZ2VPYlN0YWNsZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL0RhbWFnZU9iU3RhY2xlXCIpKTtcclxudmFyIFJvdW5kVHJpcF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1JvdW5kVHJpcFwiKSk7XHJcbnZhciBTdGFnZVBhcnRzXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vU3RhZ2VQYXJ0c1wiKSk7XHJcbnZhciBhcnlfcG9zaXRpb25zX3Jlc2V0ID0gWzAsIDEsIDIsIDMsIDQsIC00LCAtMywgLTIsIC0xLF07XHJcbnZhciByYW5kb21BcnlMZW5ndGggPSA5O1xyXG52YXIgYXJ5X3Bvc2l0aW9ucyA9IGFyeV9wb3NpdGlvbnNfcmVzZXQuc2xpY2UoKTtcclxudmFyIGFyeV9jb2luQ291bnQgPSBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMiwgMV07XHJcbnZhciBTdGFnZVBhcnRzX1JvYWQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoU3RhZ2VQYXJ0c19Sb2FkLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gU3RhZ2VQYXJ0c19Sb2FkKGFyZ19zdGFnZSwgYXJnX21hdGVyaWFsTmFtZSwgYXJnX21lc2hOYW1lLCBhcmdfc2l6ZSwgYXJnX3JvdGF0ZSwgYXJnX2NhckNvdW50KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5tZXNoTmFtZSA9IGFyZ19tZXNoTmFtZTtcclxuICAgICAgICBfdGhpcy5zaXplID0gYXJnX3NpemU7XHJcbiAgICAgICAgX3RoaXMuY2FyQ291bnQgPSBhcmdfY2FyQ291bnQ7XHJcbiAgICAgICAgX3RoaXMuYXJ5X2NhcnMgPSBuZXcgQXJyYXkoX3RoaXMuY2FyQ291bnQpO1xyXG4gICAgICAgIF90aGlzLnJvdGF0ZSA9IGFyZ19yb3RhdGU7XHJcbiAgICAgICAgX3RoaXMuc3RhZ2UgPSBhcmdfc3RhZ2U7XHJcbiAgICAgICAgX3RoaXMuYmFzZU1hdGVyaWFsTmFtZSA9IGFyZ19tYXRlcmlhbE5hbWU7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgU3RhZ2VQYXJ0c19Sb2FkLnByb3RvdHlwZS5PblNldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbW9kZWxUcmFuc2Zvcm0gPSBuZXcgVHJhbnNmb3JtXzEuZGVmYXVsdChuZXcgVmVjdG9yM18xLmRlZmF1bHQoMCwgMC41LCAwKSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAsIDAsIDApLCBuZXcgVmVjdG9yM18xLmRlZmF1bHQoOSwgMSwgMSkpO1xyXG4gICAgICAgIG1vZGVsVHJhbnNmb3JtLkJhc2VUcmFuc2Zvcm0gPSB0aGlzLmdhbWVPYmplY3QudHJhbnNmb3JtO1xyXG4gICAgICAgIHRoaXMuZ2FtZU9iamVjdC5TZXRDb21wb25lbnQobmV3IE1vZGVsRHJhd0NvbXBvbmVudF8xLmRlZmF1bHQoZmFsc2UsIFwiY3ViZV9wb3NpdGlvblwiLCB0aGlzLmJhc2VNYXRlcmlhbE5hbWUsIFwiYW1iaWVudFwiLCAxLCBmYWxzZSwgbnVsbCwgbW9kZWxUcmFuc2Zvcm0pKTtcclxuICAgICAgICB2YXIgZGlyZWN0aW9uID0gUmFuZG9tSGVscGVyXzEuZGVmYXVsdC5HZXRSYW5kb21JbnQoMCwgMSk7XHJcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA8IDEpIHtcclxuICAgICAgICAgICAgZGlyZWN0aW9uID0gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB0aW1lID0gUmFuZG9tSGVscGVyXzEuZGVmYXVsdC5HZXRSYW5kb21JbnQoMywgNik7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNhckNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGNhclRyYW5zID0gbmV3IFRyYW5zZm9ybV8xLmRlZmF1bHQobmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAsIDAsIDApLCBuZXcgVmVjdG9yM18xLmRlZmF1bHQoMCwgMCwgMCkpO1xyXG4gICAgICAgICAgICBjYXJUcmFucy5CYXNlVHJhbnNmb3JtID0gdGhpcy5nYW1lT2JqZWN0LnRyYW5zZm9ybTtcclxuICAgICAgICAgICAgdmFyIGRhbWFnZSA9IG5ldyBEYW1hZ2VPYlN0YWNsZV8xLmRlZmF1bHQodGhpcy5zdGFnZSwgdGhpcy5zaXplKTtcclxuICAgICAgICAgICAgdmFyIGNhck1vZGVsVHJhbnNmb3JtID0gbmV3IFRyYW5zZm9ybV8xLmRlZmF1bHQobmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAsIDAsIDApLCBuZXcgVmVjdG9yM18xLmRlZmF1bHQoMTgwLCA5MCAqIGRpcmVjdGlvbiwgMCkuQWRkX2IodGhpcy5yb3RhdGUpLCBuZXcgVmVjdG9yM18xLmRlZmF1bHQoMC4wMDI1LCAwLjAwMjUsIDAuMDAyNSkpO1xyXG4gICAgICAgICAgICBjYXJNb2RlbFRyYW5zZm9ybS5CYXNlVHJhbnNmb3JtID0gY2FyVHJhbnM7XHJcbiAgICAgICAgICAgIHZhciBjYXJNb2RlbCA9IChuZXcgTW9kZWxEcmF3Q29tcG9uZW50XzEuZGVmYXVsdChmYWxzZSwgXCJub25UZXhjdWJlXCIsIFwicmVkXCIsIFwib25seU1hdGVyaWFsXCIsIDEsIGZhbHNlLCB0aGlzLm1lc2hOYW1lLCBjYXJNb2RlbFRyYW5zZm9ybSkpO1xyXG4gICAgICAgICAgICB2YXIgdHJpcCA9IG5ldyBSb3VuZFRyaXBfMS5kZWZhdWx0KG5ldyBWZWN0b3IzXzEuZGVmYXVsdCg4ICogZGlyZWN0aW9uLCAtMC41LCAwKSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KC04ICogZGlyZWN0aW9uLCAtMC41LCAwKSwgNTAgKiB0aW1lLCA1MCAqIFJhbmRvbUhlbHBlcl8xLmRlZmF1bHQuR2V0UmFuZG9tSW50KDAsIHRpbWUgLSAxKSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMuYXJ5X2NhcnMucHVzaCh0aGlzLmdhbWVPYmplY3QuTWFuYWdlci5BZGRHYW1lT2JqZWN0KFwiY2FyXCIsIGNhclRyYW5zLCBcImNhclwiLCBbZGFtYWdlLCB0cmlwLCBjYXJNb2RlbF0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGNvaW5Db3VudCA9IGFyeV9jb2luQ291bnRbUmFuZG9tSGVscGVyXzEuZGVmYXVsdC5HZXRSYW5kb21JbnQoMCwgYXJ5X2NvaW5Db3VudC5sZW5ndGggLSAxKV07XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2luQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgcG9zaXRpb24gPSBSYW5kb21IZWxwZXJfMS5kZWZhdWx0LkdldFJhbmRvbUludCgwLCByYW5kb21BcnlMZW5ndGggLSAoaSkpO1xyXG4gICAgICAgICAgICB2YXIgY29pbiA9IG5ldyBDb2luQ29tcG9uZW50XzEuZGVmYXVsdCh0aGlzLnN0YWdlKTtcclxuICAgICAgICAgICAgdmFyIGNvaW5UcmFucyA9IG5ldyBUcmFuc2Zvcm1fMS5kZWZhdWx0KG5ldyBWZWN0b3IzXzEuZGVmYXVsdChhcnlfcG9zaXRpb25zW3Bvc2l0aW9uXSwgLTAuNSwgMCkpO1xyXG4gICAgICAgICAgICBjb2luVHJhbnMuQmFzZVRyYW5zZm9ybSA9IHRoaXMuZ2FtZU9iamVjdC50cmFuc2Zvcm07XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZU9iamVjdC5NYW5hZ2VyLkFkZEdhbWVPYmplY3QoXCJjb2luXCIsIGNvaW5UcmFucywgXCJjb2luXCIsIFtjb2luXSk7XHJcbiAgICAgICAgICAgIGFyeV9wb3NpdGlvbnMuc3BsaWNlKHBvc2l0aW9uLCAxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYXJ5X3Bvc2l0aW9ucyA9IGFyeV9wb3NpdGlvbnNfcmVzZXQuc2xpY2UoKTtcclxuICAgIH07XHJcbiAgICBTdGFnZVBhcnRzX1JvYWQucHJvdG90eXBlLkRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5zdGFnZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5nYW1lT2JqZWN0LkRlYWQoKTtcclxuICAgICAgICB0aGlzLmFyeV9jYXJzLmZvckVhY2goZnVuY3Rpb24gKGNhcikgeyByZXR1cm4gY2FyLkRlYWQoKTsgfSk7XHJcbiAgICAgICAgdGhpcy5hcnlfY2Fycy5sZW5ndGggPSAwO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTdGFnZVBhcnRzX1JvYWQ7XHJcbn0oU3RhZ2VQYXJ0c18xLmRlZmF1bHQpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gU3RhZ2VQYXJ0c19Sb2FkO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgTW9kZWxEcmF3Q29tcG9uZW50XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL0NvbXBvbmVudC9Nb2RlbERyYXdDb21wb25lbnRcIikpO1xyXG52YXIgVmVjdG9yM18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9NYXRoL1ZlY3RvcjNcIikpO1xyXG52YXIgUHJpbWl0aXZlVHlwZV8xID0gcmVxdWlyZShcIi4uL1BhcnRzL0NvbGxpc2lvbi9QcmltaXRpdmVUeXBlXCIpO1xyXG52YXIgUmFuZG9tSGVscGVyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL1Rvb2wvUmFuZG9tSGVscGVyXCIpKTtcclxudmFyIFRyYW5zZm9ybV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9UcmFuc2Zvcm1cIikpO1xyXG52YXIgQ29pbkNvbXBvbmVudF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL0NvaW5Db21wb25lbnRcIikpO1xyXG52YXIgT2JzdGFjbGVDb21wb25lbnRfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9PYnN0YWNsZUNvbXBvbmVudFwiKSk7XHJcbnZhciBTdGFnZVBhcnRzXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vU3RhZ2VQYXJ0c1wiKSk7XHJcbnZhciBhcnlfbWVzaGVzID0gW1wic2FuZ29cIl07XHJcbnZhciBhcnlfZGVjbyA9IFtcInNjYWxsb3BzXCIsIFwic2Vhd2VlZFwiXTtcclxudmFyIGFyeV9wb3NpdGlvbnNfcmVzZXQgPSBbMCwgMSwgMiwgMywgNCwgNSwgNiwgLTYsIC01LCAtNCwgLTMsIC0yLCAtMSxdO1xyXG52YXIgcmFuZG9tQXJ5TGVuZ3RoID0gMTI7XHJcbnZhciBhcnlfZGVjb1kgPSBbMCwgLTAuNV07XHJcbnZhciBhcnlfcG9zaXRpb25zID0gYXJ5X3Bvc2l0aW9uc19yZXNldC5zbGljZSgpO1xyXG52YXIgYXJ5X2NvaW5Db3VudCA9IFswLCAwLCAwLCAxXTtcclxudmFyIFN0YWdlUGFydHNfU2FmZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhTdGFnZVBhcnRzX1NhZmUsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBTdGFnZVBhcnRzX1NhZmUoYXJnX3N0YWdlLCBhcmdfbWF0ZXJpYWxOYW1lLCBhcmdfY2FyQ291bnQsIGlzU3RhcnQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xyXG4gICAgICAgIGlmIChpc1N0YXJ0KSB7XHJcbiAgICAgICAgICAgIGFyeV9wb3NpdGlvbnNbMF0gPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfdGhpcy5jYXJDb3VudCA9IGFyZ19jYXJDb3VudDtcclxuICAgICAgICBfdGhpcy5hcnlfb2JzdGFjbGVzID0gbmV3IEFycmF5KF90aGlzLmNhckNvdW50KTtcclxuICAgICAgICBfdGhpcy5zdGFnZSA9IGFyZ19zdGFnZTtcclxuICAgICAgICBfdGhpcy5iYXNlTWF0ZXJpYWxOYW1lID0gYXJnX21hdGVyaWFsTmFtZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBTdGFnZVBhcnRzX1NhZmUucHJvdG90eXBlLk9uU2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBtb2RlbFRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm1fMS5kZWZhdWx0KG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLjUsIDApLCBuZXcgVmVjdG9yM18xLmRlZmF1bHQoMCwgMCwgMCksIG5ldyBWZWN0b3IzXzEuZGVmYXVsdCg5LCAxLCAxKSk7XHJcbiAgICAgICAgbW9kZWxUcmFuc2Zvcm0uQmFzZVRyYW5zZm9ybSA9IHRoaXMuZ2FtZU9iamVjdC50cmFuc2Zvcm07XHJcbiAgICAgICAgdGhpcy5nYW1lT2JqZWN0LlNldENvbXBvbmVudChuZXcgTW9kZWxEcmF3Q29tcG9uZW50XzEuZGVmYXVsdChmYWxzZSwgXCJjdWJlX3Bvc2l0aW9uXCIsIHRoaXMuYmFzZU1hdGVyaWFsTmFtZSwgXCJhbWJpZW50XCIsIDEsIGZhbHNlLCBudWxsLCBtb2RlbFRyYW5zZm9ybSkpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jYXJDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IFJhbmRvbUhlbHBlcl8xLmRlZmF1bHQuR2V0UmFuZG9tSW50KDAsIHJhbmRvbUFyeUxlbmd0aCAtIGkpO1xyXG4gICAgICAgICAgICB2YXIgb2JzdGFjbGVUcmFucyA9IG5ldyBUcmFuc2Zvcm1fMS5kZWZhdWx0KG5ldyBWZWN0b3IzXzEuZGVmYXVsdChhcnlfcG9zaXRpb25zW3Bvc2l0aW9uXSwgLTAuNSwgMCkpO1xyXG4gICAgICAgICAgICBhcnlfcG9zaXRpb25zLnNwbGljZShwb3NpdGlvbiwgMSk7XHJcbiAgICAgICAgICAgIG9ic3RhY2xlVHJhbnMuQmFzZVRyYW5zZm9ybSA9IHRoaXMuZ2FtZU9iamVjdC50cmFuc2Zvcm07XHJcbiAgICAgICAgICAgIHZhciBtb2RlbFRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm1fMS5kZWZhdWx0KG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLjEsIDApLCBuZXcgVmVjdG9yM18xLmRlZmF1bHQoMTgwLCA5MCAqIFJhbmRvbUhlbHBlcl8xLmRlZmF1bHQuR2V0UmFuZG9tSW50KDAsIDMpLCAwKSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAuMDAyNSwgMC4wMDI1LCAwLjAwMjUpKTtcclxuICAgICAgICAgICAgbW9kZWxUcmFuc2Zvcm0uQmFzZVRyYW5zZm9ybSA9IG9ic3RhY2xlVHJhbnM7XHJcbiAgICAgICAgICAgIHZhciBkcmF3Q29tcCA9IChuZXcgTW9kZWxEcmF3Q29tcG9uZW50XzEuZGVmYXVsdChmYWxzZSwgXCJub25UZXhjdWJlXCIsIFwicmVkXCIsIFwib25seU1hdGVyaWFsXCIsIDEsIGZhbHNlLCBhcnlfbWVzaGVzWzBdLCBtb2RlbFRyYW5zZm9ybSkpO1xyXG4gICAgICAgICAgICB2YXIgb2JzdGFjbGUgPSBuZXcgT2JzdGFjbGVDb21wb25lbnRfMS5kZWZhdWx0KFByaW1pdGl2ZVR5cGVfMS5QcmltaXRpdmVUeXBlLmJveF9BQUJCLCBuZXcgVmVjdG9yM18xLmRlZmF1bHQoMSwgMSwgMSksIHRoaXMuc3RhZ2UpO1xyXG4gICAgICAgICAgICB2YXIgb2JzID0gdGhpcy5nYW1lT2JqZWN0Lk1hbmFnZXIuQWRkR2FtZU9iamVjdChcIm9ic3RhY2xlXCIsIG9ic3RhY2xlVHJhbnMsIFwib2JzdGFjbGVcIiwgW29ic3RhY2xlLCBkcmF3Q29tcF0pO1xyXG4gICAgICAgICAgICB0aGlzLmFyeV9vYnN0YWNsZXMucHVzaChvYnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZGVjb0NvdW50ID0gUmFuZG9tSGVscGVyXzEuZGVmYXVsdC5HZXRSYW5kb21JbnQoMSwgNCk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkZWNvQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgcG9zaXRpb24gPSBSYW5kb21IZWxwZXJfMS5kZWZhdWx0LkdldFJhbmRvbUludCgwLCByYW5kb21BcnlMZW5ndGggLSAoaSArIHRoaXMuY2FyQ291bnQpKTtcclxuICAgICAgICAgICAgdmFyIGRlY29OdW0gPSBSYW5kb21IZWxwZXJfMS5kZWZhdWx0LkdldFJhbmRvbUludCgwLCAxKTtcclxuICAgICAgICAgICAgdmFyIG9ic3RhY2xlVHJhbnMgPSBuZXcgVHJhbnNmb3JtXzEuZGVmYXVsdChuZXcgVmVjdG9yM18xLmRlZmF1bHQoYXJ5X3Bvc2l0aW9uc1twb3NpdGlvbl0sIGFyeV9kZWNvWVtkZWNvTnVtXSwgMCkpO1xyXG4gICAgICAgICAgICBhcnlfcG9zaXRpb25zLnNwbGljZShwb3NpdGlvbiwgMSk7XHJcbiAgICAgICAgICAgIG9ic3RhY2xlVHJhbnMuQmFzZVRyYW5zZm9ybSA9IHRoaXMuZ2FtZU9iamVjdC50cmFuc2Zvcm07XHJcbiAgICAgICAgICAgIHZhciBtb2RlbFRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm1fMS5kZWZhdWx0KG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLCAwKSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAsIDkwICogUmFuZG9tSGVscGVyXzEuZGVmYXVsdC5HZXRSYW5kb21JbnQoMCwgMyksIDApLCBuZXcgVmVjdG9yM18xLmRlZmF1bHQoMC4wMDI1LCAwLjAwMjUsIDAuMDAyNSkpO1xyXG4gICAgICAgICAgICBtb2RlbFRyYW5zZm9ybS5CYXNlVHJhbnNmb3JtID0gb2JzdGFjbGVUcmFucztcclxuICAgICAgICAgICAgdmFyIGRyYXdDb21wID0gKG5ldyBNb2RlbERyYXdDb21wb25lbnRfMS5kZWZhdWx0KGZhbHNlLCBcIm5vblRleGN1YmVcIiwgXCJyZWRcIiwgXCJvbmx5TWF0ZXJpYWxcIiwgMSwgZmFsc2UsIGFyeV9kZWNvW2RlY29OdW1dLCBtb2RlbFRyYW5zZm9ybSkpO1xyXG4gICAgICAgICAgICB0aGlzLmdhbWVPYmplY3QuU2V0Q29tcG9uZW50KGRyYXdDb21wKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGNvaW5Db3VudCA9IGFyeV9jb2luQ291bnRbUmFuZG9tSGVscGVyXzEuZGVmYXVsdC5HZXRSYW5kb21JbnQoMCwgMyldO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29pbkNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gUmFuZG9tSGVscGVyXzEuZGVmYXVsdC5HZXRSYW5kb21JbnQoMCwgcmFuZG9tQXJ5TGVuZ3RoIC0gKGkgKyB0aGlzLmNhckNvdW50ICsgZGVjb0NvdW50KSk7XHJcbiAgICAgICAgICAgIHZhciBjb2luID0gbmV3IENvaW5Db21wb25lbnRfMS5kZWZhdWx0KHRoaXMuc3RhZ2UpO1xyXG4gICAgICAgICAgICB2YXIgY29pblRyYW5zID0gbmV3IFRyYW5zZm9ybV8xLmRlZmF1bHQobmV3IFZlY3RvcjNfMS5kZWZhdWx0KGFyeV9wb3NpdGlvbnNbcG9zaXRpb25dLCAtMC41LCAwKSk7XHJcbiAgICAgICAgICAgIGNvaW5UcmFucy5CYXNlVHJhbnNmb3JtID0gdGhpcy5nYW1lT2JqZWN0LnRyYW5zZm9ybTtcclxuICAgICAgICAgICAgdGhpcy5nYW1lT2JqZWN0Lk1hbmFnZXIuQWRkR2FtZU9iamVjdChcImNvaW5cIiwgY29pblRyYW5zLCBcImNvaW5cIiwgW2NvaW5dKTtcclxuICAgICAgICAgICAgYXJ5X3Bvc2l0aW9ucy5zcGxpY2UocG9zaXRpb24sIDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhcnlfcG9zaXRpb25zID0gYXJ5X3Bvc2l0aW9uc19yZXNldC5zbGljZSgpO1xyXG4gICAgfTtcclxuICAgIFN0YWdlUGFydHNfU2FmZS5wcm90b3R5cGUuRGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnN0YWdlID0gbnVsbDtcclxuICAgICAgICB0aGlzLmdhbWVPYmplY3QuRGVhZCgpO1xyXG4gICAgICAgIHRoaXMuYXJ5X29ic3RhY2xlcy5mb3JFYWNoKGZ1bmN0aW9uIChvYnN0YWNsZSkgeyBvYnN0YWNsZS5EZWFkKCk7IH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTdGFnZVBhcnRzX1NhZmU7XHJcbn0oU3RhZ2VQYXJ0c18xLmRlZmF1bHQpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gU3RhZ2VQYXJ0c19TYWZlO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgR2FtZU9iamVjdElETWFuYWdlcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9QYXJ0cy9HYW1lT2JqZWN0SURNYW5hZ2VyXCIpKTtcclxudmFyIEdhbWVPYmplY3QgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBHYW1lT2JqZWN0KGFyZ19tYW5hZ2VyLCBhcmdfbmFtZSwgYXJnX3RyYW5zZm9ybSwgYXJnX2lkTmFtZSwgYXJnX2FyeV9jb21wb25lbnRzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmlzQ29tcGxleEhpdCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtID0gYXJnX3RyYW5zZm9ybTtcclxuICAgICAgICB0aGlzLkNvbGxpc2lvbiA9IHRoaXMuQ29sbGlzaW9uX1NpbXBsZTtcclxuICAgICAgICB0aGlzLm5ld0NvbXBvbmVudHMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICB0aGlzLmlzUmVtb3ZlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gYXJnX25hbWU7XHJcbiAgICAgICAgdGhpcy5tYW5hZ2VyID0gYXJnX21hbmFnZXI7XHJcbiAgICAgICAgaWYgKGFyZ19hcnlfY29tcG9uZW50cykge1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudHMgPSBhcmdfYXJ5X2NvbXBvbmVudHM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnRzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgdGhpcy5vYmplY3RJRCA9IEdhbWVPYmplY3RJRE1hbmFnZXJfMS5kZWZhdWx0LkdldElEKGFyZ19pZE5hbWUpO1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChjb21wb25lbnQpIHsgcmV0dXJuIGNvbXBvbmVudC5TZXQoX3RoaXMpOyB9KTtcclxuICAgICAgICB0aGlzLmFyeV9jdXJyZW50SGl0T2JqZWN0cyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIHRoaXMuYXJ5X2JlZkhpdE9iamVjdHMgPSBuZXcgQXJyYXkoKTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShHYW1lT2JqZWN0LnByb3RvdHlwZSwgXCJJc1JlbW92ZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmlzUmVtb3ZlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShHYW1lT2JqZWN0LnByb3RvdHlwZSwgXCJOYW1lXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubmFtZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKGFyZ19uYW1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWFuYWdlci5VblJlZ2lzdE9iamVjdCh0aGlzLm5hbWUpO1xyXG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBhcmdfbmFtZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoR2FtZU9iamVjdC5wcm90b3R5cGUsIFwiTWFuYWdlclwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1hbmFnZXI7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEdhbWVPYmplY3QucHJvdG90eXBlLCBcIkNvbXBsZXhIaXRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pc0NvbXBsZXhIaXQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgICAgICB0aGlzLmlzQ29tcGxleEhpdCA9IG90aGVyO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0NvbXBsZXhIaXQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuQ29sbGlzaW9uID0gdGhpcy5Db2xsaXNpb25fQ29tcGxleDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuQ29sbGlzaW9uID0gdGhpcy5Db2xsaXNpb25fU2ltcGxlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEdhbWVPYmplY3QucHJvdG90eXBlLCBcIkdhbWVUaW1lXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuTWFuYWdlci5TY2VuZS5HZXRTY2VuZU1hbmFnZXIoKS5HZXRHYW1lVGltZSgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIEdhbWVPYmplY3QucHJvdG90eXBlLlJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudHMuZm9yRWFjaChmdW5jdGlvbiAoY29tcG9uZW50KSB7IHJldHVybiBjb21wb25lbnQuUmVtb3ZlKCk7IH0pO1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50cy5sZW5ndGggPSAwO1xyXG4gICAgICAgIHRoaXMubWFuYWdlci5VblJlZ2lzdE9iamVjdCh0aGlzLm5hbWUpO1xyXG4gICAgICAgIHRoaXMubWFuYWdlciA9IG51bGw7XHJcbiAgICB9O1xyXG4gICAgR2FtZU9iamVjdC5wcm90b3R5cGUuUmVsZWFzZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudHMuZm9yRWFjaChmdW5jdGlvbiAoY29tcG9uZW50KSB7IHJldHVybiBjb21wb25lbnQuUmVtb3ZlKCk7IH0pO1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50cy5sZW5ndGggPSAwO1xyXG4gICAgICAgIHRoaXMubWFuYWdlciA9IG51bGw7XHJcbiAgICB9O1xyXG4gICAgR2FtZU9iamVjdC5wcm90b3R5cGUuRGVhZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmlzUmVtb3ZlID0gdHJ1ZTtcclxuICAgIH07XHJcbiAgICBHYW1lT2JqZWN0LnByb3RvdHlwZS5HZXRSZW5kZXJlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tYW5hZ2VyLlNjZW5lLkdldFJlbmRlcmVyKCk7XHJcbiAgICB9O1xyXG4gICAgR2FtZU9iamVjdC5wcm90b3R5cGUuR2V0Q29sbGlzaW9uTWFuYWdlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tYW5hZ2VyLlNjZW5lLkdldENvbGxpc2lvbk1hbmFnZXIoKTtcclxuICAgIH07XHJcbiAgICBHYW1lT2JqZWN0LnByb3RvdHlwZS5VcGRhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5Db2xsaXNpb24oKTtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudHMgPSB0aGlzLmNvbXBvbmVudHMuY29uY2F0KHRoaXMubmV3Q29tcG9uZW50cyk7XHJcbiAgICAgICAgdGhpcy5uZXdDb21wb25lbnRzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRzLmZvckVhY2goZnVuY3Rpb24gKGNvbXBvbmVudCkgeyByZXR1cm4gY29tcG9uZW50LlVwZGF0ZSgpOyB9KTtcclxuICAgICAgICB2YXIgcmVtb3ZlID0gdGhpcy5jb21wb25lbnRzLmZpbHRlcihmdW5jdGlvbiAoY29tcG9uZW50KSB7IHJldHVybiBjb21wb25lbnQuSXNSZW1vdmU7IH0pO1xyXG4gICAgICAgIHJlbW92ZS5mb3JFYWNoKGZ1bmN0aW9uIChyZW1vdmUpIHsgcmV0dXJuIHJlbW92ZS5SZW1vdmUoKTsgfSk7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRzID0gdGhpcy5jb21wb25lbnRzLmZpbHRlcihmdW5jdGlvbiAoY29tcG9uZW50KSB7IHJldHVybiAhY29tcG9uZW50LklzUmVtb3ZlOyB9KTtcclxuICAgIH07XHJcbiAgICBHYW1lT2JqZWN0LnByb3RvdHlwZS5Jbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgfTtcclxuICAgIEdhbWVPYmplY3QucHJvdG90eXBlLlNldENvbXBvbmVudCA9IGZ1bmN0aW9uIChhcmdfY29tcG9uZW50KSB7XHJcbiAgICAgICAgYXJnX2NvbXBvbmVudC5TZXQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5uZXdDb21wb25lbnRzLnB1c2goYXJnX2NvbXBvbmVudCk7XHJcbiAgICAgICAgcmV0dXJuIGFyZ19jb21wb25lbnQ7XHJcbiAgICB9O1xyXG4gICAgR2FtZU9iamVjdC5wcm90b3R5cGUuR2V0Q29tcG9uZW50ID0gZnVuY3Rpb24gKGFyZ19zZXJjaE5hbWUsIGFyZ19jb3VudCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudHMuZmlsdGVyKGZ1bmN0aW9uIChjb21wb25lbnQpIHsgcmV0dXJuIGNvbXBvbmVudC5HZXRDb21wb25lbnROYW1lKCkgPT0gYXJnX3NlcmNoTmFtZTsgfSlbYXJnX2NvdW50XTtcclxuICAgIH07XHJcbiAgICBHYW1lT2JqZWN0LnByb3RvdHlwZS5IaXQgPSBmdW5jdGlvbiAoYXJnX29iamVjdCkge1xyXG4gICAgICAgIHRoaXMuYXJ5X2N1cnJlbnRIaXRPYmplY3RzLnB1c2goYXJnX29iamVjdCk7XHJcbiAgICB9O1xyXG4gICAgR2FtZU9iamVjdC5wcm90b3R5cGUuQ29sbGlzaW9uX1NpbXBsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuYXJ5X2N1cnJlbnRIaXRPYmplY3RzLmZvckVhY2goZnVuY3Rpb24gKG9iaikgeyBfdGhpcy5jb21wb25lbnRzLmZvckVhY2goZnVuY3Rpb24gKGNvbXBvbmVudCkgeyByZXR1cm4gY29tcG9uZW50Lk9uQ29sbGlzaW9uKG9iaik7IH0pOyB9KTtcclxuICAgICAgICB0aGlzLmFyeV9jdXJyZW50SGl0T2JqZWN0cy5sZW5ndGggPSAwO1xyXG4gICAgfTtcclxuICAgIEdhbWVPYmplY3QucHJvdG90eXBlLkNvbGxpc2lvbl9Db21wbGV4ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5hcnlfY3VycmVudEhpdE9iamVjdHMuZm9yRWFjaChmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5hcnlfYmVmSGl0T2JqZWN0cy5pbmNsdWRlcyhvYmopKVxyXG4gICAgICAgICAgICAgICAgX3RoaXMuY29tcG9uZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChjb21wb25lbnQpIHsgcmV0dXJuIGNvbXBvbmVudC5PbkNvbGxpc2lvbihvYmopOyB9KTtcclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5jb21wb25lbnRzLmZvckVhY2goZnVuY3Rpb24gKGNvbXBvbmVudCkgeyByZXR1cm4gY29tcG9uZW50Lk9uQ29sbGlzaW9uRW50ZXIob2JqKTsgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmFyeV9iZWZIaXRPYmplY3RzLmZvckVhY2goZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgICAgICBpZiAoIV90aGlzLmFyeV9jdXJyZW50SGl0T2JqZWN0cy5pbmNsdWRlcyhvYmopKVxyXG4gICAgICAgICAgICAgICAgX3RoaXMuY29tcG9uZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChjb21wb25lbnQpIHsgcmV0dXJuIGNvbXBvbmVudC5PbkNvbGxpc2lvblJlbGVhc2Uob2JqKTsgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5hcnlfYmVmSGl0T2JqZWN0cyA9IHRoaXMuYXJ5X2N1cnJlbnRIaXRPYmplY3RzO1xyXG4gICAgICAgIHRoaXMuYXJ5X2N1cnJlbnRIaXRPYmplY3RzID0gbmV3IEFycmF5KCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEdhbWVPYmplY3Q7XHJcbn0oKSk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IEdhbWVPYmplY3Q7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBHYW1lT2JqZWN0XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vR2FtZU9iamVjdFwiKSk7XHJcbnZhciBUcmFuc2Zvcm1fMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vVHJhbnNmb3JtXCIpKTtcclxudmFyIEdhbWVPYmplY3RNYW5hZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gR2FtZU9iamVjdE1hbmFnZXIoYXJnX3NjZW5lKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lT2JqZWN0cyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIHRoaXMubmV3R2FtZU9iamVjdHMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICB0aGlzLm1hcF9nYW1lT2JqZWN0cyA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLnNjZW5lID0gYXJnX3NjZW5lO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEdhbWVPYmplY3RNYW5hZ2VyLnByb3RvdHlwZSwgXCJTY2VuZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNjZW5lO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIEdhbWVPYmplY3RNYW5hZ2VyLnByb3RvdHlwZS5BZGRHYW1lT2JqZWN0ID0gZnVuY3Rpb24gKGFyZ19uYW1lLCBhcmdfdHJhbnNmb3JtLCBhcmdfaWROYW1lLCBhcmdfYXJ5X2NvbXBvbmV0cykge1xyXG4gICAgICAgIHZhciBuZXdPYmo7XHJcbiAgICAgICAgaWYgKHRoaXMubWFwX2dhbWVPYmplY3RzW2FyZ19uYW1lXSkge1xyXG4gICAgICAgICAgICB2YXIgbnVtID0gMTtcclxuICAgICAgICAgICAgdmFyIG5hbWUgPSBhcmdfbmFtZSArIFwiX1wiICsgbnVtO1xyXG4gICAgICAgICAgICB3aGlsZSAodGhpcy5tYXBfZ2FtZU9iamVjdHNbbmFtZV0pIHtcclxuICAgICAgICAgICAgICAgIG51bSsrO1xyXG4gICAgICAgICAgICAgICAgbmFtZSA9IGFyZ19uYW1lICsgXCJfXCIgKyBudW07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXJnX25hbWUgPSBuYW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWFyZ19pZE5hbWUpIHtcclxuICAgICAgICAgICAgYXJnX2lkTmFtZSA9IFwibm9uZVwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYXJnX3RyYW5zZm9ybSkge1xyXG4gICAgICAgICAgICBpZiAoYXJnX2FyeV9jb21wb25ldHMpIHtcclxuICAgICAgICAgICAgICAgIG5ld09iaiA9IG5ldyBHYW1lT2JqZWN0XzEuZGVmYXVsdCh0aGlzLCBhcmdfbmFtZSwgYXJnX3RyYW5zZm9ybSwgYXJnX2lkTmFtZSwgYXJnX2FyeV9jb21wb25ldHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbmV3T2JqID0gbmV3IEdhbWVPYmplY3RfMS5kZWZhdWx0KHRoaXMsIGFyZ19uYW1lLCBhcmdfdHJhbnNmb3JtLCBhcmdfaWROYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGFyZ19hcnlfY29tcG9uZXRzKVxyXG4gICAgICAgICAgICAgICAgbmV3T2JqID0gbmV3IEdhbWVPYmplY3RfMS5kZWZhdWx0KHRoaXMsIGFyZ19uYW1lLCBuZXcgVHJhbnNmb3JtXzEuZGVmYXVsdCgpLCBhcmdfaWROYW1lLCBhcmdfYXJ5X2NvbXBvbmV0cyk7XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbmV3T2JqID0gbmV3IEdhbWVPYmplY3RfMS5kZWZhdWx0KHRoaXMsIGFyZ19uYW1lLCBuZXcgVHJhbnNmb3JtXzEuZGVmYXVsdCgpLCBhcmdfaWROYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1hcF9nYW1lT2JqZWN0c1thcmdfbmFtZV0gPSBuZXdPYmo7XHJcbiAgICAgICAgdGhpcy5uZXdHYW1lT2JqZWN0cy5wdXNoKG5ld09iaik7XHJcbiAgICAgICAgcmV0dXJuIG5ld09iajtcclxuICAgIH07XHJcbiAgICBHYW1lT2JqZWN0TWFuYWdlci5wcm90b3R5cGUuUmVtb3ZlT2JqZWN0ID0gZnVuY3Rpb24gKGFyZ19nYW1lT2JqTmFtZSkge1xyXG4gICAgICAgIHRoaXMubWFwX2dhbWVPYmplY3RzW2FyZ19nYW1lT2JqTmFtZV0uRGVhZCgpO1xyXG4gICAgfTtcclxuICAgIEdhbWVPYmplY3RNYW5hZ2VyLnByb3RvdHlwZS5VblJlZ2lzdE9iamVjdCA9IGZ1bmN0aW9uIChhcmdfZ2FtZU9iamVjdE5hbWUpIHtcclxuICAgICAgICB0aGlzLm1hcF9nYW1lT2JqZWN0c1thcmdfZ2FtZU9iamVjdE5hbWVdID0gbnVsbDtcclxuICAgIH07XHJcbiAgICBHYW1lT2JqZWN0TWFuYWdlci5wcm90b3R5cGUuVXBkYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZ2FtZU9iamVjdHMgPSB0aGlzLmdhbWVPYmplY3RzLmNvbmNhdCh0aGlzLm5ld0dhbWVPYmplY3RzKTtcclxuICAgICAgICB0aGlzLm5ld0dhbWVPYmplY3RzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgdGhpcy5nYW1lT2JqZWN0cy5mb3JFYWNoKGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iai5VcGRhdGUoKTsgfSk7XHJcbiAgICAgICAgdGhpcy5nYW1lT2JqZWN0cy5maWx0ZXIoZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqLklzUmVtb3ZlOyB9KS5mb3JFYWNoKGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iai5SZW1vdmUoKTsgfSk7XHJcbiAgICAgICAgdGhpcy5nYW1lT2JqZWN0cyA9IHRoaXMuZ2FtZU9iamVjdHMuZmlsdGVyKGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuICFvYmouSXNSZW1vdmU7IH0pO1xyXG4gICAgfTtcclxuICAgIEdhbWVPYmplY3RNYW5hZ2VyLnByb3RvdHlwZS5HZXRHYW1lT2JqZWN0ID0gZnVuY3Rpb24gKGFyZ19nYW1lT2JqZWN0TmFtZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1hcF9nYW1lT2JqZWN0c1thcmdfZ2FtZU9iamVjdE5hbWVdO1xyXG4gICAgfTtcclxuICAgIEdhbWVPYmplY3RNYW5hZ2VyLnByb3RvdHlwZS5HZXRHYW1lT2JqZWN0cyA9IGZ1bmN0aW9uIChhcmdfc2VyY2hUYWcpIHtcclxuICAgICAgICB2YXIgb3V0ID0gdGhpcy5nYW1lT2JqZWN0cy5maWx0ZXIoZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqLm9iamVjdElELkVxdWFsKGFyZ19zZXJjaFRhZyk7IH0pO1xyXG4gICAgICAgIHJldHVybiBvdXQ7XHJcbiAgICB9O1xyXG4gICAgR2FtZU9iamVjdE1hbmFnZXIucHJvdG90eXBlLlJlZ2lzdE9iaiA9IGZ1bmN0aW9uIChvYmopIHtcclxuICAgICAgICB0aGlzLm1hcF9nYW1lT2JqZWN0c1tvYmouTmFtZV0gPSBvYmo7XHJcbiAgICB9O1xyXG4gICAgR2FtZU9iamVjdE1hbmFnZXIucHJvdG90eXBlLkxvZ09iamVjdENvdW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiZ2FtZU9iamVjdENvdW50czpcIiArIHRoaXMuZ2FtZU9iamVjdHMubGVuZ3RoKTtcclxuICAgIH07XHJcbiAgICBHYW1lT2JqZWN0TWFuYWdlci5wcm90b3R5cGUuUmVsZWFzZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm1hcF9nYW1lT2JqZWN0cy5jbGVhcigpO1xyXG4gICAgICAgIHRoaXMubmV3R2FtZU9iamVjdHMuZm9yRWFjaChmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmouUmVsZWFzZSgpOyB9KTtcclxuICAgICAgICB0aGlzLm5ld0dhbWVPYmplY3RzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgdGhpcy5nYW1lT2JqZWN0cy5mb3JFYWNoKGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iai5SZWxlYXNlKCk7IH0pO1xyXG4gICAgICAgIHRoaXMuZ2FtZU9iamVjdHMubGVuZ3RoID0gMDtcclxuICAgICAgICB0aGlzLnNjZW5lID0gbnVsbDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gR2FtZU9iamVjdE1hbmFnZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IEdhbWVPYmplY3RNYW5hZ2VyO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgTWF0cml4XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL01hdGgvTWF0cml4XCIpKTtcclxudmFyIFRyYW5zZm9ybV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9UcmFuc2Zvcm1cIikpO1xyXG52YXIgVmVjdG9yNF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9NYXRoL1ZlY3RvcjRcIikpO1xyXG52YXIgQ2FtZXJhID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQ2FtZXJhKGFyZ19kZXZpY2UsIGxheWVyLCBpc1BhcmFyZWxsLCBmcmFtZUJ1ZmZlcikge1xyXG4gICAgICAgIHRoaXMudGFyZ2V0RnJhbWUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaXNDbGVhciA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5kZXZpY2UgPSBhcmdfZGV2aWNlO1xyXG4gICAgICAgIHRoaXMudHJhbnNmb3JtID0gbmV3IFRyYW5zZm9ybV8xLmRlZmF1bHQoKTtcclxuICAgICAgICB0aGlzLmxheWVyID0gbGF5ZXI7XHJcbiAgICAgICAgdGhpcy5jbGVhckNvbG9yID0gbmV3IFZlY3RvcjRfMS5kZWZhdWx0KDAsIDAsIDAsIDApO1xyXG4gICAgICAgIGlmIChmcmFtZUJ1ZmZlcikge1xyXG4gICAgICAgICAgICB0aGlzLnRhcmdldEZyYW1lID0gZnJhbWVCdWZmZXI7XHJcbiAgICAgICAgICAgIGlmICghaXNQYXJhcmVsbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9qZWN0aW9uTWF0cml4ID0gbmV3IE1hdHJpeF8xLmRlZmF1bHQoKS5QZXJzcGVjdGl2ZSg0NSwgdGhpcy50YXJnZXRGcmFtZS53aWR0aCAvIHRoaXMudGFyZ2V0RnJhbWUuaGVpZ2h0LCAwLjEsIDEwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb2plY3Rpb25NYXRyaXggPSBuZXcgTWF0cml4XzEuZGVmYXVsdCgpLk9ydGhvKC10aGlzLnRhcmdldEZyYW1lLndpZHRoIC8gMiwgdGhpcy50YXJnZXRGcmFtZS53aWR0aCAvIDIsIHRoaXMudGFyZ2V0RnJhbWUuaGVpZ2h0IC8gMiwgLXRoaXMudGFyZ2V0RnJhbWUuaGVpZ2h0IC8gMiwgMC4xLCAxMDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoIWlzUGFyYXJlbGwpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb2plY3Rpb25NYXRyaXggPSBuZXcgTWF0cml4XzEuZGVmYXVsdCgpLlBlcnNwZWN0aXZlKDQ1LCB0aGlzLmRldmljZS5HZXRTaXplKCkueCAvIHRoaXMuZGV2aWNlLkdldFNpemUoKS55LCAwLjEsIDEwMCk7XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9qZWN0aW9uTWF0cml4ID0gbmV3IE1hdHJpeF8xLmRlZmF1bHQoKS5PcnRobygtdGhpcy5kZXZpY2UuR2V0U2l6ZSgpLnggLyAyLCB0aGlzLmRldmljZS5HZXRTaXplKCkueCAvIDIsIHRoaXMuZGV2aWNlLkdldFNpemUoKS55IC8gMiwgLXRoaXMuZGV2aWNlLkdldFNpemUoKS55IC8gMiwgMC4xLCAxMDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgQ2FtZXJhLnByb3RvdHlwZS5BdHRhY2ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5kZXZpY2UuU2V0Q2xlYXJDb2xvcih0aGlzLmNsZWFyQ29sb3IpO1xyXG4gICAgICAgIHRoaXMuZGV2aWNlLlNldENhbWVyYVN0YXR1cyh0aGlzLnRyYW5zZm9ybS5NYXRyaXguSW52ZXJzZSgpLCB0aGlzLnByb2plY3Rpb25NYXRyaXgsIHRoaXMudHJhbnNmb3JtLlJvdGF0aW9uLCB0aGlzLnRyYW5zZm9ybS5Qb3NpdGlvbik7XHJcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0RnJhbWUpIHtcclxuICAgICAgICAgICAgdGhpcy5kZXZpY2UuY29udGV4dC52aWV3cG9ydCgwLCAwLCB0aGlzLnRhcmdldEZyYW1lLndpZHRoLCB0aGlzLnRhcmdldEZyYW1lLmhlaWdodCk7XHJcbiAgICAgICAgICAgIHRoaXMuZGV2aWNlLmNvbnRleHQuYmluZEZyYW1lYnVmZmVyKHRoaXMuZGV2aWNlLmNvbnRleHQuRlJBTUVCVUZGRVIsIHRoaXMudGFyZ2V0RnJhbWUuZnJhbWVCdWZmZXIpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0NsZWFyKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5kZXZpY2UuY2xlYXJGdW5jKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmRldmljZS5jb250ZXh0LnZpZXdwb3J0KDAsIDAsIHRoaXMuZGV2aWNlLkdldFNpemUoKS54LCB0aGlzLmRldmljZS5HZXRTaXplKCkueSk7XHJcbiAgICAgICAgICAgIHRoaXMuZGV2aWNlLmNvbnRleHQuYmluZEZyYW1lYnVmZmVyKHRoaXMuZGV2aWNlLmNvbnRleHQuRlJBTUVCVUZGRVIsIG51bGwpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0NsZWFyKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5kZXZpY2UuY2xlYXJGdW5jKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBDYW1lcmE7XHJcbn0oKSk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IENhbWVyYTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIFZlY3RvcjRfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vTWF0aC9WZWN0b3I0XCIpKTtcclxudmFyIFZlY3RvcjJfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vTWF0aC9WZWN0b3IyXCIpKTtcclxudmFyIEdyYXBoaWNEZXZpY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBHcmFwaGljRGV2aWNlKGFyZ19jYW52YXMpIHtcclxuICAgICAgICB0aGlzLmNhbnZhcyA9IGFyZ19jYW52YXM7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wnKTtcclxuICAgICAgICB0aGlzLmNvbnRleHQuZW5hYmxlKHRoaXMuY29udGV4dC5DVUxMX0ZBQ0UpO1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5lbmFibGUodGhpcy5jb250ZXh0LkRFUFRIX1RFU1QpO1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5kZXB0aEZ1bmModGhpcy5jb250ZXh0LkxFUVVBTCk7XHJcbiAgICAgICAgdGhpcy5jbGVhckNvbG9yID0gbmV3IFZlY3RvcjRfMS5kZWZhdWx0KDAsIDAsIDAsIDApO1xyXG4gICAgICAgIHRoaXMuc2l6ZSA9IG5ldyBWZWN0b3IyXzEuZGVmYXVsdChhcmdfY2FudmFzLndpZHRoLCBhcmdfY2FudmFzLmhlaWdodCk7XHJcbiAgICAgICAgdGhpcy5jbGVhckZ1bmMgPSB0aGlzLkNsZWFyO1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5jbGVhckNvbG9yKHRoaXMuY2xlYXJDb2xvci54LCB0aGlzLmNsZWFyQ29sb3IueSwgdGhpcy5jbGVhckNvbG9yLnosIHRoaXMuY2xlYXJDb2xvci53KTtcclxuICAgICAgICB0aGlzLmNvbnRleHQuY2xlYXJEZXB0aCgxLjApO1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5ibGVuZEZ1bmModGhpcy5jb250ZXh0LlNSQ19BTFBIQSwgdGhpcy5jb250ZXh0Lk9ORV9NSU5VU19TUkNfQUxQSEEpO1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5lbmFibGUodGhpcy5jb250ZXh0LkJMRU5EKTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShHcmFwaGljRGV2aWNlLnByb3RvdHlwZSwgXCJUZW1wTWF0cml4XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGVtcE1hdHJpeDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoR3JhcGhpY0RldmljZS5wcm90b3R5cGUsIFwiVmlld01hdHJpeFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZXdNYXRyaXg7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyYXBoaWNEZXZpY2UucHJvdG90eXBlLCBcIlByb2plY3Rpb25NYXRyaXhcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9qZWN0aW9uTWF0cml4O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShHcmFwaGljRGV2aWNlLnByb3RvdHlwZSwgXCJDYW1lcmFQb3NpdGlvblwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhbVBvc2l0aW9uO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShHcmFwaGljRGV2aWNlLnByb3RvdHlwZSwgXCJDYW1lcmFSb3RhdGlvbkludlwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhbVJvdGF0aW9uSW52O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIEdyYXBoaWNEZXZpY2UucHJvdG90eXBlLlNldENsZWFyQ29sb3IgPSBmdW5jdGlvbiAoYXJnX2NvbG9yKSB7XHJcbiAgICAgICAgdGhpcy5jbGVhckNvbG9yID0gYXJnX2NvbG9yO1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5jbGVhckNvbG9yKHRoaXMuY2xlYXJDb2xvci54LCB0aGlzLmNsZWFyQ29sb3IueSwgdGhpcy5jbGVhckNvbG9yLnosIHRoaXMuY2xlYXJDb2xvci53KTtcclxuICAgICAgICByZXR1cm4gYXJnX2NvbG9yO1xyXG4gICAgfTtcclxuICAgIEdyYXBoaWNEZXZpY2UucHJvdG90eXBlLkVuYWJsZVN0ZW5jaWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0LmVuYWJsZSh0aGlzLmNvbnRleHQuU1RFTkNJTF9URVNUKTtcclxuICAgICAgICB0aGlzLmNvbnRleHQuY2xlYXJTdGVuY2lsKDApO1xyXG4gICAgfTtcclxuICAgIEdyYXBoaWNEZXZpY2UucHJvdG90eXBlLkNsZWFyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5jbGVhcih0aGlzLmNvbnRleHQuQ09MT1JfQlVGRkVSX0JJVCB8IHRoaXMuY29udGV4dC5ERVBUSF9CVUZGRVJfQklUKTtcclxuICAgIH07XHJcbiAgICBHcmFwaGljRGV2aWNlLnByb3RvdHlwZS5DbGVhckRlcHRoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5jbGVhcih0aGlzLmNvbnRleHQuREVQVEhfQlVGRkVSX0JJVCk7XHJcbiAgICB9O1xyXG4gICAgR3JhcGhpY0RldmljZS5wcm90b3R5cGUuQ2xlYXJTdGVuY2lsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5jbGVhcih0aGlzLmNvbnRleHQuQ09MT1JfQlVGRkVSX0JJVCB8IHRoaXMuY29udGV4dC5ERVBUSF9CVUZGRVJfQklUIHwgdGhpcy5jb250ZXh0LlNURU5DSUxfQlVGRkVSX0JJVCk7XHJcbiAgICB9O1xyXG4gICAgR3JhcGhpY0RldmljZS5wcm90b3R5cGUuR2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zaXplO1xyXG4gICAgfTtcclxuICAgIEdyYXBoaWNEZXZpY2UucHJvdG90eXBlLlByZXNlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0LmZsdXNoKCk7XHJcbiAgICB9O1xyXG4gICAgR3JhcGhpY0RldmljZS5wcm90b3R5cGUuU2V0U2hhZGVyID0gZnVuY3Rpb24gKGFyZ19zaGFkZXIpIHtcclxuICAgICAgICB0aGlzLnNoYWRlciA9IGFyZ19zaGFkZXI7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0LnVzZVByb2dyYW0odGhpcy5zaGFkZXIucHJvZ3JhbU9iamVjdCk7XHJcbiAgICB9O1xyXG4gICAgR3JhcGhpY0RldmljZS5wcm90b3R5cGUuQ3JlYXRlUHJvZ3JhbSA9IGZ1bmN0aW9uIChhcmdfdnMsIGFyZ19mcykge1xyXG4gICAgICAgIC8vIOODl+ODreOCsOODqeODoOOCquODluOCuOOCp+OCr+ODiOOBrueUn+aIkFxyXG4gICAgICAgIHZhciBwcm9ncmFtID0gdGhpcy5jb250ZXh0LmNyZWF0ZVByb2dyYW0oKTtcclxuICAgICAgICAvLyDjg5fjg63jgrDjg6njg6Djgqrjg5bjgrjjgqfjgq/jg4jjgavjgrfjgqfjg7zjg4DjgpLlibLjgorlvZPjgabjgotcclxuICAgICAgICB0aGlzLmNvbnRleHQuYXR0YWNoU2hhZGVyKHByb2dyYW0sIGFyZ192cyk7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0LmF0dGFjaFNoYWRlcihwcm9ncmFtLCBhcmdfZnMpO1xyXG4gICAgICAgIC8vIOOCt+OCp+ODvOODgOOCkuODquODs+OCr1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5saW5rUHJvZ3JhbShwcm9ncmFtKTtcclxuICAgICAgICAvLyDjgrfjgqfjg7zjg4Djga7jg6rjg7Pjgq/jgYzmraPjgZfjgY/ooYzjgarjgo/jgozjgZ/jgYvjg4Hjgqfjg4Pjgq9cclxuICAgICAgICBpZiAodGhpcy5jb250ZXh0LmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwgdGhpcy5jb250ZXh0LkxJTktfU1RBVFVTKSkge1xyXG4gICAgICAgICAgICAvLyDmiJDlip/jgZfjgabjgYTjgZ/jgonjg5fjg63jgrDjg6njg6Djgqrjg5bjgrjjgqfjgq/jg4jjgpLmnInlirnjgavjgZnjgotcclxuICAgICAgICAgICAgdGhpcy5jb250ZXh0LnVzZVByb2dyYW0ocHJvZ3JhbSk7XHJcbiAgICAgICAgICAgIC8vIOODl+ODreOCsOODqeODoOOCquODluOCuOOCp+OCr+ODiOOCkui/lOOBl+OBpue1guS6hlxyXG4gICAgICAgICAgICByZXR1cm4gcHJvZ3JhbTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIOWkseaVl+OBl+OBpuOBhOOBn+OCieOCqOODqeODvOODreOCsOOCkuOCouODqeODvOODiOOBmeOCi1xyXG4gICAgICAgICAgICBhbGVydCh0aGlzLmNvbnRleHQuZ2V0UHJvZ3JhbUluZm9Mb2cocHJvZ3JhbSkpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBHcmFwaGljRGV2aWNlLnByb3RvdHlwZS5DcmVhdGVWQk8gPSBmdW5jdGlvbiAoYXJnX2RhdGEpIHtcclxuICAgICAgICAvLyDjg5Djg4Pjg5XjgqHjgqrjg5bjgrjjgqfjgq/jg4jjga7nlJ/miJBcclxuICAgICAgICB2YXIgdmJvID0gdGhpcy5jb250ZXh0LmNyZWF0ZUJ1ZmZlcigpO1xyXG4gICAgICAgIC8vIOODkOODg+ODleOCoeOCkuODkOOCpOODs+ODieOBmeOCi1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5iaW5kQnVmZmVyKHRoaXMuY29udGV4dC5BUlJBWV9CVUZGRVIsIHZibyk7XHJcbiAgICAgICAgLy8g44OQ44OD44OV44Kh44Gr44OH44O844K/44KS44K744OD44OIXHJcbiAgICAgICAgdGhpcy5jb250ZXh0LmJ1ZmZlckRhdGEodGhpcy5jb250ZXh0LkFSUkFZX0JVRkZFUiwgbmV3IEZsb2F0MzJBcnJheShhcmdfZGF0YSksIHRoaXMuY29udGV4dC5TVEFUSUNfRFJBVyk7XHJcbiAgICAgICAgLy8g44OQ44OD44OV44Kh44Gu44OQ44Kk44Oz44OJ44KS54Sh5Yq55YyWXHJcbiAgICAgICAgdGhpcy5jb250ZXh0LmJpbmRCdWZmZXIodGhpcy5jb250ZXh0LkFSUkFZX0JVRkZFUiwgbnVsbCk7XHJcbiAgICAgICAgLy8g55Sf5oiQ44GX44GfVkJP44KS6L+U44GX44Gm57WC5LqGXHJcbiAgICAgICAgcmV0dXJuIHZibztcclxuICAgIH07XHJcbiAgICBHcmFwaGljRGV2aWNlLnByb3RvdHlwZS5DcmVhdGVJQk8gPSBmdW5jdGlvbiAoYXJnX2RhdGEpIHtcclxuICAgICAgICAvLyDjg5Djg4Pjg5XjgqHjgqrjg5bjgrjjgqfjgq/jg4jjga7nlJ/miJBcclxuICAgICAgICB2YXIgaWJvID0gdGhpcy5jb250ZXh0LmNyZWF0ZUJ1ZmZlcigpO1xyXG4gICAgICAgIC8vIOODkOODg+ODleOCoeOCkuODkOOCpOODs+ODieOBmeOCi1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5iaW5kQnVmZmVyKHRoaXMuY29udGV4dC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgaWJvKTtcclxuICAgICAgICAvLyDjg5Djg4Pjg5XjgqHjgavjg4fjg7zjgr/jgpLjgrvjg4Pjg4hcclxuICAgICAgICB0aGlzLmNvbnRleHQuYnVmZmVyRGF0YSh0aGlzLmNvbnRleHQuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIG5ldyBJbnQxNkFycmF5KGFyZ19kYXRhKSwgdGhpcy5jb250ZXh0LlNUQVRJQ19EUkFXKTtcclxuICAgICAgICAvLyDjg5Djg4Pjg5XjgqHjga7jg5DjgqTjg7Pjg4njgpLnhKHlirnljJZcclxuICAgICAgICB0aGlzLmNvbnRleHQuYmluZEJ1ZmZlcih0aGlzLmNvbnRleHQuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIG51bGwpO1xyXG4gICAgICAgIC8vIOeUn+aIkOOBl+OBn0lCT+OCkui/lOOBl+OBpue1guS6hlxyXG4gICAgICAgIHJldHVybiBpYm87XHJcbiAgICB9O1xyXG4gICAgR3JhcGhpY0RldmljZS5wcm90b3R5cGUuQ3JlYXRlVmVydGV4U2hhZGVyID0gZnVuY3Rpb24gKGFyZ19zb3VyY2UpIHtcclxuICAgICAgICB2YXIgc2hhZGVyO1xyXG4gICAgICAgIHNoYWRlciA9IHRoaXMuY29udGV4dC5jcmVhdGVTaGFkZXIodGhpcy5jb250ZXh0LlZFUlRFWF9TSEFERVIpO1xyXG4gICAgICAgIC8vIOeUn+aIkOOBleOCjOOBn+OCt+OCp+ODvOODgOOBq+OCveODvOOCueOCkuWJsuOCiuW9k+OBpuOCi1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5zaGFkZXJTb3VyY2Uoc2hhZGVyLCBhcmdfc291cmNlKTtcclxuICAgICAgICAvLyDjgrfjgqfjg7zjg4DjgpLjgrPjg7Pjg5HjgqTjg6vjgZnjgotcclxuICAgICAgICB0aGlzLmNvbnRleHQuY29tcGlsZVNoYWRlcihzaGFkZXIpO1xyXG4gICAgICAgIC8vIOOCt+OCp+ODvOODgOOBjOato+OBl+OBj+OCs+ODs+ODkeOCpOODq+OBleOCjOOBn+OBi+ODgeOCp+ODg+OCr1xyXG4gICAgICAgIGlmICh0aGlzLmNvbnRleHQuZ2V0U2hhZGVyUGFyYW1ldGVyKHNoYWRlciwgdGhpcy5jb250ZXh0LkNPTVBJTEVfU1RBVFVTKSkge1xyXG4gICAgICAgICAgICAvLyDmiJDlip/jgZfjgabjgYTjgZ/jgonjgrfjgqfjg7zjg4DjgpLov5TjgZfjgabntYLkuoZcclxuICAgICAgICAgICAgcmV0dXJuIHNoYWRlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidmVydGV4IHNoYWRlciBmYWlsZWRcIik7XHJcbiAgICAgICAgICAgIC8vIOWkseaVl+OBl+OBpuOBhOOBn+OCieOCqOODqeODvOODreOCsOOCkuOCouODqeODvOODiOOBmeOCi1xyXG4gICAgICAgICAgICBhbGVydCh0aGlzLmNvbnRleHQuZ2V0U2hhZGVySW5mb0xvZyhzaGFkZXIpKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBHcmFwaGljRGV2aWNlLnByb3RvdHlwZS5DcmVhdGVGcmFnbWVudFNoYWRlciA9IGZ1bmN0aW9uIChhcmdfc291cmNlKSB7XHJcbiAgICAgICAgdmFyIHNoYWRlcjtcclxuICAgICAgICBzaGFkZXIgPSB0aGlzLmNvbnRleHQuY3JlYXRlU2hhZGVyKHRoaXMuY29udGV4dC5GUkFHTUVOVF9TSEFERVIpO1xyXG4gICAgICAgIC8vIOeUn+aIkOOBleOCjOOBn+OCt+OCp+ODvOODgOOBq+OCveODvOOCueOCkuWJsuOCiuW9k+OBpuOCi1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5zaGFkZXJTb3VyY2Uoc2hhZGVyLCBhcmdfc291cmNlKTtcclxuICAgICAgICAvLyDjgrfjgqfjg7zjg4DjgpLjgrPjg7Pjg5HjgqTjg6vjgZnjgotcclxuICAgICAgICB0aGlzLmNvbnRleHQuY29tcGlsZVNoYWRlcihzaGFkZXIpO1xyXG4gICAgICAgIC8vIOOCt+OCp+ODvOODgOOBjOato+OBl+OBj+OCs+ODs+ODkeOCpOODq+OBleOCjOOBn+OBi+ODgeOCp+ODg+OCr1xyXG4gICAgICAgIGlmICh0aGlzLmNvbnRleHQuZ2V0U2hhZGVyUGFyYW1ldGVyKHNoYWRlciwgdGhpcy5jb250ZXh0LkNPTVBJTEVfU1RBVFVTKSkge1xyXG4gICAgICAgICAgICAvLyDmiJDlip/jgZfjgabjgYTjgZ/jgonjgrfjgqfjg7zjg4DjgpLov5TjgZfjgabntYLkuoZcclxuICAgICAgICAgICAgcmV0dXJuIHNoYWRlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZnJhZ21lbnQgc2hhZGVyIGZhaWxlZFwiKTtcclxuICAgICAgICAgICAgLy8g5aSx5pWX44GX44Gm44GE44Gf44KJ44Ko44Op44O844Ot44Kw44KS44Ki44Op44O844OI44GZ44KLXHJcbiAgICAgICAgICAgIGFsZXJ0KHRoaXMuY29udGV4dC5nZXRTaGFkZXJJbmZvTG9nKHNoYWRlcikpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEdyYXBoaWNEZXZpY2UucHJvdG90eXBlLkNyZWF0ZVRleHR1cmUgPSBmdW5jdGlvbiAoYXJnX3NvdXJjZSwgYXJnX3RleHR1cmUpIHtcclxuICAgICAgICAvLyDjgqTjg6Hjg7zjgrjjgqrjg5bjgrjjgqfjgq/jg4jjga7nlJ/miJBcclxuICAgICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgLy8g44OH44O844K/44Gu44Kq44Oz44Ot44O844OJ44KS44OI44Oq44Ks44O844Gr44GZ44KLXHJcbiAgICAgICAgaW1nLm9ubG9hZCA9IE9uVGV4TG9hZChpbWcsIGFyZ190ZXh0dXJlLCBhcmdfc291cmNlLCB0aGlzKTtcclxuICAgICAgICAvLyDjgqTjg6Hjg7zjgrjjgqrjg5bjgrjjgqfjgq/jg4jjga7jgr3jg7zjgrnjgpLmjIflrppcclxuICAgICAgICBpbWcuc3JjID0gYXJnX3NvdXJjZTtcclxuICAgIH07XHJcbiAgICBHcmFwaGljRGV2aWNlLnByb3RvdHlwZS5TZXRWQk8gPSBmdW5jdGlvbiAoYXJnX3Zib0xpc3QpIHtcclxuICAgICAgICAvLyDlvJXmlbDjgajjgZfjgablj5fjgZHlj5bjgaPjgZ/phY3liJfjgpLlh6bnkIbjgZnjgotcclxuICAgICAgICBmb3IgKHZhciBpIGluIGFyZ192Ym9MaXN0KSB7XHJcbiAgICAgICAgICAgIC8vIOODkOODg+ODleOCoeOCkuODkOOCpOODs+ODieOBmeOCi1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRleHQuYmluZEJ1ZmZlcih0aGlzLmNvbnRleHQuQVJSQVlfQlVGRkVSLCBhcmdfdmJvTGlzdFtpXSk7XHJcbiAgICAgICAgICAgIC8vIGF0dHJpYnV0ZUxvY2F0aW9u44KS5pyJ5Yq544Gr44GZ44KLXHJcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSh0aGlzLnNoYWRlci5hdHRyaWJ1dGVMb2NhdGlvbnNbaV0pO1xyXG4gICAgICAgICAgICAvLyBhdHRyaWJ1dGVMb2NhdGlvbuOCkumAmuefpeOBl+eZu+mMsuOBmeOCi1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRleHQudmVydGV4QXR0cmliUG9pbnRlcih0aGlzLnNoYWRlci5hdHRyaWJ1dGVMb2NhdGlvbnNbaV0sIHRoaXMuc2hhZGVyLmF0dHJpYnV0ZVN0cmlkZXNbaV0sIHRoaXMuY29udGV4dC5GTE9BVCwgZmFsc2UsIDAsIDApO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBHcmFwaGljRGV2aWNlLnByb3RvdHlwZS5PbkxvYWRUZXh0dXJlID0gZnVuY3Rpb24gKGltZywgYXJnX3RleHR1cmUsIGFyZ19zb3VyY2UpIHtcclxuICAgICAgICAvLyDjg4bjgq/jgrnjg4Hjg6Pjgqrjg5bjgrjjgqfjgq/jg4jjga7nlJ/miJBcclxuICAgICAgICB2YXIgdGV4ID0gdGhpcy5jb250ZXh0LmNyZWF0ZVRleHR1cmUoKTtcclxuICAgICAgICAvLyDjg4bjgq/jgrnjg4Hjg6PjgpLjg5DjgqTjg7Pjg4njgZnjgotcclxuICAgICAgICB0aGlzLmNvbnRleHQuYmluZFRleHR1cmUodGhpcy5jb250ZXh0LlRFWFRVUkVfMkQsIHRleCk7XHJcbiAgICAgICAgLy8g44OG44Kv44K544OB44Oj44G444Kk44Oh44O844K444KS6YGp55SoXHJcbiAgICAgICAgdGhpcy5jb250ZXh0LnRleEltYWdlMkQodGhpcy5jb250ZXh0LlRFWFRVUkVfMkQsIDAsIHRoaXMuY29udGV4dC5SR0JBLCB0aGlzLmNvbnRleHQuUkdCQSwgdGhpcy5jb250ZXh0LlVOU0lHTkVEX0JZVEUsIGltZyk7XHJcbiAgICAgICAgLy8g44Of44OD44OX44Oe44OD44OX44KS55Sf5oiQXHJcbiAgICAgICAgdGhpcy5jb250ZXh0LmdlbmVyYXRlTWlwbWFwKHRoaXMuY29udGV4dC5URVhUVVJFXzJEKTtcclxuICAgICAgICAvLyDjg4bjgq/jgrnjg4Hjg6Pjga7jg5DjgqTjg7Pjg4njgpLnhKHlirnljJZcclxuICAgICAgICB0aGlzLmNvbnRleHQuYmluZFRleHR1cmUodGhpcy5jb250ZXh0LlRFWFRVUkVfMkQsIG51bGwpO1xyXG4gICAgICAgIGFyZ190ZXh0dXJlLmRhdGEgPSB0ZXg7XHJcbiAgICAgICAgYXJnX3RleHR1cmUuTG9hZGVkKCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coYXJnX3NvdXJjZSArIFwiIGxvYWRlZFwiKTtcclxuICAgIH07XHJcbiAgICA7XHJcbiAgICBHcmFwaGljRGV2aWNlLnByb3RvdHlwZS5PbkxvYWRTaGFkZXIgPSBmdW5jdGlvbiAoYXJnX3NvdXJjZSwgYXJnX3NoYWRlcikge1xyXG4gICAgICAgIHZhciBkYXRhID0gYXJnX3NvdXJjZS5yZXNwb25zZVRleHQ7XHJcbiAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgYXJnX3NoYWRlciA9IHRoaXMuY29udGV4dC5jcmVhdGVTaGFkZXIodGhpcy5jb250ZXh0LlZFUlRFWF9TSEFERVIpO1xyXG4gICAgICAgIC8vIOeUn+aIkOOBleOCjOOBn+OCt+OCp+ODvOODgOOBq+OCveODvOOCueOCkuWJsuOCiuW9k+OBpuOCi1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5zaGFkZXJTb3VyY2UoYXJnX3NoYWRlciwgZGF0YSk7XHJcbiAgICAgICAgLy8g44K344Kn44O844OA44KS44Kz44Oz44OR44Kk44Or44GZ44KLXHJcbiAgICAgICAgdGhpcy5jb250ZXh0LmNvbXBpbGVTaGFkZXIoYXJnX3NoYWRlcik7XHJcbiAgICB9O1xyXG4gICAgR3JhcGhpY0RldmljZS5wcm90b3R5cGUuU2V0Q2FtZXJhU3RhdHVzID0gZnVuY3Rpb24gKGFyZ192aWV3TWF0cml4LCBhcmdfcHJvamVjdGlvbk1hdHJpeCwgYXJnX2NhbWVyYU1hdHJpeCwgYXJnX2NhbWVyYVBvc2l0aW9uKSB7XHJcbiAgICAgICAgdGhpcy52aWV3TWF0cml4ID0gYXJnX3ZpZXdNYXRyaXg7XHJcbiAgICAgICAgdGhpcy5wcm9qZWN0aW9uTWF0cml4ID0gYXJnX3Byb2plY3Rpb25NYXRyaXg7XHJcbiAgICAgICAgdGhpcy50ZW1wTWF0cml4ID0gdGhpcy5wcm9qZWN0aW9uTWF0cml4Lk11bHRpcGx5KHRoaXMudmlld01hdHJpeCk7XHJcbiAgICAgICAgdGhpcy5jYW1Qb3NpdGlvbiA9IGFyZ19jYW1lcmFQb3NpdGlvbjtcclxuICAgICAgICB0aGlzLmNhbVJvdGF0aW9uSW52ID0gKGFyZ19jYW1lcmFNYXRyaXgpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBHcmFwaGljRGV2aWNlO1xyXG59KCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBHcmFwaGljRGV2aWNlO1xyXG5mdW5jdGlvbiBPblRleExvYWQoaW1nLCBhcmdfdGV4dHVyZSwgYXJnX3NvdXJjZSwgZGV2aWNlKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGRldmljZS5PbkxvYWRUZXh0dXJlKGltZywgYXJnX3RleHR1cmUsIGFyZ19zb3VyY2UpO1xyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBPblNoYWRlckxvYWQoYXJnX3NvdXJjZSwgYXJnX3NoYWRlciwgZGV2aWNlKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGRldmljZS5PbkxvYWRTaGFkZXIoYXJnX3NvdXJjZSwgYXJnX3NoYWRlcik7XHJcbiAgICB9O1xyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBFeFBhcmFtZXRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEV4UGFyYW1ldGVyKGFyZ19zbG90LCBhcmdfc2l6ZSwgYXJnX3BhcmFtKSB7XHJcbiAgICAgICAgdGhpcy5zbG90ID0gYXJnX3Nsb3Q7XHJcbiAgICAgICAgdGhpcy5wYXJhbSA9IGFyZ19wYXJhbTtcclxuICAgICAgICB0aGlzLnNpemUgPSBhcmdfc2l6ZTtcclxuICAgICAgICBzd2l0Y2ggKGFyZ19zaXplKSB7XHJcbiAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgIHRoaXMuYXRhY2hGdW5jID0gdGhpcy5BdGFjaDFmO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgIHRoaXMuYXRhY2hGdW5jID0gdGhpcy5BdGFjaDJmO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgIHRoaXMuYXRhY2hGdW5jID0gdGhpcy5BdGFjaDNmO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgIHRoaXMuYXRhY2hGdW5jID0gdGhpcy5BdGFjaDRmO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMTY6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmF0YWNoRnVuYyA9IHRoaXMuQXRhY2hNYXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBFeFBhcmFtZXRlci5wcm90b3R5cGUuQXRhY2gxZiA9IGZ1bmN0aW9uIChkZXZpY2UpIHtcclxuICAgICAgICBkZXZpY2UuY29udGV4dC51bmlmb3JtMWZ2KGRldmljZS5zaGFkZXIudW5pZm9ybUxvY2F0aW9uc1t0aGlzLnNsb3RdLCB0aGlzLnBhcmFtLmRhdGEpO1xyXG4gICAgfTtcclxuICAgIEV4UGFyYW1ldGVyLnByb3RvdHlwZS5BdGFjaDJmID0gZnVuY3Rpb24gKGRldmljZSkge1xyXG4gICAgICAgIGRldmljZS5jb250ZXh0LnVuaWZvcm0yZnYoZGV2aWNlLnNoYWRlci51bmlmb3JtTG9jYXRpb25zW3RoaXMuc2xvdF0sIHRoaXMucGFyYW0uZGF0YSk7XHJcbiAgICB9O1xyXG4gICAgRXhQYXJhbWV0ZXIucHJvdG90eXBlLkF0YWNoM2YgPSBmdW5jdGlvbiAoZGV2aWNlKSB7XHJcbiAgICAgICAgZGV2aWNlLmNvbnRleHQudW5pZm9ybTNmdihkZXZpY2Uuc2hhZGVyLnVuaWZvcm1Mb2NhdGlvbnNbdGhpcy5zbG90XSwgdGhpcy5wYXJhbS5kYXRhKTtcclxuICAgIH07XHJcbiAgICBFeFBhcmFtZXRlci5wcm90b3R5cGUuQXRhY2g0ZiA9IGZ1bmN0aW9uIChkZXZpY2UpIHtcclxuICAgICAgICBkZXZpY2UuY29udGV4dC51bmlmb3JtNGZ2KGRldmljZS5zaGFkZXIudW5pZm9ybUxvY2F0aW9uc1t0aGlzLnNsb3RdLCB0aGlzLnBhcmFtLmRhdGEpO1xyXG4gICAgfTtcclxuICAgIEV4UGFyYW1ldGVyLnByb3RvdHlwZS5BdGFjaE1hdCA9IGZ1bmN0aW9uIChkZXZpY2UpIHtcclxuICAgICAgICBkZXZpY2UuY29udGV4dC51bmlmb3JtTWF0cml4NGZ2KGRldmljZS5zaGFkZXIudW5pZm9ybUxvY2F0aW9uc1t0aGlzLnNsb3RdLCBmYWxzZSwgdGhpcy5wYXJhbS5kYXRhKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRXhQYXJhbWV0ZXI7XHJcbn0oKSk7XHJcbnZhciBNb2RlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE1vZGVsKGlzTGlnaHQsIGlzQmlsbEJvYXJkKSB7XHJcbiAgICAgICAgaWYgKGlzQmlsbEJvYXJkID09IHRydWUpIHtcclxuICAgICAgICAgICAgaWYgKGlzTGlnaHQpXHJcbiAgICAgICAgICAgICAgICB0aGlzLkRyYXcgPSB0aGlzLkRyYXdfQmlsbEJvYXJkX0xpZ2h0O1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB0aGlzLkRyYXcgPSB0aGlzLkRyYXdfQmlsbEJvYXJkX05vbkxpZ2h0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGlzTGlnaHQpXHJcbiAgICAgICAgICAgICAgICB0aGlzLkRyYXcgPSB0aGlzLkRyYXdfTGlnaHQ7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHRoaXMuRHJhdyA9IHRoaXMuRHJhd19Ob25MaWdodDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5leFBhcmFtcyA9IG5ldyBBcnJheSgpO1xyXG4gICAgfVxyXG4gICAgTW9kZWwucHJvdG90eXBlLkluaXRpYWxpemVfZ2VvbSA9IGZ1bmN0aW9uIChhcmdfZ3JhcGhpY0RldmljZSwgYXJnX2dlb21ldHJ5LCBhcmdfbWF0ZXJpYWwsIGFyZ19TaGFkZXIsIGFyZ190cmFuc2Zvcm0pIHtcclxuICAgICAgICB0aGlzLmdyYXBoaWNEZXZpY2UgPSBhcmdfZ3JhcGhpY0RldmljZTtcclxuICAgICAgICB0aGlzLmdlb21ldHJ5ID0gYXJnX2dlb21ldHJ5O1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWxzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgdGhpcy5tYXRlcmlhbHMucHVzaChhcmdfbWF0ZXJpYWwpO1xyXG4gICAgICAgIHRoaXMuc3Vic2V0cyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIHRoaXMuc3Vic2V0cy5wdXNoKHRoaXMuZ2VvbWV0cnkuR2V0SW5kZXhTaXplKCkpO1xyXG4gICAgICAgIHRoaXMuc2hhZGVyID0gYXJnX1NoYWRlcjtcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IGFyZ190cmFuc2Zvcm07XHJcbiAgICAgICAgdGhpcy5saWdodHMgPSBuZXcgQXJyYXkoKTtcclxuICAgIH07XHJcbiAgICBNb2RlbC5wcm90b3R5cGUuSW5pdGlhbGl6ZV9tZXNoID0gZnVuY3Rpb24gKGFyZ19ncmFwaGljRGV2aWNlLCBhcmdfbWVzaCwgYXJnX1NoYWRlciwgYXJnX3RyYW5zZm9ybSkge1xyXG4gICAgICAgIHRoaXMuZ3JhcGhpY0RldmljZSA9IGFyZ19ncmFwaGljRGV2aWNlO1xyXG4gICAgICAgIHRoaXMuZ2VvbWV0cnkgPSBhcmdfbWVzaC5nZW9tZXRyeTtcclxuICAgICAgICB0aGlzLm1hdGVyaWFscyA9IGFyZ19tZXNoLmFyeV9tYXRlcmlhbHM7XHJcbiAgICAgICAgdGhpcy5zdWJzZXRzID0gdGhpcy5nZW9tZXRyeS5HZXRTdWJTZXQoKTtcclxuICAgICAgICB0aGlzLnNoYWRlciA9IGFyZ19TaGFkZXI7XHJcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0gPSBhcmdfdHJhbnNmb3JtO1xyXG4gICAgICAgIHRoaXMubGlnaHRzID0gbmV3IEFycmF5KCk7XHJcbiAgICB9O1xyXG4gICAgTW9kZWwucHJvdG90eXBlLlNldExpZ2h0ID0gZnVuY3Rpb24gKGFyZ19saWdodCkge1xyXG4gICAgICAgIHRoaXMubGlnaHRzLnB1c2goYXJnX2xpZ2h0KTtcclxuICAgIH07XHJcbiAgICBNb2RlbC5wcm90b3R5cGUuQWRkRXhQYXJhbSA9IGZ1bmN0aW9uIChhcmdfc2xvdCwgYXJnX3NpemUsIGFyZ19wYXJhbSkge1xyXG4gICAgICAgIHRoaXMuZXhQYXJhbXMucHVzaChuZXcgRXhQYXJhbWV0ZXIoYXJnX3Nsb3QsIGFyZ19zaXplLCBhcmdfcGFyYW0pKTtcclxuICAgIH07XHJcbiAgICBNb2RlbC5wcm90b3R5cGUuRHJhd19Ob25MaWdodCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnNoYWRlci5BdHRhY2goKTtcclxuICAgICAgICB2YXIgbXZwTWF0cml4ID0gdGhpcy5ncmFwaGljRGV2aWNlLlRlbXBNYXRyaXguTXVsdGlwbHkodGhpcy50cmFuc2Zvcm0uTWF0cml4KTtcclxuICAgICAgICB2YXIgaW52TWF0cml4ID0gdGhpcy50cmFuc2Zvcm0uTWF0cml4LkludmVyc2UoKTtcclxuICAgICAgICAvLyB1bmlmb3Jt5aSJ5pWw44Gu55m76Yyy44Go5o+P55S7XHJcbiAgICAgICAgdGhpcy5ncmFwaGljRGV2aWNlLmNvbnRleHQudW5pZm9ybU1hdHJpeDRmdih0aGlzLnNoYWRlci51bmlmb3JtTG9jYXRpb25zWzBdLCBmYWxzZSwgbXZwTWF0cml4LmRhdGEpO1xyXG4gICAgICAgIHRoaXMuZ3JhcGhpY0RldmljZS5jb250ZXh0LnVuaWZvcm1NYXRyaXg0ZnYodGhpcy5zaGFkZXIudW5pZm9ybUxvY2F0aW9uc1sxXSwgZmFsc2UsIHRoaXMudHJhbnNmb3JtLk1hdHJpeC5kYXRhKTtcclxuICAgICAgICB0aGlzLmdyYXBoaWNEZXZpY2UuY29udGV4dC51bmlmb3JtTWF0cml4NGZ2KHRoaXMuc2hhZGVyLnVuaWZvcm1Mb2NhdGlvbnNbMl0sIGZhbHNlLCBpbnZNYXRyaXguZGF0YSk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmV4UGFyYW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXhQYXJhbXNbaV0uYXRhY2hGdW5jKHRoaXMuZ3JhcGhpY0RldmljZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZ2VvbWV0cnkuRHJhdygpO1xyXG4gICAgICAgIHZhciBvZmZzZXQgPSAwO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zdWJzZXRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWF0ZXJpYWxzW2ldLkF0dGFjaCgpO1xyXG4gICAgICAgICAgICB0aGlzLmdyYXBoaWNEZXZpY2UuY29udGV4dC5kcmF3RWxlbWVudHModGhpcy5ncmFwaGljRGV2aWNlLmNvbnRleHQuVFJJQU5HTEVTLCB0aGlzLnN1YnNldHNbaV0sIHRoaXMuZ3JhcGhpY0RldmljZS5jb250ZXh0LlVOU0lHTkVEX1NIT1JULCBvZmZzZXQgKiAyKTtcclxuICAgICAgICAgICAgb2Zmc2V0ICs9IHRoaXMuc3Vic2V0c1tpXTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgTW9kZWwucHJvdG90eXBlLkRyYXdfTGlnaHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5zaGFkZXIuQXR0YWNoKCk7XHJcbiAgICAgICAgdmFyIG12cE1hdHJpeCA9IHRoaXMuZ3JhcGhpY0RldmljZS5UZW1wTWF0cml4Lk11bHRpcGx5KHRoaXMudHJhbnNmb3JtLk1hdHJpeCk7XHJcbiAgICAgICAgdmFyIGludk1hdHJpeCA9IHRoaXMudHJhbnNmb3JtLk1hdHJpeC5JbnZlcnNlKCk7XHJcbiAgICAgICAgLy8gdW5pZm9ybeWkieaVsOOBrueZu+mMsuOBqOaPj+eUu1xyXG4gICAgICAgIHRoaXMuZ3JhcGhpY0RldmljZS5jb250ZXh0LnVuaWZvcm1NYXRyaXg0ZnYodGhpcy5zaGFkZXIudW5pZm9ybUxvY2F0aW9uc1swXSwgZmFsc2UsIG12cE1hdHJpeC5kYXRhKTtcclxuICAgICAgICB0aGlzLmdyYXBoaWNEZXZpY2UuY29udGV4dC51bmlmb3JtTWF0cml4NGZ2KHRoaXMuc2hhZGVyLnVuaWZvcm1Mb2NhdGlvbnNbMV0sIGZhbHNlLCB0aGlzLnRyYW5zZm9ybS5NYXRyaXguZGF0YSk7XHJcbiAgICAgICAgdGhpcy5ncmFwaGljRGV2aWNlLmNvbnRleHQudW5pZm9ybU1hdHJpeDRmdih0aGlzLnNoYWRlci51bmlmb3JtTG9jYXRpb25zWzJdLCBmYWxzZSwgaW52TWF0cml4LmRhdGEpO1xyXG4gICAgICAgIHRoaXMubGlnaHRzLmZvckVhY2goZnVuY3Rpb24gKGxpZ2h0KSB7IHJldHVybiBsaWdodC5BdGFjaCgpOyB9KTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZXhQYXJhbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5leFBhcmFtc1tpXS5hdGFjaEZ1bmModGhpcy5ncmFwaGljRGV2aWNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5nZW9tZXRyeS5EcmF3KCk7XHJcbiAgICAgICAgdmFyIG9mZnNldCA9IDA7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN1YnNldHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbHNbaV0uQXR0YWNoKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZ3JhcGhpY0RldmljZS5jb250ZXh0LmRyYXdFbGVtZW50cyh0aGlzLmdyYXBoaWNEZXZpY2UuY29udGV4dC5UUklBTkdMRVMsIHRoaXMuc3Vic2V0c1tpXSwgdGhpcy5ncmFwaGljRGV2aWNlLmNvbnRleHQuVU5TSUdORURfU0hPUlQsIG9mZnNldCAqIDIpO1xyXG4gICAgICAgICAgICBvZmZzZXQgKz0gdGhpcy5zdWJzZXRzW2ldO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBNb2RlbC5wcm90b3R5cGUuRHJhd19CaWxsQm9hcmRfTGlnaHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5zaGFkZXIuQXR0YWNoKCk7XHJcbiAgICAgICAgdmFyIG1NYXRyaXggPSB0aGlzLnRyYW5zZm9ybS5NYXRyaXguTXVsdGlwbHkodGhpcy5ncmFwaGljRGV2aWNlLkNhbWVyYVJvdGF0aW9uSW52KTtcclxuICAgICAgICB2YXIgbXZwTWF0cml4ID0gdGhpcy5ncmFwaGljRGV2aWNlLlRlbXBNYXRyaXguTXVsdGlwbHkobU1hdHJpeCk7XHJcbiAgICAgICAgdmFyIGludk1hdHJpeCA9IHRoaXMudHJhbnNmb3JtLk1hdHJpeC5JbnZlcnNlKCk7XHJcbiAgICAgICAgdGhpcy5saWdodHMuZm9yRWFjaChmdW5jdGlvbiAobGlnaHQpIHsgcmV0dXJuIGxpZ2h0LkF0YWNoKCk7IH0pO1xyXG4gICAgICAgIC8vIHVuaWZvcm3lpInmlbDjga7nmbvpjLLjgajmj4/nlLtcclxuICAgICAgICB0aGlzLmdyYXBoaWNEZXZpY2UuY29udGV4dC51bmlmb3JtTWF0cml4NGZ2KHRoaXMuc2hhZGVyLnVuaWZvcm1Mb2NhdGlvbnNbMF0sIGZhbHNlLCBtdnBNYXRyaXguZGF0YSk7XHJcbiAgICAgICAgdGhpcy5ncmFwaGljRGV2aWNlLmNvbnRleHQudW5pZm9ybU1hdHJpeDRmdih0aGlzLnNoYWRlci51bmlmb3JtTG9jYXRpb25zWzFdLCBmYWxzZSwgdGhpcy50cmFuc2Zvcm0uTWF0cml4LmRhdGEpO1xyXG4gICAgICAgIHRoaXMuZ3JhcGhpY0RldmljZS5jb250ZXh0LnVuaWZvcm1NYXRyaXg0ZnYodGhpcy5zaGFkZXIudW5pZm9ybUxvY2F0aW9uc1syXSwgZmFsc2UsIGludk1hdHJpeC5kYXRhKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZXhQYXJhbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5leFBhcmFtc1tpXS5hdGFjaEZ1bmModGhpcy5ncmFwaGljRGV2aWNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5nZW9tZXRyeS5EcmF3KCk7XHJcbiAgICAgICAgdmFyIG9mZnNldCA9IDA7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN1YnNldHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5tYXRlcmlhbHNbaV0uQXR0YWNoKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZ3JhcGhpY0RldmljZS5jb250ZXh0LmRyYXdFbGVtZW50cyh0aGlzLmdyYXBoaWNEZXZpY2UuY29udGV4dC5UUklBTkdMRVMsIHRoaXMuc3Vic2V0c1tpXSwgdGhpcy5ncmFwaGljRGV2aWNlLmNvbnRleHQuVU5TSUdORURfU0hPUlQsIG9mZnNldCAqIDIpO1xyXG4gICAgICAgICAgICBvZmZzZXQgKz0gdGhpcy5zdWJzZXRzW2ldO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBNb2RlbC5wcm90b3R5cGUuRHJhd19CaWxsQm9hcmRfTm9uTGlnaHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5zaGFkZXIuQXR0YWNoKCk7XHJcbiAgICAgICAgLy90aGlzLnRyYW5zZm9ybS5Mb29rQXQodGhpcy5ncmFwaGljRGV2aWNlLkNhbWVyYVBvc2l0aW9uLG5ldyBWZWN0b3IzKDAsMSwwKSk7XHJcbiAgICAgICAgdmFyIG1NYXRyaXggPSB0aGlzLnRyYW5zZm9ybS5NYXRyaXguTXVsdGlwbHkodGhpcy5ncmFwaGljRGV2aWNlLkNhbWVyYVJvdGF0aW9uSW52KTtcclxuICAgICAgICB2YXIgbXZwTWF0cml4ID0gdGhpcy5ncmFwaGljRGV2aWNlLlRlbXBNYXRyaXguTXVsdGlwbHkobU1hdHJpeCk7XHJcbiAgICAgICAgdmFyIGludk1hdHJpeCA9IHRoaXMudHJhbnNmb3JtLk1hdHJpeC5JbnZlcnNlKCk7XHJcbiAgICAgICAgLy8gdW5pZm9ybeWkieaVsOOBrueZu+mMsuOBqOaPj+eUu1xyXG4gICAgICAgIHRoaXMuZ3JhcGhpY0RldmljZS5jb250ZXh0LnVuaWZvcm1NYXRyaXg0ZnYodGhpcy5zaGFkZXIudW5pZm9ybUxvY2F0aW9uc1swXSwgZmFsc2UsIG12cE1hdHJpeC5kYXRhKTtcclxuICAgICAgICB0aGlzLmdyYXBoaWNEZXZpY2UuY29udGV4dC51bmlmb3JtTWF0cml4NGZ2KHRoaXMuc2hhZGVyLnVuaWZvcm1Mb2NhdGlvbnNbMV0sIGZhbHNlLCB0aGlzLnRyYW5zZm9ybS5NYXRyaXguZGF0YSk7XHJcbiAgICAgICAgdGhpcy5ncmFwaGljRGV2aWNlLmNvbnRleHQudW5pZm9ybU1hdHJpeDRmdih0aGlzLnNoYWRlci51bmlmb3JtTG9jYXRpb25zWzJdLCBmYWxzZSwgaW52TWF0cml4LmRhdGEpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5leFBhcmFtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLmV4UGFyYW1zW2ldLmF0YWNoRnVuYyh0aGlzLmdyYXBoaWNEZXZpY2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmdlb21ldHJ5LkRyYXcoKTtcclxuICAgICAgICB2YXIgb2Zmc2V0ID0gMDtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3Vic2V0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFsc1tpXS5BdHRhY2goKTtcclxuICAgICAgICAgICAgdGhpcy5ncmFwaGljRGV2aWNlLmNvbnRleHQuZHJhd0VsZW1lbnRzKHRoaXMuZ3JhcGhpY0RldmljZS5jb250ZXh0LlRSSUFOR0xFUywgdGhpcy5zdWJzZXRzW2ldLCB0aGlzLmdyYXBoaWNEZXZpY2UuY29udGV4dC5VTlNJR05FRF9TSE9SVCwgb2Zmc2V0ICogMik7XHJcbiAgICAgICAgICAgIG9mZnNldCArPSB0aGlzLnN1YnNldHNbaV07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBNb2RlbDtcclxufSgpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gTW9kZWw7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBUZXh0TW9kZWwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBUZXh0TW9kZWwoaXNCaWxsQm9hcmQpIHtcclxuICAgICAgICBpZiAoaXNCaWxsQm9hcmQgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLkRyYXcgPSB0aGlzLkRyYXdfQmlsbEJvYXJkX05vbkxpZ2h0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5EcmF3ID0gdGhpcy5EcmF3X05vbkxpZ2h0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFRleHRNb2RlbC5wcm90b3R5cGUuU2V0VVZEYXRhID0gZnVuY3Rpb24gKGFyZ191dlZCTykge1xyXG4gICAgICAgIHRoaXMudXZEYXRhID0gYXJnX3V2VkJPO1xyXG4gICAgfTtcclxuICAgIFRleHRNb2RlbC5wcm90b3R5cGUuQWRkRXhQYXJhbSA9IGZ1bmN0aW9uIChhcmdfc2xvdCwgYXJnX3NpemUsIGFyZ19wYXJhbSkge1xyXG4gICAgICAgIC8vdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIilcclxuICAgIH07XHJcbiAgICBUZXh0TW9kZWwucHJvdG90eXBlLkluaXRpYWxpemVfZ2VvbSA9IGZ1bmN0aW9uIChhcmdfZ3JhcGhpY0RldmljZSwgYXJnX2dlb21ldHJ5LCBhcmdfbWF0ZXJpYWwsIGFyZ19TaGFkZXIsIGFyZ190cmFuc2Zvcm0pIHtcclxuICAgICAgICB0aGlzLmdyYXBoaWNEZXZpY2UgPSBhcmdfZ3JhcGhpY0RldmljZTtcclxuICAgICAgICB0aGlzLmdlb21ldHJ5ID0gYXJnX2dlb21ldHJ5O1xyXG4gICAgICAgIHRoaXMubWF0ZXJpYWxzID0gYXJnX21hdGVyaWFsO1xyXG4gICAgICAgIHRoaXMuaW5kZXhTaXplID0gKHRoaXMuZ2VvbWV0cnkuR2V0SW5kZXhTaXplKCkpO1xyXG4gICAgICAgIHRoaXMuc2hhZGVyID0gYXJnX1NoYWRlcjtcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IGFyZ190cmFuc2Zvcm07XHJcbiAgICB9O1xyXG4gICAgVGV4dE1vZGVsLnByb3RvdHlwZS5TZXRMaWdodCA9IGZ1bmN0aW9uIChhcmdfbGlnaHQpIHtcclxuICAgIH07XHJcbiAgICBUZXh0TW9kZWwucHJvdG90eXBlLkRyYXdfTm9uTGlnaHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5zaGFkZXIuQXR0YWNoKCk7XHJcbiAgICAgICAgdmFyIG12cE1hdHJpeCA9IHRoaXMuZ3JhcGhpY0RldmljZS5UZW1wTWF0cml4Lk11bHRpcGx5KHRoaXMudHJhbnNmb3JtLk1hdHJpeCk7XHJcbiAgICAgICAgdmFyIGludk1hdHJpeCA9IHRoaXMudHJhbnNmb3JtLk1hdHJpeC5JbnZlcnNlKCk7XHJcbiAgICAgICAgLy8gdW5pZm9ybeWkieaVsOOBrueZu+mMsuOBqOaPj+eUu1xyXG4gICAgICAgIHRoaXMuZ3JhcGhpY0RldmljZS5jb250ZXh0LnVuaWZvcm1NYXRyaXg0ZnYodGhpcy5zaGFkZXIudW5pZm9ybUxvY2F0aW9uc1swXSwgZmFsc2UsIG12cE1hdHJpeC5kYXRhKTtcclxuICAgICAgICB0aGlzLmdyYXBoaWNEZXZpY2UuY29udGV4dC51bmlmb3JtTWF0cml4NGZ2KHRoaXMuc2hhZGVyLnVuaWZvcm1Mb2NhdGlvbnNbMV0sIGZhbHNlLCB0aGlzLnRyYW5zZm9ybS5NYXRyaXguZGF0YSk7XHJcbiAgICAgICAgdGhpcy5ncmFwaGljRGV2aWNlLmNvbnRleHQudW5pZm9ybU1hdHJpeDRmdih0aGlzLnNoYWRlci51bmlmb3JtTG9jYXRpb25zWzJdLCBmYWxzZSwgaW52TWF0cml4LmRhdGEpO1xyXG4gICAgICAgIHRoaXMuZ2VvbWV0cnkuQ2hhbmdlVkJPKHRoaXMudXZEYXRhLCAxKTtcclxuICAgICAgICB0aGlzLmdlb21ldHJ5LkRyYXcoKTtcclxuICAgICAgICB0aGlzLm1hdGVyaWFscy5BdHRhY2goKTtcclxuICAgICAgICB0aGlzLmdyYXBoaWNEZXZpY2UuY29udGV4dC5kcmF3RWxlbWVudHModGhpcy5ncmFwaGljRGV2aWNlLmNvbnRleHQuVFJJQU5HTEVTLCB0aGlzLmluZGV4U2l6ZSwgdGhpcy5ncmFwaGljRGV2aWNlLmNvbnRleHQuVU5TSUdORURfU0hPUlQsIDApO1xyXG4gICAgfTtcclxuICAgIFRleHRNb2RlbC5wcm90b3R5cGUuRHJhd19CaWxsQm9hcmRfTm9uTGlnaHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5zaGFkZXIuQXR0YWNoKCk7XHJcbiAgICAgICAgLy90aGlzLnRyYW5zZm9ybS5Mb29rQXQodGhpcy5ncmFwaGljRGV2aWNlLkNhbWVyYVBvc2l0aW9uLG5ldyBWZWN0b3IzKDAsMSwwKSk7XHJcbiAgICAgICAgdmFyIG1NYXRyaXggPSB0aGlzLnRyYW5zZm9ybS5NYXRyaXguTXVsdGlwbHkodGhpcy5ncmFwaGljRGV2aWNlLkNhbWVyYVJvdGF0aW9uSW52KTtcclxuICAgICAgICB2YXIgbXZwTWF0cml4ID0gdGhpcy5ncmFwaGljRGV2aWNlLlRlbXBNYXRyaXguTXVsdGlwbHkobU1hdHJpeCk7XHJcbiAgICAgICAgdmFyIGludk1hdHJpeCA9IHRoaXMudHJhbnNmb3JtLk1hdHJpeC5JbnZlcnNlKCk7XHJcbiAgICAgICAgLy8gdW5pZm9ybeWkieaVsOOBrueZu+mMsuOBqOaPj+eUu1xyXG4gICAgICAgIHRoaXMuZ3JhcGhpY0RldmljZS5jb250ZXh0LnVuaWZvcm1NYXRyaXg0ZnYodGhpcy5zaGFkZXIudW5pZm9ybUxvY2F0aW9uc1swXSwgZmFsc2UsIG12cE1hdHJpeC5kYXRhKTtcclxuICAgICAgICB0aGlzLmdyYXBoaWNEZXZpY2UuY29udGV4dC51bmlmb3JtTWF0cml4NGZ2KHRoaXMuc2hhZGVyLnVuaWZvcm1Mb2NhdGlvbnNbMV0sIGZhbHNlLCB0aGlzLnRyYW5zZm9ybS5NYXRyaXguZGF0YSk7XHJcbiAgICAgICAgdGhpcy5ncmFwaGljRGV2aWNlLmNvbnRleHQudW5pZm9ybU1hdHJpeDRmdih0aGlzLnNoYWRlci51bmlmb3JtTG9jYXRpb25zWzJdLCBmYWxzZSwgaW52TWF0cml4LmRhdGEpO1xyXG4gICAgICAgIHRoaXMuZ2VvbWV0cnkuQ2hhbmdlVkJPKHRoaXMudXZEYXRhLCAxKTtcclxuICAgICAgICB0aGlzLmdlb21ldHJ5LkRyYXcoKTtcclxuICAgICAgICB0aGlzLm1hdGVyaWFscy5BdHRhY2goKTtcclxuICAgICAgICB0aGlzLmdyYXBoaWNEZXZpY2UuY29udGV4dC5kcmF3RWxlbWVudHModGhpcy5ncmFwaGljRGV2aWNlLmNvbnRleHQuVFJJQU5HTEVTLCB0aGlzLmluZGV4U2l6ZSwgdGhpcy5ncmFwaGljRGV2aWNlLmNvbnRleHQuVU5TSUdORURfU0hPUlQsIDApO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBUZXh0TW9kZWw7XHJcbn0oKSk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IFRleHRNb2RlbDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIFRyYW5zZm9ybV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9UcmFuc2Zvcm1cIikpO1xyXG52YXIgUG9pbnRMaWdodCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFBvaW50TGlnaHQoYXJnX2RldmljZSkge1xyXG4gICAgICAgIHRoaXMuZ3JhcGhpY0RldmljZSA9IGFyZ19kZXZpY2U7XHJcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0gPSBuZXcgVHJhbnNmb3JtXzEuZGVmYXVsdCgpO1xyXG4gICAgfVxyXG4gICAgUG9pbnRMaWdodC5wcm90b3R5cGUuQXRhY2ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5ncmFwaGljRGV2aWNlLmNvbnRleHQudW5pZm9ybTNmdih0aGlzLmdyYXBoaWNEZXZpY2Uuc2hhZGVyLnVuaWZvcm1Mb2NhdGlvbnNbNF0sIHRoaXMudHJhbnNmb3JtLlBvc2l0aW9uLnh5eik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFBvaW50TGlnaHQ7XHJcbn0oKSk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IFBvaW50TGlnaHQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn07XHJcbnZhciBfX2dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufTtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgU2NlbmVfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9TY2VuZS9TY2VuZVwiKSk7XHJcbnZhciBSZXNvdXJjZUNyZWF0ZXJfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9Ub29sL1Jlc291cmNlQ3JlYXRlclwiKSk7XHJcbnZhciBHZW9tZXRyeUdlbmVyYXRvcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1Rvb2wvR2VvbWV0cnlHZW5lcmF0b3JcIikpO1xyXG52YXIgUXVhdF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL01hdGgvUXVhdFwiKSk7XHJcbnZhciBWZWN0b3I0XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vTWF0aC9WZWN0b3I0XCIpKTtcclxudmFyIFZlY3RvcjNfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9NYXRoL1ZlY3RvcjNcIikpO1xyXG52YXIgUG9pbnRMaWdodF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL0xpZ2h0L1BvaW50TGlnaHRcIikpO1xyXG52YXIgTW9kZWxEcmF3Q29tcG9uZW50XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vQ29tcG9uZW50L01vZGVsRHJhd0NvbXBvbmVudFwiKSk7XHJcbnZhciBWZWN0b3IyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vTWF0aC9WZWN0b3IyXCIpKTtcclxudmFyIFRleHREcmF3Q29tcG9uZW50XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vQ29tcG9uZW50L1RleHREcmF3Q29tcG9uZW50XCIpKTtcclxudmFyIFRyYW5zZm9ybV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1RyYW5zZm9ybVwiKSk7XHJcbnZhciBTYW1wbGVTY2VuZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1NhbXBsZVNjZW5lXCIpKTtcclxudmFyIFByaW1pdGl2ZVR5cGU7XHJcbihmdW5jdGlvbiAoUHJpbWl0aXZlVHlwZSkge1xyXG4gICAgUHJpbWl0aXZlVHlwZVtQcmltaXRpdmVUeXBlW1wic3BoZXJlXCJdID0gMF0gPSBcInNwaGVyZVwiO1xyXG4gICAgUHJpbWl0aXZlVHlwZVtQcmltaXRpdmVUeXBlW1wiYm94X0FBQkJcIl0gPSAxXSA9IFwiYm94X0FBQkJcIjtcclxuICAgIFByaW1pdGl2ZVR5cGVbUHJpbWl0aXZlVHlwZVtcImJveF9PQkJcIl0gPSAyXSA9IFwiYm94X09CQlwiO1xyXG4gICAgUHJpbWl0aXZlVHlwZVtQcmltaXRpdmVUeXBlW1wicG9pbnRcIl0gPSAzXSA9IFwicG9pbnRcIjtcclxufSkoUHJpbWl0aXZlVHlwZSB8fCAoUHJpbWl0aXZlVHlwZSA9IHt9KSk7XHJcbnZhciBmbG9hdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIGZsb2F0KCkge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoMSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmxvYXQ7XHJcbn0oKSk7XHJcbnZhciBMb2FkU2NlbmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoTG9hZFNjZW5lLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gTG9hZFNjZW5lKHNjZW5lTWFuZ2VyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc2NlbmVNYW5nZXIpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuYVF1YXRlcm5pb24gPSBuZXcgUXVhdF8xLmRlZmF1bHQoKS5JZGVudGl0eSgpO1xyXG4gICAgICAgIF90aGlzLmJRdWF0ZXJuaW9uID0gbmV3IFF1YXRfMS5kZWZhdWx0KCkuSWRlbnRpdHkoKTtcclxuICAgICAgICBfdGhpcy5zUXVhdGVybmlvbiA9IG5ldyBRdWF0XzEuZGVmYXVsdCgpLklkZW50aXR5KCk7XHJcbiAgICAgICAgX3RoaXMuem9vbURhdGEgPSBuZXcgZmxvYXQoKTtcclxuICAgICAgICBfdGhpcy56b29tRGlyZWN0aW9uID0gMS4wO1xyXG4gICAgICAgIF90aGlzLnpvb21EYXRhLmRhdGFbMF0gPSAwLjU7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgTG9hZFNjZW5lLnByb3RvdHlwZS5CZWZMb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuQWRkTGF5ZXIoKTtcclxuICAgICAgICB0aGlzLkFkZENhbWVyYSgwLCAxLCBcIm1haW5cIiwgZmFsc2UsIHRoaXMuc2NlbmVNYW5hZ2VyLkdldFJlc291cmNlQ29udGFpbmVyKCkuR2V0VGV4dHVyZShcImxvYWRpbmdDYW1lcmFcIikpO1xyXG4gICAgICAgIC8vIOmggueCueOCt+OCp+ODvOODgOOBqOODleODqeOCsOODoeODs+ODiOOCt+OCp+ODvOODgOOBrueUn+aIkFxyXG4gICAgICAgIHZhciBsaWdodCA9IG5ldyBQb2ludExpZ2h0XzEuZGVmYXVsdCh0aGlzLnNjZW5lTWFuYWdlci5HZXRHcmFwaGljRGV2aWNlKCkpO1xyXG4gICAgICAgIGxpZ2h0LnRyYW5zZm9ybS5Qb3NpdGlvbiA9IG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgtNSwgLTUsIDEwKTtcclxuICAgICAgICAvL3RoaXMucmVuZGVyZXIuU2V0TGlnaHQobGlnaHQsMCk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5TZXRMaWdodChsaWdodCwgMSk7XHJcbiAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuR2V0R3JhcGhpY0RldmljZSgpLkVuYWJsZVN0ZW5jaWwoKTtcclxuICAgICAgICB0aGlzLkdldENhbWVyYShcIm1haW5cIikudHJhbnNmb3JtLlBvc2l0aW9uID0gbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAsIC0zLCAxMCk7XHJcbiAgICAgICAgdGhpcy5HZXRDYW1lcmEoXCJtYWluXCIpLnRyYW5zZm9ybS5Mb29rQXQobmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAsIDAsIDApLCBWZWN0b3IzXzEuZGVmYXVsdC55QXhpcyk7XHJcbiAgICAgICAgdGhpcy5HZXRDYW1lcmEoXCJtYWluXCIpLmNsZWFyQ29sb3IgPSBuZXcgVmVjdG9yNF8xLmRlZmF1bHQoMC4wLCAwLjAsIDAuMCwgMS4wKTtcclxuICAgICAgICB0aGlzLmN1YmUgPSB0aGlzLmdhbWVPYmplY3RNYW5hZ2VyLkFkZEdhbWVPYmplY3QoXCJjdWJlXCIpO1xyXG4gICAgICAgIHRoaXMuYW5vdGhlckN1YmUgPSB0aGlzLmdhbWVPYmplY3RNYW5hZ2VyLkFkZEdhbWVPYmplY3QoXCJjdWJlXCIpO1xyXG4gICAgICAgIHRoaXMucHJvamVjdGlvblBsYW5lID0gdGhpcy5nYW1lT2JqZWN0TWFuYWdlci5BZGRHYW1lT2JqZWN0KFwicHJvamVjdGlvbkN1YmVcIik7XHJcbiAgICAgICAgLy90aGlzLnRvcnVzLlNldENvbXBvbmVudChuZXcgTW9kZWxEcmF3Q29tcG9uZW50KFwiaHN2VG9ydXNcIixcImNhbG9yeU1hdGVyaWFsXCIsXCJwb2ludExpZ2h0XCIsMSkpIGFzIE1vZGVsRHJhd0NvbXBvbmVudDtcclxuICAgICAgICAvL3RoaXMuY3ViZS5TZXRDb21wb25lbnQobmV3IE1vZGVsRHJhd0NvbXBvbmVudChmYWxzZSwgXCJjdWJlXCIsXCJjYWxvcnlNYXRlcmlhbFwiLFwidGV4U2hhZGVyXCIsMSxmYWxzZSkpIGFzIE1vZGVsRHJhd0NvbXBvbmVudDtcclxuICAgICAgICB2YXIgdHIgPSBuZXcgVHJhbnNmb3JtXzEuZGVmYXVsdCgpO1xyXG4gICAgICAgIHRyLlBvc2l0aW9uID0gbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDEsIDEsIDEpO1xyXG4gICAgICAgIHZhciB0cjIgPSBuZXcgVHJhbnNmb3JtXzEuZGVmYXVsdCgpO1xyXG4gICAgICAgIHRyMi5Qb3NpdGlvbiA9IG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgtMSwgLTEsIDIpO1xyXG4gICAgICAgIHRoaXMuY3ViZS5TZXRDb21wb25lbnQobmV3IFRleHREcmF3Q29tcG9uZW50XzEuZGVmYXVsdChcImxvYWRpbmdcIiwgXCJmb250XCIsIFwiZm9udFNoYWRlclwiLCBuZXcgVmVjdG9yNF8xLmRlZmF1bHQoMC43NSwgMC43NSwgMC4yNSwgMSksIDEsIHRydWUpKTtcclxuICAgICAgICAvL3RoaXMuYW5vdGhlckN1YmUuU2V0Q29tcG9uZW50KG5ldyBNb2RlbERyYXdDb21wb25lbnQoZmFsc2UsIFwiY3ViZVwiLFwiY2Fsb3J5TWF0ZXJpYWxcIixcInRleFNoYWRlclwiLDEsdHJ1ZSkpIGFzIE1vZGVsRHJhd0NvbXBvbmVudDtcclxuICAgICAgICB0aGlzLnByb2plY3Rpb25QbGFuZS5TZXRDb21wb25lbnQobmV3IE1vZGVsRHJhd0NvbXBvbmVudF8xLmRlZmF1bHQoZmFsc2UsIFwicGxhbmVcIiwgXCJsb2FkaW5nQ2FtZXJhTWF0ZXJpYWxcIiwgXCJ0ZXhTaGFkZXJcIiwgMCwgZmFsc2UpKTtcclxuICAgICAgICB0aGlzLnByb2plY3Rpb25QbGFuZS50cmFuc2Zvcm0uU2NhbGUgPSBuZXcgVmVjdG9yM18xLmRlZmF1bHQoNTAwLCA1MDAsIDEpO1xyXG4gICAgICAgIHRoaXMuY3ViZS50cmFuc2Zvcm0uUG9zaXRpb24gPSBuZXcgVmVjdG9yM18xLmRlZmF1bHQoMC41LCAwLCAwLjUpO1xyXG4gICAgICAgIHRoaXMuYW5vdGhlckN1YmUudHJhbnNmb3JtLlBvc2l0aW9uID0gbmV3IFZlY3RvcjNfMS5kZWZhdWx0KC0xLCAtNSwgMTApO1xyXG4gICAgICAgIHRoaXMucHJvamVjdGlvblBsYW5lLnRyYW5zZm9ybS5Qb3NpdGlvbiA9IG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLCAtMSk7XHJcbiAgICB9O1xyXG4gICAgTG9hZFNjZW5lLnByb3RvdHlwZS5PbkxvYWRpbmdVcGRhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB9O1xyXG4gICAgTG9hZFNjZW5lLnByb3RvdHlwZS5PbkxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgY2Fsb3J5VGV4dHVyZSwgbWF0ZXJpYWwsIG1hdGVyaWFsO1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5HZXRSZXNvdXJjZUNvbnRhaW5lcigpLkFkZFNoYWRlcihSZXNvdXJjZUNyZWF0ZXJfMS5kZWZhdWx0LkNyZWF0ZVNoYWRlcignc2hhZGVyL1BvaW50TGlnaHRWUy5nbHNsJywgXCJzaGFkZXIvUG9pbnRMaWdodEZTLmdsc2xcIiwgdGhpcy5zY2VuZU1hbmFnZXIuR2V0R3JhcGhpY0RldmljZSgpKSwgXCJwb2ludExpZ2h0XCIpO1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIjJcIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5HZXRSZXNvdXJjZUNvbnRhaW5lcigpLkFkZFNoYWRlcihSZXNvdXJjZUNyZWF0ZXJfMS5kZWZhdWx0LkNyZWF0ZVNoYWRlcignc2hhZGVyL1VWTm9ybWFsVlMuZ2xzbCcsIFwic2hhZGVyL0RlZmF1bHRGU19saWdodC5nbHNsXCIsIHRoaXMuc2NlbmVNYW5hZ2VyLkdldEdyYXBoaWNEZXZpY2UoKSksIFwidGV4U2hhZGVyX2xpZ2h0XCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuR2V0UmVzb3VyY2VDb250YWluZXIoKS5BZGRTaGFkZXIoUmVzb3VyY2VDcmVhdGVyXzEuZGVmYXVsdC5DcmVhdGVTaGFkZXIoJ3NoYWRlci9VVk5vcm1hbENvbG9yVlMuZ2xzbCcsIFwic2hhZGVyL0JsYWNrVGVzdEZTLmdsc2xcIiwgdGhpcy5zY2VuZU1hbmFnZXIuR2V0R3JhcGhpY0RldmljZSgpKSwgXCJibGFja1wiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLkdldFJlc291cmNlQ29udGFpbmVyKCkuQWRkU2hhZGVyKFJlc291cmNlQ3JlYXRlcl8xLmRlZmF1bHQuQ3JlYXRlU2hhZGVyKCdzaGFkZXIvVmVydGV4UG9zaXRpb25WUy5nbHNsJywgXCJzaGFkZXIvQW1iaWVudEZTLmdsc2xcIiwgdGhpcy5zY2VuZU1hbmFnZXIuR2V0R3JhcGhpY0RldmljZSgpKSwgXCJhbWJpZW50XCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuR2V0UmVzb3VyY2VDb250YWluZXIoKS5BZGRTaGFkZXIoUmVzb3VyY2VDcmVhdGVyXzEuZGVmYXVsdC5DcmVhdGVTaGFkZXIoJ3NoYWRlci9WZXJ0ZXhQb3NpdGlvblZTLmdsc2wnLCBcInNoYWRlci9TaW1wbGVDb2xvckZTLmdsc2xcIiwgdGhpcy5zY2VuZU1hbmFnZXIuR2V0R3JhcGhpY0RldmljZSgpKSwgXCJzaW1wbGVDb2xvclwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLkdldFJlc291cmNlQ29udGFpbmVyKCkuQWRkU2hhZGVyKFJlc291cmNlQ3JlYXRlcl8xLmRlZmF1bHQuQ3JlYXRlU2hhZGVyKCdzaGFkZXIvVVZOb3JtYWxWUy5nbHNsJywgXCJzaGFkZXIvT25seU1hdGVyaWFsRlMuZ2xzbFwiLCB0aGlzLnNjZW5lTWFuYWdlci5HZXRHcmFwaGljRGV2aWNlKCkpLCBcIm9ubHlNYXRlcmlhbFwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLkdldFJlc291cmNlQ29udGFpbmVyKCkuQWRkU2hhZGVyKFJlc291cmNlQ3JlYXRlcl8xLmRlZmF1bHQuQ3JlYXRlU2hhZGVyKCdzaGFkZXIvVVZOb3JtYWxWUy5nbHNsJywgXCJzaGFkZXIvUmFpbmJvd0ZTLmdsc2xcIiwgdGhpcy5zY2VuZU1hbmFnZXIuR2V0R3JhcGhpY0RldmljZSgpKSwgXCJyYWluYm93XCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuR2V0UmVzb3VyY2VDb250YWluZXIoKS5BZGRTaGFkZXIoUmVzb3VyY2VDcmVhdGVyXzEuZGVmYXVsdC5DcmVhdGVTaGFkZXIoJ3NoYWRlci9VVk5vcm1hbFZTLmdsc2wnLCBcIlJhaW5ib3dBbHBoYVwiLCB0aGlzLnNjZW5lTWFuYWdlci5HZXRHcmFwaGljRGV2aWNlKCksIGZhbHNlLCB0cnVlKSwgXCJyYWluYm93QWxwaGFcIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5HZXRSZXNvdXJjZUNvbnRhaW5lcigpLkFkZEdlb21ldHJ5KFJlc291cmNlQ3JlYXRlcl8xLmRlZmF1bHQuQ3JlYXRlR2VvbWV0cnkoR2VvbWV0cnlHZW5lcmF0b3JfMS5kZWZhdWx0LkNyZWF0ZVRvcnVzKDMyLCAzMiwgMC41LCAxKSwgZmFsc2UsIHRydWUsIHRydWUsIHRoaXMuc2NlbmVNYW5hZ2VyLkdldEdyYXBoaWNEZXZpY2UoKSksIFwiaHN2VG9ydXNcIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5HZXRSZXNvdXJjZUNvbnRhaW5lcigpLkFkZEdlb21ldHJ5KFJlc291cmNlQ3JlYXRlcl8xLmRlZmF1bHQuQ3JlYXRlR2VvbWV0cnkoR2VvbWV0cnlHZW5lcmF0b3JfMS5kZWZhdWx0LkNyZWF0ZUN1YmUoMSwgbmV3IFZlY3RvcjRfMS5kZWZhdWx0KDEuMCwgMS4wLCAxLjAsIDEpKSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdGhpcy5zY2VuZU1hbmFnZXIuR2V0R3JhcGhpY0RldmljZSgpKSwgXCJjdWJlXCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuR2V0UmVzb3VyY2VDb250YWluZXIoKS5BZGRHZW9tZXRyeShSZXNvdXJjZUNyZWF0ZXJfMS5kZWZhdWx0LkNyZWF0ZUdlb21ldHJ5KEdlb21ldHJ5R2VuZXJhdG9yXzEuZGVmYXVsdC5DcmVhdGVDdWJlKDEsIG5ldyBWZWN0b3I0XzEuZGVmYXVsdCgxLjAsIDEuMCwgMS4wLCAxKSksIGZhbHNlLCBmYWxzZSwgZmFsc2UsIHRoaXMuc2NlbmVNYW5hZ2VyLkdldEdyYXBoaWNEZXZpY2UoKSksIFwiY3ViZV9wb3NpdGlvblwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLkdldFJlc291cmNlQ29udGFpbmVyKCkuQWRkR2VvbWV0cnkoUmVzb3VyY2VDcmVhdGVyXzEuZGVmYXVsdC5DcmVhdGVHZW9tZXRyeShHZW9tZXRyeUdlbmVyYXRvcl8xLmRlZmF1bHQuQ3JlYXRlQ3ViZSgxLCBuZXcgVmVjdG9yNF8xLmRlZmF1bHQoMS4wLCAxLjAsIDEuMCwgMSkpLCBmYWxzZSwgdHJ1ZSwgdHJ1ZSwgdGhpcy5zY2VuZU1hbmFnZXIuR2V0R3JhcGhpY0RldmljZSgpKSwgXCJub25UZXhjdWJlXCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuR2V0UmVzb3VyY2VDb250YWluZXIoKS5BZGRHZW9tZXRyeShSZXNvdXJjZUNyZWF0ZXJfMS5kZWZhdWx0LkNyZWF0ZUdlb21ldHJ5KEdlb21ldHJ5R2VuZXJhdG9yXzEuZGVmYXVsdC5DcmVhdGVTcGhlcmUoMTIsIDEyLCAwLjUsIG5ldyBWZWN0b3I0XzEuZGVmYXVsdCgwLjAsIDAuMCwgMC4wLCAxKSksIGZhbHNlLCB0cnVlLCB0cnVlLCB0aGlzLnNjZW5lTWFuYWdlci5HZXRHcmFwaGljRGV2aWNlKCkpLCBcInNwaGVyZVwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLkdldFJlc291cmNlQ29udGFpbmVyKCkuQWRkR2VvbWV0cnkoUmVzb3VyY2VDcmVhdGVyXzEuZGVmYXVsdC5DcmVhdGVHZW9tZXRyeShHZW9tZXRyeUdlbmVyYXRvcl8xLmRlZmF1bHQuQ3JlYXRlU3BoZXJlKDQsIDQsIDAuNSwgbmV3IFZlY3RvcjRfMS5kZWZhdWx0KDAuMCwgMC4wLCAwLjAsIDEpKSwgdHJ1ZSwgdHJ1ZSwgZmFsc2UsIHRoaXMuc2NlbmVNYW5hZ2VyLkdldEdyYXBoaWNEZXZpY2UoKSksIFwiZWZmZWN0U3BoZXJlXCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuR2V0UmVzb3VyY2VDb250YWluZXIoKS5BZGRHZW9tZXRyeShSZXNvdXJjZUNyZWF0ZXJfMS5kZWZhdWx0LkNyZWF0ZUdlb21ldHJ5KEdlb21ldHJ5R2VuZXJhdG9yXzEuZGVmYXVsdC5DcmVhdGVQbGFuZShuZXcgVmVjdG9yMl8xLmRlZmF1bHQoMSwgMSksIGZhbHNlLCBuZXcgVmVjdG9yNF8xLmRlZmF1bHQoMS4wLCAxLjAsIDEuMCwgMSkpLCB0cnVlLCBmYWxzZSwgZmFsc2UsIHRoaXMuc2NlbmVNYW5hZ2VyLkdldEdyYXBoaWNEZXZpY2UoKSksIFwicGxhbmVcIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5HZXRSZXNvdXJjZUNvbnRhaW5lcigpLkFkZEdlb21ldHJ5KFJlc291cmNlQ3JlYXRlcl8xLmRlZmF1bHQuQ3JlYXRlR2VvbWV0cnkoR2VvbWV0cnlHZW5lcmF0b3JfMS5kZWZhdWx0LkNyZWF0ZVBsYW5lKG5ldyBWZWN0b3IyXzEuZGVmYXVsdCgxLCAxKSwgZmFsc2UsIG5ldyBWZWN0b3I0XzEuZGVmYXVsdCgxLjAsIDEuMCwgMS4wLCAxKSksIGZhbHNlLCBmYWxzZSwgZmFsc2UsIHRoaXMuc2NlbmVNYW5hZ2VyLkdldEdyYXBoaWNEZXZpY2UoKSksIFwicGxhbmVfcG9zaXRpb25cIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5HZXRSZXNvdXJjZUNvbnRhaW5lcigpLkFkZEdlb21ldHJ5KFJlc291cmNlQ3JlYXRlcl8xLmRlZmF1bHQuQ3JlYXRlR2VvbWV0cnkoR2VvbWV0cnlHZW5lcmF0b3JfMS5kZWZhdWx0LkNyZWF0ZVBsYW5lKG5ldyBWZWN0b3IyXzEuZGVmYXVsdCgxLCAxKSwgZmFsc2UsIG5ldyBWZWN0b3I0XzEuZGVmYXVsdCgxLjAsIDEuMCwgMS4wLCAxKSksIHRydWUsIHRydWUsIGZhbHNlLCB0aGlzLnNjZW5lTWFuYWdlci5HZXRHcmFwaGljRGV2aWNlKCkpLCBcInV2Tm9ybWFsUGxhbmVcIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5HZXRSZXNvdXJjZUNvbnRhaW5lcigpLkFkZEdlb21ldHJ5KFJlc291cmNlQ3JlYXRlcl8xLmRlZmF1bHQuQ3JlYXRlR2VvbWV0cnkoR2VvbWV0cnlHZW5lcmF0b3JfMS5kZWZhdWx0LkNyZWF0ZUJhcihuZXcgVmVjdG9yMl8xLmRlZmF1bHQoMSwgMSksIGZhbHNlLCBuZXcgVmVjdG9yNF8xLmRlZmF1bHQoMS4wLCAxLjAsIDEuMCwgMSkpLCB0cnVlLCB0cnVlLCBmYWxzZSwgdGhpcy5zY2VuZU1hbmFnZXIuR2V0R3JhcGhpY0RldmljZSgpKSwgXCJ1dk5vcm1hbEJhclwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLkdldFJlc291cmNlQ29udGFpbmVyKCkuQWRkR2VvbWV0cnkoUmVzb3VyY2VDcmVhdGVyXzEuZGVmYXVsdC5DcmVhdGVHZW9tZXRyeShHZW9tZXRyeUdlbmVyYXRvcl8xLmRlZmF1bHQuQ3JlYXRlUGxhbmUobmV3IFZlY3RvcjJfMS5kZWZhdWx0KDEsIDEpLCBmYWxzZSwgbmV3IFZlY3RvcjRfMS5kZWZhdWx0KDEuMCwgMS4wLCAxLjAsIDEpKSwgZmFsc2UsIHRydWUsIHRydWUsIHRoaXMuc2NlbmVNYW5hZ2VyLkdldEdyYXBoaWNEZXZpY2UoKSksIFwiZmxvb3JcIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5HZXRSZXNvdXJjZUNvbnRhaW5lcigpLkFkZE1lc2goUmVzb3VyY2VDcmVhdGVyXzEuZGVmYXVsdC5DcmVhdGVNZXNoUmVzb3VyY2VGcm9tRmlsZShcIm1vZGVsL01hZ3Vyby9tYWd1cm8uYjNtXCIsIHRoaXMuc2NlbmVNYW5hZ2VyLkdldFJlc291cmNlQ29udGFpbmVyKCksIHRoaXMuc2NlbmVNYW5hZ2VyLkdldEdyYXBoaWNEZXZpY2UoKSksIFwibWFndXJvXCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuR2V0UmVzb3VyY2VDb250YWluZXIoKS5BZGRNZXNoKFJlc291cmNlQ3JlYXRlcl8xLmRlZmF1bHQuQ3JlYXRlTWVzaFJlc291cmNlRnJvbUZpbGUoXCJtb2RlbC9GQlgvY3JhYi5iM21cIiwgdGhpcy5zY2VuZU1hbmFnZXIuR2V0UmVzb3VyY2VDb250YWluZXIoKSwgdGhpcy5zY2VuZU1hbmFnZXIuR2V0R3JhcGhpY0RldmljZSgpKSwgXCJjcmFiXCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuR2V0UmVzb3VyY2VDb250YWluZXIoKS5BZGRNZXNoKFJlc291cmNlQ3JlYXRlcl8xLmRlZmF1bHQuQ3JlYXRlTWVzaFJlc291cmNlRnJvbUZpbGUoXCJtb2RlbC9GQlgvc2FuZ28uYjNtXCIsIHRoaXMuc2NlbmVNYW5hZ2VyLkdldFJlc291cmNlQ29udGFpbmVyKCksIHRoaXMuc2NlbmVNYW5hZ2VyLkdldEdyYXBoaWNEZXZpY2UoKSksIFwic2FuZ29cIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5HZXRSZXNvdXJjZUNvbnRhaW5lcigpLkFkZE1lc2goUmVzb3VyY2VDcmVhdGVyXzEuZGVmYXVsdC5DcmVhdGVNZXNoUmVzb3VyY2VGcm9tRmlsZShcIm1vZGVsL0ZCWC90dXJ0bGUuYjNtXCIsIHRoaXMuc2NlbmVNYW5hZ2VyLkdldFJlc291cmNlQ29udGFpbmVyKCksIHRoaXMuc2NlbmVNYW5hZ2VyLkdldEdyYXBoaWNEZXZpY2UoKSksIFwidHVydGxlXCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuR2V0UmVzb3VyY2VDb250YWluZXIoKS5BZGRNZXNoKFJlc291cmNlQ3JlYXRlcl8xLmRlZmF1bHQuQ3JlYXRlTWVzaFJlc291cmNlRnJvbUZpbGUoXCJtb2RlbC9GQlgvdXR1Ym8uYjNtXCIsIHRoaXMuc2NlbmVNYW5hZ2VyLkdldFJlc291cmNlQ29udGFpbmVyKCksIHRoaXMuc2NlbmVNYW5hZ2VyLkdldEdyYXBoaWNEZXZpY2UoKSksIFwidXR1Ym9cIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5HZXRSZXNvdXJjZUNvbnRhaW5lcigpLkFkZE1lc2goUmVzb3VyY2VDcmVhdGVyXzEuZGVmYXVsdC5DcmVhdGVNZXNoUmVzb3VyY2VGcm9tRmlsZShcIm1vZGVsL0ZCWC9maXNoZXMuYjNtXCIsIHRoaXMuc2NlbmVNYW5hZ2VyLkdldFJlc291cmNlQ29udGFpbmVyKCksIHRoaXMuc2NlbmVNYW5hZ2VyLkdldEdyYXBoaWNEZXZpY2UoKSksIFwiZmlzaGVzXCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuR2V0UmVzb3VyY2VDb250YWluZXIoKS5BZGRNZXNoKFJlc291cmNlQ3JlYXRlcl8xLmRlZmF1bHQuQ3JlYXRlTWVzaFJlc291cmNlRnJvbUZpbGUoXCJtb2RlbC9GQlgvY2xvd25maXNoLmIzbVwiLCB0aGlzLnNjZW5lTWFuYWdlci5HZXRSZXNvdXJjZUNvbnRhaW5lcigpLCB0aGlzLnNjZW5lTWFuYWdlci5HZXRHcmFwaGljRGV2aWNlKCkpLCBcImNsb3duZmlzaFwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLkdldFJlc291cmNlQ29udGFpbmVyKCkuQWRkTWVzaChSZXNvdXJjZUNyZWF0ZXJfMS5kZWZhdWx0LkNyZWF0ZU1lc2hSZXNvdXJjZUZyb21GaWxlKFwibW9kZWwvRkJYL3NlYXdlZWQuYjNtXCIsIHRoaXMuc2NlbmVNYW5hZ2VyLkdldFJlc291cmNlQ29udGFpbmVyKCksIHRoaXMuc2NlbmVNYW5hZ2VyLkdldEdyYXBoaWNEZXZpY2UoKSksIFwic2Vhd2VlZFwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLkdldFJlc291cmNlQ29udGFpbmVyKCkuQWRkTWVzaChSZXNvdXJjZUNyZWF0ZXJfMS5kZWZhdWx0LkNyZWF0ZU1lc2hSZXNvdXJjZUZyb21GaWxlKFwibW9kZWwvRkJYL3NjYWxsb3BzLmIzbVwiLCB0aGlzLnNjZW5lTWFuYWdlci5HZXRSZXNvdXJjZUNvbnRhaW5lcigpLCB0aGlzLnNjZW5lTWFuYWdlci5HZXRHcmFwaGljRGV2aWNlKCkpLCBcInNjYWxsb3BzXCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuR2V0UmVzb3VyY2VDb250YWluZXIoKS5BZGRTb3VuZEZyb21GaWxlKFwiYXVkaW8va2lsbDIud2F2XCIsIFwia2lsbFwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLkdldFJlc291cmNlQ29udGFpbmVyKCkuQWRkU291bmRGcm9tRmlsZShcImF1ZGlvL3VwX3NlLndhdlwiLCBcInVwXCIpO1xyXG4gICAgICAgICAgICAgICAgY2Fsb3J5VGV4dHVyZSA9IFJlc291cmNlQ3JlYXRlcl8xLmRlZmF1bHQuQ3JlYXRlVGV4dHVyZSgnaW1hZ2UvY2Fsb3J5LnBuZycsIHRoaXMuc2NlbmVNYW5hZ2VyLkdldEdyYXBoaWNEZXZpY2UoKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5HZXRSZXNvdXJjZUNvbnRhaW5lcigpLkFkZFRleHR1cmUoY2Fsb3J5VGV4dHVyZSwgXCJjYWxvcnlcIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5HZXRSZXNvdXJjZUNvbnRhaW5lcigpLkFkZFRleHR1cmVGcm9tRmlsZShcImltYWdlL21hZ3Vyb3NzeS5wbmdcIiwgdGhpcy5zY2VuZU1hbmFnZXIuR2V0R3JhcGhpY0RldmljZSgpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLkdldFJlc291cmNlQ29udGFpbmVyKCkuQWRkVGV4dHVyZUZyb21GaWxlKFwiaW1hZ2UvY2lyY2xlMzIucG5nXCIsIHRoaXMuc2NlbmVNYW5hZ2VyLkdldEdyYXBoaWNEZXZpY2UoKSk7XHJcbiAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IHRoaXMuc2NlbmVNYW5hZ2VyLkdldFJlc291cmNlQ29udGFpbmVyKCkuQWRkTWF0ZXJpYWwoUmVzb3VyY2VDcmVhdGVyXzEuZGVmYXVsdC5DcmVhdGVNYXRlcmlhbChuZXcgVmVjdG9yNF8xLmRlZmF1bHQoMC4xLCAwLjEsIDAuMSwgMS4wKSwgdGhpcy5zY2VuZU1hbmFnZXIuR2V0R3JhcGhpY0RldmljZSgpLCBbdGhpcy5zY2VuZU1hbmFnZXIuR2V0UmVzb3VyY2VDb250YWluZXIoKS5HZXRUZXh0dXJlKFwiY2Fsb3J5XCIpXSksIFwiY2Fsb3J5TWF0ZXJpYWxcIik7XHJcbiAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IHRoaXMuc2NlbmVNYW5hZ2VyLkdldFJlc291cmNlQ29udGFpbmVyKCkuQWRkTWF0ZXJpYWwoUmVzb3VyY2VDcmVhdGVyXzEuZGVmYXVsdC5DcmVhdGVNYXRlcmlhbChuZXcgVmVjdG9yNF8xLmRlZmF1bHQoMC4xLCAwLjEsIDAuMSwgMS4wKSwgdGhpcy5zY2VuZU1hbmFnZXIuR2V0R3JhcGhpY0RldmljZSgpLCBbdGhpcy5zY2VuZU1hbmFnZXIuR2V0UmVzb3VyY2VDb250YWluZXIoKS5HZXRUZXh0dXJlKFwiaW1hZ2UvbWFndXJvc3N5LnBuZ1wiKV0pLCBcImxvZ29NYXRlcmlhbFwiKTtcclxuICAgICAgICAgICAgICAgIG1hdGVyaWFsLkFkZEV4UGFyYW0oNCwgMywgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDUsIDUsIDEwKSk7XHJcbiAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IHRoaXMuc2NlbmVNYW5hZ2VyLkdldFJlc291cmNlQ29udGFpbmVyKCkuQWRkTWF0ZXJpYWwoUmVzb3VyY2VDcmVhdGVyXzEuZGVmYXVsdC5DcmVhdGVNYXRlcmlhbChuZXcgVmVjdG9yNF8xLmRlZmF1bHQoMC4xLCAwLjEsIDAuMSwgMS4wKSwgdGhpcy5zY2VuZU1hbmFnZXIuR2V0R3JhcGhpY0RldmljZSgpLCBbdGhpcy5zY2VuZU1hbmFnZXIuR2V0UmVzb3VyY2VDb250YWluZXIoKS5HZXRUZXh0dXJlKFwiaW1hZ2UvY2lyY2xlMzIucG5nXCIpXSksIFwiY2lyY2xlTWF0ZXJpYWxcIik7XHJcbiAgICAgICAgICAgICAgICBtYXRlcmlhbC5BZGRFeFBhcmFtKDQsIDMsIG5ldyBWZWN0b3IzXzEuZGVmYXVsdCg1LCA1LCAxMCkpO1xyXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwgPSB0aGlzLnNjZW5lTWFuYWdlci5HZXRSZXNvdXJjZUNvbnRhaW5lcigpLkFkZE1hdGVyaWFsKFJlc291cmNlQ3JlYXRlcl8xLmRlZmF1bHQuQ3JlYXRlTWF0ZXJpYWwobmV3IFZlY3RvcjRfMS5kZWZhdWx0KDEuMCwgMC41LCAwLjUsIDEuMCksIHRoaXMuc2NlbmVNYW5hZ2VyLkdldEdyYXBoaWNEZXZpY2UoKSksIFwicmVkXCIpO1xyXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwgPSB0aGlzLnNjZW5lTWFuYWdlci5HZXRSZXNvdXJjZUNvbnRhaW5lcigpLkFkZE1hdGVyaWFsKFJlc291cmNlQ3JlYXRlcl8xLmRlZmF1bHQuQ3JlYXRlTWF0ZXJpYWwobmV3IFZlY3RvcjRfMS5kZWZhdWx0KDAuNSwgMC41LCAwLjUsIDEuMCksIHRoaXMuc2NlbmVNYW5hZ2VyLkdldEdyYXBoaWNEZXZpY2UoKSksIFwiZ3JheVwiKTtcclxuICAgICAgICAgICAgICAgIG1hdGVyaWFsID0gdGhpcy5zY2VuZU1hbmFnZXIuR2V0UmVzb3VyY2VDb250YWluZXIoKS5BZGRNYXRlcmlhbChSZXNvdXJjZUNyZWF0ZXJfMS5kZWZhdWx0LkNyZWF0ZU1hdGVyaWFsKG5ldyBWZWN0b3I0XzEuZGVmYXVsdCgwLjgsIDAuOCwgMC44LCAxLjApLCB0aGlzLnNjZW5lTWFuYWdlci5HZXRHcmFwaGljRGV2aWNlKCkpLCBcIndoaXRlXCIpO1xyXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwgPSB0aGlzLnNjZW5lTWFuYWdlci5HZXRSZXNvdXJjZUNvbnRhaW5lcigpLkFkZE1hdGVyaWFsKFJlc291cmNlQ3JlYXRlcl8xLmRlZmF1bHQuQ3JlYXRlTWF0ZXJpYWwobmV3IFZlY3RvcjRfMS5kZWZhdWx0KDAuOSwgMC44LCAwLjMsIDEuMCksIHRoaXMuc2NlbmVNYW5hZ2VyLkdldEdyYXBoaWNEZXZpY2UoKSksIFwieWVsbG93XCIpO1xyXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwgPSB0aGlzLnNjZW5lTWFuYWdlci5HZXRSZXNvdXJjZUNvbnRhaW5lcigpLkFkZE1hdGVyaWFsKFJlc291cmNlQ3JlYXRlcl8xLmRlZmF1bHQuQ3JlYXRlTWF0ZXJpYWwobmV3IFZlY3RvcjRfMS5kZWZhdWx0KDAuNSwgMC41LCAxLjAsIDEuMCksIHRoaXMuc2NlbmVNYW5hZ2VyLkdldEdyYXBoaWNEZXZpY2UoKSksIFwiYmx1ZVwiKTtcclxuICAgICAgICAgICAgICAgIG1hdGVyaWFsID0gdGhpcy5zY2VuZU1hbmFnZXIuR2V0UmVzb3VyY2VDb250YWluZXIoKS5BZGRNYXRlcmlhbChSZXNvdXJjZUNyZWF0ZXJfMS5kZWZhdWx0LkNyZWF0ZU1hdGVyaWFsKG5ldyBWZWN0b3I0XzEuZGVmYXVsdCgwLjQsIDAuNiwgMC45LCAxLjApLCB0aGlzLnNjZW5lTWFuYWdlci5HZXRHcmFwaGljRGV2aWNlKCkpLCBcInJvYWRcIik7XHJcbiAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IHRoaXMuc2NlbmVNYW5hZ2VyLkdldFJlc291cmNlQ29udGFpbmVyKCkuQWRkTWF0ZXJpYWwoUmVzb3VyY2VDcmVhdGVyXzEuZGVmYXVsdC5DcmVhdGVNYXRlcmlhbChuZXcgVmVjdG9yNF8xLmRlZmF1bHQoMC4zNiwgMC41NCwgMC44MSwgMS4wKSwgdGhpcy5zY2VuZU1hbmFnZXIuR2V0R3JhcGhpY0RldmljZSgpKSwgXCJyb2FkX2RcIik7XHJcbiAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IHRoaXMuc2NlbmVNYW5hZ2VyLkdldFJlc291cmNlQ29udGFpbmVyKCkuQWRkTWF0ZXJpYWwoUmVzb3VyY2VDcmVhdGVyXzEuZGVmYXVsdC5DcmVhdGVNYXRlcmlhbChuZXcgVmVjdG9yNF8xLmRlZmF1bHQoMC44LCAwLjgsIDAuNywgMS4wKSwgdGhpcy5zY2VuZU1hbmFnZXIuR2V0R3JhcGhpY0RldmljZSgpKSwgXCJzYWZlXCIpO1xyXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwgPSB0aGlzLnNjZW5lTWFuYWdlci5HZXRSZXNvdXJjZUNvbnRhaW5lcigpLkFkZE1hdGVyaWFsKFJlc291cmNlQ3JlYXRlcl8xLmRlZmF1bHQuQ3JlYXRlTWF0ZXJpYWwobmV3IFZlY3RvcjRfMS5kZWZhdWx0KDAuNzIsIDAuNzIsIDAuNjMsIDEuMCksIHRoaXMuc2NlbmVNYW5hZ2VyLkdldEdyYXBoaWNEZXZpY2UoKSksIFwic2FmZV9kXCIpO1xyXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwgPSB0aGlzLnNjZW5lTWFuYWdlci5HZXRSZXNvdXJjZUNvbnRhaW5lcigpLkFkZE1hdGVyaWFsKFJlc291cmNlQ3JlYXRlcl8xLmRlZmF1bHQuQ3JlYXRlTWF0ZXJpYWwobmV3IFZlY3RvcjRfMS5kZWZhdWx0KDAuNiwgMC41LCAwLjYsIDEuMCksIHRoaXMuc2NlbmVNYW5hZ2VyLkdldEdyYXBoaWNEZXZpY2UoKSksIFwicmFpbFwiKTtcclxuICAgICAgICAgICAgICAgIG1hdGVyaWFsID0gdGhpcy5zY2VuZU1hbmFnZXIuR2V0UmVzb3VyY2VDb250YWluZXIoKS5BZGRNYXRlcmlhbChSZXNvdXJjZUNyZWF0ZXJfMS5kZWZhdWx0LkNyZWF0ZU1hdGVyaWFsKG5ldyBWZWN0b3I0XzEuZGVmYXVsdCgwLjU0LCAwLjQ1LCAwLjU0LCAxLjApLCB0aGlzLnNjZW5lTWFuYWdlci5HZXRHcmFwaGljRGV2aWNlKCkpLCBcInJhaWxfZFwiKTtcclxuICAgICAgICAgICAgICAgIG1hdGVyaWFsID0gdGhpcy5zY2VuZU1hbmFnZXIuR2V0UmVzb3VyY2VDb250YWluZXIoKS5BZGRNYXRlcmlhbChSZXNvdXJjZUNyZWF0ZXJfMS5kZWZhdWx0LkNyZWF0ZU1hdGVyaWFsKG5ldyBWZWN0b3I0XzEuZGVmYXVsdCgwLjUsIDEuMCwgMC41LCAxLjApLCB0aGlzLnNjZW5lTWFuYWdlci5HZXRHcmFwaGljRGV2aWNlKCkpLCBcImdyZWVuXCIpO1xyXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwgPSB0aGlzLnNjZW5lTWFuYWdlci5HZXRSZXNvdXJjZUNvbnRhaW5lcigpLkFkZE1hdGVyaWFsKFJlc291cmNlQ3JlYXRlcl8xLmRlZmF1bHQuQ3JlYXRlTWF0ZXJpYWwobmV3IFZlY3RvcjRfMS5kZWZhdWx0KDAuMSwgMC4xLCAwLjEsIDEuMCksIHRoaXMuc2NlbmVNYW5hZ2VyLkdldEdyYXBoaWNEZXZpY2UoKSksIFwiem9vbUVmZmVjdFwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLkFkZFNjZW5lKG5ldyBTYW1wbGVTY2VuZV8xLmRlZmF1bHQodGhpcy5zY2VuZU1hbmFnZXIpLCBcInNhbXBsZVwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgTG9hZFNjZW5lLnByb3RvdHlwZS5PbkluaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNDdXJyZW50KVxyXG4gICAgICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5DaGFuZ2VTY2VuZShcInNhbXBsZVwiKTtcclxuICAgIH07XHJcbiAgICBMb2FkU2NlbmUucHJvdG90eXBlLk9uU3RhcnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuQ2hhbmdlU2NlbmUoXCJzYW1wbGVcIik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIExvYWRTY2VuZTtcclxufShTY2VuZV8xLmRlZmF1bHQpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gTG9hZFNjZW5lO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgQm94X0FBQkIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBCb3hfQUFCQihhcmdfbGVuZ3RoZXMsIGFyZ19wb3NpdGlvbikge1xyXG4gICAgICAgIHRoaXMuaGFsZkxlbmd0aGVzID0gYXJnX2xlbmd0aGVzLk11bHRpcGx5X2IoMC41KTtcclxuICAgICAgICBpZiAoYXJnX3Bvc2l0aW9uKVxyXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uID0gYXJnX3Bvc2l0aW9uO1xyXG4gICAgfVxyXG4gICAgQm94X0FBQkIucHJvdG90eXBlLkxlbmd0aCA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhhbGZMZW5ndGhlcy5kYXRhW2luZGV4XTtcclxuICAgIH07XHJcbiAgICBCb3hfQUFCQi5wcm90b3R5cGUuR2V0TWluID0gZnVuY3Rpb24gKGluZGV4KSB7IHJldHVybiB0aGlzLnBvc2l0aW9uLmRhdGFbaW5kZXhdIC0gdGhpcy5oYWxmTGVuZ3RoZXMuZGF0YVtpbmRleF07IH07XHJcbiAgICBCb3hfQUFCQi5wcm90b3R5cGUuR2V0TWF4ID0gZnVuY3Rpb24gKGluZGV4KSB7IHJldHVybiB0aGlzLnBvc2l0aW9uLmRhdGFbaW5kZXhdICsgdGhpcy5oYWxmTGVuZ3RoZXMuZGF0YVtpbmRleF07IH07XHJcbiAgICByZXR1cm4gQm94X0FBQkI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IEJveF9BQUJCO1xyXG47XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBWZWN0b3IzXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL1ZlY3RvcjNcIikpO1xyXG52YXIgQm94X09CQiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEJveF9PQkIoYXJnX2xlbmd0aCkge1xyXG4gICAgICAgIHRoaXMuaGFsZkxlbmd0aGVzID0gYXJnX2xlbmd0aC5NdWx0aXBseSgwLjUpO1xyXG4gICAgICAgIHRoaXMuZGlyZWN0cyA9IG5ldyBBcnJheSgzKTtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uID0gbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAsIDAsIDApO1xyXG4gICAgICAgIHRoaXMuZGlyZWN0c1swXSA9IFZlY3RvcjNfMS5kZWZhdWx0LnhBeGlzLkNsb25lKCk7XHJcbiAgICAgICAgdGhpcy5kaXJlY3RzWzFdID0gVmVjdG9yM18xLmRlZmF1bHQueUF4aXMuQ2xvbmUoKTtcclxuICAgICAgICB0aGlzLmRpcmVjdHNbMl0gPSBWZWN0b3IzXzEuZGVmYXVsdC56QXhpcy5DbG9uZSgpO1xyXG4gICAgfVxyXG4gICAgQm94X09CQi5wcm90b3R5cGUuR2V0RGlyZWN0ID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0c1tpbmRleF07XHJcbiAgICB9O1xyXG4gICAgQm94X09CQi5wcm90b3R5cGUuTGVuZ3RoID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFsZkxlbmd0aGVzLmRhdGFbaW5kZXhdO1xyXG4gICAgfTtcclxuICAgIEJveF9PQkIucHJvdG90eXBlLkdldFBvcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbjtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQm94X09CQjtcclxufSgpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gQm94X09CQjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIFZlY3RvcjNfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vVmVjdG9yM1wiKSk7XHJcbmZ1bmN0aW9uIGFicyhhcmcpIHtcclxuICAgIGlmIChhcmcgPCAwKSB7XHJcbiAgICAgICAgcmV0dXJuIGFyZyAqIC0xO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGFyZztcclxuICAgIH1cclxufVxyXG52YXIgR2VvbWV0cnlIZWxwZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBHZW9tZXRyeUhlbHBlcigpIHtcclxuICAgIH1cclxuICAgIEdlb21ldHJ5SGVscGVyLkdldERpc3RhbmNlID0gZnVuY3Rpb24gKGFyZ19wb2ludCwgYXJnX3N1cmZhY2VQb2ludCwgYXJnX3N1cmZhY2VOb3JtYWwpIHtcclxuICAgICAgICByZXR1cm4gYWJzKGFyZ19zdXJmYWNlTm9ybWFsLkRvdChhcmdfcG9pbnQuU3ViKGFyZ19zdXJmYWNlUG9pbnQpKSkgLyBhcmdfc3VyZmFjZU5vcm1hbC5MZW5ndGgoKTtcclxuICAgIH07XHJcbiAgICBHZW9tZXRyeUhlbHBlci5HZXREaXN0YW5jZUxpbmVMaW5lID0gZnVuY3Rpb24gKGFyZ19saW5lLCBhcmdfb3RoZXJMaW5lKSB7XHJcbiAgICAgICAgdmFyIG5vcm1hbCA9IGFyZ19saW5lLnZlbG9jaXR5LkNyb3NzKGFyZ19vdGhlckxpbmUudmVsb2NpdHkpLk5vcm1hbGl6ZSgpO1xyXG4gICAgICAgIHJldHVybiBub3JtYWwuRG90KGFyZ19vdGhlckxpbmUucG9pbnQuU3ViKGFyZ19saW5lLnBvaW50KSk7XHJcbiAgICB9O1xyXG4gICAgR2VvbWV0cnlIZWxwZXIuSXNIaXRQb2ludExpbmUgPSBmdW5jdGlvbiAoYXJnX3BvaW50LCBhcmdfbGluZSkge1xyXG4gICAgICAgIHZhciBsZW5ndGggPSAoYXJnX3BvaW50LlN1YihhcmdfbGluZS5wb2ludCkuQ3Jvc3MoYXJnX2xpbmUudmVsb2NpdHkpKS5MZW5ndGgoKTtcclxuICAgICAgICBpZiAobGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBHZW9tZXRyeUhlbHBlci5Jc0hpdFBvaW50U2VnbWVudCA9IGZ1bmN0aW9uIChhcmdfcG9pbnQsIGFyZ19zZWdtZW50KSB7XHJcbiAgICAgICAgdmFyIHYgPSBhcmdfcG9pbnQuU3ViKGFyZ19zZWdtZW50LnBvaW50KTtcclxuICAgICAgICBpZiAodi5Dcm9zcyhhcmdfc2VnbWVudC52ZWxvY2l0eSkuTGVuZ3RoKCkgJiYgdi5MZW5ndGhTcXIoKSA8PSBhcmdfc2VnbWVudC52ZWxvY2l0eS5MZW5ndGhTcXIoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgR2VvbWV0cnlIZWxwZXIuR2V0RGlzdGFuY2VQb2ludFNlZ21lbnQgPSBmdW5jdGlvbiAoYXJnX3BvaW50LCBhcmdfc2VnbWVudCkge1xyXG4gICAgICAgIHZhciB2ID0gYXJnX3NlZ21lbnQuR2V0RW5kUG9pbnQoKS5TdWIoYXJnX3NlZ21lbnQucG9pbnQpO1xyXG4gICAgICAgIHZhciB2cCA9IGFyZ19wb2ludC5TdWIoYXJnX3NlZ21lbnQucG9pbnQpO1xyXG4gICAgICAgIHZhciB0ID0gdi5Ob3JtYWxpemUoKS5Eb3QodnApIC8gdi5MZW5ndGgoKTtcclxuICAgICAgICBpZiAodCA+IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFyZ19zZWdtZW50LkdldEVuZFBvaW50KCkuU3ViKGFyZ19wb2ludCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHQgPCAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhcmdfc2VnbWVudC5wb2ludC5TdWIoYXJnX3BvaW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHYuTXVsdGlwbHlfYih0KS5TdWJfYih2cCk7XHJcbiAgICB9O1xyXG4gICAgR2VvbWV0cnlIZWxwZXIuR2V0UG9seWdvblkgPSBmdW5jdGlvbiAoYXJnX3BvaW50QSwgYXJnX3BvaW50QiwgYXJnX3BvaW50Qywgb2JqWCwgb2JqWikge1xyXG4gICAgICAgIHZhciBub3JtYWwgPSBhcmdfcG9pbnRBLlN1YihhcmdfcG9pbnRCKS5Dcm9zcyhhcmdfcG9pbnRBLlN1YihhcmdfcG9pbnRDKSk7XHJcbiAgICAgICAgaWYgKG5vcm1hbC55IDwgMCkge1xyXG4gICAgICAgICAgICBub3JtYWwuTXVsdGlwbHkoLTEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXJnX3BvaW50QS55IC0gKG5vcm1hbC54ICogKG9ialggLSBhcmdfcG9pbnRBLngpICsgbm9ybWFsLnogKiAob2JqWiAtIGFyZ19wb2ludEEueikpIC8gbm9ybWFsLnk7XHJcbiAgICB9O1xyXG4gICAgR2VvbWV0cnlIZWxwZXIuSXNIaXRMaW5lTGluZSA9IGZ1bmN0aW9uIChhcmdfbGluZXYxLCBhcmdfbGluZXYyKSB7XHJcbiAgICAgICAgdmFyIHYzID0gYXJnX2xpbmV2Mi5wb2ludC5TdWIoYXJnX2xpbmV2MS5wb2ludCk7XHJcbiAgICAgICAgdmFyIG5vcm1hbDEgPSBhcmdfbGluZXYxLnZlbG9jaXR5LkNyb3NzKGFyZ19saW5ldjIudmVsb2NpdHkpO1xyXG4gICAgICAgIHZhciBub3JtYWwyID0gYXJnX2xpbmV2MS52ZWxvY2l0eS5Dcm9zcyh2Myk7XHJcbiAgICAgICAgaWYgKCFub3JtYWwyLkxlbmd0aFNxcigpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobm9ybWFsMS5MZW5ndGhTcXIoKSAhPSAwICYmIG5vcm1hbDEuQ3Jvc3Mobm9ybWFsMikuTGVuZ3RoU3FyKCkgPT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIEdlb21ldHJ5SGVscGVyLklzSGl0TGluZVN1cmZhY2UgPSBmdW5jdGlvbiAoYXJnX2xpbmUsIGFyZ19zdXJmYWNlUG9pbnQsIGFyZ19zdXJmYWNlTm9ybWFsKSB7XHJcbiAgICAgICAgdmFyIHYxID0gYXJnX2xpbmUucG9pbnQuU3ViKGFyZ19zdXJmYWNlUG9pbnQpO1xyXG4gICAgICAgIGlmICh2MS5Eb3QoYXJnX3N1cmZhY2VOb3JtYWwpID09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhcmdfbGluZS52ZWxvY2l0eS5Eb3QoYXJnX3N1cmZhY2VOb3JtYWwpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG4gICAgR2VvbWV0cnlIZWxwZXIuSXNIaXRTZWdtZW50U3VyZmFjZSA9IGZ1bmN0aW9uIChhcmdfc2VnbWVudCwgYXJnX3N1cmZhY2VQb2ludCwgYXJnX3N1cmZhY2VOb3JtYWwpIHtcclxuICAgICAgICB2YXIgdjEgPSBhcmdfc2VnbWVudC5wb2ludC5TdWIoYXJnX3N1cmZhY2VQb2ludCk7XHJcbiAgICAgICAgdmFyIHYyID0gYXJnX3NlZ21lbnQuR2V0RW5kUG9pbnQoKS5TdWIoYXJnX3N1cmZhY2VQb2ludCk7XHJcbiAgICAgICAgaWYgKGFyZ19zdXJmYWNlTm9ybWFsLkRvdCh2MSkgKiBhcmdfc3VyZmFjZU5vcm1hbC5Eb3QodjIpIDw9IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH07XHJcbiAgICBHZW9tZXRyeUhlbHBlci5HZXREaXRhbmNlUG9pbnRCb3hfQUFCQlNxcnQgPSBmdW5jdGlvbiAoYXJnX3BvaW50LCBhcmdfYm94KSB7XHJcbiAgICAgICAgdmFyIFNxTGVuID0gMDtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoYXJnX3BvaW50LmRhdGFbaV0gPCBhcmdfYm94LkdldE1pbihpKSlcclxuICAgICAgICAgICAgICAgIFNxTGVuICs9IChhcmdfcG9pbnQuZGF0YVtpXSAtIGFyZ19ib3guR2V0TWluKGkpKSAqIChhcmdfcG9pbnQuZGF0YVtpXSAtIGFyZ19ib3guR2V0TWluKGkpKTtcclxuICAgICAgICAgICAgaWYgKGFyZ19wb2ludC5kYXRhW2ldID4gYXJnX2JveC5HZXRNYXgoaSkpXHJcbiAgICAgICAgICAgICAgICBTcUxlbiArPSAoYXJnX3BvaW50LmRhdGFbaV0gLSBhcmdfYm94LkdldE1heChpKSkgKiAoYXJnX3BvaW50LmRhdGFbaV0gLSBhcmdfYm94LkdldE1heChpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBTcUxlbjtcclxuICAgIH07XHJcbiAgICBHZW9tZXRyeUhlbHBlci5HZXREaXRhbmNlUG9pbnRCb3hfQUFCQiA9IGZ1bmN0aW9uIChhcmdfcG9pbnQsIGFyZ19ib3gpIHtcclxuICAgICAgICByZXR1cm4gKEdlb21ldHJ5SGVscGVyLkdldERpdGFuY2VQb2ludEJveF9BQUJCU3FydChhcmdfcG9pbnQsIGFyZ19ib3gpKTtcclxuICAgIH07XHJcbiAgICBHZW9tZXRyeUhlbHBlci5HZXREaXRhbmNlUG9pbnRCb3hfT0JCX1N0YXRpYyA9IGZ1bmN0aW9uIChhcmdfcG9pbnQsIGFyZ19ib3gpIHtcclxuICAgICAgICB2YXIgb3V0cHV0ID0gbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAsIDAsIDApO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBMID0gYXJnX2JveC5MZW5ndGgoaSk7XHJcbiAgICAgICAgICAgIGlmIChMIDw9IDApXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgdmFyIHMgPSAoYXJnX3BvaW50LlN1YihhcmdfYm94LkdldFBvcygpKSkuRG90KGFyZ19ib3guR2V0RGlyZWN0KGkpKSAvIEw7XHJcbiAgICAgICAgICAgIC8vIHPjga7lgKTjgYvjgonjgIHjga/jgb/lh7rjgZfjgZ/pg6jliIbjgYzjgYLjgozjgbDjgZ3jga7jg5njgq/jg4jjg6vjgpLliqDnrpdcclxuICAgICAgICAgICAgcyA9IGFicyhzKTtcclxuICAgICAgICAgICAgaWYgKHMgPiAxKVxyXG4gICAgICAgICAgICAgICAgb3V0cHV0LkFkZF9iKGFyZ19ib3guR2V0RGlyZWN0KGkpLk11bHRpcGx5KCgxIC0gcykpLk11bHRpcGx5KEwpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG91dHB1dExlbiA9IG91dHB1dC5MZW5ndGgoKTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKG91dHB1dExlbik7XHJcbiAgICAgICAgcmV0dXJuIG91dHB1dExlbjtcclxuICAgIH07XHJcbiAgICBHZW9tZXRyeUhlbHBlci5Jc0hpdFBvaW50Qm94X09CQiA9IGZ1bmN0aW9uIChhcmdfcG9pbnQsIGFyZ19ib3gpIHtcclxuICAgICAgICByZXR1cm4gIUdlb21ldHJ5SGVscGVyLkdldERpdGFuY2VQb2ludEJveF9PQkJfU3RhdGljKGFyZ19wb2ludCwgYXJnX2JveCk7XHJcbiAgICB9O1xyXG4gICAgR2VvbWV0cnlIZWxwZXIuSXNIaXRTcGhlcmVCb3hfT0JCID0gZnVuY3Rpb24gKGFyZ19zcGhlcmUsIGFyZ19ib3gpIHtcclxuICAgICAgICByZXR1cm4gKGFyZ19zcGhlcmUucmFkaXVzKSA+PSBHZW9tZXRyeUhlbHBlci5HZXREaXRhbmNlUG9pbnRCb3hfT0JCX1N0YXRpYyhhcmdfc3BoZXJlLnBvc2l0aW9uLCBhcmdfYm94KTtcclxuICAgIH07XHJcbiAgICBHZW9tZXRyeUhlbHBlci5Jc0hpdFBvaW50Qm94X0FBQkIgPSBmdW5jdGlvbiAoYXJnX3BvaW50LCBhcmdfYm94KSB7XHJcbiAgICAgICAgcmV0dXJuICFHZW9tZXRyeUhlbHBlci5HZXREaXRhbmNlUG9pbnRCb3hfQUFCQihhcmdfcG9pbnQsIGFyZ19ib3gpO1xyXG4gICAgfTtcclxuICAgIEdlb21ldHJ5SGVscGVyLklzSGl0U3BoZXJlQm94X0FBQkIgPSBmdW5jdGlvbiAoYXJnX3NwaGVyZSwgYXJnX2JveCkge1xyXG4gICAgICAgIHJldHVybiAoYXJnX3NwaGVyZS5yYWRpdXMpID49IEdlb21ldHJ5SGVscGVyLkdldERpdGFuY2VQb2ludEJveF9BQUJCKGFyZ19zcGhlcmUucG9zaXRpb24sIGFyZ19ib3gpO1xyXG4gICAgfTtcclxuICAgIEdlb21ldHJ5SGVscGVyLkxlbmd0aFNlcGFyYXRlZEF4aXMgPSBmdW5jdGlvbiAoYXJnX3NlcCwgYXJnX2UxLCBhcmdfZTIsIGFyZ19lMykge1xyXG4gICAgICAgIGlmIChhcmdfZTMgPT09IHZvaWQgMCkgeyBhcmdfZTMgPSBudWxsOyB9XHJcbiAgICAgICAgdmFyIHIxID0gYWJzKGFyZ19zZXAuRG90KGFyZ19lMSkpO1xyXG4gICAgICAgIHZhciByMiA9IGFicyhhcmdfc2VwLkRvdChhcmdfZTIpKTtcclxuICAgICAgICB2YXIgcjMgPSBhcmdfZTMgPyAoYWJzKGFyZ19zZXAuRG90KGFyZ19lMykpKSA6IDA7XHJcbiAgICAgICAgcmV0dXJuIHIxICsgcjIgKyByMztcclxuICAgIH07XHJcbiAgICBHZW9tZXRyeUhlbHBlci5Jc0hpdEJveF9BQUJCID0gZnVuY3Rpb24gKGFyZ19ib3gsIGFyZ19vdGhlckJveCkge1xyXG4gICAgICAgIHZhciBBZTEgPSBWZWN0b3IzXzEuZGVmYXVsdC54QXhpcy5NdWx0aXBseShhcmdfYm94Lkxlbmd0aCgwKSk7XHJcbiAgICAgICAgdmFyIEFlMiA9IFZlY3RvcjNfMS5kZWZhdWx0LnlBeGlzLk11bHRpcGx5KGFyZ19ib3guTGVuZ3RoKDEpKTtcclxuICAgICAgICB2YXIgQWUzID0gVmVjdG9yM18xLmRlZmF1bHQuekF4aXMuTXVsdGlwbHkoYXJnX2JveC5MZW5ndGgoMikpO1xyXG4gICAgICAgIHZhciBCZTEgPSBWZWN0b3IzXzEuZGVmYXVsdC54QXhpcy5NdWx0aXBseShhcmdfb3RoZXJCb3guTGVuZ3RoKDApKTtcclxuICAgICAgICB2YXIgQmUyID0gVmVjdG9yM18xLmRlZmF1bHQueUF4aXMuTXVsdGlwbHkoYXJnX290aGVyQm94Lkxlbmd0aCgxKSk7XHJcbiAgICAgICAgdmFyIEJlMyA9IFZlY3RvcjNfMS5kZWZhdWx0LnpBeGlzLk11bHRpcGx5KGFyZ19vdGhlckJveC5MZW5ndGgoMikpO1xyXG4gICAgICAgIHZhciBJbnRlcnZhbCA9IGFyZ19ib3gucG9zaXRpb24uU3ViKGFyZ19vdGhlckJveC5wb3NpdGlvbik7XHJcbiAgICAgICAgLy8g5YiG6Zui6Lu4IDogQWUxXHJcbiAgICAgICAgdmFyIHJBID0gQWUxLkxlbmd0aCgpO1xyXG4gICAgICAgIHZhciByQiA9IEdlb21ldHJ5SGVscGVyLkxlbmd0aFNlcGFyYXRlZEF4aXMoVmVjdG9yM18xLmRlZmF1bHQueEF4aXMsIEJlMSwgQmUyLCBCZTMpO1xyXG4gICAgICAgIHZhciBMID0gYWJzKEludGVydmFsLkRvdChWZWN0b3IzXzEuZGVmYXVsdC54QXhpcykpO1xyXG4gICAgICAgIGlmIChMID4gckEgKyByQilcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyDooZ3nqoHjgZfjgabjgYTjgarjgYRcclxuICAgICAgICAvLyDliIbpm6Lou7ggOiBBZTJcclxuICAgICAgICByQSA9IEFlMi5MZW5ndGgoKTtcclxuICAgICAgICByQiA9IEdlb21ldHJ5SGVscGVyLkxlbmd0aFNlcGFyYXRlZEF4aXMoVmVjdG9yM18xLmRlZmF1bHQueUF4aXMsIEJlMSwgQmUyLCBCZTMpO1xyXG4gICAgICAgIEwgPSBhYnMoSW50ZXJ2YWwuRG90KFZlY3RvcjNfMS5kZWZhdWx0LnlBeGlzKSk7XHJcbiAgICAgICAgaWYgKEwgPiByQSArIHJCKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgLy8g5YiG6Zui6Lu4IDogQWUzXHJcbiAgICAgICAgckEgPSBBZTMuTGVuZ3RoKCk7XHJcbiAgICAgICAgckIgPSBHZW9tZXRyeUhlbHBlci5MZW5ndGhTZXBhcmF0ZWRBeGlzKFZlY3RvcjNfMS5kZWZhdWx0LnpBeGlzLCBCZTEsIEJlMiwgQmUzKTtcclxuICAgICAgICBMID0gYWJzKEludGVydmFsLkRvdChWZWN0b3IzXzEuZGVmYXVsdC56QXhpcykpO1xyXG4gICAgICAgIGlmIChMID4gckEgKyByQilcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIC8vIOWIhumboui7uCA6IEJlMVxyXG4gICAgICAgIHJBID0gR2VvbWV0cnlIZWxwZXIuTGVuZ3RoU2VwYXJhdGVkQXhpcyhWZWN0b3IzXzEuZGVmYXVsdC54QXhpcywgQWUxLCBBZTIsIEFlMyk7XHJcbiAgICAgICAgckIgPSBCZTEuTGVuZ3RoKCk7XHJcbiAgICAgICAgTCA9IGFicyhJbnRlcnZhbC5Eb3QoVmVjdG9yM18xLmRlZmF1bHQueEF4aXMpKTtcclxuICAgICAgICBpZiAoTCA+IHJBICsgckIpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAvLyDliIbpm6Lou7ggOiBCZTJcclxuICAgICAgICByQSA9IEdlb21ldHJ5SGVscGVyLkxlbmd0aFNlcGFyYXRlZEF4aXMoVmVjdG9yM18xLmRlZmF1bHQueUF4aXMsIEFlMSwgQWUyLCBBZTMpO1xyXG4gICAgICAgIHJCID0gQmUyLkxlbmd0aCgpO1xyXG4gICAgICAgIEwgPSBhYnMoSW50ZXJ2YWwuRG90KFZlY3RvcjNfMS5kZWZhdWx0LnlBeGlzKSk7XHJcbiAgICAgICAgaWYgKEwgPiByQSArIHJCKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgLy8g5YiG6Zui6Lu4IDogQmUzXHJcbiAgICAgICAgckEgPSBHZW9tZXRyeUhlbHBlci5MZW5ndGhTZXBhcmF0ZWRBeGlzKFZlY3RvcjNfMS5kZWZhdWx0LnpBeGlzLCBBZTEsIEFlMiwgQWUzKTtcclxuICAgICAgICByQiA9IEJlMy5MZW5ndGgoKTtcclxuICAgICAgICBMID0gYWJzKEludGVydmFsLkRvdChWZWN0b3IzXzEuZGVmYXVsdC56QXhpcykpO1xyXG4gICAgICAgIGlmIChMID4gckEgKyByQilcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuICAgIEdlb21ldHJ5SGVscGVyLklzSGl0Qm94X09CQkJveF9BQUJCID0gZnVuY3Rpb24gKGFyZ19ib3gsIGFyZ19vdGhlckJveCkge1xyXG4gICAgICAgIHZhciBBZTEgPSBWZWN0b3IzXzEuZGVmYXVsdC54QXhpcy5NdWx0aXBseShhcmdfYm94Lkxlbmd0aCgwKSk7XHJcbiAgICAgICAgdmFyIEFlMiA9IFZlY3RvcjNfMS5kZWZhdWx0LnlBeGlzLk11bHRpcGx5KGFyZ19ib3guTGVuZ3RoKDEpKTtcclxuICAgICAgICB2YXIgQWUzID0gVmVjdG9yM18xLmRlZmF1bHQuekF4aXMuTXVsdGlwbHkoYXJnX2JveC5MZW5ndGgoMikpO1xyXG4gICAgICAgIHZhciBOQmUxID0gYXJnX290aGVyQm94LkdldERpcmVjdCgwKSwgQmUxID0gTkJlMS5NdWx0aXBseShhcmdfb3RoZXJCb3guTGVuZ3RoKDApKTtcclxuICAgICAgICB2YXIgTkJlMiA9IGFyZ19vdGhlckJveC5HZXREaXJlY3QoMSksIEJlMiA9IE5CZTIuTXVsdGlwbHkoYXJnX290aGVyQm94Lkxlbmd0aCgxKSk7XHJcbiAgICAgICAgdmFyIE5CZTMgPSBhcmdfb3RoZXJCb3guR2V0RGlyZWN0KDIpLCBCZTMgPSBOQmUzLk11bHRpcGx5KGFyZ19vdGhlckJveC5MZW5ndGgoMikpO1xyXG4gICAgICAgIHZhciBJbnRlcnZhbCA9IGFyZ19ib3gucG9zaXRpb24uU3ViKGFyZ19vdGhlckJveC5HZXRQb3MoKSk7XHJcbiAgICAgICAgLy8g5YiG6Zui6Lu4IDogQWUxXHJcbiAgICAgICAgdmFyIHJBID0gQWUxLkxlbmd0aCgpO1xyXG4gICAgICAgIHZhciByQiA9IEdlb21ldHJ5SGVscGVyLkxlbmd0aFNlcGFyYXRlZEF4aXMoVmVjdG9yM18xLmRlZmF1bHQueEF4aXMsIEJlMSwgQmUyLCBCZTMpO1xyXG4gICAgICAgIHZhciBMID0gYWJzKEludGVydmFsLkRvdChWZWN0b3IzXzEuZGVmYXVsdC54QXhpcykpO1xyXG4gICAgICAgIGlmIChMID4gckEgKyByQilcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyDooZ3nqoHjgZfjgabjgYTjgarjgYRcclxuICAgICAgICAvLyDliIbpm6Lou7ggOiBBZTJcclxuICAgICAgICByQSA9IEFlMi5MZW5ndGgoKTtcclxuICAgICAgICByQiA9IEdlb21ldHJ5SGVscGVyLkxlbmd0aFNlcGFyYXRlZEF4aXMoVmVjdG9yM18xLmRlZmF1bHQueUF4aXMsIEJlMSwgQmUyLCBCZTMpO1xyXG4gICAgICAgIEwgPSBhYnMoSW50ZXJ2YWwuRG90KFZlY3RvcjNfMS5kZWZhdWx0LnlBeGlzKSk7XHJcbiAgICAgICAgaWYgKEwgPiByQSArIHJCKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgLy8g5YiG6Zui6Lu4IDogQWUzXHJcbiAgICAgICAgckEgPSBBZTMuTGVuZ3RoKCk7XHJcbiAgICAgICAgckIgPSBHZW9tZXRyeUhlbHBlci5MZW5ndGhTZXBhcmF0ZWRBeGlzKFZlY3RvcjNfMS5kZWZhdWx0LnpBeGlzLCBCZTEsIEJlMiwgQmUzKTtcclxuICAgICAgICBMID0gYWJzKEludGVydmFsLkRvdChWZWN0b3IzXzEuZGVmYXVsdC56QXhpcykpO1xyXG4gICAgICAgIGlmIChMID4gckEgKyByQilcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIC8vIOWIhumboui7uCA6IEJlMVxyXG4gICAgICAgIHJBID0gR2VvbWV0cnlIZWxwZXIuTGVuZ3RoU2VwYXJhdGVkQXhpcyhOQmUxLCBBZTEsIEFlMiwgQWUzKTtcclxuICAgICAgICByQiA9IEJlMS5MZW5ndGgoKTtcclxuICAgICAgICBMID0gYWJzKEludGVydmFsLkRvdChOQmUxKSk7XHJcbiAgICAgICAgaWYgKEwgPiByQSArIHJCKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgLy8g5YiG6Zui6Lu4IDogQmUyXHJcbiAgICAgICAgckEgPSBHZW9tZXRyeUhlbHBlci5MZW5ndGhTZXBhcmF0ZWRBeGlzKE5CZTIsIEFlMSwgQWUyLCBBZTMpO1xyXG4gICAgICAgIHJCID0gQmUyLkxlbmd0aCgpO1xyXG4gICAgICAgIEwgPSBhYnMoSW50ZXJ2YWwuRG90KE5CZTIpKTtcclxuICAgICAgICBpZiAoTCA+IHJBICsgckIpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAvLyDliIbpm6Lou7ggOiBCZTNcclxuICAgICAgICByQSA9IEdlb21ldHJ5SGVscGVyLkxlbmd0aFNlcGFyYXRlZEF4aXMoTkJlMywgQWUxLCBBZTIsIEFlMyk7XHJcbiAgICAgICAgckIgPSBCZTMuTGVuZ3RoKCk7XHJcbiAgICAgICAgTCA9IGFicyhJbnRlcnZhbC5Eb3QoTkJlMykpO1xyXG4gICAgICAgIGlmIChMID4gckEgKyByQilcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuICAgIEdlb21ldHJ5SGVscGVyLkdldEJveF9PQkJDb250YWluQUFCQkxlbmd0aCA9IGZ1bmN0aW9uIChhcmdfYm94KSB7XHJcbiAgICAgICAgdmFyIEJlMSA9IGFyZ19ib3guR2V0RGlyZWN0KDApLk11bHRpcGx5KGFyZ19ib3guTGVuZ3RoKDApKTtcclxuICAgICAgICB2YXIgQmUyID0gYXJnX2JveC5HZXREaXJlY3QoMSkuTXVsdGlwbHkoYXJnX2JveC5MZW5ndGgoMSkpO1xyXG4gICAgICAgIHZhciBCZTMgPSBhcmdfYm94LkdldERpcmVjdCgyKS5NdWx0aXBseShhcmdfYm94Lkxlbmd0aCgyKSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IzXzEuZGVmYXVsdChHZW9tZXRyeUhlbHBlci5MZW5ndGhTZXBhcmF0ZWRBeGlzKFZlY3RvcjNfMS5kZWZhdWx0LnhBeGlzLCBCZTEsIEJlMiwgQmUzKSwgR2VvbWV0cnlIZWxwZXIuTGVuZ3RoU2VwYXJhdGVkQXhpcyhWZWN0b3IzXzEuZGVmYXVsdC55QXhpcywgQmUxLCBCZTIsIEJlMyksIEdlb21ldHJ5SGVscGVyLkxlbmd0aFNlcGFyYXRlZEF4aXMoVmVjdG9yM18xLmRlZmF1bHQuekF4aXMsIEJlMSwgQmUyLCBCZTMpKTtcclxuICAgIH07XHJcbiAgICBHZW9tZXRyeUhlbHBlci5Jc0hpdEJveF9PQkIgPSBmdW5jdGlvbiAoYXJnX2JveCwgYXJnX290aGVyQm94KSB7XHJcbiAgICAgICAgLy8g5ZCE5pa55ZCR44OZ44Kv44OI44Or44Gu56K65L+dXHJcbiAgICAgICAgLy8g77yITioqKjrmqJnmupbljJbmlrnlkJHjg5njgq/jg4jjg6vvvIlcclxuICAgICAgICB2YXIgTkFlMSA9IGFyZ19ib3guR2V0RGlyZWN0KDApLCBBZTEgPSBOQWUxLk11bHRpcGx5KGFyZ19ib3guTGVuZ3RoKDApKTtcclxuICAgICAgICB2YXIgTkFlMiA9IGFyZ19ib3guR2V0RGlyZWN0KDEpLCBBZTIgPSBOQWUyLk11bHRpcGx5KGFyZ19ib3guTGVuZ3RoKDEpKTtcclxuICAgICAgICB2YXIgTkFlMyA9IGFyZ19ib3guR2V0RGlyZWN0KDIpLCBBZTMgPSBOQWUzLk11bHRpcGx5KGFyZ19ib3guTGVuZ3RoKDIpKTtcclxuICAgICAgICB2YXIgTkJlMSA9IGFyZ19vdGhlckJveC5HZXREaXJlY3QoMCksIEJlMSA9IE5CZTEuTXVsdGlwbHkoYXJnX290aGVyQm94Lkxlbmd0aCgwKSk7XHJcbiAgICAgICAgdmFyIE5CZTIgPSBhcmdfb3RoZXJCb3guR2V0RGlyZWN0KDEpLCBCZTIgPSBOQmUyLk11bHRpcGx5KGFyZ19vdGhlckJveC5MZW5ndGgoMSkpO1xyXG4gICAgICAgIHZhciBOQmUzID0gYXJnX290aGVyQm94LkdldERpcmVjdCgyKSwgQmUzID0gTkJlMy5NdWx0aXBseShhcmdfb3RoZXJCb3guTGVuZ3RoKDIpKTtcclxuICAgICAgICB2YXIgSW50ZXJ2YWwgPSBhcmdfYm94LkdldFBvcygpLlN1Yihhcmdfb3RoZXJCb3guR2V0UG9zKCkpO1xyXG4gICAgICAgIC8vIOWIhumboui7uCA6IEFlMVxyXG4gICAgICAgIHZhciByQSA9IEFlMS5MZW5ndGgoKTtcclxuICAgICAgICB2YXIgckIgPSBHZW9tZXRyeUhlbHBlci5MZW5ndGhTZXBhcmF0ZWRBeGlzKE5BZTEsIEJlMSwgQmUyLCBCZTMpO1xyXG4gICAgICAgIHZhciBMID0gYWJzKEludGVydmFsLkRvdChOQWUxKSk7XHJcbiAgICAgICAgaWYgKEwgPiByQSArIHJCKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIOihneeqgeOBl+OBpuOBhOOBquOBhFxyXG4gICAgICAgIC8vIOWIhumboui7uCA6IEFlMlxyXG4gICAgICAgIHJBID0gQWUyLkxlbmd0aCgpO1xyXG4gICAgICAgIHJCID0gR2VvbWV0cnlIZWxwZXIuTGVuZ3RoU2VwYXJhdGVkQXhpcyhOQWUyLCBCZTEsIEJlMiwgQmUzKTtcclxuICAgICAgICBMID0gYWJzKEludGVydmFsLkRvdChOQWUyKSk7XHJcbiAgICAgICAgaWYgKEwgPiByQSArIHJCKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgLy8g5YiG6Zui6Lu4IDogQWUzXHJcbiAgICAgICAgckEgPSBBZTMuTGVuZ3RoKCk7XHJcbiAgICAgICAgckIgPSBHZW9tZXRyeUhlbHBlci5MZW5ndGhTZXBhcmF0ZWRBeGlzKE5BZTMsIEJlMSwgQmUyLCBCZTMpO1xyXG4gICAgICAgIEwgPSBhYnMoSW50ZXJ2YWwuRG90KE5BZTMpKTtcclxuICAgICAgICBpZiAoTCA+IHJBICsgckIpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAvLyDliIbpm6Lou7ggOiBCZTFcclxuICAgICAgICByQSA9IEdlb21ldHJ5SGVscGVyLkxlbmd0aFNlcGFyYXRlZEF4aXMoTkJlMSwgQWUxLCBBZTIsIEFlMyk7XHJcbiAgICAgICAgckIgPSBCZTEuTGVuZ3RoKCk7XHJcbiAgICAgICAgTCA9IGFicyhJbnRlcnZhbC5Eb3QoTkJlMSkpO1xyXG4gICAgICAgIGlmIChMID4gckEgKyByQilcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIC8vIOWIhumboui7uCA6IEJlMlxyXG4gICAgICAgIHJBID0gR2VvbWV0cnlIZWxwZXIuTGVuZ3RoU2VwYXJhdGVkQXhpcyhOQmUyLCBBZTEsIEFlMiwgQWUzKTtcclxuICAgICAgICByQiA9IEJlMi5MZW5ndGgoKTtcclxuICAgICAgICBMID0gYWJzKEludGVydmFsLkRvdChOQmUyKSk7XHJcbiAgICAgICAgaWYgKEwgPiByQSArIHJCKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgLy8g5YiG6Zui6Lu4IDogQmUzXHJcbiAgICAgICAgckEgPSBHZW9tZXRyeUhlbHBlci5MZW5ndGhTZXBhcmF0ZWRBeGlzKE5CZTMsIEFlMSwgQWUyLCBBZTMpO1xyXG4gICAgICAgIHJCID0gQmUzLkxlbmd0aCgpO1xyXG4gICAgICAgIEwgPSBhYnMoSW50ZXJ2YWwuRG90KE5CZTMpKTtcclxuICAgICAgICBpZiAoTCA+IHJBICsgckIpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAvLyDliIbpm6Lou7ggOiBDMTFcclxuICAgICAgICB2YXIgQ3Jvc3MgPSBOQWUxLkNyb3NzKE5CZTEpO1xyXG4gICAgICAgIHJBID0gR2VvbWV0cnlIZWxwZXIuTGVuZ3RoU2VwYXJhdGVkQXhpcyhDcm9zcywgQWUyLCBBZTMpO1xyXG4gICAgICAgIHJCID0gR2VvbWV0cnlIZWxwZXIuTGVuZ3RoU2VwYXJhdGVkQXhpcyhDcm9zcywgQmUyLCBCZTMpO1xyXG4gICAgICAgIEwgPSBhYnMoSW50ZXJ2YWwuRG90KENyb3NzKSk7XHJcbiAgICAgICAgaWYgKEwgPiByQSArIHJCKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgLy8g5YiG6Zui6Lu4IDogQzEyXHJcbiAgICAgICAgQ3Jvc3MgPSBOQWUxLkNyb3NzKE5CZTIpO1xyXG4gICAgICAgIHJBID0gR2VvbWV0cnlIZWxwZXIuTGVuZ3RoU2VwYXJhdGVkQXhpcyhDcm9zcywgQWUyLCBBZTMpO1xyXG4gICAgICAgIHJCID0gR2VvbWV0cnlIZWxwZXIuTGVuZ3RoU2VwYXJhdGVkQXhpcyhDcm9zcywgQmUxLCBCZTMpO1xyXG4gICAgICAgIEwgPSBhYnMoSW50ZXJ2YWwuRG90KENyb3NzKSk7XHJcbiAgICAgICAgaWYgKEwgPiByQSArIHJCKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgLy8g5YiG6Zui6Lu4IDogQzEzXHJcbiAgICAgICAgQ3Jvc3MgPSBOQWUxLkNyb3NzKE5CZTMpO1xyXG4gICAgICAgIHJBID0gR2VvbWV0cnlIZWxwZXIuTGVuZ3RoU2VwYXJhdGVkQXhpcyhDcm9zcywgQWUyLCBBZTMpO1xyXG4gICAgICAgIHJCID0gR2VvbWV0cnlIZWxwZXIuTGVuZ3RoU2VwYXJhdGVkQXhpcyhDcm9zcywgQmUxLCBCZTIpO1xyXG4gICAgICAgIEwgPSBhYnMoSW50ZXJ2YWwuRG90KENyb3NzKSk7XHJcbiAgICAgICAgaWYgKEwgPiByQSArIHJCKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgLy8g5YiG6Zui6Lu4IDogQzIxXHJcbiAgICAgICAgQ3Jvc3MgPSBOQWUyLkNyb3NzKE5CZTEpO1xyXG4gICAgICAgIHJBID0gR2VvbWV0cnlIZWxwZXIuTGVuZ3RoU2VwYXJhdGVkQXhpcyhDcm9zcywgQWUxLCBBZTMpO1xyXG4gICAgICAgIHJCID0gR2VvbWV0cnlIZWxwZXIuTGVuZ3RoU2VwYXJhdGVkQXhpcyhDcm9zcywgQmUyLCBCZTMpO1xyXG4gICAgICAgIEwgPSBhYnMoSW50ZXJ2YWwuRG90KENyb3NzKSk7XHJcbiAgICAgICAgaWYgKEwgPiByQSArIHJCKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgLy8g5YiG6Zui6Lu4IDogQzIyXHJcbiAgICAgICAgQ3Jvc3MgPSBOQWUyLkNyb3NzKE5CZTIpO1xyXG4gICAgICAgIHJBID0gR2VvbWV0cnlIZWxwZXIuTGVuZ3RoU2VwYXJhdGVkQXhpcyhDcm9zcywgQWUxLCBBZTMpO1xyXG4gICAgICAgIHJCID0gR2VvbWV0cnlIZWxwZXIuTGVuZ3RoU2VwYXJhdGVkQXhpcyhDcm9zcywgQmUxLCBCZTMpO1xyXG4gICAgICAgIEwgPSBhYnMoSW50ZXJ2YWwuRG90KENyb3NzKSk7XHJcbiAgICAgICAgaWYgKEwgPiByQSArIHJCKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgLy8g5YiG6Zui6Lu4IDogQzIzXHJcbiAgICAgICAgQ3Jvc3MgPSBOQWUyLkNyb3NzKE5CZTMpO1xyXG4gICAgICAgIHJBID0gR2VvbWV0cnlIZWxwZXIuTGVuZ3RoU2VwYXJhdGVkQXhpcyhDcm9zcywgQWUxLCBBZTMpO1xyXG4gICAgICAgIHJCID0gR2VvbWV0cnlIZWxwZXIuTGVuZ3RoU2VwYXJhdGVkQXhpcyhDcm9zcywgQmUxLCBCZTIpO1xyXG4gICAgICAgIEwgPSBhYnMoSW50ZXJ2YWwuRG90KENyb3NzKSk7XHJcbiAgICAgICAgaWYgKEwgPiByQSArIHJCKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgLy8g5YiG6Zui6Lu4IDogQzMxXHJcbiAgICAgICAgQ3Jvc3MgPSBOQWUzLkNyb3NzKE5CZTEpO1xyXG4gICAgICAgIHJBID0gR2VvbWV0cnlIZWxwZXIuTGVuZ3RoU2VwYXJhdGVkQXhpcyhDcm9zcywgQWUxLCBBZTIpO1xyXG4gICAgICAgIHJCID0gR2VvbWV0cnlIZWxwZXIuTGVuZ3RoU2VwYXJhdGVkQXhpcyhDcm9zcywgQmUyLCBCZTMpO1xyXG4gICAgICAgIEwgPSBhYnMoSW50ZXJ2YWwuRG90KENyb3NzKSk7XHJcbiAgICAgICAgaWYgKEwgPiByQSArIHJCKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgLy8g5YiG6Zui6Lu4IDogQzMyXHJcbiAgICAgICAgQ3Jvc3MgPSBOQWUzLkNyb3NzKE5CZTIpO1xyXG4gICAgICAgIHJBID0gR2VvbWV0cnlIZWxwZXIuTGVuZ3RoU2VwYXJhdGVkQXhpcyhDcm9zcywgQWUxLCBBZTIpO1xyXG4gICAgICAgIHJCID0gR2VvbWV0cnlIZWxwZXIuTGVuZ3RoU2VwYXJhdGVkQXhpcyhDcm9zcywgQmUxLCBCZTMpO1xyXG4gICAgICAgIEwgPSBhYnMoSW50ZXJ2YWwuRG90KENyb3NzKSk7XHJcbiAgICAgICAgaWYgKEwgPiByQSArIHJCKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgLy8g5YiG6Zui6Lu4IDogQzMzXHJcbiAgICAgICAgQ3Jvc3MgPSBOQWUzLkNyb3NzKE5CZTMpO1xyXG4gICAgICAgIHJBID0gR2VvbWV0cnlIZWxwZXIuTGVuZ3RoU2VwYXJhdGVkQXhpcyhDcm9zcywgQWUxLCBBZTIpO1xyXG4gICAgICAgIHJCID0gR2VvbWV0cnlIZWxwZXIuTGVuZ3RoU2VwYXJhdGVkQXhpcyhDcm9zcywgQmUxLCBCZTIpO1xyXG4gICAgICAgIEwgPSBhYnMoSW50ZXJ2YWwuRG90KENyb3NzKSk7XHJcbiAgICAgICAgaWYgKEwgPiByQSArIHJCKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG4gICAgR2VvbWV0cnlIZWxwZXIuSXNIaXRTcGhlcmVTcGhlcmUgPSBmdW5jdGlvbiAoYXJnX3NwaGVyZSwgYXJnX290aGVyU3BoZXJlKSB7XHJcbiAgICAgICAgdmFyIGRpc3RhbmNlID0gKGFyZ19zcGhlcmUucG9zaXRpb24uU3ViKGFyZ19vdGhlclNwaGVyZS5wb3NpdGlvbikpLkxlbmd0aCgpO1xyXG4gICAgICAgIHZhciBib3JkZXIgPSBhcmdfc3BoZXJlLnJhZGl1cyArIGFyZ19vdGhlclNwaGVyZS5yYWRpdXM7XHJcbiAgICAgICAgcmV0dXJuIGRpc3RhbmNlIDw9IGJvcmRlcjtcclxuICAgIH07XHJcbiAgICBHZW9tZXRyeUhlbHBlci5Jc0hpdFBvaW50U3BoZXJlID0gZnVuY3Rpb24gKGFyZ19wb2ludCwgYXJnX290aGVyU3BoZXJlKSB7XHJcbiAgICAgICAgdmFyIGRpc3RhbmNlID0gKGFyZ19wb2ludC5TdWIoYXJnX290aGVyU3BoZXJlLnBvc2l0aW9uKSkuTGVuZ3RoKCk7XHJcbiAgICAgICAgcmV0dXJuIGRpc3RhbmNlIDw9IGFyZ19vdGhlclNwaGVyZS5yYWRpdXM7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEdlb21ldHJ5SGVscGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBHZW9tZXRyeUhlbHBlcjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIFNwaGVyZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFNwaGVyZShhcmdfciwgYXJnX3AsIGFyZ19zKSB7XHJcbiAgICAgICAgdGhpcy5yYWRpdXMgPSBhcmdfcjtcclxuICAgICAgICB0aGlzLmluaXRSYWRpdXMgPSBhcmdfcjtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uID0gYXJnX3A7XHJcbiAgICAgICAgdGhpcy5yYWRpdXMgPSBhcmdfciAqIGFyZ19zO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFNwaGVyZTtcclxufSgpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gU3BoZXJlO1xyXG47XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBRdWF0XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vUXVhdFwiKSk7XHJcbnZhciBlbGVtID0gbmV3IEFycmF5KDQpO1xyXG52YXIgTWF0cml4NHg0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTWF0cml4NHg0KCkge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoMTYpO1xyXG4gICAgfVxyXG4gICAgTWF0cml4NHg0LnByb3RvdHlwZS5JZGVudGl0eSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmRhdGFbMF0gPSAxO1xyXG4gICAgICAgIHRoaXMuZGF0YVsxXSA9IDA7XHJcbiAgICAgICAgdGhpcy5kYXRhWzJdID0gMDtcclxuICAgICAgICB0aGlzLmRhdGFbM10gPSAwO1xyXG4gICAgICAgIHRoaXMuZGF0YVs0XSA9IDA7XHJcbiAgICAgICAgdGhpcy5kYXRhWzVdID0gMTtcclxuICAgICAgICB0aGlzLmRhdGFbNl0gPSAwO1xyXG4gICAgICAgIHRoaXMuZGF0YVs3XSA9IDA7XHJcbiAgICAgICAgdGhpcy5kYXRhWzhdID0gMDtcclxuICAgICAgICB0aGlzLmRhdGFbOV0gPSAwO1xyXG4gICAgICAgIHRoaXMuZGF0YVsxMF0gPSAxO1xyXG4gICAgICAgIHRoaXMuZGF0YVsxMV0gPSAwO1xyXG4gICAgICAgIHRoaXMuZGF0YVsxMl0gPSAwO1xyXG4gICAgICAgIHRoaXMuZGF0YVsxM10gPSAwO1xyXG4gICAgICAgIHRoaXMuZGF0YVsxNF0gPSAwO1xyXG4gICAgICAgIHRoaXMuZGF0YVsxNV0gPSAxO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIE1hdHJpeDR4NC5wcm90b3R5cGUuQ2xvbmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG91dHB1dCA9IG5ldyBNYXRyaXg0eDQoKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDE2OyBpKyspIHtcclxuICAgICAgICAgICAgb3V0cHV0LmRhdGFbaV0gPSB0aGlzLmRhdGFbaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9O1xyXG4gICAgTWF0cml4NHg0LnByb3RvdHlwZS5NdWx0aXBseSA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHZhciBvdXRwdXQgPSBuZXcgTWF0cml4NHg0KCk7XHJcbiAgICAgICAgdmFyIGEgPSB0aGlzLmRhdGFbMF0sIGIgPSB0aGlzLmRhdGFbMV0sIGMgPSB0aGlzLmRhdGFbMl0sIGQgPSB0aGlzLmRhdGFbM10sIGUgPSB0aGlzLmRhdGFbNF0sIGYgPSB0aGlzLmRhdGFbNV0sIGcgPSB0aGlzLmRhdGFbNl0sIGggPSB0aGlzLmRhdGFbN10sIGkgPSB0aGlzLmRhdGFbOF0sIGogPSB0aGlzLmRhdGFbOV0sIGsgPSB0aGlzLmRhdGFbMTBdLCBsID0gdGhpcy5kYXRhWzExXSwgbSA9IHRoaXMuZGF0YVsxMl0sIG4gPSB0aGlzLmRhdGFbMTNdLCBvID0gdGhpcy5kYXRhWzE0XSwgcCA9IHRoaXMuZGF0YVsxNV0sIEEgPSBvdGhlci5kYXRhWzBdLCBCID0gb3RoZXIuZGF0YVsxXSwgQyA9IG90aGVyLmRhdGFbMl0sIEQgPSBvdGhlci5kYXRhWzNdLCBFID0gb3RoZXIuZGF0YVs0XSwgRiA9IG90aGVyLmRhdGFbNV0sIEcgPSBvdGhlci5kYXRhWzZdLCBIID0gb3RoZXIuZGF0YVs3XSwgSSA9IG90aGVyLmRhdGFbOF0sIEogPSBvdGhlci5kYXRhWzldLCBLID0gb3RoZXIuZGF0YVsxMF0sIEwgPSBvdGhlci5kYXRhWzExXSwgTSA9IG90aGVyLmRhdGFbMTJdLCBOID0gb3RoZXIuZGF0YVsxM10sIE8gPSBvdGhlci5kYXRhWzE0XSwgUCA9IG90aGVyLmRhdGFbMTVdO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzBdID0gQSAqIGEgKyBCICogZSArIEMgKiBpICsgRCAqIG07XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMV0gPSBBICogYiArIEIgKiBmICsgQyAqIGogKyBEICogbjtcclxuICAgICAgICBvdXRwdXQuZGF0YVsyXSA9IEEgKiBjICsgQiAqIGcgKyBDICogayArIEQgKiBvO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzNdID0gQSAqIGQgKyBCICogaCArIEMgKiBsICsgRCAqIHA7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbNF0gPSBFICogYSArIEYgKiBlICsgRyAqIGkgKyBIICogbTtcclxuICAgICAgICBvdXRwdXQuZGF0YVs1XSA9IEUgKiBiICsgRiAqIGYgKyBHICogaiArIEggKiBuO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzZdID0gRSAqIGMgKyBGICogZyArIEcgKiBrICsgSCAqIG87XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbN10gPSBFICogZCArIEYgKiBoICsgRyAqIGwgKyBIICogcDtcclxuICAgICAgICBvdXRwdXQuZGF0YVs4XSA9IEkgKiBhICsgSiAqIGUgKyBLICogaSArIEwgKiBtO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzldID0gSSAqIGIgKyBKICogZiArIEsgKiBqICsgTCAqIG47XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMTBdID0gSSAqIGMgKyBKICogZyArIEsgKiBrICsgTCAqIG87XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMTFdID0gSSAqIGQgKyBKICogaCArIEsgKiBsICsgTCAqIHA7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMTJdID0gTSAqIGEgKyBOICogZSArIE8gKiBpICsgUCAqIG07XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMTNdID0gTSAqIGIgKyBOICogZiArIE8gKiBqICsgUCAqIG47XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMTRdID0gTSAqIGMgKyBOICogZyArIE8gKiBrICsgUCAqIG87XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMTVdID0gTSAqIGQgKyBOICogaCArIE8gKiBsICsgUCAqIHA7XHJcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcclxuICAgIH07XHJcbiAgICBNYXRyaXg0eDQucHJvdG90eXBlLk11bHRpcGx5X2IgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICB2YXIgYSA9IHRoaXMuZGF0YVswXSwgYiA9IHRoaXMuZGF0YVsxXSwgYyA9IHRoaXMuZGF0YVsyXSwgZCA9IHRoaXMuZGF0YVszXSwgZSA9IHRoaXMuZGF0YVs0XSwgZiA9IHRoaXMuZGF0YVs1XSwgZyA9IHRoaXMuZGF0YVs2XSwgaCA9IHRoaXMuZGF0YVs3XSwgaSA9IHRoaXMuZGF0YVs4XSwgaiA9IHRoaXMuZGF0YVs5XSwgayA9IHRoaXMuZGF0YVsxMF0sIGwgPSB0aGlzLmRhdGFbMTFdLCBtID0gdGhpcy5kYXRhWzEyXSwgbiA9IHRoaXMuZGF0YVsxM10sIG8gPSB0aGlzLmRhdGFbMTRdLCBwID0gdGhpcy5kYXRhWzE1XSwgQSA9IG90aGVyLmRhdGFbMF0sIEIgPSBvdGhlci5kYXRhWzFdLCBDID0gb3RoZXIuZGF0YVsyXSwgRCA9IG90aGVyLmRhdGFbM10sIEUgPSBvdGhlci5kYXRhWzRdLCBGID0gb3RoZXIuZGF0YVs1XSwgRyA9IG90aGVyLmRhdGFbNl0sIEggPSBvdGhlci5kYXRhWzddLCBJID0gb3RoZXIuZGF0YVs4XSwgSiA9IG90aGVyLmRhdGFbOV0sIEsgPSBvdGhlci5kYXRhWzEwXSwgTCA9IG90aGVyLmRhdGFbMTFdLCBNID0gb3RoZXIuZGF0YVsxMl0sIE4gPSBvdGhlci5kYXRhWzEzXSwgTyA9IG90aGVyLmRhdGFbMTRdLCBQID0gb3RoZXIuZGF0YVsxNV07XHJcbiAgICAgICAgdGhpcy5kYXRhWzBdID0gQSAqIGEgKyBCICogZSArIEMgKiBpICsgRCAqIG07XHJcbiAgICAgICAgdGhpcy5kYXRhWzFdID0gQSAqIGIgKyBCICogZiArIEMgKiBqICsgRCAqIG47XHJcbiAgICAgICAgdGhpcy5kYXRhWzJdID0gQSAqIGMgKyBCICogZyArIEMgKiBrICsgRCAqIG87XHJcbiAgICAgICAgdGhpcy5kYXRhWzNdID0gQSAqIGQgKyBCICogaCArIEMgKiBsICsgRCAqIHA7XHJcbiAgICAgICAgdGhpcy5kYXRhWzRdID0gRSAqIGEgKyBGICogZSArIEcgKiBpICsgSCAqIG07XHJcbiAgICAgICAgdGhpcy5kYXRhWzVdID0gRSAqIGIgKyBGICogZiArIEcgKiBqICsgSCAqIG47XHJcbiAgICAgICAgdGhpcy5kYXRhWzZdID0gRSAqIGMgKyBGICogZyArIEcgKiBrICsgSCAqIG87XHJcbiAgICAgICAgdGhpcy5kYXRhWzddID0gRSAqIGQgKyBGICogaCArIEcgKiBsICsgSCAqIHA7XHJcbiAgICAgICAgdGhpcy5kYXRhWzhdID0gSSAqIGEgKyBKICogZSArIEsgKiBpICsgTCAqIG07XHJcbiAgICAgICAgdGhpcy5kYXRhWzldID0gSSAqIGIgKyBKICogZiArIEsgKiBqICsgTCAqIG47XHJcbiAgICAgICAgdGhpcy5kYXRhWzEwXSA9IEkgKiBjICsgSiAqIGcgKyBLICogayArIEwgKiBvO1xyXG4gICAgICAgIHRoaXMuZGF0YVsxMV0gPSBJICogZCArIEogKiBoICsgSyAqIGwgKyBMICogcDtcclxuICAgICAgICB0aGlzLmRhdGFbMTJdID0gTSAqIGEgKyBOICogZSArIE8gKiBpICsgUCAqIG07XHJcbiAgICAgICAgdGhpcy5kYXRhWzEzXSA9IE0gKiBiICsgTiAqIGYgKyBPICogaiArIFAgKiBuO1xyXG4gICAgICAgIHRoaXMuZGF0YVsxNF0gPSBNICogYyArIE4gKiBnICsgTyAqIGsgKyBQICogbztcclxuICAgICAgICB0aGlzLmRhdGFbMTVdID0gTSAqIGQgKyBOICogaCArIE8gKiBsICsgUCAqIHA7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgTWF0cml4NHg0LnByb3RvdHlwZS5TY2FsZSA9IGZ1bmN0aW9uIChhcmdfc2NhbGUpIHtcclxuICAgICAgICB2YXIgb3V0cHV0ID0gbmV3IE1hdHJpeDR4NCgpO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzBdID0gdGhpcy5kYXRhWzBdICogYXJnX3NjYWxlLng7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMV0gPSB0aGlzLmRhdGFbMV0gKiBhcmdfc2NhbGUueDtcclxuICAgICAgICBvdXRwdXQuZGF0YVsyXSA9IHRoaXMuZGF0YVsyXSAqIGFyZ19zY2FsZS54O1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzNdID0gdGhpcy5kYXRhWzNdICogYXJnX3NjYWxlLng7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbNF0gPSB0aGlzLmRhdGFbNF0gKiBhcmdfc2NhbGUueTtcclxuICAgICAgICBvdXRwdXQuZGF0YVs1XSA9IHRoaXMuZGF0YVs1XSAqIGFyZ19zY2FsZS55O1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzZdID0gdGhpcy5kYXRhWzZdICogYXJnX3NjYWxlLnk7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbN10gPSB0aGlzLmRhdGFbN10gKiBhcmdfc2NhbGUueTtcclxuICAgICAgICBvdXRwdXQuZGF0YVs4XSA9IHRoaXMuZGF0YVs4XSAqIGFyZ19zY2FsZS56O1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzldID0gdGhpcy5kYXRhWzldICogYXJnX3NjYWxlLno7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMTBdID0gdGhpcy5kYXRhWzEwXSAqIGFyZ19zY2FsZS56O1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzExXSA9IHRoaXMuZGF0YVsxMV0gKiBhcmdfc2NhbGUuejtcclxuICAgICAgICBvdXRwdXQuZGF0YVsxMl0gPSB0aGlzLmRhdGFbMTJdO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzEzXSA9IHRoaXMuZGF0YVsxM107XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMTRdID0gdGhpcy5kYXRhWzE0XTtcclxuICAgICAgICBvdXRwdXQuZGF0YVsxNV0gPSB0aGlzLmRhdGFbMTVdO1xyXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9O1xyXG4gICAgTWF0cml4NHg0LnByb3RvdHlwZS5TY2FsZV9iID0gZnVuY3Rpb24gKGFyZ19zY2FsZSkge1xyXG4gICAgICAgIHRoaXMuZGF0YVswXSA9IHRoaXMuZGF0YVswXSAqIGFyZ19zY2FsZS54O1xyXG4gICAgICAgIHRoaXMuZGF0YVsxXSA9IHRoaXMuZGF0YVsxXSAqIGFyZ19zY2FsZS54O1xyXG4gICAgICAgIHRoaXMuZGF0YVsyXSA9IHRoaXMuZGF0YVsyXSAqIGFyZ19zY2FsZS54O1xyXG4gICAgICAgIHRoaXMuZGF0YVszXSA9IHRoaXMuZGF0YVszXSAqIGFyZ19zY2FsZS54O1xyXG4gICAgICAgIHRoaXMuZGF0YVs0XSA9IHRoaXMuZGF0YVs0XSAqIGFyZ19zY2FsZS55O1xyXG4gICAgICAgIHRoaXMuZGF0YVs1XSA9IHRoaXMuZGF0YVs1XSAqIGFyZ19zY2FsZS55O1xyXG4gICAgICAgIHRoaXMuZGF0YVs2XSA9IHRoaXMuZGF0YVs2XSAqIGFyZ19zY2FsZS55O1xyXG4gICAgICAgIHRoaXMuZGF0YVs3XSA9IHRoaXMuZGF0YVs3XSAqIGFyZ19zY2FsZS55O1xyXG4gICAgICAgIHRoaXMuZGF0YVs4XSA9IHRoaXMuZGF0YVs4XSAqIGFyZ19zY2FsZS56O1xyXG4gICAgICAgIHRoaXMuZGF0YVs5XSA9IHRoaXMuZGF0YVs5XSAqIGFyZ19zY2FsZS56O1xyXG4gICAgICAgIHRoaXMuZGF0YVsxMF0gPSB0aGlzLmRhdGFbMTBdICogYXJnX3NjYWxlLno7XHJcbiAgICAgICAgdGhpcy5kYXRhWzExXSA9IHRoaXMuZGF0YVsxMV0gKiBhcmdfc2NhbGUuejtcclxuICAgICAgICB0aGlzLmRhdGFbMTJdID0gdGhpcy5kYXRhWzEyXTtcclxuICAgICAgICB0aGlzLmRhdGFbMTNdID0gdGhpcy5kYXRhWzEzXTtcclxuICAgICAgICB0aGlzLmRhdGFbMTRdID0gdGhpcy5kYXRhWzE0XTtcclxuICAgICAgICB0aGlzLmRhdGFbMTVdID0gdGhpcy5kYXRhWzE1XTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBNYXRyaXg0eDQucHJvdG90eXBlLlRyYW5zbGF0ZSA9IGZ1bmN0aW9uIChhcmdfdHJhbnNsYXRlKSB7XHJcbiAgICAgICAgdmFyIG91dHB1dCA9IG5ldyBNYXRyaXg0eDQoKTtcclxuICAgICAgICBvdXRwdXQuZGF0YVswXSA9IHRoaXMuZGF0YVswXTtcclxuICAgICAgICBvdXRwdXQuZGF0YVsxXSA9IHRoaXMuZGF0YVsxXTtcclxuICAgICAgICBvdXRwdXQuZGF0YVsyXSA9IHRoaXMuZGF0YVsyXTtcclxuICAgICAgICBvdXRwdXQuZGF0YVszXSA9IHRoaXMuZGF0YVszXTtcclxuICAgICAgICBvdXRwdXQuZGF0YVs0XSA9IHRoaXMuZGF0YVs0XTtcclxuICAgICAgICBvdXRwdXQuZGF0YVs1XSA9IHRoaXMuZGF0YVs1XTtcclxuICAgICAgICBvdXRwdXQuZGF0YVs2XSA9IHRoaXMuZGF0YVs2XTtcclxuICAgICAgICBvdXRwdXQuZGF0YVs3XSA9IHRoaXMuZGF0YVs3XTtcclxuICAgICAgICBvdXRwdXQuZGF0YVs4XSA9IHRoaXMuZGF0YVs4XTtcclxuICAgICAgICBvdXRwdXQuZGF0YVs5XSA9IHRoaXMuZGF0YVs5XTtcclxuICAgICAgICBvdXRwdXQuZGF0YVsxMF0gPSB0aGlzLmRhdGFbMTBdO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzExXSA9IHRoaXMuZGF0YVsxMV07XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMTJdID0gdGhpcy5kYXRhWzBdICogYXJnX3RyYW5zbGF0ZS54ICsgdGhpcy5kYXRhWzRdICogYXJnX3RyYW5zbGF0ZS55ICsgdGhpcy5kYXRhWzhdICogYXJnX3RyYW5zbGF0ZS56ICsgdGhpcy5kYXRhWzEyXTtcclxuICAgICAgICBvdXRwdXQuZGF0YVsxM10gPSB0aGlzLmRhdGFbMV0gKiBhcmdfdHJhbnNsYXRlLnggKyB0aGlzLmRhdGFbNV0gKiBhcmdfdHJhbnNsYXRlLnkgKyB0aGlzLmRhdGFbOV0gKiBhcmdfdHJhbnNsYXRlLnogKyB0aGlzLmRhdGFbMTNdO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzE0XSA9IHRoaXMuZGF0YVsyXSAqIGFyZ190cmFuc2xhdGUueCArIHRoaXMuZGF0YVs2XSAqIGFyZ190cmFuc2xhdGUueSArIHRoaXMuZGF0YVsxMF0gKiBhcmdfdHJhbnNsYXRlLnogKyB0aGlzLmRhdGFbMTRdO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzE1XSA9IHRoaXMuZGF0YVszXSAqIGFyZ190cmFuc2xhdGUueCArIHRoaXMuZGF0YVs3XSAqIGFyZ190cmFuc2xhdGUueSArIHRoaXMuZGF0YVsxMV0gKiBhcmdfdHJhbnNsYXRlLnogKyB0aGlzLmRhdGFbMTVdO1xyXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9O1xyXG4gICAgTWF0cml4NHg0LnByb3RvdHlwZS5UcmFuc2xhdGVfYiA9IGZ1bmN0aW9uIChhcmdfdHJhbnNsYXRlKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhWzEyXSA9IHRoaXMuZGF0YVswXSAqIGFyZ190cmFuc2xhdGUueCArIHRoaXMuZGF0YVs0XSAqIGFyZ190cmFuc2xhdGUueSArIHRoaXMuZGF0YVs4XSAqIGFyZ190cmFuc2xhdGUueiArIHRoaXMuZGF0YVsxMl07XHJcbiAgICAgICAgdGhpcy5kYXRhWzEzXSA9IHRoaXMuZGF0YVsxXSAqIGFyZ190cmFuc2xhdGUueCArIHRoaXMuZGF0YVs1XSAqIGFyZ190cmFuc2xhdGUueSArIHRoaXMuZGF0YVs5XSAqIGFyZ190cmFuc2xhdGUueiArIHRoaXMuZGF0YVsxM107XHJcbiAgICAgICAgdGhpcy5kYXRhWzE0XSA9IHRoaXMuZGF0YVsyXSAqIGFyZ190cmFuc2xhdGUueCArIHRoaXMuZGF0YVs2XSAqIGFyZ190cmFuc2xhdGUueSArIHRoaXMuZGF0YVsxMF0gKiBhcmdfdHJhbnNsYXRlLnogKyB0aGlzLmRhdGFbMTRdO1xyXG4gICAgICAgIHRoaXMuZGF0YVsxNV0gPSB0aGlzLmRhdGFbM10gKiBhcmdfdHJhbnNsYXRlLnggKyB0aGlzLmRhdGFbN10gKiBhcmdfdHJhbnNsYXRlLnkgKyB0aGlzLmRhdGFbMTFdICogYXJnX3RyYW5zbGF0ZS56ICsgdGhpcy5kYXRhWzE1XTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBNYXRyaXg0eDQucHJvdG90eXBlLlJvdGF0ZSA9IGZ1bmN0aW9uIChhcmdfYW5nbGUsIGFyZ19heGlzKSB7XHJcbiAgICAgICAgdmFyIG91dHB1dCA9IG5ldyBNYXRyaXg0eDQoKTtcclxuICAgICAgICB2YXIgc3EgPSBhcmdfYXhpcy5MZW5ndGgoKTtcclxuICAgICAgICBpZiAoIXNxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgYSA9IGFyZ19heGlzLngsIGIgPSBhcmdfYXhpcy55LCBjID0gYXJnX2F4aXMuejtcclxuICAgICAgICBpZiAoc3EgIT0gMSkge1xyXG4gICAgICAgICAgICBzcSA9IDEgLyBzcTtcclxuICAgICAgICAgICAgYSAqPSBzcTtcclxuICAgICAgICAgICAgYiAqPSBzcTtcclxuICAgICAgICAgICAgYyAqPSBzcTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGQgPSBNYXRoLnNpbihhcmdfYW5nbGUpLCBlID0gTWF0aC5jb3MoYXJnX2FuZ2xlKSwgZiA9IDEgLSBlLCBnID0gdGhpcy5kYXRhWzBdLCBoID0gdGhpcy5kYXRhWzFdLCBpID0gdGhpcy5kYXRhWzJdLCBqID0gdGhpcy5kYXRhWzNdLCBrID0gdGhpcy5kYXRhWzRdLCBsID0gdGhpcy5kYXRhWzVdLCBtID0gdGhpcy5kYXRhWzZdLCBuID0gdGhpcy5kYXRhWzddLCBvID0gdGhpcy5kYXRhWzhdLCBwID0gdGhpcy5kYXRhWzldLCBxID0gdGhpcy5kYXRhWzEwXSwgciA9IHRoaXMuZGF0YVsxMV0sIHMgPSBhICogYSAqIGYgKyBlLCB0ID0gYiAqIGEgKiBmICsgYyAqIGQsIHUgPSBjICogYSAqIGYgLSBiICogZCwgdiA9IGEgKiBiICogZiAtIGMgKiBkLCB3ID0gYiAqIGIgKiBmICsgZSwgeCA9IGMgKiBiICogZiArIGEgKiBkLCB5ID0gYSAqIGMgKiBmICsgYiAqIGQsIHogPSBiICogYyAqIGYgLSBhICogZCwgQSA9IGMgKiBjICogZiArIGU7XHJcbiAgICAgICAgaWYgKGFyZ19hbmdsZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhICE9IG91dHB1dC5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBvdXRwdXQuZGF0YVsxMl0gPSB0aGlzLmRhdGFbMTJdO1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0LmRhdGFbMTNdID0gdGhpcy5kYXRhWzEzXTtcclxuICAgICAgICAgICAgICAgIG91dHB1dC5kYXRhWzE0XSA9IHRoaXMuZGF0YVsxNF07XHJcbiAgICAgICAgICAgICAgICBvdXRwdXQuZGF0YVsxNV0gPSB0aGlzLmRhdGFbMTVdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvdXRwdXQuZGF0YSA9IHRoaXMuZGF0YTtcclxuICAgICAgICB9XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMF0gPSBnICogcyArIGsgKiB0ICsgbyAqIHU7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMV0gPSBoICogcyArIGwgKiB0ICsgcCAqIHU7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMl0gPSBpICogcyArIG0gKiB0ICsgcSAqIHU7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbM10gPSBqICogcyArIG4gKiB0ICsgciAqIHU7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbNF0gPSBnICogdiArIGsgKiB3ICsgbyAqIHg7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbNV0gPSBoICogdiArIGwgKiB3ICsgcCAqIHg7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbNl0gPSBpICogdiArIG0gKiB3ICsgcSAqIHg7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbN10gPSBqICogdiArIG4gKiB3ICsgciAqIHg7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbOF0gPSBnICogeSArIGsgKiB6ICsgbyAqIEE7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbOV0gPSBoICogeSArIGwgKiB6ICsgcCAqIEE7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMTBdID0gaSAqIHkgKyBtICogeiArIHEgKiBBO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzExXSA9IGogKiB5ICsgbiAqIHogKyByICogQTtcclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfTtcclxuICAgIE1hdHJpeDR4NC5wcm90b3R5cGUuUm90YXRlX2IgPSBmdW5jdGlvbiAoYXJnX2FuZ2xlLCBhcmdfYXhpcykge1xyXG4gICAgICAgIHZhciBzcSA9IGFyZ19heGlzLkxlbmd0aCgpO1xyXG4gICAgICAgIGlmICghc3EpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBhID0gYXJnX2F4aXMueCwgYiA9IGFyZ19heGlzLnksIGMgPSBhcmdfYXhpcy56O1xyXG4gICAgICAgIGlmIChzcSAhPSAxKSB7XHJcbiAgICAgICAgICAgIHNxID0gMSAvIHNxO1xyXG4gICAgICAgICAgICBhICo9IHNxO1xyXG4gICAgICAgICAgICBiICo9IHNxO1xyXG4gICAgICAgICAgICBjICo9IHNxO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZCA9IE1hdGguc2luKGFyZ19hbmdsZSksIGUgPSBNYXRoLmNvcyhhcmdfYW5nbGUpLCBmID0gMSAtIGUsIGcgPSB0aGlzLmRhdGFbMF0sIGggPSB0aGlzLmRhdGFbMV0sIGkgPSB0aGlzLmRhdGFbMl0sIGogPSB0aGlzLmRhdGFbM10sIGsgPSB0aGlzLmRhdGFbNF0sIGwgPSB0aGlzLmRhdGFbNV0sIG0gPSB0aGlzLmRhdGFbNl0sIG4gPSB0aGlzLmRhdGFbN10sIG8gPSB0aGlzLmRhdGFbOF0sIHAgPSB0aGlzLmRhdGFbOV0sIHEgPSB0aGlzLmRhdGFbMTBdLCByID0gdGhpcy5kYXRhWzExXSwgcyA9IGEgKiBhICogZiArIGUsIHQgPSBiICogYSAqIGYgKyBjICogZCwgdSA9IGMgKiBhICogZiAtIGIgKiBkLCB2ID0gYSAqIGIgKiBmIC0gYyAqIGQsIHcgPSBiICogYiAqIGYgKyBlLCB4ID0gYyAqIGIgKiBmICsgYSAqIGQsIHkgPSBhICogYyAqIGYgKyBiICogZCwgeiA9IGIgKiBjICogZiAtIGEgKiBkLCBBID0gYyAqIGMgKiBmICsgZTtcclxuICAgICAgICB0aGlzLmRhdGFbMF0gPSBnICogcyArIGsgKiB0ICsgbyAqIHU7XHJcbiAgICAgICAgdGhpcy5kYXRhWzFdID0gaCAqIHMgKyBsICogdCArIHAgKiB1O1xyXG4gICAgICAgIHRoaXMuZGF0YVsyXSA9IGkgKiBzICsgbSAqIHQgKyBxICogdTtcclxuICAgICAgICB0aGlzLmRhdGFbM10gPSBqICogcyArIG4gKiB0ICsgciAqIHU7XHJcbiAgICAgICAgdGhpcy5kYXRhWzRdID0gZyAqIHYgKyBrICogdyArIG8gKiB4O1xyXG4gICAgICAgIHRoaXMuZGF0YVs1XSA9IGggKiB2ICsgbCAqIHcgKyBwICogeDtcclxuICAgICAgICB0aGlzLmRhdGFbNl0gPSBpICogdiArIG0gKiB3ICsgcSAqIHg7XHJcbiAgICAgICAgdGhpcy5kYXRhWzddID0gaiAqIHYgKyBuICogdyArIHIgKiB4O1xyXG4gICAgICAgIHRoaXMuZGF0YVs4XSA9IGcgKiB5ICsgayAqIHogKyBvICogQTtcclxuICAgICAgICB0aGlzLmRhdGFbOV0gPSBoICogeSArIGwgKiB6ICsgcCAqIEE7XHJcbiAgICAgICAgdGhpcy5kYXRhWzEwXSA9IGkgKiB5ICsgbSAqIHogKyBxICogQTtcclxuICAgICAgICB0aGlzLmRhdGFbMTFdID0gaiAqIHkgKyBuICogeiArIHIgKiBBO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIE1hdHJpeDR4NC5wcm90b3R5cGUuTG9va0F0ID0gZnVuY3Rpb24gKGFyZ19leWUsIGFyZ19jZW50ZXJQb3MsIGFyZ191cEF4aXMpIHtcclxuICAgICAgICB2YXIgZXllWCA9IGFyZ19leWUueCwgZXllWSA9IGFyZ19leWUueSwgZXllWiA9IGFyZ19leWUueiwgdXBYID0gYXJnX3VwQXhpcy54LCB1cFkgPSBhcmdfdXBBeGlzLnksIHVwWiA9IGFyZ191cEF4aXMueiwgY2VudGVyWCA9IGFyZ19jZW50ZXJQb3MueCwgY2VudGVyWSA9IGFyZ19jZW50ZXJQb3MueSwgY2VudGVyWiA9IGFyZ19jZW50ZXJQb3MuejtcclxuICAgICAgICBpZiAoZXllWCA9PSBjZW50ZXJYICYmIGV5ZVkgPT0gY2VudGVyWSAmJiBleWVaID09IGNlbnRlclopIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuSWRlbnRpdHkoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHgwLCB4MSwgeDIsIHkwLCB5MSwgeTIsIHowLCB6MSwgejIsIGw7XHJcbiAgICAgICAgejAgPSBleWVYIC0gYXJnX2NlbnRlclBvcy54O1xyXG4gICAgICAgIHoxID0gZXllWSAtIGFyZ19jZW50ZXJQb3MueTtcclxuICAgICAgICB6MiA9IGV5ZVogLSBhcmdfY2VudGVyUG9zLno7XHJcbiAgICAgICAgbCA9IDEgLyBNYXRoLnNxcnQoejAgKiB6MCArIHoxICogejEgKyB6MiAqIHoyKTtcclxuICAgICAgICB6MCAqPSBsO1xyXG4gICAgICAgIHoxICo9IGw7XHJcbiAgICAgICAgejIgKj0gbDtcclxuICAgICAgICB4MCA9IHVwWSAqIHoyIC0gdXBaICogejE7XHJcbiAgICAgICAgeDEgPSB1cFogKiB6MCAtIHVwWCAqIHoyO1xyXG4gICAgICAgIHgyID0gdXBYICogejEgLSB1cFkgKiB6MDtcclxuICAgICAgICBsID0gTWF0aC5zcXJ0KHgwICogeDAgKyB4MSAqIHgxICsgeDIgKiB4Mik7XHJcbiAgICAgICAgaWYgKCFsKSB7XHJcbiAgICAgICAgICAgIHgwID0gMDtcclxuICAgICAgICAgICAgeDEgPSAwO1xyXG4gICAgICAgICAgICB4MiA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBsID0gMSAvIGw7XHJcbiAgICAgICAgICAgIHgwICo9IGw7XHJcbiAgICAgICAgICAgIHgxICo9IGw7XHJcbiAgICAgICAgICAgIHgyICo9IGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHkwID0gejEgKiB4MiAtIHoyICogeDE7XHJcbiAgICAgICAgeTEgPSB6MiAqIHgwIC0gejAgKiB4MjtcclxuICAgICAgICB5MiA9IHowICogeDEgLSB6MSAqIHgwO1xyXG4gICAgICAgIGwgPSBNYXRoLnNxcnQoeTAgKiB5MCArIHkxICogeTEgKyB5MiAqIHkyKTtcclxuICAgICAgICBpZiAoIWwpIHtcclxuICAgICAgICAgICAgeTAgPSAwO1xyXG4gICAgICAgICAgICB5MSA9IDA7XHJcbiAgICAgICAgICAgIHkyID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGwgPSAxIC8gbDtcclxuICAgICAgICAgICAgeTAgKj0gbDtcclxuICAgICAgICAgICAgeTEgKj0gbDtcclxuICAgICAgICAgICAgeTIgKj0gbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kYXRhWzBdID0geDA7XHJcbiAgICAgICAgdGhpcy5kYXRhWzFdID0geTA7XHJcbiAgICAgICAgdGhpcy5kYXRhWzJdID0gejA7XHJcbiAgICAgICAgdGhpcy5kYXRhWzNdID0gMDtcclxuICAgICAgICB0aGlzLmRhdGFbNF0gPSB4MTtcclxuICAgICAgICB0aGlzLmRhdGFbNV0gPSB5MTtcclxuICAgICAgICB0aGlzLmRhdGFbNl0gPSB6MTtcclxuICAgICAgICB0aGlzLmRhdGFbN10gPSAwO1xyXG4gICAgICAgIHRoaXMuZGF0YVs4XSA9IHgyO1xyXG4gICAgICAgIHRoaXMuZGF0YVs5XSA9IHkyO1xyXG4gICAgICAgIHRoaXMuZGF0YVsxMF0gPSB6MjtcclxuICAgICAgICB0aGlzLmRhdGFbMTFdID0gMDtcclxuICAgICAgICB0aGlzLmRhdGFbMTJdID0gLSh4MCAqIGV5ZVggKyB4MSAqIGV5ZVkgKyB4MiAqIGV5ZVopO1xyXG4gICAgICAgIHRoaXMuZGF0YVsxM10gPSAtKHkwICogZXllWCArIHkxICogZXllWSArIHkyICogZXllWik7XHJcbiAgICAgICAgdGhpcy5kYXRhWzE0XSA9IC0oejAgKiBleWVYICsgejEgKiBleWVZICsgejIgKiBleWVaKTtcclxuICAgICAgICB0aGlzLmRhdGFbMTVdID0gMTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBNYXRyaXg0eDQucHJvdG90eXBlLlBlcnNwZWN0aXZlID0gZnVuY3Rpb24gKGZvdnksIGFzcGVjdCwgbmVhciwgZmFyKSB7XHJcbiAgICAgICAgdmFyIHQgPSBuZWFyICogTWF0aC50YW4oZm92eSAqIE1hdGguUEkgLyAzNjApO1xyXG4gICAgICAgIHZhciByID0gdCAqIGFzcGVjdDtcclxuICAgICAgICB2YXIgYSA9IHIgKiAyLCBiID0gdCAqIDIsIGMgPSBmYXIgLSBuZWFyO1xyXG4gICAgICAgIHRoaXMuZGF0YVswXSA9IG5lYXIgKiAyIC8gYTtcclxuICAgICAgICB0aGlzLmRhdGFbMV0gPSAwO1xyXG4gICAgICAgIHRoaXMuZGF0YVsyXSA9IDA7XHJcbiAgICAgICAgdGhpcy5kYXRhWzNdID0gMDtcclxuICAgICAgICB0aGlzLmRhdGFbNF0gPSAwO1xyXG4gICAgICAgIHRoaXMuZGF0YVs1XSA9IG5lYXIgKiAyIC8gYjtcclxuICAgICAgICB0aGlzLmRhdGFbNl0gPSAwO1xyXG4gICAgICAgIHRoaXMuZGF0YVs3XSA9IDA7XHJcbiAgICAgICAgdGhpcy5kYXRhWzhdID0gMDtcclxuICAgICAgICB0aGlzLmRhdGFbOV0gPSAwO1xyXG4gICAgICAgIHRoaXMuZGF0YVsxMF0gPSAtKGZhciArIG5lYXIpIC8gYztcclxuICAgICAgICB0aGlzLmRhdGFbMTFdID0gLTE7XHJcbiAgICAgICAgdGhpcy5kYXRhWzEyXSA9IDA7XHJcbiAgICAgICAgdGhpcy5kYXRhWzEzXSA9IDA7XHJcbiAgICAgICAgdGhpcy5kYXRhWzE0XSA9IC0oZmFyICogbmVhciAqIDIpIC8gYztcclxuICAgICAgICB0aGlzLmRhdGFbMTVdID0gMDtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBNYXRyaXg0eDQucHJvdG90eXBlLk9ydGhvID0gZnVuY3Rpb24gKGxlZnQsIHJpZ2h0LCB0b3AsIGJvdHRvbSwgbmVhciwgZmFyKSB7XHJcbiAgICAgICAgdmFyIGggPSAocmlnaHQgLSBsZWZ0KTtcclxuICAgICAgICB2YXIgdiA9ICh0b3AgLSBib3R0b20pO1xyXG4gICAgICAgIHZhciBkID0gKGZhciAtIG5lYXIpO1xyXG4gICAgICAgIHRoaXMuZGF0YVswXSA9IDIgLyBoO1xyXG4gICAgICAgIHRoaXMuZGF0YVsxXSA9IDA7XHJcbiAgICAgICAgdGhpcy5kYXRhWzJdID0gMDtcclxuICAgICAgICB0aGlzLmRhdGFbM10gPSAwO1xyXG4gICAgICAgIHRoaXMuZGF0YVs0XSA9IDA7XHJcbiAgICAgICAgdGhpcy5kYXRhWzVdID0gMiAvIHY7XHJcbiAgICAgICAgdGhpcy5kYXRhWzZdID0gMDtcclxuICAgICAgICB0aGlzLmRhdGFbN10gPSAwO1xyXG4gICAgICAgIHRoaXMuZGF0YVs4XSA9IDA7XHJcbiAgICAgICAgdGhpcy5kYXRhWzldID0gMDtcclxuICAgICAgICB0aGlzLmRhdGFbMTBdID0gLTIgLyBkO1xyXG4gICAgICAgIHRoaXMuZGF0YVsxMV0gPSAwO1xyXG4gICAgICAgIHRoaXMuZGF0YVsxMl0gPSAtKGxlZnQgKyByaWdodCkgLyBoO1xyXG4gICAgICAgIHRoaXMuZGF0YVsxM10gPSAtKHRvcCArIGJvdHRvbSkgLyB2O1xyXG4gICAgICAgIHRoaXMuZGF0YVsxNF0gPSAtKGZhciArIG5lYXIpIC8gZDtcclxuICAgICAgICB0aGlzLmRhdGFbMTVdID0gMTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBNYXRyaXg0eDQucHJvdG90eXBlLlRyYW5zcG9zZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgb3V0cHV0ID0gbmV3IE1hdHJpeDR4NCgpO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzBdID0gdGhpcy5kYXRhWzBdO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzFdID0gdGhpcy5kYXRhWzRdO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzJdID0gdGhpcy5kYXRhWzhdO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzNdID0gdGhpcy5kYXRhWzEyXTtcclxuICAgICAgICBvdXRwdXQuZGF0YVs0XSA9IHRoaXMuZGF0YVsxXTtcclxuICAgICAgICBvdXRwdXQuZGF0YVs1XSA9IHRoaXMuZGF0YVs1XTtcclxuICAgICAgICBvdXRwdXQuZGF0YVs2XSA9IHRoaXMuZGF0YVs5XTtcclxuICAgICAgICBvdXRwdXQuZGF0YVs3XSA9IHRoaXMuZGF0YVsxM107XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbOF0gPSB0aGlzLmRhdGFbMl07XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbOV0gPSB0aGlzLmRhdGFbNl07XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMTBdID0gdGhpcy5kYXRhWzEwXTtcclxuICAgICAgICBvdXRwdXQuZGF0YVsxMV0gPSB0aGlzLmRhdGFbMTRdO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzEyXSA9IHRoaXMuZGF0YVszXTtcclxuICAgICAgICBvdXRwdXQuZGF0YVsxM10gPSB0aGlzLmRhdGFbN107XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMTRdID0gdGhpcy5kYXRhWzExXTtcclxuICAgICAgICBvdXRwdXQuZGF0YVsxNV0gPSB0aGlzLmRhdGFbMTVdO1xyXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9O1xyXG4gICAgTWF0cml4NHg0LnByb3RvdHlwZS5UcmFuc3Bvc2VfYiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdGVtcCA9IG5ldyBNYXRyaXg0eDQoKTtcclxuICAgICAgICB0ZW1wLmRhdGFbMF0gPSB0aGlzLmRhdGFbMF07XHJcbiAgICAgICAgdGVtcC5kYXRhWzFdID0gdGhpcy5kYXRhWzRdO1xyXG4gICAgICAgIHRlbXAuZGF0YVsyXSA9IHRoaXMuZGF0YVs4XTtcclxuICAgICAgICB0ZW1wLmRhdGFbM10gPSB0aGlzLmRhdGFbMTJdO1xyXG4gICAgICAgIHRlbXAuZGF0YVs0XSA9IHRoaXMuZGF0YVsxXTtcclxuICAgICAgICB0ZW1wLmRhdGFbNV0gPSB0aGlzLmRhdGFbNV07XHJcbiAgICAgICAgdGVtcC5kYXRhWzZdID0gdGhpcy5kYXRhWzldO1xyXG4gICAgICAgIHRlbXAuZGF0YVs3XSA9IHRoaXMuZGF0YVsxM107XHJcbiAgICAgICAgdGVtcC5kYXRhWzhdID0gdGhpcy5kYXRhWzJdO1xyXG4gICAgICAgIHRlbXAuZGF0YVs5XSA9IHRoaXMuZGF0YVs2XTtcclxuICAgICAgICB0ZW1wLmRhdGFbMTBdID0gdGhpcy5kYXRhWzEwXTtcclxuICAgICAgICB0ZW1wLmRhdGFbMTFdID0gdGhpcy5kYXRhWzE0XTtcclxuICAgICAgICB0ZW1wLmRhdGFbMTJdID0gdGhpcy5kYXRhWzNdO1xyXG4gICAgICAgIHRlbXAuZGF0YVsxM10gPSB0aGlzLmRhdGFbN107XHJcbiAgICAgICAgdGVtcC5kYXRhWzE0XSA9IHRoaXMuZGF0YVsxMV07XHJcbiAgICAgICAgdGVtcC5kYXRhWzE1XSA9IHRoaXMuZGF0YVsxNV07XHJcbiAgICAgICAgdGhpcy5kYXRhID0gdGVtcC5kYXRhO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIE1hdHJpeDR4NC5wcm90b3R5cGUuSW52ZXJzZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgb3V0cHV0ID0gbmV3IE1hdHJpeDR4NCgpO1xyXG4gICAgICAgIHZhciBhID0gdGhpcy5kYXRhWzBdLCBiID0gdGhpcy5kYXRhWzFdLCBjID0gdGhpcy5kYXRhWzJdLCBkID0gdGhpcy5kYXRhWzNdLCBlID0gdGhpcy5kYXRhWzRdLCBmID0gdGhpcy5kYXRhWzVdLCBnID0gdGhpcy5kYXRhWzZdLCBoID0gdGhpcy5kYXRhWzddLCBpID0gdGhpcy5kYXRhWzhdLCBqID0gdGhpcy5kYXRhWzldLCBrID0gdGhpcy5kYXRhWzEwXSwgbCA9IHRoaXMuZGF0YVsxMV0sIG0gPSB0aGlzLmRhdGFbMTJdLCBuID0gdGhpcy5kYXRhWzEzXSwgbyA9IHRoaXMuZGF0YVsxNF0sIHAgPSB0aGlzLmRhdGFbMTVdLCBxID0gYSAqIGYgLSBiICogZSwgciA9IGEgKiBnIC0gYyAqIGUsIHMgPSBhICogaCAtIGQgKiBlLCB0ID0gYiAqIGcgLSBjICogZiwgdSA9IGIgKiBoIC0gZCAqIGYsIHYgPSBjICogaCAtIGQgKiBnLCB3ID0gaSAqIG4gLSBqICogbSwgeCA9IGkgKiBvIC0gayAqIG0sIHkgPSBpICogcCAtIGwgKiBtLCB6ID0gaiAqIG8gLSBrICogbiwgQSA9IGogKiBwIC0gbCAqIG4sIEIgPSBrICogcCAtIGwgKiBvLCBpdmQgPSAxIC8gKHEgKiBCIC0gciAqIEEgKyBzICogeiArIHQgKiB5IC0gdSAqIHggKyB2ICogdyk7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMF0gPSAoZiAqIEIgLSBnICogQSArIGggKiB6KSAqIGl2ZDtcclxuICAgICAgICBvdXRwdXQuZGF0YVsxXSA9ICgtYiAqIEIgKyBjICogQSAtIGQgKiB6KSAqIGl2ZDtcclxuICAgICAgICBvdXRwdXQuZGF0YVsyXSA9IChuICogdiAtIG8gKiB1ICsgcCAqIHQpICogaXZkO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzNdID0gKC1qICogdiArIGsgKiB1IC0gbCAqIHQpICogaXZkO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzRdID0gKC1lICogQiArIGcgKiB5IC0gaCAqIHgpICogaXZkO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzVdID0gKGEgKiBCIC0gYyAqIHkgKyBkICogeCkgKiBpdmQ7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbNl0gPSAoLW0gKiB2ICsgbyAqIHMgLSBwICogcikgKiBpdmQ7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbN10gPSAoaSAqIHYgLSBrICogcyArIGwgKiByKSAqIGl2ZDtcclxuICAgICAgICBvdXRwdXQuZGF0YVs4XSA9IChlICogQSAtIGYgKiB5ICsgaCAqIHcpICogaXZkO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzldID0gKC1hICogQSArIGIgKiB5IC0gZCAqIHcpICogaXZkO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzEwXSA9IChtICogdSAtIG4gKiBzICsgcCAqIHEpICogaXZkO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzExXSA9ICgtaSAqIHUgKyBqICogcyAtIGwgKiBxKSAqIGl2ZDtcclxuICAgICAgICBvdXRwdXQuZGF0YVsxMl0gPSAoLWUgKiB6ICsgZiAqIHggLSBnICogdykgKiBpdmQ7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMTNdID0gKGEgKiB6IC0gYiAqIHggKyBjICogdykgKiBpdmQ7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMTRdID0gKC1tICogdCArIG4gKiByIC0gbyAqIHEpICogaXZkO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzE1XSA9IChpICogdCAtIGogKiByICsgayAqIHEpICogaXZkO1xyXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9O1xyXG4gICAgTWF0cml4NHg0LnByb3RvdHlwZS5JbnZlcnNlX2IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGEgPSB0aGlzLmRhdGFbMF0sIGIgPSB0aGlzLmRhdGFbMV0sIGMgPSB0aGlzLmRhdGFbMl0sIGQgPSB0aGlzLmRhdGFbM10sIGUgPSB0aGlzLmRhdGFbNF0sIGYgPSB0aGlzLmRhdGFbNV0sIGcgPSB0aGlzLmRhdGFbNl0sIGggPSB0aGlzLmRhdGFbN10sIGkgPSB0aGlzLmRhdGFbOF0sIGogPSB0aGlzLmRhdGFbOV0sIGsgPSB0aGlzLmRhdGFbMTBdLCBsID0gdGhpcy5kYXRhWzExXSwgbSA9IHRoaXMuZGF0YVsxMl0sIG4gPSB0aGlzLmRhdGFbMTNdLCBvID0gdGhpcy5kYXRhWzE0XSwgcCA9IHRoaXMuZGF0YVsxNV0sIHEgPSBhICogZiAtIGIgKiBlLCByID0gYSAqIGcgLSBjICogZSwgcyA9IGEgKiBoIC0gZCAqIGUsIHQgPSBiICogZyAtIGMgKiBmLCB1ID0gYiAqIGggLSBkICogZiwgdiA9IGMgKiBoIC0gZCAqIGcsIHcgPSBpICogbiAtIGogKiBtLCB4ID0gaSAqIG8gLSBrICogbSwgeSA9IGkgKiBwIC0gbCAqIG0sIHogPSBqICogbyAtIGsgKiBuLCBBID0gaiAqIHAgLSBsICogbiwgQiA9IGsgKiBwIC0gbCAqIG8sIGl2ZCA9IDEgLyAocSAqIEIgLSByICogQSArIHMgKiB6ICsgdCAqIHkgLSB1ICogeCArIHYgKiB3KTtcclxuICAgICAgICB0aGlzLmRhdGFbMF0gPSAoZiAqIEIgLSBnICogQSArIGggKiB6KSAqIGl2ZDtcclxuICAgICAgICB0aGlzLmRhdGFbMV0gPSAoLWIgKiBCICsgYyAqIEEgLSBkICogeikgKiBpdmQ7XHJcbiAgICAgICAgdGhpcy5kYXRhWzJdID0gKG4gKiB2IC0gbyAqIHUgKyBwICogdCkgKiBpdmQ7XHJcbiAgICAgICAgdGhpcy5kYXRhWzNdID0gKC1qICogdiArIGsgKiB1IC0gbCAqIHQpICogaXZkO1xyXG4gICAgICAgIHRoaXMuZGF0YVs0XSA9ICgtZSAqIEIgKyBnICogeSAtIGggKiB4KSAqIGl2ZDtcclxuICAgICAgICB0aGlzLmRhdGFbNV0gPSAoYSAqIEIgLSBjICogeSArIGQgKiB4KSAqIGl2ZDtcclxuICAgICAgICB0aGlzLmRhdGFbNl0gPSAoLW0gKiB2ICsgbyAqIHMgLSBwICogcikgKiBpdmQ7XHJcbiAgICAgICAgdGhpcy5kYXRhWzddID0gKGkgKiB2IC0gayAqIHMgKyBsICogcikgKiBpdmQ7XHJcbiAgICAgICAgdGhpcy5kYXRhWzhdID0gKGUgKiBBIC0gZiAqIHkgKyBoICogdykgKiBpdmQ7XHJcbiAgICAgICAgdGhpcy5kYXRhWzldID0gKC1hICogQSArIGIgKiB5IC0gZCAqIHcpICogaXZkO1xyXG4gICAgICAgIHRoaXMuZGF0YVsxMF0gPSAobSAqIHUgLSBuICogcyArIHAgKiBxKSAqIGl2ZDtcclxuICAgICAgICB0aGlzLmRhdGFbMTFdID0gKC1pICogdSArIGogKiBzIC0gbCAqIHEpICogaXZkO1xyXG4gICAgICAgIHRoaXMuZGF0YVsxMl0gPSAoLWUgKiB6ICsgZiAqIHggLSBnICogdykgKiBpdmQ7XHJcbiAgICAgICAgdGhpcy5kYXRhWzEzXSA9IChhICogeiAtIGIgKiB4ICsgYyAqIHcpICogaXZkO1xyXG4gICAgICAgIHRoaXMuZGF0YVsxNF0gPSAoLW0gKiB0ICsgbiAqIHIgLSBvICogcSkgKiBpdmQ7XHJcbiAgICAgICAgdGhpcy5kYXRhWzE1XSA9IChpICogdCAtIGogKiByICsgayAqIHEpICogaXZkO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIE1hdHJpeDR4NC5wcm90b3R5cGUuVG9RdWF0ZXJuaW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGVsZW1bMF0gPSB0aGlzLmRhdGFbMF0gLSB0aGlzLmRhdGFbNV0gLSB0aGlzLmRhdGFbMTBdICsgMS4wO1xyXG4gICAgICAgIGVsZW1bMV0gPSAtdGhpcy5kYXRhWzBdICsgdGhpcy5kYXRhWzVdIC0gdGhpcy5kYXRhWzEwXSArIDEuMDtcclxuICAgICAgICBlbGVtWzJdID0gLXRoaXMuZGF0YVswXSAtIHRoaXMuZGF0YVs1XSArIHRoaXMuZGF0YVsxMF0gKyAxLjA7XHJcbiAgICAgICAgZWxlbVszXSA9IHRoaXMuZGF0YVswXSArIHRoaXMuZGF0YVs1XSArIHRoaXMuZGF0YVsxMF0gKyAxLjA7XHJcbiAgICAgICAgdmFyIGJpZ2dlc3RJbmRleCA9IDA7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCA0OyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGVsZW1baV0gPiBlbGVtW2JpZ2dlc3RJbmRleF0pXHJcbiAgICAgICAgICAgICAgICBiaWdnZXN0SW5kZXggPSBpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgb3V0UXVhdCA9IG5ldyBRdWF0XzEuZGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciB2ID0gTWF0aC5zcXJ0KGVsZW1bYmlnZ2VzdEluZGV4XSkgKiAwLjU7XHJcbiAgICAgICAgb3V0UXVhdC5kYXRhW2JpZ2dlc3RJbmRleF0gPSB2O1xyXG4gICAgICAgIHZhciBtdWx0ID0gMC4yNSAvIHY7XHJcbiAgICAgICAgc3dpdGNoIChiaWdnZXN0SW5kZXgpIHtcclxuICAgICAgICAgICAgY2FzZSAwOiAvLyB4XHJcbiAgICAgICAgICAgICAgICBvdXRRdWF0LmRhdGFbMV0gPSAodGhpcy5kYXRhWzFdICsgdGhpcy5kYXRhWzRdKSAqIG11bHQ7XHJcbiAgICAgICAgICAgICAgICBvdXRRdWF0LmRhdGFbMl0gPSAodGhpcy5kYXRhWzJdICsgdGhpcy5kYXRhWzhdKSAqIG11bHQ7XHJcbiAgICAgICAgICAgICAgICBvdXRRdWF0LmRhdGFbM10gPSAodGhpcy5kYXRhWzldIC0gdGhpcy5kYXRhWzZdKSAqIG11bHQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAxOiAvLyB5XHJcbiAgICAgICAgICAgICAgICBvdXRRdWF0LmRhdGFbMF0gPSAodGhpcy5kYXRhWzFdICsgdGhpcy5kYXRhWzRdKSAqIG11bHQ7XHJcbiAgICAgICAgICAgICAgICBvdXRRdWF0LmRhdGFbMl0gPSAodGhpcy5kYXRhWzldICsgdGhpcy5kYXRhWzZdKSAqIG11bHQ7XHJcbiAgICAgICAgICAgICAgICBvdXRRdWF0LmRhdGFbM10gPSAodGhpcy5kYXRhWzJdIC0gdGhpcy5kYXRhWzhdKSAqIG11bHQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAyOiAvLyB6XHJcbiAgICAgICAgICAgICAgICBvdXRRdWF0LmRhdGFbMF0gPSAodGhpcy5kYXRhWzJdICsgdGhpcy5kYXRhWzhdKSAqIG11bHQ7XHJcbiAgICAgICAgICAgICAgICBvdXRRdWF0LmRhdGFbMV0gPSAodGhpcy5kYXRhWzldICsgdGhpcy5kYXRhWzZdKSAqIG11bHQ7XHJcbiAgICAgICAgICAgICAgICBvdXRRdWF0LmRhdGFbM10gPSAodGhpcy5kYXRhWzRdIC0gdGhpcy5kYXRhWzFdKSAqIG11bHQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAzOiAvLyB3XHJcbiAgICAgICAgICAgICAgICBvdXRRdWF0LmRhdGFbMF0gPSAodGhpcy5kYXRhWzldIC0gdGhpcy5kYXRhWzZdKSAqIG11bHQ7XHJcbiAgICAgICAgICAgICAgICBvdXRRdWF0LmRhdGFbMV0gPSAodGhpcy5kYXRhWzJdIC0gdGhpcy5kYXRhWzhdKSAqIG11bHQ7XHJcbiAgICAgICAgICAgICAgICBvdXRRdWF0LmRhdGFbMl0gPSAodGhpcy5kYXRhWzRdIC0gdGhpcy5kYXRhWzFdKSAqIG11bHQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG91dFF1YXQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE1hdHJpeDR4NDtcclxufSgpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gTWF0cml4NHg0O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgTWF0cml4XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vTWF0cml4XCIpKTtcclxudmFyIFZlY3RvcjNfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9WZWN0b3IzXCIpKTtcclxudmFyIFF1YXRlcm5pb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBRdWF0ZXJuaW9uKCkge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoNCk7XHJcbiAgICB9XHJcbiAgICBRdWF0ZXJuaW9uLnByb3RvdHlwZS5JZGVudGl0eSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmRhdGFbMF0gPSAwO1xyXG4gICAgICAgIHRoaXMuZGF0YVsxXSA9IDA7XHJcbiAgICAgICAgdGhpcy5kYXRhWzJdID0gMDtcclxuICAgICAgICB0aGlzLmRhdGFbM10gPSAxO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIFF1YXRlcm5pb24ucHJvdG90eXBlLkludmVyc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG91dHB1dCA9IG5ldyBRdWF0ZXJuaW9uKCk7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMF0gPSAtdGhpcy5kYXRhWzBdO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzFdID0gLXRoaXMuZGF0YVsxXTtcclxuICAgICAgICBvdXRwdXQuZGF0YVsyXSA9IC10aGlzLmRhdGFbMl07XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbM10gPSB0aGlzLmRhdGFbM107XHJcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcclxuICAgIH07XHJcbiAgICBRdWF0ZXJuaW9uLnByb3RvdHlwZS5JbnZlcnNlX2IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhWzBdID0gLXRoaXMuZGF0YVswXTtcclxuICAgICAgICB0aGlzLmRhdGFbMV0gPSAtdGhpcy5kYXRhWzFdO1xyXG4gICAgICAgIHRoaXMuZGF0YVsyXSA9IC10aGlzLmRhdGFbMl07XHJcbiAgICAgICAgdGhpcy5kYXRhWzNdID0gdGhpcy5kYXRhWzNdO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIFF1YXRlcm5pb24ucHJvdG90eXBlLk5vcm1hbGl6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgb3V0cHV0ID0gbmV3IFF1YXRlcm5pb24oKTtcclxuICAgICAgICBvdXRwdXQuZGF0YVswXSA9IHRoaXMuZGF0YVswXTtcclxuICAgICAgICBvdXRwdXQuZGF0YVsxXSA9IHRoaXMuZGF0YVsxXTtcclxuICAgICAgICBvdXRwdXQuZGF0YVsyXSA9IHRoaXMuZGF0YVsyXTtcclxuICAgICAgICBvdXRwdXQuZGF0YVszXSA9IHRoaXMuZGF0YVszXTtcclxuICAgICAgICB2YXIgeCA9IG91dHB1dC5kYXRhWzBdLCB5ID0gb3V0cHV0LmRhdGFbMV0sIHogPSBvdXRwdXQuZGF0YVsyXSwgdyA9IG91dHB1dC5kYXRhWzNdO1xyXG4gICAgICAgIHZhciBsID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkgKyB6ICogeiArIHcgKiB3KTtcclxuICAgICAgICBpZiAobCA9PT0gMCkge1xyXG4gICAgICAgICAgICBvdXRwdXQuZGF0YVswXSA9IDA7XHJcbiAgICAgICAgICAgIG91dHB1dC5kYXRhWzFdID0gMDtcclxuICAgICAgICAgICAgb3V0cHV0LmRhdGFbMl0gPSAwO1xyXG4gICAgICAgICAgICBvdXRwdXQuZGF0YVszXSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBsID0gMSAvIGw7XHJcbiAgICAgICAgICAgIG91dHB1dC5kYXRhWzBdID0geCAqIGw7XHJcbiAgICAgICAgICAgIG91dHB1dC5kYXRhWzFdID0geSAqIGw7XHJcbiAgICAgICAgICAgIG91dHB1dC5kYXRhWzJdID0geiAqIGw7XHJcbiAgICAgICAgICAgIG91dHB1dC5kYXRhWzNdID0gdyAqIGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9O1xyXG4gICAgUXVhdGVybmlvbi5wcm90b3R5cGUuTm9ybWFsaXplX2IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGwgPSBNYXRoLnNxcnQodGhpcy5kYXRhWzBdICogdGhpcy5kYXRhWzBdICsgdGhpcy5kYXRhWzFdICogdGhpcy5kYXRhWzFdICsgdGhpcy5kYXRhWzJdICogdGhpcy5kYXRhWzJdICsgdGhpcy5kYXRhWzNdICogdGhpcy5kYXRhWzNdKTtcclxuICAgICAgICBpZiAobCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFbMF0gPSAwO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFbMV0gPSAwO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFbMl0gPSAwO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFbM10gPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbCA9IDEgLyBsO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFbMF0gPSB0aGlzLmRhdGFbMF0gKiBsO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFbMV0gPSB0aGlzLmRhdGFbMV0gKiBsO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFbMl0gPSB0aGlzLmRhdGFbMl0gKiBsO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFbM10gPSB0aGlzLmRhdGFbM10gKiBsO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBRdWF0ZXJuaW9uLnByb3RvdHlwZS5NdWx0aXBseSA9IGZ1bmN0aW9uIChhcmdfcXVhdCkge1xyXG4gICAgICAgIHZhciBvdXRwdXQgPSBuZXcgUXVhdGVybmlvbigpO1xyXG4gICAgICAgIHZhciBheCA9IHRoaXMuZGF0YVswXSwgYXkgPSB0aGlzLmRhdGFbMV0sIGF6ID0gdGhpcy5kYXRhWzJdLCBhdyA9IHRoaXMuZGF0YVszXTtcclxuICAgICAgICB2YXIgYnggPSBhcmdfcXVhdC5kYXRhWzBdLCBieSA9IGFyZ19xdWF0LmRhdGFbMV0sIGJ6ID0gYXJnX3F1YXQuZGF0YVsyXSwgYncgPSBhcmdfcXVhdC5kYXRhWzNdO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzBdID0gYXggKiBidyArIGF3ICogYnggKyBheSAqIGJ6IC0gYXogKiBieTtcclxuICAgICAgICBvdXRwdXQuZGF0YVsxXSA9IGF5ICogYncgKyBhdyAqIGJ5ICsgYXogKiBieCAtIGF4ICogYno7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMl0gPSBheiAqIGJ3ICsgYXcgKiBieiArIGF4ICogYnkgLSBheSAqIGJ4O1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzNdID0gYXcgKiBidyAtIGF4ICogYnggLSBheSAqIGJ5IC0gYXogKiBiejtcclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfTtcclxuICAgIFF1YXRlcm5pb24ucHJvdG90eXBlLk11bHRpcGx5X2IgPSBmdW5jdGlvbiAoYXJnX3F1YXQpIHtcclxuICAgICAgICB2YXIgYXggPSB0aGlzLmRhdGFbMF0sIGF5ID0gdGhpcy5kYXRhWzFdLCBheiA9IHRoaXMuZGF0YVsyXSwgYXcgPSB0aGlzLmRhdGFbM107XHJcbiAgICAgICAgdmFyIGJ4ID0gYXJnX3F1YXQuZGF0YVswXSwgYnkgPSBhcmdfcXVhdC5kYXRhWzFdLCBieiA9IGFyZ19xdWF0LmRhdGFbMl0sIGJ3ID0gYXJnX3F1YXQuZGF0YVszXTtcclxuICAgICAgICB0aGlzLmRhdGFbMF0gPSBheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5O1xyXG4gICAgICAgIHRoaXMuZGF0YVsxXSA9IGF5ICogYncgKyBhdyAqIGJ5ICsgYXogKiBieCAtIGF4ICogYno7XHJcbiAgICAgICAgdGhpcy5kYXRhWzJdID0gYXogKiBidyArIGF3ICogYnogKyBheCAqIGJ5IC0gYXkgKiBieDtcclxuICAgICAgICB0aGlzLmRhdGFbM10gPSBhdyAqIGJ3IC0gYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6O1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIFF1YXRlcm5pb24ucHJvdG90eXBlLlJvdGF0ZSA9IGZ1bmN0aW9uIChhcmdfYW5nbGUsIGFyZ19heGlzKSB7XHJcbiAgICAgICAgdmFyIHNxID0gYXJnX2F4aXMuTGVuZ3RoKCk7XHJcbiAgICAgICAgaWYgKCFzcSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGEgPSBhcmdfYXhpcy54LCBiID0gYXJnX2F4aXMueSwgYyA9IGFyZ19heGlzLno7XHJcbiAgICAgICAgaWYgKHNxICE9IDEpIHtcclxuICAgICAgICAgICAgc3EgPSAxIC8gc3E7XHJcbiAgICAgICAgICAgIGEgKj0gc3E7XHJcbiAgICAgICAgICAgIGIgKj0gc3E7XHJcbiAgICAgICAgICAgIGMgKj0gc3E7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBzID0gTWF0aC5zaW4oYXJnX2FuZ2xlICogMC41KTtcclxuICAgICAgICB0aGlzLmRhdGFbMF0gPSBhICogcztcclxuICAgICAgICB0aGlzLmRhdGFbMV0gPSBiICogcztcclxuICAgICAgICB0aGlzLmRhdGFbMl0gPSBjICogcztcclxuICAgICAgICB0aGlzLmRhdGFbM10gPSBNYXRoLmNvcyhhcmdfYW5nbGUgKiAwLjUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIFF1YXRlcm5pb24ucHJvdG90eXBlLlRvVmVjdG9yMyA9IGZ1bmN0aW9uIChhcmdfdmVjKSB7XHJcbiAgICAgICAgdmFyIG91dHB1dCA9IG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLCAwKTtcclxuICAgICAgICB2YXIgcXAgPSBuZXcgUXVhdGVybmlvbigpO1xyXG4gICAgICAgIHZhciBxcSA9IG5ldyBRdWF0ZXJuaW9uKCk7XHJcbiAgICAgICAgdmFyIHFyID0gdGhpcy5JbnZlcnNlKCk7XHJcbiAgICAgICAgcXAuZGF0YVswXSA9IGFyZ192ZWMueDtcclxuICAgICAgICBxcC5kYXRhWzFdID0gYXJnX3ZlYy55O1xyXG4gICAgICAgIHFwLmRhdGFbMl0gPSBhcmdfdmVjLno7XHJcbiAgICAgICAgcXEgPSBxci5NdWx0aXBseShxcCk7XHJcbiAgICAgICAgcXIgPSBxcS5NdWx0aXBseSh0aGlzKTtcclxuICAgICAgICBvdXRwdXQuZGF0YVswXSA9IHFyLmRhdGFbMF07XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMV0gPSBxci5kYXRhWzFdO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzJdID0gcXIuZGF0YVsyXTtcclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfTtcclxuICAgIFF1YXRlcm5pb24ucHJvdG90eXBlLlRvTWF0cml4NHg0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBvdXRwdXQgPSBuZXcgTWF0cml4XzEuZGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciB4ID0gdGhpcy5kYXRhWzBdLCB5ID0gdGhpcy5kYXRhWzFdLCB6ID0gdGhpcy5kYXRhWzJdLCB3ID0gdGhpcy5kYXRhWzNdO1xyXG4gICAgICAgIHZhciB4MiA9IHggKyB4LCB5MiA9IHkgKyB5LCB6MiA9IHogKyB6O1xyXG4gICAgICAgIHZhciB4eCA9IHggKiB4MiwgeHkgPSB4ICogeTIsIHh6ID0geCAqIHoyO1xyXG4gICAgICAgIHZhciB5eSA9IHkgKiB5MiwgeXogPSB5ICogejIsIHp6ID0geiAqIHoyO1xyXG4gICAgICAgIHZhciB3eCA9IHcgKiB4Miwgd3kgPSB3ICogeTIsIHd6ID0gdyAqIHoyO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzBdID0gMSAtICh5eSArIHp6KTtcclxuICAgICAgICBvdXRwdXQuZGF0YVsxXSA9IHh5IC0gd3o7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMl0gPSB4eiArIHd5O1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzNdID0gMDtcclxuICAgICAgICBvdXRwdXQuZGF0YVs0XSA9IHh5ICsgd3o7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbNV0gPSAxIC0gKHh4ICsgenopO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzZdID0geXogLSB3eDtcclxuICAgICAgICBvdXRwdXQuZGF0YVs3XSA9IDA7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbOF0gPSB4eiAtIHd5O1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzldID0geXogKyB3eDtcclxuICAgICAgICBvdXRwdXQuZGF0YVsxMF0gPSAxIC0gKHh4ICsgeXkpO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzExXSA9IDA7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMTJdID0gMDtcclxuICAgICAgICBvdXRwdXQuZGF0YVsxM10gPSAwO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzE0XSA9IDA7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMTVdID0gMTtcclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfTtcclxuICAgIFF1YXRlcm5pb24ucHJvdG90eXBlLlNwaGVyZUxlcnAgPSBmdW5jdGlvbiAoYXJnX3F1YXQsIHRpbWUpIHtcclxuICAgICAgICB2YXIgb3V0cHV0ID0gbmV3IFF1YXRlcm5pb24oKTtcclxuICAgICAgICB2YXIgaHQgPSB0aGlzLmRhdGFbMF0gKiBhcmdfcXVhdC5kYXRhWzBdICsgdGhpcy5kYXRhWzFdICogYXJnX3F1YXQuZGF0YVsxXSArIHRoaXMuZGF0YVsyXSAqIGFyZ19xdWF0LmRhdGFbMl0gKyB0aGlzLmRhdGFbM10gKiBhcmdfcXVhdC5kYXRhWzNdO1xyXG4gICAgICAgIHZhciBocyA9IDEuMCAtIGh0ICogaHQ7XHJcbiAgICAgICAgaWYgKGhzIDw9IDAuMCkge1xyXG4gICAgICAgICAgICBvdXRwdXQuZGF0YVswXSA9IHRoaXMuZGF0YVswXTtcclxuICAgICAgICAgICAgb3V0cHV0LmRhdGFbMV0gPSB0aGlzLmRhdGFbMV07XHJcbiAgICAgICAgICAgIG91dHB1dC5kYXRhWzJdID0gdGhpcy5kYXRhWzJdO1xyXG4gICAgICAgICAgICBvdXRwdXQuZGF0YVszXSA9IHRoaXMuZGF0YVszXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGhzID0gTWF0aC5zcXJ0KGhzKTtcclxuICAgICAgICAgICAgaWYgKE1hdGguYWJzKGhzKSA8IDAuMDAwMSkge1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0LmRhdGFbMF0gPSAodGhpcy5kYXRhWzBdICogMC41ICsgYXJnX3F1YXQuZGF0YVswXSAqIDAuNSk7XHJcbiAgICAgICAgICAgICAgICBvdXRwdXQuZGF0YVsxXSA9ICh0aGlzLmRhdGFbMV0gKiAwLjUgKyBhcmdfcXVhdC5kYXRhWzFdICogMC41KTtcclxuICAgICAgICAgICAgICAgIG91dHB1dC5kYXRhWzJdID0gKHRoaXMuZGF0YVsyXSAqIDAuNSArIGFyZ19xdWF0LmRhdGFbMl0gKiAwLjUpO1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0LmRhdGFbM10gPSAodGhpcy5kYXRhWzNdICogMC41ICsgYXJnX3F1YXQuZGF0YVszXSAqIDAuNSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGggPSBNYXRoLmFjb3MoaHQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHB0ID0gcGggKiB0aW1lO1xyXG4gICAgICAgICAgICAgICAgdmFyIHQwID0gTWF0aC5zaW4ocGggLSBwdCkgLyBocztcclxuICAgICAgICAgICAgICAgIHZhciB0MSA9IE1hdGguc2luKHB0KSAvIGhzO1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0LmRhdGFbMF0gPSB0aGlzLmRhdGFbMF0gKiB0MCArIGFyZ19xdWF0LmRhdGFbMF0gKiB0MTtcclxuICAgICAgICAgICAgICAgIG91dHB1dC5kYXRhWzFdID0gdGhpcy5kYXRhWzFdICogdDAgKyBhcmdfcXVhdC5kYXRhWzFdICogdDE7XHJcbiAgICAgICAgICAgICAgICBvdXRwdXQuZGF0YVsyXSA9IHRoaXMuZGF0YVsyXSAqIHQwICsgYXJnX3F1YXQuZGF0YVsyXSAqIHQxO1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0LmRhdGFbM10gPSB0aGlzLmRhdGFbM10gKiB0MCArIGFyZ19xdWF0LmRhdGFbM10gKiB0MTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfTtcclxuICAgIFF1YXRlcm5pb24ucHJvdG90eXBlLlNwaGVyZUxlcnBfYiA9IGZ1bmN0aW9uIChhcmdfcXVhdCwgdGltZSkge1xyXG4gICAgICAgIHZhciBodCA9IHRoaXMuZGF0YVswXSAqIGFyZ19xdWF0LmRhdGFbMF0gKyB0aGlzLmRhdGFbMV0gKiBhcmdfcXVhdC5kYXRhWzFdICsgdGhpcy5kYXRhWzJdICogYXJnX3F1YXQuZGF0YVsyXSArIHRoaXMuZGF0YVszXSAqIGFyZ19xdWF0LmRhdGFbM107XHJcbiAgICAgICAgdmFyIGhzID0gMS4wIC0gaHQgKiBodDtcclxuICAgICAgICBpZiAoaHMgPD0gMC4wKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaHMgPSBNYXRoLnNxcnQoaHMpO1xyXG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMoaHMpIDwgMC4wMDAxKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbMF0gPSAodGhpcy5kYXRhWzBdICogMC41ICsgYXJnX3F1YXQuZGF0YVswXSAqIDAuNSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbMV0gPSAodGhpcy5kYXRhWzFdICogMC41ICsgYXJnX3F1YXQuZGF0YVsxXSAqIDAuNSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbMl0gPSAodGhpcy5kYXRhWzJdICogMC41ICsgYXJnX3F1YXQuZGF0YVsyXSAqIDAuNSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbM10gPSAodGhpcy5kYXRhWzNdICogMC41ICsgYXJnX3F1YXQuZGF0YVszXSAqIDAuNSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGggPSBNYXRoLmFjb3MoaHQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHB0ID0gcGggKiB0aW1lO1xyXG4gICAgICAgICAgICAgICAgdmFyIHQwID0gTWF0aC5zaW4ocGggLSBwdCkgLyBocztcclxuICAgICAgICAgICAgICAgIHZhciB0MSA9IE1hdGguc2luKHB0KSAvIGhzO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhWzBdID0gdGhpcy5kYXRhWzBdICogdDAgKyBhcmdfcXVhdC5kYXRhWzBdICogdDE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbMV0gPSB0aGlzLmRhdGFbMV0gKiB0MCArIGFyZ19xdWF0LmRhdGFbMV0gKiB0MTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVsyXSA9IHRoaXMuZGF0YVsyXSAqIHQwICsgYXJnX3F1YXQuZGF0YVsyXSAqIHQxO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhWzNdID0gdGhpcy5kYXRhWzNdICogdDAgKyBhcmdfcXVhdC5kYXRhWzNdICogdDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFF1YXRlcm5pb247XHJcbn0oKSk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IFF1YXRlcm5pb247XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBWZWN0b3IyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVmVjdG9yMih4LCB5KSB7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gbmV3IEZsb2F0MzJBcnJheSgyKTtcclxuICAgICAgICB0aGlzLmRhdGFbMF0gPSB4O1xyXG4gICAgICAgIHRoaXMuZGF0YVsxXSA9IHk7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVmVjdG9yMi5wcm90b3R5cGUsIFwieFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGFbMF07XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChhcmdfdikge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFbMF0gPSBhcmdfdjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVmVjdG9yMi5wcm90b3R5cGUsIFwieVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGFbMV07XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChhcmdfdikge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFbMV0gPSBhcmdfdjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVmVjdG9yMi5wcm90b3R5cGUsIFwieHlcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIFZlY3RvcjIucHJvdG90eXBlLkFkZCA9IGZ1bmN0aW9uIChhcmdfb3RoZXIpIHtcclxuICAgICAgICB2YXIgb3V0cHV0ID0gbmV3IFZlY3RvcjIoMCwgMCk7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMF0gPSB0aGlzLmRhdGFbMF0gKyBhcmdfb3RoZXIuZGF0YVswXTtcclxuICAgICAgICBvdXRwdXQuZGF0YVsxXSA9IHRoaXMuZGF0YVsxXSArIGFyZ19vdGhlci5kYXRhWzFdO1xyXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9O1xyXG4gICAgVmVjdG9yMi5wcm90b3R5cGUuQWRkX2IgPSBmdW5jdGlvbiAoYXJnX290aGVyKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhWzBdID0gdGhpcy5kYXRhWzBdICsgYXJnX290aGVyLmRhdGFbMF07XHJcbiAgICAgICAgdGhpcy5kYXRhWzFdID0gdGhpcy5kYXRhWzFdICsgYXJnX290aGVyLmRhdGFbMV07XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgVmVjdG9yMi5wcm90b3R5cGUuU3ViID0gZnVuY3Rpb24gKGFyZ19vdGhlcikge1xyXG4gICAgICAgIHZhciBvdXRwdXQgPSBuZXcgVmVjdG9yMigwLCAwKTtcclxuICAgICAgICBvdXRwdXQuZGF0YVswXSA9IHRoaXMuZGF0YVswXSAtIGFyZ19vdGhlci5kYXRhWzBdO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzFdID0gdGhpcy5kYXRhWzFdIC0gYXJnX290aGVyLmRhdGFbMV07XHJcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcclxuICAgIH07XHJcbiAgICBWZWN0b3IyLnByb3RvdHlwZS5TdWJfYiA9IGZ1bmN0aW9uIChhcmdfb3RoZXIpIHtcclxuICAgICAgICB0aGlzLmRhdGFbMF0gPSB0aGlzLmRhdGFbMF0gLSBhcmdfb3RoZXIuZGF0YVswXTtcclxuICAgICAgICB0aGlzLmRhdGFbMV0gPSB0aGlzLmRhdGFbMV0gLSBhcmdfb3RoZXIuZGF0YVsxXTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBWZWN0b3IyLnByb3RvdHlwZS5NdWx0aXBseSA9IGZ1bmN0aW9uIChhcmdfc2NhbGFyKSB7XHJcbiAgICAgICAgdmFyIG91dHB1dCA9IG5ldyBWZWN0b3IyKDAsIDApO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzBdID0gdGhpcy5kYXRhWzBdICogYXJnX3NjYWxhcjtcclxuICAgICAgICBvdXRwdXQuZGF0YVsxXSA9IHRoaXMuZGF0YVsxXSAqIGFyZ19zY2FsYXI7XHJcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcclxuICAgIH07XHJcbiAgICBWZWN0b3IyLnByb3RvdHlwZS5NdWx0aXBseV9iID0gZnVuY3Rpb24gKGFyZ19zY2FsYXIpIHtcclxuICAgICAgICB0aGlzLmRhdGFbMF0gKj0gYXJnX3NjYWxhcjtcclxuICAgICAgICB0aGlzLmRhdGFbMV0gKj0gYXJnX3NjYWxhcjtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBWZWN0b3IyLnByb3RvdHlwZS5EaXYgPSBmdW5jdGlvbiAoYXJnX3NjYWxhcikge1xyXG4gICAgICAgIHZhciBvdXRwdXQgPSBuZXcgVmVjdG9yMigwLCAwKTtcclxuICAgICAgICBvdXRwdXQuZGF0YVswXSA9IHRoaXMuZGF0YVswXSAvIGFyZ19zY2FsYXI7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMV0gPSB0aGlzLmRhdGFbMV0gLyBhcmdfc2NhbGFyO1xyXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9O1xyXG4gICAgVmVjdG9yMi5wcm90b3R5cGUuRGl2X2IgPSBmdW5jdGlvbiAoYXJnX3NjYWxhcikge1xyXG4gICAgICAgIHRoaXMuZGF0YVswXSAvPSBhcmdfc2NhbGFyO1xyXG4gICAgICAgIHRoaXMuZGF0YVsxXSAvPSBhcmdfc2NhbGFyO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIFZlY3RvcjIucHJvdG90eXBlLkxlbmd0aCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KHRoaXMuZGF0YVswXSAqIHRoaXMuZGF0YVswXSArIHRoaXMuZGF0YVsxXSAqIHRoaXMuZGF0YVsxXSk7XHJcbiAgICB9O1xyXG4gICAgVmVjdG9yMi5wcm90b3R5cGUuTGVuZ3RoU3FyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFbMF0gKiB0aGlzLmRhdGFbMF0gKyB0aGlzLmRhdGFbMV0gKiB0aGlzLmRhdGFbMV07XHJcbiAgICB9O1xyXG4gICAgVmVjdG9yMi5wcm90b3R5cGUuRG90ID0gZnVuY3Rpb24gKGFyZ19vdGhlcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFbMF0gKiBhcmdfb3RoZXIuZGF0YVswXSArIHRoaXMuZGF0YVsxXSAqIGFyZ19vdGhlci5kYXRhWzFdO1xyXG4gICAgfTtcclxuICAgIFZlY3RvcjIucHJvdG90eXBlLkNyb3NzID0gZnVuY3Rpb24gKGFyZ19vdGhlcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnggKiBhcmdfb3RoZXIueSAtIHRoaXMueSAqIGFyZ19vdGhlci54O1xyXG4gICAgfTtcclxuICAgIFZlY3RvcjIucHJvdG90eXBlLk5vcm1hbGl6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgb3V0cHV0ID0gbmV3IFZlY3RvcjIodGhpcy5kYXRhWzBdLCB0aGlzLmRhdGFbMV0pO1xyXG4gICAgICAgIHZhciBsZW5ndGggPSB0aGlzLkxlbmd0aCgpO1xyXG4gICAgICAgIG91dHB1dC5EaXZfYihsZW5ndGgpO1xyXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9O1xyXG4gICAgVmVjdG9yMi5wcm90b3R5cGUuTm9ybWFsaXplX2IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGxlbmd0aCA9IHRoaXMuTGVuZ3RoKCk7XHJcbiAgICAgICAgdGhpcy5EaXZfYihsZW5ndGgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBWZWN0b3IyO1xyXG59KCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBWZWN0b3IyO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgVmVjdG9yMyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFZlY3RvcjMoeCwgeSwgeikge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoMyk7XHJcbiAgICAgICAgdGhpcy5kYXRhWzBdID0geDtcclxuICAgICAgICB0aGlzLmRhdGFbMV0gPSB5O1xyXG4gICAgICAgIHRoaXMuZGF0YVsyXSA9IHo7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVmVjdG9yMy5wcm90b3R5cGUsIFwieFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGFbMF07XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChhcmdfb3RoZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRhWzBdID0gYXJnX290aGVyO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWZWN0b3IzLnByb3RvdHlwZSwgXCJ5XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVsxXTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKGFyZ19vdGhlcikge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFbMV0gPSBhcmdfb3RoZXI7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlY3RvcjMucHJvdG90eXBlLCBcInpcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhWzJdO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoYXJnX290aGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVsyXSA9IGFyZ19vdGhlcjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVmVjdG9yMy5wcm90b3R5cGUsIFwieHl6XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBWZWN0b3IzLnByb3RvdHlwZS5BZGQgPSBmdW5jdGlvbiAoYXJnX290aGVyKSB7XHJcbiAgICAgICAgdmFyIG91dHB1dCA9IG5ldyBWZWN0b3IzKDAsIDAsIDApO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzBdID0gdGhpcy5kYXRhWzBdICsgYXJnX290aGVyLmRhdGFbMF07XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMV0gPSB0aGlzLmRhdGFbMV0gKyBhcmdfb3RoZXIuZGF0YVsxXTtcclxuICAgICAgICBvdXRwdXQuZGF0YVsyXSA9IHRoaXMuZGF0YVsyXSArIGFyZ19vdGhlci5kYXRhWzJdO1xyXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9O1xyXG4gICAgVmVjdG9yMy5wcm90b3R5cGUuQWRkX2IgPSBmdW5jdGlvbiAoYXJnX290aGVyKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhWzBdID0gdGhpcy5kYXRhWzBdICsgYXJnX290aGVyLmRhdGFbMF07XHJcbiAgICAgICAgdGhpcy5kYXRhWzFdID0gdGhpcy5kYXRhWzFdICsgYXJnX290aGVyLmRhdGFbMV07XHJcbiAgICAgICAgdGhpcy5kYXRhWzJdID0gdGhpcy5kYXRhWzJdICsgYXJnX290aGVyLmRhdGFbMl07XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgVmVjdG9yMy5wcm90b3R5cGUuQWRkWF9iID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhWzBdICs9IHZhbHVlO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIFZlY3RvcjMucHJvdG90eXBlLkFkZFkgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICB2YXIgb3V0cHV0ID0gdGhpcy5DbG9uZSgpO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzFdICs9IHZhbHVlO1xyXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9O1xyXG4gICAgVmVjdG9yMy5wcm90b3R5cGUuQWRkWV9iID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhWzFdICs9IHZhbHVlO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIFZlY3RvcjMucHJvdG90eXBlLkFkZFpfYiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuZGF0YVsyXSArPSB2YWx1ZTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBWZWN0b3IzLnByb3RvdHlwZS5TdWIgPSBmdW5jdGlvbiAoYXJnX290aGVyKSB7XHJcbiAgICAgICAgdmFyIG91dHB1dCA9IG5ldyBWZWN0b3IzKDAsIDAsIDApO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzBdID0gdGhpcy5kYXRhWzBdIC0gYXJnX290aGVyLmRhdGFbMF07XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMV0gPSB0aGlzLmRhdGFbMV0gLSBhcmdfb3RoZXIuZGF0YVsxXTtcclxuICAgICAgICBvdXRwdXQuZGF0YVsyXSA9IHRoaXMuZGF0YVsyXSAtIGFyZ19vdGhlci5kYXRhWzJdO1xyXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9O1xyXG4gICAgVmVjdG9yMy5wcm90b3R5cGUuU3ViX2IgPSBmdW5jdGlvbiAoYXJnX290aGVyKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhWzBdID0gdGhpcy5kYXRhWzBdIC0gYXJnX290aGVyLmRhdGFbMF07XHJcbiAgICAgICAgdGhpcy5kYXRhWzFdID0gdGhpcy5kYXRhWzFdIC0gYXJnX290aGVyLmRhdGFbMV07XHJcbiAgICAgICAgdGhpcy5kYXRhWzJdID0gdGhpcy5kYXRhWzJdIC0gYXJnX290aGVyLmRhdGFbMl07XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgVmVjdG9yMy5wcm90b3R5cGUuTXVsdGlwbHkgPSBmdW5jdGlvbiAoYXJnX3NjYWxhcikge1xyXG4gICAgICAgIHZhciBvdXRwdXQgPSBuZXcgVmVjdG9yMygwLCAwLCAwKTtcclxuICAgICAgICBvdXRwdXQuZGF0YVswXSA9IHRoaXMuZGF0YVswXSAqIGFyZ19zY2FsYXI7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMV0gPSB0aGlzLmRhdGFbMV0gKiBhcmdfc2NhbGFyO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzJdID0gdGhpcy5kYXRhWzJdICogYXJnX3NjYWxhcjtcclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfTtcclxuICAgIFZlY3RvcjMucHJvdG90eXBlLk11bHRpcGx5X1ZlYzMgPSBmdW5jdGlvbiAoYXJnX3ZlY3Rvcikge1xyXG4gICAgICAgIHZhciBvdXRwdXQgPSBuZXcgVmVjdG9yMygwLCAwLCAwKTtcclxuICAgICAgICBvdXRwdXQuZGF0YVswXSA9IHRoaXMuZGF0YVswXSAqIGFyZ192ZWN0b3IuZGF0YVswXTtcclxuICAgICAgICBvdXRwdXQuZGF0YVsxXSA9IHRoaXMuZGF0YVsxXSAqIGFyZ192ZWN0b3IuZGF0YVsxXTtcclxuICAgICAgICBvdXRwdXQuZGF0YVsyXSA9IHRoaXMuZGF0YVsyXSAqIGFyZ192ZWN0b3IuZGF0YVsyXTtcclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfTtcclxuICAgIFZlY3RvcjMucHJvdG90eXBlLk11bHRpcGx5X2IgPSBmdW5jdGlvbiAoYXJnX3NjYWxhcikge1xyXG4gICAgICAgIHRoaXMuZGF0YVswXSAqPSBhcmdfc2NhbGFyO1xyXG4gICAgICAgIHRoaXMuZGF0YVsxXSAqPSBhcmdfc2NhbGFyO1xyXG4gICAgICAgIHRoaXMuZGF0YVsyXSAqPSBhcmdfc2NhbGFyO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIFZlY3RvcjMucHJvdG90eXBlLk11bHRpcGx5X1ZlYzNfYiA9IGZ1bmN0aW9uIChhcmdfdmVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhWzBdID0gdGhpcy5kYXRhWzBdICogYXJnX3ZlY3Rvci5kYXRhWzBdO1xyXG4gICAgICAgIHRoaXMuZGF0YVsxXSA9IHRoaXMuZGF0YVsxXSAqIGFyZ192ZWN0b3IuZGF0YVsxXTtcclxuICAgICAgICB0aGlzLmRhdGFbMl0gPSB0aGlzLmRhdGFbMl0gKiBhcmdfdmVjdG9yLmRhdGFbMl07XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgVmVjdG9yMy5wcm90b3R5cGUuTXVsdGlwbHlfTWF0cml4ID0gZnVuY3Rpb24gKGFyZ19tYXRyaXgpIHtcclxuICAgICAgICB2YXIgb3V0cHV0ID0gbmV3IFZlY3RvcjMoMCwgMCwgMCk7XHJcbiAgICAgICAgLy8gb3V0cHV0LmRhdGFbMF09dGhpcy5kYXRhWzBdKmFyZ19tYXRyaXguZGF0YVswXSt0aGlzLmRhdGFbMF0qYXJnX21hdHJpeC5kYXRhWzRdK3RoaXMuZGF0YVswXSphcmdfbWF0cml4LmRhdGFbOF0rdGhpcy5kYXRhWzBdKmFyZ19tYXRyaXguZGF0YVsxMl07XHJcbiAgICAgICAgLy8gb3V0cHV0LmRhdGFbMV09dGhpcy5kYXRhWzFdKmFyZ19tYXRyaXguZGF0YVsxXSt0aGlzLmRhdGFbMV0qYXJnX21hdHJpeC5kYXRhWzVdK3RoaXMuZGF0YVsxXSphcmdfbWF0cml4LmRhdGFbOV0rdGhpcy5kYXRhWzFdKmFyZ19tYXRyaXguZGF0YVsxM107XHJcbiAgICAgICAgLy8gb3V0cHV0LmRhdGFbMl09dGhpcy5kYXRhWzJdKmFyZ19tYXRyaXguZGF0YVsyXSt0aGlzLmRhdGFbMl0qYXJnX21hdHJpeC5kYXRhWzZdK3RoaXMuZGF0YVsyXSphcmdfbWF0cml4LmRhdGFbMTBdK3RoaXMuZGF0YVsyXSphcmdfbWF0cml4LmRhdGFbMTRdO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzBdID0gdGhpcy5kYXRhWzBdICogYXJnX21hdHJpeC5kYXRhWzBdICsgdGhpcy5kYXRhWzFdICogYXJnX21hdHJpeC5kYXRhWzRdICsgdGhpcy5kYXRhWzJdICogYXJnX21hdHJpeC5kYXRhWzhdICsgYXJnX21hdHJpeC5kYXRhWzEyXTtcclxuICAgICAgICBvdXRwdXQuZGF0YVsxXSA9IHRoaXMuZGF0YVswXSAqIGFyZ19tYXRyaXguZGF0YVsxXSArIHRoaXMuZGF0YVsxXSAqIGFyZ19tYXRyaXguZGF0YVs1XSArIHRoaXMuZGF0YVsyXSAqIGFyZ19tYXRyaXguZGF0YVs5XSArIGFyZ19tYXRyaXguZGF0YVsxM107XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMl0gPSB0aGlzLmRhdGFbMF0gKiBhcmdfbWF0cml4LmRhdGFbMl0gKyB0aGlzLmRhdGFbMV0gKiBhcmdfbWF0cml4LmRhdGFbNl0gKyB0aGlzLmRhdGFbMl0gKiBhcmdfbWF0cml4LmRhdGFbMTBdICsgYXJnX21hdHJpeC5kYXRhWzE0XTtcclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfTtcclxuICAgIFZlY3RvcjMucHJvdG90eXBlLkRpdiA9IGZ1bmN0aW9uIChhcmdfc2NhbGFyKSB7XHJcbiAgICAgICAgdmFyIG91dHB1dCA9IG5ldyBWZWN0b3IzKDAsIDAsIDApO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzBdID0gdGhpcy5kYXRhWzBdIC8gYXJnX3NjYWxhcjtcclxuICAgICAgICBvdXRwdXQuZGF0YVsxXSA9IHRoaXMuZGF0YVsxXSAvIGFyZ19zY2FsYXI7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMl0gPSB0aGlzLmRhdGFbMl0gLyBhcmdfc2NhbGFyO1xyXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9O1xyXG4gICAgVmVjdG9yMy5wcm90b3R5cGUuRGl2X2IgPSBmdW5jdGlvbiAoYXJnX3NjYWxhcikge1xyXG4gICAgICAgIHRoaXMuZGF0YVswXSAvPSBhcmdfc2NhbGFyO1xyXG4gICAgICAgIHRoaXMuZGF0YVsxXSAvPSBhcmdfc2NhbGFyO1xyXG4gICAgICAgIHRoaXMuZGF0YVsyXSAvPSBhcmdfc2NhbGFyO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIFZlY3RvcjMucHJvdG90eXBlLkxlbmd0aCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KHRoaXMuZGF0YVswXSAqIHRoaXMuZGF0YVswXSArIHRoaXMuZGF0YVsxXSAqIHRoaXMuZGF0YVsxXSArIHRoaXMuZGF0YVsyXSAqIHRoaXMuZGF0YVsyXSk7XHJcbiAgICB9O1xyXG4gICAgVmVjdG9yMy5wcm90b3R5cGUuTGVuZ3RoU3FyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFbMF0gKiB0aGlzLmRhdGFbMF0gKyB0aGlzLmRhdGFbMV0gKiB0aGlzLmRhdGFbMV0gKyB0aGlzLmRhdGFbMl0gKiB0aGlzLmRhdGFbMl07XHJcbiAgICB9O1xyXG4gICAgVmVjdG9yMy5wcm90b3R5cGUuRG90ID0gZnVuY3Rpb24gKGFyZ19vdGhlcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFbMF0gKiBhcmdfb3RoZXIuZGF0YVswXSArIHRoaXMuZGF0YVsxXSAqIGFyZ19vdGhlci5kYXRhWzFdICsgdGhpcy5kYXRhWzJdICogYXJnX290aGVyLmRhdGFbMl07XHJcbiAgICB9O1xyXG4gICAgVmVjdG9yMy5wcm90b3R5cGUuQ3Jvc3MgPSBmdW5jdGlvbiAoYXJnX290aGVyKSB7XHJcbiAgICAgICAgdmFyIG91dHB1dCA9IG5ldyBWZWN0b3IzKDAsIDAsIDApO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzBdID0gdGhpcy5kYXRhWzFdICogYXJnX290aGVyLmRhdGFbMl0gLSB0aGlzLmRhdGFbMl0gKiBhcmdfb3RoZXIuZGF0YVsxXTtcclxuICAgICAgICBvdXRwdXQuZGF0YVsxXSA9IHRoaXMuZGF0YVsyXSAqIGFyZ19vdGhlci5kYXRhWzBdIC0gdGhpcy5kYXRhWzBdICogYXJnX290aGVyLmRhdGFbMl07XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMl0gPSB0aGlzLmRhdGFbMF0gKiBhcmdfb3RoZXIuZGF0YVsxXSAtIHRoaXMuZGF0YVsxXSAqIGFyZ19vdGhlci5kYXRhWzBdO1xyXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9O1xyXG4gICAgVmVjdG9yMy5wcm90b3R5cGUuTm9ybWFsaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBvdXRwdXQgPSBuZXcgVmVjdG9yMygwLCAwLCAwKTtcclxuICAgICAgICBvdXRwdXQuZGF0YVswXSA9IHRoaXMuZGF0YVswXTtcclxuICAgICAgICBvdXRwdXQuZGF0YVsxXSA9IHRoaXMuZGF0YVsxXTtcclxuICAgICAgICBvdXRwdXQuZGF0YVsyXSA9IHRoaXMuZGF0YVsyXTtcclxuICAgICAgICB2YXIgbGVuZ3RoID0gdGhpcy5MZW5ndGgoKTtcclxuICAgICAgICBvdXRwdXQuRGl2X2IobGVuZ3RoKTtcclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfTtcclxuICAgIFZlY3RvcjMucHJvdG90eXBlLk5vcm1hbGl6ZV9iID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBsZW5ndGggPSB0aGlzLkxlbmd0aCgpO1xyXG4gICAgICAgIHRoaXMuRGl2X2IobGVuZ3RoKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBWZWN0b3IzLnByb3RvdHlwZS5DbG9uZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjModGhpcy5kYXRhWzBdLCB0aGlzLmRhdGFbMV0sIHRoaXMuZGF0YVsyXSk7XHJcbiAgICB9O1xyXG4gICAgVmVjdG9yMy54QXhpcyA9IG5ldyBWZWN0b3IzKDEsIDAsIDApO1xyXG4gICAgVmVjdG9yMy55QXhpcyA9IG5ldyBWZWN0b3IzKDAsIDEsIDApO1xyXG4gICAgVmVjdG9yMy56QXhpcyA9IG5ldyBWZWN0b3IzKDAsIDAsIDEpO1xyXG4gICAgcmV0dXJuIFZlY3RvcjM7XHJcbn0oKSk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IFZlY3RvcjM7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBWZWN0b3I0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVmVjdG9yNCh4LCB5LCB6LCB3KSB7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gbmV3IEZsb2F0MzJBcnJheSg0KTtcclxuICAgICAgICB0aGlzLmRhdGFbMF0gPSB4O1xyXG4gICAgICAgIHRoaXMuZGF0YVsxXSA9IHk7XHJcbiAgICAgICAgdGhpcy5kYXRhWzJdID0gejtcclxuICAgICAgICB0aGlzLmRhdGFbM10gPSB3O1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlY3RvcjQucHJvdG90eXBlLCBcInhcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhWzBdO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWZWN0b3I0LnByb3RvdHlwZSwgXCJ5XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVsxXTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVmVjdG9yNC5wcm90b3R5cGUsIFwielwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGFbMl07XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlY3RvcjQucHJvdG90eXBlLCBcIndcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhWzNdO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWZWN0b3I0LnByb3RvdHlwZSwgXCJ4eXp3XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBWZWN0b3I0LnByb3RvdHlwZS5TZXQgPSBmdW5jdGlvbiAoeCwgeSwgeiwgdykge1xyXG4gICAgICAgIHRoaXMuZGF0YVswXSA9IHg7XHJcbiAgICAgICAgdGhpcy5kYXRhWzFdID0geTtcclxuICAgICAgICB0aGlzLmRhdGFbMl0gPSB6O1xyXG4gICAgICAgIHRoaXMuZGF0YVszXSA9IHc7XHJcbiAgICB9O1xyXG4gICAgVmVjdG9yNC5wcm90b3R5cGUuQWRkID0gZnVuY3Rpb24gKGFyZ19vdGhlcikge1xyXG4gICAgICAgIHZhciBvdXRwdXQgPSBuZXcgVmVjdG9yNCgwLCAwLCAwLCAwKTtcclxuICAgICAgICBvdXRwdXQuZGF0YVswXSA9IHRoaXMuZGF0YVswXSArIGFyZ19vdGhlci5kYXRhWzBdO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzFdID0gdGhpcy5kYXRhWzFdICsgYXJnX290aGVyLmRhdGFbMV07XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMl0gPSB0aGlzLmRhdGFbMl0gKyBhcmdfb3RoZXIuZGF0YVsyXTtcclxuICAgICAgICBvdXRwdXQuZGF0YVszXSA9IHRoaXMuZGF0YVszXSArIGFyZ19vdGhlci5kYXRhWzNdO1xyXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9O1xyXG4gICAgVmVjdG9yNC5wcm90b3R5cGUuQWRkX2IgPSBmdW5jdGlvbiAoYXJnX290aGVyKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhWzBdID0gdGhpcy5kYXRhWzBdICsgYXJnX290aGVyLmRhdGFbMF07XHJcbiAgICAgICAgdGhpcy5kYXRhWzFdID0gdGhpcy5kYXRhWzFdICsgYXJnX290aGVyLmRhdGFbMV07XHJcbiAgICAgICAgdGhpcy5kYXRhWzJdID0gdGhpcy5kYXRhWzJdICsgYXJnX290aGVyLmRhdGFbMl07XHJcbiAgICAgICAgdGhpcy5kYXRhWzNdID0gdGhpcy5kYXRhWzNdICsgYXJnX290aGVyLmRhdGFbM107XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgVmVjdG9yNC5wcm90b3R5cGUuU3ViID0gZnVuY3Rpb24gKGFyZ19vdGhlcikge1xyXG4gICAgICAgIHZhciBvdXRwdXQgPSBuZXcgVmVjdG9yNCgwLCAwLCAwLCAwKTtcclxuICAgICAgICBvdXRwdXQuZGF0YVswXSA9IHRoaXMuZGF0YVswXSAtIGFyZ19vdGhlci5kYXRhWzBdO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzFdID0gdGhpcy5kYXRhWzFdIC0gYXJnX290aGVyLmRhdGFbMV07XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMl0gPSB0aGlzLmRhdGFbMl0gLSBhcmdfb3RoZXIuZGF0YVsyXTtcclxuICAgICAgICBvdXRwdXQuZGF0YVszXSA9IHRoaXMuZGF0YVszXSAtIGFyZ19vdGhlci5kYXRhWzNdO1xyXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9O1xyXG4gICAgVmVjdG9yNC5wcm90b3R5cGUuU3ViX2IgPSBmdW5jdGlvbiAoYXJnX290aGVyKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhWzBdID0gdGhpcy5kYXRhWzBdIC0gYXJnX290aGVyLmRhdGFbMF07XHJcbiAgICAgICAgdGhpcy5kYXRhWzFdID0gdGhpcy5kYXRhWzFdIC0gYXJnX290aGVyLmRhdGFbMV07XHJcbiAgICAgICAgdGhpcy5kYXRhWzJdID0gdGhpcy5kYXRhWzJdIC0gYXJnX290aGVyLmRhdGFbMl07XHJcbiAgICAgICAgdGhpcy5kYXRhWzNdID0gdGhpcy5kYXRhWzNdIC0gYXJnX290aGVyLmRhdGFbM107XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgVmVjdG9yNC5wcm90b3R5cGUuTXVsdGlwbHkgPSBmdW5jdGlvbiAoYXJnX3NjYWxhcikge1xyXG4gICAgICAgIHZhciBvdXRwdXQgPSBuZXcgVmVjdG9yNCgwLCAwLCAwLCAwKTtcclxuICAgICAgICBvdXRwdXQuZGF0YVswXSA9IHRoaXMuZGF0YVswXSAqIGFyZ19zY2FsYXI7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMV0gPSB0aGlzLmRhdGFbMV0gKiBhcmdfc2NhbGFyO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzJdID0gdGhpcy5kYXRhWzJdICogYXJnX3NjYWxhcjtcclxuICAgICAgICBvdXRwdXQuZGF0YVszXSA9IHRoaXMuZGF0YVszXSAqIGFyZ19zY2FsYXI7XHJcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcclxuICAgIH07XHJcbiAgICBWZWN0b3I0LnByb3RvdHlwZS5NdWx0aXBseV9iID0gZnVuY3Rpb24gKGFyZ19zY2FsYXIpIHtcclxuICAgICAgICB0aGlzLmRhdGFbMF0gKj0gYXJnX3NjYWxhcjtcclxuICAgICAgICB0aGlzLmRhdGFbMV0gKj0gYXJnX3NjYWxhcjtcclxuICAgICAgICB0aGlzLmRhdGFbMl0gKj0gYXJnX3NjYWxhcjtcclxuICAgICAgICB0aGlzLmRhdGFbM10gKj0gYXJnX3NjYWxhcjtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBWZWN0b3I0LnByb3RvdHlwZS5EaXYgPSBmdW5jdGlvbiAoYXJnX3NjYWxhcikge1xyXG4gICAgICAgIHZhciBvdXRwdXQgPSBuZXcgVmVjdG9yNCgwLCAwLCAwLCAwKTtcclxuICAgICAgICBvdXRwdXQuZGF0YVswXSA9IHRoaXMuZGF0YVswXSAvIGFyZ19zY2FsYXI7XHJcbiAgICAgICAgb3V0cHV0LmRhdGFbMV0gPSB0aGlzLmRhdGFbMV0gLyBhcmdfc2NhbGFyO1xyXG4gICAgICAgIG91dHB1dC5kYXRhWzJdID0gdGhpcy5kYXRhWzJdIC8gYXJnX3NjYWxhcjtcclxuICAgICAgICBvdXRwdXQuZGF0YVszXSA9IHRoaXMuZGF0YVszXSAvIGFyZ19zY2FsYXI7XHJcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcclxuICAgIH07XHJcbiAgICBWZWN0b3I0LnByb3RvdHlwZS5EaXZfYiA9IGZ1bmN0aW9uIChhcmdfc2NhbGFyKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhWzBdIC89IGFyZ19zY2FsYXI7XHJcbiAgICAgICAgdGhpcy5kYXRhWzFdIC89IGFyZ19zY2FsYXI7XHJcbiAgICAgICAgdGhpcy5kYXRhWzJdIC89IGFyZ19zY2FsYXI7XHJcbiAgICAgICAgdGhpcy5kYXRhWzNdIC89IGFyZ19zY2FsYXI7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgVmVjdG9yNC5wcm90b3R5cGUuTGVuZ3RoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQodGhpcy5kYXRhWzBdICogdGhpcy5kYXRhWzBdICsgdGhpcy5kYXRhWzFdICogdGhpcy5kYXRhWzFdICsgdGhpcy5kYXRhWzJdICogdGhpcy5kYXRhWzJdICsgdGhpcy5kYXRhWzNdICogdGhpcy5kYXRhWzNdKTtcclxuICAgIH07XHJcbiAgICBWZWN0b3I0LnByb3RvdHlwZS5MZW5ndGhTcXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVswXSAqIHRoaXMuZGF0YVswXSArIHRoaXMuZGF0YVsxXSAqIHRoaXMuZGF0YVsxXSArIHRoaXMuZGF0YVsyXSAqIHRoaXMuZGF0YVsyXSArIHRoaXMuZGF0YVszXSAqIHRoaXMuZGF0YVszXTtcclxuICAgIH07XHJcbiAgICBWZWN0b3I0LnByb3RvdHlwZS5Eb3QgPSBmdW5jdGlvbiAoYXJnX290aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVswXSAqIGFyZ19vdGhlci5kYXRhWzBdICsgdGhpcy5kYXRhWzFdICogYXJnX290aGVyLmRhdGFbMV0gKyB0aGlzLmRhdGFbMl0gKiBhcmdfb3RoZXIuZGF0YVsyXSArIHRoaXMuZGF0YVszXSAqIGFyZ19vdGhlci5kYXRhWzNdO1xyXG4gICAgfTtcclxuICAgIFZlY3RvcjQucHJvdG90eXBlLk5vcm1hbGl6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgb3V0cHV0ID0gbmV3IFZlY3RvcjQodGhpcy5kYXRhWzBdLCB0aGlzLmRhdGFbMV0sIHRoaXMuZGF0YVsyXSwgdGhpcy5kYXRhWzNdKTtcclxuICAgICAgICB2YXIgbGVuZ3RoID0gdGhpcy5MZW5ndGgoKTtcclxuICAgICAgICBvdXRwdXQuRGl2X2IobGVuZ3RoKTtcclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfTtcclxuICAgIFZlY3RvcjQucHJvdG90eXBlLk5vcm1hbGl6ZV9iID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBsZW5ndGggPSB0aGlzLkxlbmd0aCgpO1xyXG4gICAgICAgIHRoaXMuRGl2X2IobGVuZ3RoKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICByZXR1cm4gVmVjdG9yNDtcclxufSgpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gVmVjdG9yNDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIFZlY3RvcjNfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vLi4vTWF0aC9WZWN0b3IzXCIpKTtcclxudmFyIE9jdHJlZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL09jdHJlZVwiKSk7XHJcbnZhciBMYXllciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIExheWVyKCkge1xyXG4gICAgICAgIHRoaXMubGlzdF9vYmpTdGFjayA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIHRoaXMudmVjX2NvbGxpc2lvbk9iamVjdHMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICB0aGlzLm9jdHJlZSA9IG5ldyBPY3RyZWVfMS5kZWZhdWx0KDYsIG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgtMjAsIC0yMCwgLTIwKSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDIwLCAyMCwgMjApKTtcclxuICAgIH1cclxuICAgIExheWVyLnByb3RvdHlwZS5SZWdpc3QgPSBmdW5jdGlvbiAoYXJnX3JlZ2lzdE9iaikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9jdHJlZS5SZWdpc3RDb2xsaXNpb25PYmooYXJnX3JlZ2lzdE9iaik7XHJcbiAgICB9O1xyXG4gICAgTGF5ZXIucHJvdG90eXBlLlVuUmVnaXN0ID0gZnVuY3Rpb24gKGFyZ19JRCkge1xyXG4gICAgICAgIHRoaXMub2N0cmVlLlVuUmVnaXN0Q29sbGlzaW9uT2JqKGFyZ19JRCk7XHJcbiAgICB9O1xyXG4gICAgTGF5ZXIucHJvdG90eXBlLkNoZWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMub2N0cmVlLlVwZGF0ZSgpO1xyXG4gICAgICAgIHRoaXMudmVjX2NvbGxpc2lvbk9iamVjdHMubGVuZ3RoID0gMDtcclxuICAgICAgICB0aGlzLmxpc3Rfb2JqU3RhY2subGVuZ3RoID0gMDtcclxuICAgICAgICB0aGlzLm9jdHJlZS5DcmVhdGVDb2xsaXNpb25PYmplY3RMaXN0KDAsIHRoaXMudmVjX2NvbGxpc2lvbk9iamVjdHMsIHRoaXMubGlzdF9vYmpTdGFjayk7XHJcbiAgICAgICAgdmFyIGxlbmd0aCA9IHRoaXMudmVjX2NvbGxpc2lvbk9iamVjdHMubGVuZ3RoO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDIpIHtcclxuICAgICAgICAgICAgdGhpcy52ZWNfY29sbGlzaW9uT2JqZWN0c1tpXS5IaXRDaGVjayh0aGlzLnZlY19jb2xsaXNpb25PYmplY3RzW2kgKyAxXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIExheWVyLnByb3RvdHlwZS5SZWxlYXNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMub2N0cmVlLlJlbGVhc2UoKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTGF5ZXI7XHJcbn0oKSk7XHJcbnZhciBDb2xsaXNpb25NYW5hZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQ29sbGlzaW9uTWFuYWdlcigpIHtcclxuICAgICAgICB0aGlzLmxheWVycyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIHRoaXMubGF5ZXJzLnB1c2gobmV3IExheWVyKCkpO1xyXG4gICAgfVxyXG4gICAgQ29sbGlzaW9uTWFuYWdlci5wcm90b3R5cGUuUmVnaXN0ID0gZnVuY3Rpb24gKGFyZ19yZWdpc3RPYmosIGxheWVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubGF5ZXJzLmxlbmd0aCA8PSBsYXllcikge1xyXG4gICAgICAgICAgICBsYXllciA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmxheWVyc1tsYXllcl0uUmVnaXN0KGFyZ19yZWdpc3RPYmopO1xyXG4gICAgfTtcclxuICAgIENvbGxpc2lvbk1hbmFnZXIucHJvdG90eXBlLlVuUmVnaXN0ID0gZnVuY3Rpb24gKGFyZ19JRCwgbGF5ZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5sYXllcnMubGVuZ3RoIDw9IGxheWVyKSB7XHJcbiAgICAgICAgICAgIGxheWVyID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5sYXllcnNbbGF5ZXJdLlVuUmVnaXN0KGFyZ19JRCk7XHJcbiAgICB9O1xyXG4gICAgQ29sbGlzaW9uTWFuYWdlci5wcm90b3R5cGUuQWRkTGF5ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5sYXllcnMucHVzaChuZXcgTGF5ZXIoKSk7XHJcbiAgICB9O1xyXG4gICAgQ29sbGlzaW9uTWFuYWdlci5wcm90b3R5cGUuQ2hlY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5sYXllcnMuZm9yRWFjaChmdW5jdGlvbiAobGF5ZXIpIHsgcmV0dXJuIGxheWVyLkNoZWNrKCk7IH0pO1xyXG4gICAgfTtcclxuICAgIENvbGxpc2lvbk1hbmFnZXIucHJvdG90eXBlLlJlbGVhc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5sYXllcnMuZm9yRWFjaChmdW5jdGlvbiAobGF5ZXIpIHsgcmV0dXJuIGxheWVyLlJlbGVhc2UoKTsgfSk7XHJcbiAgICAgICAgdGhpcy5sYXllcnMubGVuZ3RoID0gMDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQ29sbGlzaW9uTWFuYWdlcjtcclxufSgpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gQ29sbGlzaW9uTWFuYWdlcjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIENvbGxpc2lvbk9iamVjdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIENvbGxpc2lvbk9iamVjdChhcmdfb2JqLCBhcmdfcHJpbSkge1xyXG4gICAgICAgIHRoaXMucF9jZWxsID0gbnVsbDtcclxuICAgICAgICB0aGlzLm9iamVjdCA9IGFyZ19vYmo7XHJcbiAgICAgICAgdGhpcy5jb2xsaXNpb25QcmltaXRpdmUgPSBhcmdfcHJpbTtcclxuICAgIH1cclxuICAgIENvbGxpc2lvbk9iamVjdC5wcm90b3R5cGUuUmVtb3ZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnBfY2VsbCA9PSBudWxsKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuc2hwX25leHQpIHtcclxuICAgICAgICAgICAgdGhpcy5zaHBfbmV4dC5zaHBfYmVmID0gdGhpcy5zaHBfYmVmO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5zaHBfYmVmKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hwX2JlZi5zaHBfbmV4dCA9IHRoaXMuc2hwX25leHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucF9jZWxsLk9uUmVtb3ZlKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuc2hwX25leHQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc2hwX2JlZiA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5wX2NlbGwgPSBudWxsO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfTtcclxuICAgIENvbGxpc2lvbk9iamVjdC5wcm90b3R5cGUuUmVnaXN0Q2VsbCA9IGZ1bmN0aW9uIChhcmdfcENlbGwpIHtcclxuICAgICAgICB0aGlzLnBfY2VsbCA9IGFyZ19wQ2VsbDtcclxuICAgIH07XHJcbiAgICBDb2xsaXNpb25PYmplY3QucHJvdG90eXBlLkdldEJlZk9iaiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zaHBfYmVmO1xyXG4gICAgfTtcclxuICAgIENvbGxpc2lvbk9iamVjdC5wcm90b3R5cGUuR2V0TmV4dE9iaiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zaHBfbmV4dDtcclxuICAgIH07XHJcbiAgICBDb2xsaXNpb25PYmplY3QucHJvdG90eXBlLlVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmNvbGxpc2lvblByaW1pdGl2ZS5VcGRhdGUoKTtcclxuICAgIH07XHJcbiAgICBDb2xsaXNpb25PYmplY3QucHJvdG90eXBlLkhpdENoZWNrID0gZnVuY3Rpb24gKGFyZ19jb2xsaXNpb25PYmplY3QpIHtcclxuICAgICAgICBpZiAoYXJnX2NvbGxpc2lvbk9iamVjdC5jb2xsaXNpb25QcmltaXRpdmUuSXNIaXQodGhpcy5jb2xsaXNpb25QcmltaXRpdmUpKSB7XHJcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LkhpdChhcmdfY29sbGlzaW9uT2JqZWN0Lm9iamVjdCk7XHJcbiAgICAgICAgICAgIGFyZ19jb2xsaXNpb25PYmplY3Qub2JqZWN0LkhpdCh0aGlzLm9iamVjdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBDb2xsaXNpb25PYmplY3Q7XHJcbn0oKSk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IENvbGxpc2lvbk9iamVjdDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIE9jdENlbGwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBPY3RDZWxsKCkge1xyXG4gICAgfVxyXG4gICAgT2N0Q2VsbC5wcm90b3R5cGUuUmVsZWFzZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB3aGlsZSAodGhpcy5zaHBfaGVhZCAhPSBudWxsICYmIHRoaXMuc2hwX2hlYWQuc2hwX25leHQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLnNocF9oZWFkID0gdGhpcy5zaHBfaGVhZC5zaHBfbmV4dDtcclxuICAgICAgICAgICAgdGhpcy5zaHBfaGVhZC5zaHBfYmVmID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zaHBfaGVhZCA9IG51bGw7XHJcbiAgICB9O1xyXG4gICAgT2N0Q2VsbC5wcm90b3R5cGUuUmVnaXN0T2JqZWN0ID0gZnVuY3Rpb24gKGFyZ19vYmopIHtcclxuICAgICAgICBpZiAoYXJnX29iai5wX2NlbGwgPT0gdGhpcyB8fCAoYXJnX29iaiA9PSBudWxsKSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGFyZ19vYmouUmVtb3ZlKCk7XHJcbiAgICAgICAgYXJnX29iai5wX2NlbGwgPSB0aGlzO1xyXG4gICAgICAgIGlmICh0aGlzLnNocF9oZWFkKSB7XHJcbiAgICAgICAgICAgIGFyZ19vYmouc2hwX25leHQgPSB0aGlzLnNocF9oZWFkO1xyXG4gICAgICAgICAgICB0aGlzLnNocF9oZWFkLnNocF9iZWYgPSBhcmdfb2JqO1xyXG4gICAgICAgICAgICB0aGlzLnNocF9oZWFkID0gYXJnX29iajtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zaHBfaGVhZCA9IGFyZ19vYmo7XHJcbiAgICB9O1xyXG4gICAgT2N0Q2VsbC5wcm90b3R5cGUuT25SZW1vdmUgPSBmdW5jdGlvbiAoYXJnX3JlbW92ZSkge1xyXG4gICAgICAgIGlmICgodGhpcy5zaHBfaGVhZCA9PSBhcmdfcmVtb3ZlKSAmJiBhcmdfcmVtb3ZlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hwX2hlYWQgPSB0aGlzLnNocF9oZWFkLnNocF9uZXh0O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBPY3RDZWxsLnByb3RvdHlwZS5HZXRIZWFkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNocF9oZWFkO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBPY3RDZWxsO1xyXG59KCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBPY3RDZWxsO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgVmVjdG9yM18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi8uLi9NYXRoL1ZlY3RvcjNcIikpO1xyXG52YXIgSURfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vSURcIikpO1xyXG52YXIgT2N0Q2VsbF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL09jdENlbGxcIikpO1xyXG52YXIgTWF4TGV2ZWwgPSA3O1xyXG52YXIgTEVWRUxfRkxBRyA9IFsoMTExIDw8IDApLCAoMTExIDw8IDMpLCAoMTExIDw8IDYpLCAoMTExIDw8IDkpLCAoMTExIDw8IDEyKSwgKDExMSA8PCAxNSksICgxMTEgPDwgMTgpLCAoMTExIDw8IDIxKSwgKDExMSA8PCAyNCksICgxMTEgPDwgMjcpLF07XHJcbnZhciBPY3RyZWVIZWxwZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBPY3RyZWVIZWxwZXIoKSB7XHJcbiAgICB9XHJcbiAgICBPY3RyZWVIZWxwZXIuQml0U2VwYXJhdGUgPSBmdW5jdGlvbiAobikge1xyXG4gICAgICAgIHZhciBzID0gbjtcclxuICAgICAgICBzID0gKHMgfCBzIDw8IDgpICYgMHgwMDAwZjAwZjtcclxuICAgICAgICBzID0gKHMgfCBzIDw8IDQpICYgMHgwMDBjMzBjMztcclxuICAgICAgICBzID0gKHMgfCBzIDw8IDIpICYgMHgwMDI0OTI0OTtcclxuICAgICAgICByZXR1cm4gcztcclxuICAgIH07XHJcbiAgICBPY3RyZWVIZWxwZXIuR2V0TGV2ZWwgPSBmdW5jdGlvbiAoYXJnX2ZsYWcsIGFyZ19sZXZlbCkge1xyXG4gICAgICAgIHZhciBvdXQgPSAxO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJnX2xldmVsOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIENoZWNrID0gKGFyZ19mbGFnID4+IChpICogMykpICYgMHg3O1xyXG4gICAgICAgICAgICBpZiAoQ2hlY2sgIT0gMClcclxuICAgICAgICAgICAgICAgIG91dCA9IGkgKyAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBPY3RyZWVIZWxwZXI7XHJcbn0oKSk7XHJcbjtcclxudmFyIG1pblBvaW50ID0gbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAsIDAsIDApLCBtYXhQb2ludCA9IG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLCAwKTtcclxudmFyIENvbGxpc2lvbkxheWVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQ29sbGlzaW9uTGF5ZXIoYXJnX2xldmVsLCBhcmdfbWluUG9zLCBhcmdfbWF4UG9zKSB7XHJcbiAgICAgICAgdGhpcy5PY3RQb3cgPSBBcnJheShNYXhMZXZlbCArIDEpO1xyXG4gICAgICAgIHRoaXMuT2N0UG93U2V2ZW5EZXZpZGVkID0gQXJyYXkoTWF4TGV2ZWwgKyAxKTtcclxuICAgICAgICBpZiAoYXJnX2xldmVsIDw9IE1heExldmVsKVxyXG4gICAgICAgICAgICB0aGlzLm1heExldmVsID0gYXJnX2xldmVsO1xyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm1heExldmVsID0gTWF4TGV2ZWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmFuZ2VNYXggPSBhcmdfbWF4UG9zO1xyXG4gICAgICAgIHRoaXMucmFuZ2VNaW4gPSBhcmdfbWluUG9zO1xyXG4gICAgICAgIHRoaXMud2lkdGggPSB0aGlzLnJhbmdlTWF4LlN1Yih0aGlzLnJhbmdlTWluKTtcclxuICAgICAgICB0aGlzLk9jdFBvd1swXSA9IDE7XHJcbiAgICAgICAgdGhpcy5PY3RQb3dTZXZlbkRldmlkZWRbMF0gPSAwO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgTWF4TGV2ZWwgKyAxOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5PY3RQb3dbaV0gPSB0aGlzLk9jdFBvd1tpIC0gMV0gKiA4O1xyXG4gICAgICAgICAgICB0aGlzLk9jdFBvd1NldmVuRGV2aWRlZFtpXSA9ICh0aGlzLk9jdFBvd1tpXSAtIDEpIC8gNztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5tYXhDZWxsTnVtID0gdGhpcy5PY3RQb3dTZXZlbkRldmlkZWRbTWF4TGV2ZWwgLSAxXTtcclxuICAgICAgICB0aGlzLnVuaXQgPSB0aGlzLndpZHRoLkRpdigoMSA8PCB0aGlzLm1heExldmVsKSk7XHJcbiAgICAgICAgdGhpcy5hcnlfY2VsbHMgPSBuZXcgQXJyYXkodGhpcy5tYXhDZWxsTnVtKTtcclxuICAgICAgICB0aGlzLkNyZWF0ZUNlbGwoMCk7XHJcbiAgICAgICAgdGhpcy52ZWNfc2hwX2NvbGxpc2lvbk9ianMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICB0aGlzLnZlY19pbmRleCA9IG5ldyBBcnJheSgpO1xyXG4gICAgfVxyXG4gICAgQ29sbGlzaW9uTGF5ZXIucHJvdG90eXBlLlJlbGVhc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy52ZWNfc2hwX2NvbGxpc2lvbk9ianMubGVuZ3RoID0gMDtcclxuICAgICAgICB0aGlzLnZlY19pbmRleC5sZW5ndGggPSAwO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tYXhDZWxsTnVtOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYXJ5X2NlbGxzW2ldKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5hcnlfY2VsbHNbaV0uUmVsZWFzZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFyeV9jZWxscy5sZW5ndGggPSAwO1xyXG4gICAgfTtcclxuICAgIENvbGxpc2lvbkxheWVyLnByb3RvdHlwZS5SZWdpc3RDb2xsaXNpb25PYmogPSBmdW5jdGlvbiAoYXJnX2NvbGxpc2lvbk9iaikge1xyXG4gICAgICAgIHZhciBpZCA9IG5ldyBJRF8xLmRlZmF1bHQodGhpcy52ZWNfc2hwX2NvbGxpc2lvbk9ianMubGVuZ3RoKTtcclxuICAgICAgICB0aGlzLnZlY19zaHBfY29sbGlzaW9uT2Jqcy5wdXNoKGFyZ19jb2xsaXNpb25PYmopO1xyXG4gICAgICAgIHRoaXMudmVjX2luZGV4LnB1c2goaWQpO1xyXG4gICAgICAgIHJldHVybiBpZDtcclxuICAgIH07XHJcbiAgICBDb2xsaXNpb25MYXllci5wcm90b3R5cGUuVW5SZWdpc3RDb2xsaXNpb25PYmogPSBmdW5jdGlvbiAoYXJnX2luZGV4KSB7XHJcbiAgICAgICAgdmFyIGluZGV4ID0gYXJnX2luZGV4Lm51bTtcclxuICAgICAgICBpZiAoaW5kZXggPj0gdGhpcy52ZWNfc2hwX2NvbGxpc2lvbk9ianMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy52ZWNfc2hwX2NvbGxpc2lvbk9ianNbaW5kZXhdLlJlbW92ZSgpO1xyXG4gICAgICAgIHRoaXMudmVjX3NocF9jb2xsaXNpb25PYmpzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgdGhpcy52ZWNfaW5kZXguc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gaW5kZXg7IGkgPCB0aGlzLnZlY19pbmRleC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLnZlY19pbmRleFtpXS5udW0tLTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQ29sbGlzaW9uTGF5ZXIucHJvdG90eXBlLkluaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB9O1xyXG4gICAgQ29sbGlzaW9uTGF5ZXIucHJvdG90eXBlLlVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLlJlZ2lzdE9jdHJlZSgpO1xyXG4gICAgfTtcclxuICAgIENvbGxpc2lvbkxheWVyLnByb3RvdHlwZS5SZWdpc3RPY3RyZWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHNpemUgPSB0aGlzLnZlY19zaHBfY29sbGlzaW9uT2Jqcy5sZW5ndGg7XHJcbiAgICAgICAgZm9yICh2YXIgaXRyID0gMDsgaXRyIDwgc2l6ZTsgaXRyKyspIHtcclxuICAgICAgICAgICAgdGhpcy52ZWNfc2hwX2NvbGxpc2lvbk9ianNbaXRyXS5jb2xsaXNpb25QcmltaXRpdmUuR2V0TWF4UG9pbnRBbmRNaW5Qb2ludChtYXhQb2ludCwgbWluUG9pbnQpO1xyXG4gICAgICAgICAgICB2YXIgY2VsbE51bSA9IHRoaXMuR2V0TW9ydG9uU3BhY2UobWluUG9pbnQsIG1heFBvaW50KTtcclxuICAgICAgICAgICAgaWYgKGNlbGxOdW0gPiB0aGlzLm1heENlbGxOdW0pIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5hcnlfY2VsbHNbY2VsbE51bV0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuQ3JlYXRlQ2VsbChjZWxsTnVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmFyeV9jZWxsc1tjZWxsTnVtXS5SZWdpc3RPYmplY3QodGhpcy52ZWNfc2hwX2NvbGxpc2lvbk9ianNbaXRyXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIENvbGxpc2lvbkxheWVyLnByb3RvdHlwZS5HZXQzRE1vcnRvbk51bWJlciA9IGZ1bmN0aW9uICh4LCB5LCB6KSB7XHJcbiAgICAgICAgcmV0dXJuIE9jdHJlZUhlbHBlci5CaXRTZXBhcmF0ZSh4KSB8IE9jdHJlZUhlbHBlci5CaXRTZXBhcmF0ZSh5KSA8PCAxIHwgT2N0cmVlSGVscGVyLkJpdFNlcGFyYXRlKHopIDw8IDI7XHJcbiAgICB9O1xyXG4gICAgQ29sbGlzaW9uTGF5ZXIucHJvdG90eXBlLkdldDNETW9ydG9uTnVtYmVyX1ZlYzMgPSBmdW5jdGlvbiAoYXJnX3Bvc2l0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuR2V0M0RNb3J0b25OdW1iZXIoKChhcmdfcG9zaXRpb24ueCAtIHRoaXMucmFuZ2VNaW4ueCkgLyB0aGlzLnVuaXQueCksICgoYXJnX3Bvc2l0aW9uLnkgLSB0aGlzLnJhbmdlTWluLnkpIC8gdGhpcy51bml0LnkpLCAoKGFyZ19wb3NpdGlvbi56IC0gdGhpcy5yYW5nZU1pbi56KSAvIHRoaXMudW5pdC56KSk7XHJcbiAgICB9O1xyXG4gICAgQ29sbGlzaW9uTGF5ZXIucHJvdG90eXBlLkdldE1vcnRvblNwYWNlID0gZnVuY3Rpb24gKGFyZ19taW5Qb3MsIGFyZ19tYXhQb3MpIHtcclxuICAgICAgICB2YXIgbWF4U3BhY2UgPSB0aGlzLkdldDNETW9ydG9uTnVtYmVyX1ZlYzMoYXJnX21heFBvcyk7XHJcbiAgICAgICAgdmFyIGxldmVsQ2hlY2tGbGFnID0gdGhpcy5HZXQzRE1vcnRvbk51bWJlcl9WZWMzKGFyZ19taW5Qb3MpIF4gbWF4U3BhY2U7XHJcbiAgICAgICAgdmFyIGxldmVsID0gT2N0cmVlSGVscGVyLkdldExldmVsKGxldmVsQ2hlY2tGbGFnLCB0aGlzLm1heExldmVsKTtcclxuICAgICAgICB2YXIgbnVtID0gKG1heFNwYWNlID4+ICgobGV2ZWwpICogMykpO1xyXG4gICAgICAgIG51bSArPSB0aGlzLk9jdFBvd1NldmVuRGV2aWRlZFt0aGlzLm1heExldmVsIC0gbGV2ZWxdO1xyXG4gICAgICAgIHJldHVybiBudW07XHJcbiAgICB9O1xyXG4gICAgQ29sbGlzaW9uTGF5ZXIucHJvdG90eXBlLkNyZWF0ZUNvbGxpc2lvbk9iamVjdExpc3QgPSBmdW5jdGlvbiAoYXJnX2NlbGxOdW0sIGFyZ19vdXRwdXQsIGFyZ19zdGFjaykge1xyXG4gICAgICAgIHZhciBvYmpJdHIgPSB0aGlzLmFyeV9jZWxsc1thcmdfY2VsbE51bV0uR2V0SGVhZCgpO1xyXG4gICAgICAgIC8vdmFyIGk9MDtcclxuICAgICAgICB3aGlsZSAob2JqSXRyICE9IG51bGwpIHtcclxuICAgICAgICAgICAgdmFyIHJPYmpJdHIgPSBvYmpJdHIuc2hwX25leHQ7XHJcbiAgICAgICAgICAgIHdoaWxlIChyT2JqSXRyICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIC8vIOihneeqgeODquOCueODiOS9nOaIkFxyXG4gICAgICAgICAgICAgICAgYXJnX291dHB1dC5wdXNoKG9iakl0cik7XHJcbiAgICAgICAgICAgICAgICBhcmdfb3V0cHV0LnB1c2gock9iakl0cik7XHJcbiAgICAgICAgICAgICAgICByT2JqSXRyID0gck9iakl0ci5zaHBfbmV4dDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyDikaEg6KGd56qB44K544K/44OD44Kv44Go44Gu6KGd56qB44Oq44K544OI5L2c5oiQXHJcbiAgICAgICAgICAgIGZvciAodmFyIGl0ciA9IDA7IGl0ciA8IGFyZ19zdGFjay5sZW5ndGg7IGl0cisrKSB7XHJcbiAgICAgICAgICAgICAgICBhcmdfb3V0cHV0LnB1c2gob2JqSXRyKTtcclxuICAgICAgICAgICAgICAgIGFyZ19vdXRwdXQucHVzaChhcmdfc3RhY2tbaXRyXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb2JqSXRyID0gb2JqSXRyLnNocF9uZXh0O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL2NvbnNvbGUubG9nKGkpO1xyXG4gICAgICAgIHZhciBDaGlsZEZsYWcgPSBmYWxzZTtcclxuICAgICAgICAvLyDikaIg5a2Q56m66ZaTXHJcbiAgICAgICAgdmFyIE9iak51bSA9IDA7XHJcbiAgICAgICAgdmFyIGksIG5leHRDZWxsTnVtO1xyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCA4OyBpKyspIHtcclxuICAgICAgICAgICAgbmV4dENlbGxOdW0gPSBhcmdfY2VsbE51bSAqIDggKyAxICsgaTtcclxuICAgICAgICAgICAgaWYgKG5leHRDZWxsTnVtIDwgdGhpcy5tYXhDZWxsTnVtICYmIHRoaXMuYXJ5X2NlbGxzW2FyZ19jZWxsTnVtICogOCArIDEgKyBpXSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFDaGlsZEZsYWcpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmpJdHIgPSB0aGlzLmFyeV9jZWxsc1thcmdfY2VsbE51bV0uR2V0SGVhZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChvYmpJdHIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnX3N0YWNrLnB1c2gob2JqSXRyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgT2JqTnVtKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iakl0ciA9IG9iakl0ci5zaHBfbmV4dDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBDaGlsZEZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5DcmVhdGVDb2xsaXNpb25PYmplY3RMaXN0KGFyZ19jZWxsTnVtICogOCArIDEgKyBpLCBhcmdfb3V0cHV0LCBhcmdfc3RhY2spO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOKRpCDjgrnjgr/jg4Pjgq/jgYvjgonjgqrjg5bjgrjjgqfjgq/jg4jjgpLlpJbjgZlcclxuICAgICAgICBpZiAoQ2hpbGRGbGFnKSB7XHJcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBPYmpOdW07IGkrKylcclxuICAgICAgICAgICAgICAgIGFyZ19zdGFjay5wb3AoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQ29sbGlzaW9uTGF5ZXIucHJvdG90eXBlLkNyZWF0ZUNlbGwgPSBmdW5jdGlvbiAoYXJnX2NlbGxOdW0pIHtcclxuICAgICAgICB3aGlsZSAoIXRoaXMuYXJ5X2NlbGxzW2FyZ19jZWxsTnVtXSkge1xyXG4gICAgICAgICAgICAvLyDmjIflrprjga7opoHntKDnlarlj7fjgavnqbrplpPjgpLmlrDopo/kvZzmiJBcclxuICAgICAgICAgICAgdGhpcy5hcnlfY2VsbHNbYXJnX2NlbGxOdW1dID0gbmV3IE9jdENlbGxfMS5kZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIC8vIOimquepuumWk+OBq+OCuOODo+ODs+ODl1xyXG4gICAgICAgICAgICBhcmdfY2VsbE51bSA9IChhcmdfY2VsbE51bSAtIDEpID4+IDM7XHJcbiAgICAgICAgICAgIGlmIChhcmdfY2VsbE51bSA+PSB0aGlzLm1heENlbGxOdW0pXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENvbGxpc2lvbkxheWVyO1xyXG59KCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBDb2xsaXNpb25MYXllcjtcclxuO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLlByaW1pdGl2ZVR5cGUgPSB2b2lkIDA7XHJcbnZhciBQcmltaXRpdmVUeXBlO1xyXG4oZnVuY3Rpb24gKFByaW1pdGl2ZVR5cGUpIHtcclxuICAgIFByaW1pdGl2ZVR5cGVbUHJpbWl0aXZlVHlwZVtcInNwaGVyZVwiXSA9IDBdID0gXCJzcGhlcmVcIjtcclxuICAgIFByaW1pdGl2ZVR5cGVbUHJpbWl0aXZlVHlwZVtcImJveF9BQUJCXCJdID0gMV0gPSBcImJveF9BQUJCXCI7XHJcbiAgICBQcmltaXRpdmVUeXBlW1ByaW1pdGl2ZVR5cGVbXCJib3hfT0JCXCJdID0gMl0gPSBcImJveF9PQkJcIjtcclxuICAgIFByaW1pdGl2ZVR5cGVbUHJpbWl0aXZlVHlwZVtcInBvaW50XCJdID0gM10gPSBcInBvaW50XCI7XHJcbn0pKFByaW1pdGl2ZVR5cGUgPSBleHBvcnRzLlByaW1pdGl2ZVR5cGUgfHwgKGV4cG9ydHMuUHJpbWl0aXZlVHlwZSA9IHt9KSk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBJRF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL0lEXCIpKTtcclxudmFyIG1hcF9JRHMgPSBuZXcgTWFwKCk7XHJcbnZhciBHYW1lT2JqZWN0SURNYW5hZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gR2FtZU9iamVjdElETWFuYWdlcigpIHtcclxuICAgIH1cclxuICAgIEdhbWVPYmplY3RJRE1hbmFnZXIuR2V0SUQgPSBmdW5jdGlvbiAoYXJnX0lETmFtZSkge1xyXG4gICAgICAgIGlmICghbWFwX0lEcy5nZXQoYXJnX0lETmFtZSkpIHtcclxuICAgICAgICAgICAgbWFwX0lEcy5zZXQoYXJnX0lETmFtZSwgbmV3IElEXzEuZGVmYXVsdChtYXBfSURzLnNpemUpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1hcF9JRHMuZ2V0KGFyZ19JRE5hbWUpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBHYW1lT2JqZWN0SURNYW5hZ2VyO1xyXG59KCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBHYW1lT2JqZWN0SURNYW5hZ2VyO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgR2FtZVRpbWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBHYW1lVGltZSgpIHtcclxuICAgICAgICB0aGlzLnRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgICAgICB0aGlzLmFic0ZyYW1lID0gMDtcclxuICAgICAgICB0aGlzLnJlbEZyYW1lID0gMDtcclxuICAgICAgICB0aGlzLnRpbWVQYXNlID0gMS4wO1xyXG4gICAgfVxyXG4gICAgR2FtZVRpbWUucHJvdG90eXBlLkNvdW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuYWJzRnJhbWUrKztcclxuICAgICAgICB0aGlzLnJlbEZyYW1lICs9IHRoaXMudGltZVBhc2U7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEdhbWVUaW1lLnByb3RvdHlwZSwgXCJlbGFwc2VkVGltZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRpbWUgLSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoR2FtZVRpbWUucHJvdG90eXBlLCBcIkFic29sdXRlRnJhbWVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hYnNGcmFtZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoR2FtZVRpbWUucHJvdG90eXBlLCBcIlJlbGF0aXZlRnJhbWVcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZWxGcmFtZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoR2FtZVRpbWUucHJvdG90eXBlLCBcIlRpbWVQYXNlXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGltZVBhc2U7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChhcmdfdGltZVBhc2UpIHtcclxuICAgICAgICAgICAgdGhpcy50aW1lUGFzZSA9IGFyZ190aW1lUGFzZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gR2FtZVRpbWU7XHJcbn0oKSk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IEdhbWVUaW1lO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgSUQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBJRChhcmdfbnVtKSB7XHJcbiAgICAgICAgdGhpcy5udW0gPSBhcmdfbnVtO1xyXG4gICAgfVxyXG4gICAgSUQucHJvdG90eXBlLkVxdWFsID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubnVtID09IG90aGVyLm51bTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gSUQ7XHJcbn0oKSk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IElEO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgTW9kZWxfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vR3JhcGhpYy9Nb2RlbFwiKSk7XHJcbnZhciBSZXNvdXJjZUNyZWF0ZXJfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vVG9vbC9SZXNvdXJjZUNyZWF0ZXJcIikpO1xyXG52YXIgR2VvbWV0cnlHZW5lcmF0b3JfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vVG9vbC9HZW9tZXRyeUdlbmVyYXRvclwiKSk7XHJcbnZhciBUZXh0TW9kZWxfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vR3JhcGhpYy9UZXh0TW9kZWxcIikpO1xyXG52YXIgQ2hhck1hcCA9IG5ldyBNYXAoW1xyXG4gICAgW1wiIFwiLCAwXSwgW1wiIVwiLCAxXSwgWydcIicsIDJdLCBbXCIjXCIsIDNdLCBbXCIkXCIsIDRdLCBbXCIlXCIsIDVdLCBbXCImXCIsIDZdLCBbXCInXCIsIDddLCBbXCIoXCIsIDhdLCBbXCIpXCIsIDldLFxyXG4gICAgW1wiKlwiLCAxMF0sIFtcIitcIiwgMTFdLCBbJywnLCAxMl0sIFtcIi1cIiwgMTNdLCBbXCIuXCIsIDE0XSwgW1wiL1wiLCAxNV0sIFtcIjBcIiwgMTZdLCBbXCIxXCIsIDE3XSwgW1wiMlwiLCAxOF0sIFtcIjNcIiwgMTldLFxyXG4gICAgW1wiNFwiLCAyMF0sIFtcIjVcIiwgMjFdLCBbJzYnLCAyMl0sIFtcIjdcIiwgMjNdLCBbXCI4XCIsIDI0XSwgW1wiOVwiLCAyNV0sIFtcIjpcIiwgMjZdLCBbXCI7XCIsIDI3XSwgW1wiPFwiLCAyOF0sIFtcIj1cIiwgMjldLFxyXG4gICAgW1wiPlwiLCAzMF0sIFtcIj9cIiwgMzFdLCBbJ0AnLCAzMl0sIFtcIkFcIiwgMzNdLCBbXCJCXCIsIDM0XSwgW1wiQ1wiLCAzNV0sIFtcIkRcIiwgMzZdLCBbXCJFXCIsIDM3XSwgW1wiRlwiLCAzOF0sIFtcIkdcIiwgMzldLFxyXG4gICAgW1wiSFwiLCA0MF0sIFtcIklcIiwgNDFdLCBbJ0onLCA0Ml0sIFtcIktcIiwgNDNdLCBbXCJMXCIsIDQ0XSwgW1wiTVwiLCA0NV0sIFtcIk5cIiwgNDZdLCBbXCJPXCIsIDQ3XSwgW1wiUFwiLCA0OF0sIFtcIlFcIiwgNDldLFxyXG4gICAgW1wiUlwiLCA1MF0sIFtcIlNcIiwgNTFdLCBbJ1QnLCA1Ml0sIFtcIlVcIiwgNTNdLCBbXCJWXCIsIDU0XSwgW1wiV1wiLCA1NV0sIFtcIlhcIiwgNTZdLCBbXCJZXCIsIDU3XSwgW1wiWlwiLCA1OF0sIFtcIltcIiwgNTldLFxyXG4gICAgW1wiXFxcXFwiLCA2MF0sIFtcIl1cIiwgNjFdLCBbJ14nLCA2Ml0sIFtcIl9cIiwgNjNdLCBbXCJgXCIsIDY0XSwgW1wiYVwiLCA2NV0sIFtcImJcIiwgNjZdLCBbXCJjXCIsIDY3XSwgW1wiZFwiLCA2OF0sIFtcImVcIiwgNjldLFxyXG4gICAgW1wiZlwiLCA3MF0sIFtcImdcIiwgNzFdLCBbJ2gnLCA3Ml0sIFtcImlcIiwgNzNdLCBbXCJqXCIsIDc0XSwgW1wia1wiLCA3NV0sIFtcImxcIiwgNzZdLCBbXCJtXCIsIDc3XSwgW1wiblwiLCA3OF0sIFtcIm9cIiwgNzldLFxyXG4gICAgW1wicFwiLCA4MF0sIFtcInFcIiwgODFdLCBbJ3InLCA4Ml0sIFtcInNcIiwgODNdLCBbXCJ0XCIsIDg0XSwgW1widVwiLCA4NV0sIFtcInZcIiwgODZdLCBbXCJ3XCIsIDg3XSwgW1wieFwiLCA4OF0sIFtcInlcIiwgODldLFxyXG4gICAgW1wielwiLCA5MF0sIFtcIntcIiwgOTldLCBbJ3wnLCA5Ml0sIFtcIn1cIiwgOTNdLCBbXCJ+XCIsIDk0XSxcclxuXSk7XHJcbmZ1bmN0aW9uIENoYXJDaGFuZ2UoYXJnX25hbWUpIHtcclxuICAgIHJldHVybiBDaGFyTWFwLmdldChhcmdfbmFtZSk7XHJcbn1cclxudmFyIE1vZGVsQ3JlYXRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE1vZGVsQ3JlYXRlcihhcmdfZ2FyYXBoaWNEZXZpY2UsIGFyZ19yZXNvdXJjZUNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMucmVzb3VyY2VDb250YWluZXIgPSBhcmdfcmVzb3VyY2VDb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5ncmFwaGljRGV2aWNlID0gYXJnX2dhcmFwaGljRGV2aWNlO1xyXG4gICAgICAgIHRoaXMuZm9udFVWQ29udGFpbmVyID0gbmV3IE1hcCgpO1xyXG4gICAgfVxyXG4gICAgTW9kZWxDcmVhdGVyLnByb3RvdHlwZS5DcmVhdGVNb2RlbCA9IGZ1bmN0aW9uIChpc0xpZ2h0aW5nLCBpc0JpbGxCb2FyZCwgZ2VvbWV0cnlQYXRoLCBtYXRlcmlhbFBhdGgsIHNoYWRlclBhdGgsIGFyZ190cmFuc2Zvcm0pIHtcclxuICAgICAgICB2YXIgbW9kZWwgPSBuZXcgTW9kZWxfMS5kZWZhdWx0KGlzTGlnaHRpbmcsIGlzQmlsbEJvYXJkKTtcclxuICAgICAgICBtb2RlbC5Jbml0aWFsaXplX2dlb20odGhpcy5ncmFwaGljRGV2aWNlLCB0aGlzLnJlc291cmNlQ29udGFpbmVyLkdldEdlb21ldHJ5KGdlb21ldHJ5UGF0aCksIHRoaXMucmVzb3VyY2VDb250YWluZXIuR2V0TWF0ZXJpYWwobWF0ZXJpYWxQYXRoKSwgdGhpcy5yZXNvdXJjZUNvbnRhaW5lci5HZXRTaGFkZXIoc2hhZGVyUGF0aCksIGFyZ190cmFuc2Zvcm0pO1xyXG4gICAgICAgIHJldHVybiBtb2RlbDtcclxuICAgIH07XHJcbiAgICBNb2RlbENyZWF0ZXIucHJvdG90eXBlLkNyZWF0ZU1vZGVsRnJvbU1lc2ggPSBmdW5jdGlvbiAoaXNMaWdodGluZywgaXNCaWxsQm9hcmQsIG1lc2hQYXRoLCBzaGFkZXJQYXRoLCBhcmdfdHJhbnNmb3JtKSB7XHJcbiAgICAgICAgdmFyIG1vZGVsID0gbmV3IE1vZGVsXzEuZGVmYXVsdChpc0xpZ2h0aW5nLCBpc0JpbGxCb2FyZCk7XHJcbiAgICAgICAgbW9kZWwuSW5pdGlhbGl6ZV9tZXNoKHRoaXMuZ3JhcGhpY0RldmljZSwgdGhpcy5yZXNvdXJjZUNvbnRhaW5lci5HZXRNZXNoKG1lc2hQYXRoKSwgdGhpcy5yZXNvdXJjZUNvbnRhaW5lci5HZXRTaGFkZXIoc2hhZGVyUGF0aCksIGFyZ190cmFuc2Zvcm0pO1xyXG4gICAgICAgIHJldHVybiBtb2RlbDtcclxuICAgIH07XHJcbiAgICBNb2RlbENyZWF0ZXIucHJvdG90eXBlLkNyZWF0ZU1vZGVsRnJvbVRleHQgPSBmdW5jdGlvbiAoaXNCaWxsQm9hcmQsIGFyZ19jb2xvciwgdGV4dCwgZm9udFRleHR1cmVQYXRoLCBzaGFkZXJQYXRoLCBhcmdfdHJhbnNmb3JtKSB7XHJcbiAgICAgICAgdmFyIG1vZGVsID0gbmV3IFRleHRNb2RlbF8xLmRlZmF1bHQoaXNCaWxsQm9hcmQpO1xyXG4gICAgICAgIHZhciBtYXRlcmlhbE5hbWUgPSBhcmdfY29sb3IuZGF0YVswXSArIFwiXCIgKyBhcmdfY29sb3IuZGF0YVsxXSArIFwiXCIgKyBhcmdfY29sb3IuZGF0YVsyXSArIFwiXCIgKyBhcmdfY29sb3IuZGF0YVszXSArIFwiXCIgKyBmb250VGV4dHVyZVBhdGg7XHJcbiAgICAgICAgdmFyIG1hdGVyaWFsID0gdGhpcy5yZXNvdXJjZUNvbnRhaW5lci5HZXRNYXRlcmlhbChtYXRlcmlhbE5hbWUpO1xyXG4gICAgICAgIGlmIChtYXRlcmlhbCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIG1hdGVyaWFsID0gdGhpcy5yZXNvdXJjZUNvbnRhaW5lci5BZGRNYXRlcmlhbChSZXNvdXJjZUNyZWF0ZXJfMS5kZWZhdWx0LkNyZWF0ZU1hdGVyaWFsKGFyZ19jb2xvciwgdGhpcy5ncmFwaGljRGV2aWNlLCBbdGhpcy5yZXNvdXJjZUNvbnRhaW5lci5HZXRUZXh0dXJlKGZvbnRUZXh0dXJlUGF0aCldKSwgbWF0ZXJpYWxOYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGdlb21ldHJ5UGF0aCA9IFwiVGV4dDpcIiArIHRleHQubGVuZ3RoO1xyXG4gICAgICAgIHZhciBnZW9tZXRyeSA9IHRoaXMucmVzb3VyY2VDb250YWluZXIuR2V0R2VvbWV0cnkoZ2VvbWV0cnlQYXRoKTtcclxuICAgICAgICBpZiAoZ2VvbWV0cnkgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBnZW9tZXRyeSA9IHRoaXMucmVzb3VyY2VDb250YWluZXIuQWRkR2VvbWV0cnkoUmVzb3VyY2VDcmVhdGVyXzEuZGVmYXVsdC5DcmVhdGVHZW9tZXRyeShHZW9tZXRyeUdlbmVyYXRvcl8xLmRlZmF1bHQuQ3JlYXRlVGV4dEdlb21ldHJ5KHRleHQubGVuZ3RoKSwgdHJ1ZSwgZmFsc2UsIGZhbHNlLCB0aGlzLmdyYXBoaWNEZXZpY2UpLCBnZW9tZXRyeVBhdGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtb2RlbC5Jbml0aWFsaXplX2dlb20odGhpcy5ncmFwaGljRGV2aWNlLCBnZW9tZXRyeSwgbWF0ZXJpYWwsIHRoaXMucmVzb3VyY2VDb250YWluZXIuR2V0U2hhZGVyKHNoYWRlclBhdGgpLCBhcmdfdHJhbnNmb3JtKTtcclxuICAgICAgICB2YXIgdXYgPSB0aGlzLmZvbnRVVkNvbnRhaW5lclt0ZXh0XTtcclxuICAgICAgICBpZiAoIXV2KSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgICAgIHZhciB4VW5pdCA9ICgxLjAgLyAxMjguMCkgKiA3O1xyXG4gICAgICAgICAgICB2YXIgeVVuaXQgPSAxLjAgLyAxNC4wO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRleHQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBudW0gPSBDaGFyQ2hhbmdlKHRleHRbaV0pO1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSBudW0gJSAxODtcclxuICAgICAgICAgICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihudW0gLyAxOCk7XHJcbiAgICAgICAgICAgICAgICBkYXRhLnB1c2goeCAqIHhVbml0LCAoeSArIDEpICogeVVuaXQsICh4ICsgMSkgKiB4VW5pdCwgKHkgKyAxKSAqIHlVbml0LCB4ICogeFVuaXQsIHkgKiB5VW5pdCwgKHggKyAxKSAqIHhVbml0LCB5ICogeVVuaXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHV2ID0gdGhpcy5ncmFwaGljRGV2aWNlLkNyZWF0ZVZCTyhkYXRhKTtcclxuICAgICAgICAgICAgdGhpcy5mb250VVZDb250YWluZXJbdGV4dF0gPSB1djtcclxuICAgICAgICB9XHJcbiAgICAgICAgbW9kZWwuU2V0VVZEYXRhKHV2KTtcclxuICAgICAgICByZXR1cm4gbW9kZWw7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE1vZGVsQ3JlYXRlcjtcclxufSgpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gTW9kZWxDcmVhdGVyO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgSURfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9JRFwiKSk7XHJcbnZhciBMYXllciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIExheWVyKCkge1xyXG4gICAgICAgIHRoaXMuYXJ5X0lEcyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIHRoaXMuYXJ5X0lNb2RlbHMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICB0aGlzLmFyeV9saWdodHMgPSBuZXcgQXJyYXkoKTtcclxuICAgIH1cclxuICAgIExheWVyLnByb3RvdHlwZS5TZXRMaWdodCA9IGZ1bmN0aW9uIChhcmdfbGlnaHQpIHtcclxuICAgICAgICB0aGlzLmFyeV9saWdodHMucHVzaChhcmdfbGlnaHQpO1xyXG4gICAgICAgIHJldHVybiBhcmdfbGlnaHQ7XHJcbiAgICB9O1xyXG4gICAgTGF5ZXIucHJvdG90eXBlLlJlZ2lzdCA9IGZ1bmN0aW9uIChhcmdfcmVnaXN0T2JqKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYXJ5X2xpZ2h0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGFyZ19yZWdpc3RPYmouU2V0TGlnaHQodGhpcy5hcnlfbGlnaHRzWzBdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGlkID0gbmV3IElEXzEuZGVmYXVsdCh0aGlzLmFyeV9JTW9kZWxzLmxlbmd0aCk7XHJcbiAgICAgICAgdGhpcy5hcnlfSU1vZGVscy5wdXNoKGFyZ19yZWdpc3RPYmopO1xyXG4gICAgICAgIHRoaXMuYXJ5X0lEcy5wdXNoKGlkKTtcclxuICAgICAgICByZXR1cm4gaWQ7XHJcbiAgICB9O1xyXG4gICAgTGF5ZXIucHJvdG90eXBlLlVuUmVnaXN0ID0gZnVuY3Rpb24gKGFyZ19JRCkge1xyXG4gICAgICAgIHZhciBpbmRleCA9IGFyZ19JRC5udW07XHJcbiAgICAgICAgaWYgKGluZGV4ID4gdGhpcy5hcnlfSURzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYXJ5X0lNb2RlbHMuc3BsaWNlKGFyZ19JRC5udW0sIDEpO1xyXG4gICAgICAgIHRoaXMuYXJ5X0lEcy5zcGxpY2UoYXJnX0lELm51bSwgMSk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IGFyZ19JRC5udW07IGkgPCB0aGlzLmFyeV9JRHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5hcnlfSURzW2ldLm51bS0tO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBMYXllci5wcm90b3R5cGUuRHJhdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmFyeV9JTW9kZWxzLmZvckVhY2goZnVuY3Rpb24gKGltb2RlbCkgeyByZXR1cm4gaW1vZGVsLkRyYXcoKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgTGF5ZXIucHJvdG90eXBlLlJlbGVhc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5hcnlfSURzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgdGhpcy5hcnlfSU1vZGVscy5sZW5ndGggPSAwO1xyXG4gICAgICAgIHRoaXMuYXJ5X2xpZ2h0cy5sZW5ndGggPSAwO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBMYXllcjtcclxufSgpKTtcclxudmFyIFJlbmRlcmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUmVuZGVyZXIoKSB7XHJcbiAgICAgICAgdGhpcy5sYXllcnMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICB0aGlzLmxheWVycy5wdXNoKG5ldyBMYXllcigpKTtcclxuICAgIH1cclxuICAgIFJlbmRlcmVyLnByb3RvdHlwZS5SZWdpc3QgPSBmdW5jdGlvbiAoYXJnX3JlZ2lzdE9iaiwgbGF5ZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5sYXllcnMubGVuZ3RoIDw9IGxheWVyKSB7XHJcbiAgICAgICAgICAgIGxheWVyID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGF5ZXJzW2xheWVyXS5SZWdpc3QoYXJnX3JlZ2lzdE9iaik7XHJcbiAgICB9O1xyXG4gICAgUmVuZGVyZXIucHJvdG90eXBlLlVuUmVnaXN0ID0gZnVuY3Rpb24gKGFyZ19JRCwgbGF5ZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5sYXllcnMubGVuZ3RoIDw9IGxheWVyKSB7XHJcbiAgICAgICAgICAgIGxheWVyID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5sYXllcnNbbGF5ZXJdLlVuUmVnaXN0KGFyZ19JRCk7XHJcbiAgICB9O1xyXG4gICAgUmVuZGVyZXIucHJvdG90eXBlLlNldExpZ2h0ID0gZnVuY3Rpb24gKGFyZ19saWdodCwgbGF5ZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5sYXllcnMubGVuZ3RoIDw9IGxheWVyKSB7XHJcbiAgICAgICAgICAgIGxheWVyID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGF5ZXJzW2xheWVyXS5TZXRMaWdodChhcmdfbGlnaHQpO1xyXG4gICAgfTtcclxuICAgIFJlbmRlcmVyLnByb3RvdHlwZS5BZGRMYXllciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmxheWVycy5wdXNoKG5ldyBMYXllcigpKTtcclxuICAgIH07XHJcbiAgICBSZW5kZXJlci5wcm90b3R5cGUuRHJhdyA9IGZ1bmN0aW9uIChjYW1lcmEpIHtcclxuICAgICAgICBpZiAodGhpcy5sYXllcnMubGVuZ3RoIDw9IGNhbWVyYS5sYXllcikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhbWVyYS5BdHRhY2goKTtcclxuICAgICAgICB0aGlzLmxheWVyc1tjYW1lcmEubGF5ZXJdLkRyYXcoKTtcclxuICAgIH07XHJcbiAgICBSZW5kZXJlci5wcm90b3R5cGUuUmVsZWFzZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmxheWVycy5mb3JFYWNoKGZ1bmN0aW9uIChsYXllcikgeyByZXR1cm4gbGF5ZXIuUmVsZWFzZSgpOyB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUmVuZGVyZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IFJlbmRlcmVyO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgUmVzb3VyY2VDcmVhdGVyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL1Rvb2wvUmVzb3VyY2VDcmVhdGVyXCIpKTtcclxudmFyIFJlc291cmNlQ29udGFpbmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUmVzb3VyY2VDb250YWluZXIoKSB7XHJcbiAgICAgICAgdGhpcy5pR2VvbWV0cmllcyA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLmlNYXRlcmlhbHMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5pU2hhZGVycyA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLmlTb3VuZHMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5pVGV4dHVyZXMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5pTWVzaGVzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMubG9hZGluZ09iamVjdENvdW50ID0gMDtcclxuICAgIH1cclxuICAgIFJlc291cmNlQ29udGFpbmVyLnByb3RvdHlwZS5HZXRTaGFkZXIgPSBmdW5jdGlvbiAoYXJnX2tleSkge1xyXG4gICAgICAgIGlmICh0aGlzLmlTaGFkZXJzW2FyZ19rZXldKVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pU2hhZGVyc1thcmdfa2V5XTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwia2V5IGlzIG5vdCBmb25kLlwiKTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH07XHJcbiAgICBSZXNvdXJjZUNvbnRhaW5lci5wcm90b3R5cGUuQWRkU2hhZGVyID0gZnVuY3Rpb24gKGFyZ192YWx1ZSwgYXJnX2tleSkge1xyXG4gICAgICAgIHRoaXMuaVNoYWRlcnNbYXJnX2tleV0gPSBhcmdfdmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIGFyZ192YWx1ZTtcclxuICAgIH07XHJcbiAgICBSZXNvdXJjZUNvbnRhaW5lci5wcm90b3R5cGUuUmVtb3ZlU2hhZGVyID0gZnVuY3Rpb24gKGFyZ19rZXkpIHtcclxuICAgICAgICBkZWxldGUgdGhpcy5pU2hhZGVyc1thcmdfa2V5XTtcclxuICAgIH07XHJcbiAgICBSZXNvdXJjZUNvbnRhaW5lci5wcm90b3R5cGUuR2V0VGV4dHVyZSA9IGZ1bmN0aW9uIChhcmdfa2V5KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaVRleHR1cmVzW2FyZ19rZXldKVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pVGV4dHVyZXNbYXJnX2tleV07XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH07XHJcbiAgICBSZXNvdXJjZUNvbnRhaW5lci5wcm90b3R5cGUuQWRkVGV4dHVyZSA9IGZ1bmN0aW9uIChhcmdfdmFsdWUsIGFyZ19rZXkpIHtcclxuICAgICAgICB0aGlzLmlUZXh0dXJlc1thcmdfa2V5XSA9IGFyZ192YWx1ZTtcclxuICAgICAgICBhcmdfdmFsdWUuU2V0Q29udGFpbmVyKHRoaXMpO1xyXG4gICAgICAgIHJldHVybiBhcmdfdmFsdWU7XHJcbiAgICB9O1xyXG4gICAgUmVzb3VyY2VDb250YWluZXIucHJvdG90eXBlLkFkZFRleHR1cmVGcm9tRmlsZSA9IGZ1bmN0aW9uIChhcmdfdmFsdWUsIGFyZ19kZXZpY2UpIHtcclxuICAgICAgICBpZiAodGhpcy5pVGV4dHVyZXNbYXJnX3ZhbHVlXSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pVGV4dHVyZXNbYXJnX3ZhbHVlXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHRleCA9IFJlc291cmNlQ3JlYXRlcl8xLmRlZmF1bHQuQ3JlYXRlVGV4dHVyZShhcmdfdmFsdWUsIGFyZ19kZXZpY2UpO1xyXG4gICAgICAgIHRleC5TZXRDb250YWluZXIodGhpcyk7XHJcbiAgICAgICAgdGhpcy5pVGV4dHVyZXNbYXJnX3ZhbHVlXSA9IHRleDtcclxuICAgICAgICByZXR1cm4gdGhpcy5pVGV4dHVyZXNbYXJnX3ZhbHVlXTtcclxuICAgIH07XHJcbiAgICBSZXNvdXJjZUNvbnRhaW5lci5wcm90b3R5cGUuUmVtb3ZlVGV4dHVyZSA9IGZ1bmN0aW9uIChhcmdfa2V5KSB7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMuaVRleHR1cmVzW2FyZ19rZXldO1xyXG4gICAgfTtcclxuICAgIFJlc291cmNlQ29udGFpbmVyLnByb3RvdHlwZS5HZXRNYXRlcmlhbCA9IGZ1bmN0aW9uIChhcmdfa2V5KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaU1hdGVyaWFsc1thcmdfa2V5XSlcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaU1hdGVyaWFsc1thcmdfa2V5XTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfTtcclxuICAgIFJlc291cmNlQ29udGFpbmVyLnByb3RvdHlwZS5BZGRNYXRlcmlhbCA9IGZ1bmN0aW9uIChhcmdfdmFsdWUsIGFyZ19rZXkpIHtcclxuICAgICAgICB0aGlzLmlNYXRlcmlhbHNbYXJnX2tleV0gPSBhcmdfdmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIGFyZ192YWx1ZTtcclxuICAgIH07XHJcbiAgICBSZXNvdXJjZUNvbnRhaW5lci5wcm90b3R5cGUuQWRkTWF0ZXJpYWxGcm9tRmlsZSA9IGZ1bmN0aW9uIChhcmdfdmFsdWUsIGFyZ19kZXZpY2UpIHtcclxuICAgICAgICBpZiAodGhpcy5pTWF0ZXJpYWxzW2FyZ192YWx1ZV0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaU1hdGVyaWFsc1thcmdfdmFsdWVdO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmlNYXRlcmlhbHNbYXJnX3ZhbHVlXSA9IFJlc291cmNlQ3JlYXRlcl8xLmRlZmF1bHQuQ3JlYXRlTWF0ZXJpYWxGcm9tRmlsZShhcmdfdmFsdWUsIHRoaXMsIGFyZ19kZXZpY2UpO1xyXG4gICAgICAgIHRoaXMuTG9hZFN0YXJ0KCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaU1hdGVyaWFsc1thcmdfdmFsdWVdO1xyXG4gICAgfTtcclxuICAgIFJlc291cmNlQ29udGFpbmVyLnByb3RvdHlwZS5SZW1vdmVNYXRlcmlhbCA9IGZ1bmN0aW9uIChhcmdfa2V5KSB7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMuaU1hdGVyaWFsc1thcmdfa2V5XTtcclxuICAgIH07XHJcbiAgICBSZXNvdXJjZUNvbnRhaW5lci5wcm90b3R5cGUuR2V0R2VvbWV0cnkgPSBmdW5jdGlvbiAoYXJnX2tleSkge1xyXG4gICAgICAgIGlmICh0aGlzLmlHZW9tZXRyaWVzW2FyZ19rZXldKVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pR2VvbWV0cmllc1thcmdfa2V5XTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfTtcclxuICAgIFJlc291cmNlQ29udGFpbmVyLnByb3RvdHlwZS5BZGRHZW9tZXRyeSA9IGZ1bmN0aW9uIChhcmdfdmFsdWUsIGFyZ19rZXkpIHtcclxuICAgICAgICB0aGlzLmlHZW9tZXRyaWVzW2FyZ19rZXldID0gYXJnX3ZhbHVlO1xyXG4gICAgICAgIHJldHVybiBhcmdfdmFsdWU7XHJcbiAgICB9O1xyXG4gICAgUmVzb3VyY2VDb250YWluZXIucHJvdG90eXBlLlJlbW92ZUdlb21ldHJ5ID0gZnVuY3Rpb24gKGFyZ19rZXkpIHtcclxuICAgICAgICBkZWxldGUgdGhpcy5pR2VvbWV0cmllc1thcmdfa2V5XTtcclxuICAgIH07XHJcbiAgICBSZXNvdXJjZUNvbnRhaW5lci5wcm90b3R5cGUuR2V0TWVzaCA9IGZ1bmN0aW9uIChhcmdfa2V5KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaU1lc2hlc1thcmdfa2V5XSlcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaU1lc2hlc1thcmdfa2V5XTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfTtcclxuICAgIFJlc291cmNlQ29udGFpbmVyLnByb3RvdHlwZS5BZGRNZXNoID0gZnVuY3Rpb24gKGFyZ192YWx1ZSwgYXJnX2tleSkge1xyXG4gICAgICAgIHRoaXMuaU1lc2hlc1thcmdfa2V5XSA9IGFyZ192YWx1ZTtcclxuICAgICAgICByZXR1cm4gYXJnX3ZhbHVlO1xyXG4gICAgfTtcclxuICAgIFJlc291cmNlQ29udGFpbmVyLnByb3RvdHlwZS5SZW1vdmVNZXNoID0gZnVuY3Rpb24gKGFyZ19rZXkpIHtcclxuICAgICAgICBkZWxldGUgdGhpcy5pTWVzaGVzW2FyZ19rZXldO1xyXG4gICAgfTtcclxuICAgIFJlc291cmNlQ29udGFpbmVyLnByb3RvdHlwZS5HZXRTb3VuZCA9IGZ1bmN0aW9uIChhcmdfa2V5KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaVNvdW5kc1thcmdfa2V5XSlcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaVNvdW5kc1thcmdfa2V5XTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfTtcclxuICAgIFJlc291cmNlQ29udGFpbmVyLnByb3RvdHlwZS5BZGRTb3VuZCA9IGZ1bmN0aW9uIChhcmdfdmFsdWUsIGFyZ19rZXkpIHtcclxuICAgICAgICB0aGlzLmlTb3VuZHNbYXJnX2tleV0gPSBhcmdfdmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIGFyZ192YWx1ZTtcclxuICAgIH07XHJcbiAgICBSZXNvdXJjZUNvbnRhaW5lci5wcm90b3R5cGUuQWRkU291bmRGcm9tRmlsZSA9IGZ1bmN0aW9uIChhcmdfdmFsdWUsIGFyZ19rZXkpIHtcclxuICAgICAgICB0aGlzLmlTb3VuZHNbYXJnX2tleV0gPSBSZXNvdXJjZUNyZWF0ZXJfMS5kZWZhdWx0LkNyZWF0ZVNvdW5kKGFyZ192YWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaVNvdW5kc1thcmdfa2V5XTtcclxuICAgIH07XHJcbiAgICBSZXNvdXJjZUNvbnRhaW5lci5wcm90b3R5cGUuUmVtb3ZlU291bmQgPSBmdW5jdGlvbiAoYXJnX2tleSkge1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLmlTb3VuZHNbYXJnX2tleV07XHJcbiAgICB9O1xyXG4gICAgUmVzb3VyY2VDb250YWluZXIucHJvdG90eXBlLkxvYWRFbmQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5sb2FkaW5nT2JqZWN0Q291bnQtLTtcclxuICAgIH07XHJcbiAgICBSZXNvdXJjZUNvbnRhaW5lci5wcm90b3R5cGUuTG9hZFN0YXJ0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubG9hZGluZ09iamVjdENvdW50Kys7XHJcbiAgICB9O1xyXG4gICAgUmVzb3VyY2VDb250YWluZXIucHJvdG90eXBlLkdldExvYWRpbmdPYmpDb3VudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5sb2FkaW5nT2JqZWN0Q291bnQgPD0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9hZGluZ09iamVjdENvdW50O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBSZXNvdXJjZUNvbnRhaW5lcjtcclxufSgpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gUmVzb3VyY2VDb250YWluZXI7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBGcmFtZUJ1ZmZlclRleHR1cmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGcmFtZUJ1ZmZlclRleHR1cmUoYXJnX2dyYXBoaWNEZXZpY2UsIHdpZHRoLCBoZWlnaHQpIHtcclxuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5ncmFwaGljRGV2aWNlID0gYXJnX2dyYXBoaWNEZXZpY2U7XHJcbiAgICAgICAgLy8g44OV44Os44O844Og44OQ44OD44OV44Kh44Gu55Sf5oiQXHJcbiAgICAgICAgdGhpcy5mcmFtZUJ1ZmZlciA9IHRoaXMuZ3JhcGhpY0RldmljZS5jb250ZXh0LmNyZWF0ZUZyYW1lYnVmZmVyKCk7XHJcbiAgICAgICAgLy8g44OV44Os44O844Og44OQ44OD44OV44Kh44KSV2ViR0zjgavjg5DjgqTjg7Pjg4lcclxuICAgICAgICB0aGlzLmdyYXBoaWNEZXZpY2UuY29udGV4dC5iaW5kRnJhbWVidWZmZXIodGhpcy5ncmFwaGljRGV2aWNlLmNvbnRleHQuRlJBTUVCVUZGRVIsIHRoaXMuZnJhbWVCdWZmZXIpO1xyXG4gICAgICAgIC8vIOa3seW6puODkOODg+ODleOCoeeUqOODrOODs+ODgOODvOODkOODg+ODleOCoeOBrueUn+aIkOOBqOODkOOCpOODs+ODiVxyXG4gICAgICAgIHRoaXMuZGVwdGhCdWZmZXIgPSB0aGlzLmdyYXBoaWNEZXZpY2UuY29udGV4dC5jcmVhdGVSZW5kZXJidWZmZXIoKTtcclxuICAgICAgICB0aGlzLmdyYXBoaWNEZXZpY2UuY29udGV4dC5iaW5kUmVuZGVyYnVmZmVyKHRoaXMuZ3JhcGhpY0RldmljZS5jb250ZXh0LlJFTkRFUkJVRkZFUiwgdGhpcy5kZXB0aEJ1ZmZlcik7XHJcbiAgICAgICAgLy8g44Os44Oz44OA44O844OQ44OD44OV44Kh44KS5rex5bqm44OQ44OD44OV44Kh44Go44GX44Gm6Kit5a6aXHJcbiAgICAgICAgdGhpcy5ncmFwaGljRGV2aWNlLmNvbnRleHQucmVuZGVyYnVmZmVyU3RvcmFnZSh0aGlzLmdyYXBoaWNEZXZpY2UuY29udGV4dC5SRU5ERVJCVUZGRVIsIHRoaXMuZ3JhcGhpY0RldmljZS5jb250ZXh0LkRFUFRIX0NPTVBPTkVOVDE2LCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICAvLyDjg5Xjg6zjg7zjg6Djg5Djg4Pjg5XjgqHjgavjg6zjg7Pjg4Djg7zjg5Djg4Pjg5XjgqHjgpLplqLpgKPku5jjgZHjgotcclxuICAgICAgICB0aGlzLmdyYXBoaWNEZXZpY2UuY29udGV4dC5mcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlcih0aGlzLmdyYXBoaWNEZXZpY2UuY29udGV4dC5GUkFNRUJVRkZFUiwgdGhpcy5ncmFwaGljRGV2aWNlLmNvbnRleHQuREVQVEhfQVRUQUNITUVOVCwgdGhpcy5ncmFwaGljRGV2aWNlLmNvbnRleHQuUkVOREVSQlVGRkVSLCB0aGlzLmRlcHRoQnVmZmVyKTtcclxuICAgICAgICAvLyDjg5Xjg6zjg7zjg6Djg5Djg4Pjg5XjgqHnlKjjg4bjgq/jgrnjg4Hjg6Pjga7nlJ/miJBcclxuICAgICAgICB0aGlzLmRhdGEgPSB0aGlzLmdyYXBoaWNEZXZpY2UuY29udGV4dC5jcmVhdGVUZXh0dXJlKCk7XHJcbiAgICAgICAgLy8g44OV44Os44O844Og44OQ44OD44OV44Kh55So44Gu44OG44Kv44K544OB44Oj44KS44OQ44Kk44Oz44OJXHJcbiAgICAgICAgdGhpcy5ncmFwaGljRGV2aWNlLmNvbnRleHQuYmluZFRleHR1cmUodGhpcy5ncmFwaGljRGV2aWNlLmNvbnRleHQuVEVYVFVSRV8yRCwgdGhpcy5kYXRhKTtcclxuICAgICAgICAvLyDjg5Xjg6zjg7zjg6Djg5Djg4Pjg5XjgqHnlKjjga7jg4bjgq/jgrnjg4Hjg6Pjgavjgqvjg6njg7znlKjjga7jg6Hjg6Ljg6rpoJjln5/jgpLnorrkv51cclxuICAgICAgICB0aGlzLmdyYXBoaWNEZXZpY2UuY29udGV4dC50ZXhJbWFnZTJEKHRoaXMuZ3JhcGhpY0RldmljZS5jb250ZXh0LlRFWFRVUkVfMkQsIDAsIHRoaXMuZ3JhcGhpY0RldmljZS5jb250ZXh0LlJHQkEsIHdpZHRoLCBoZWlnaHQsIDAsIHRoaXMuZ3JhcGhpY0RldmljZS5jb250ZXh0LlJHQkEsIHRoaXMuZ3JhcGhpY0RldmljZS5jb250ZXh0LlVOU0lHTkVEX0JZVEUsIG51bGwpO1xyXG4gICAgICAgIC8vIOODhuOCr+OCueODgeODo+ODkeODqeODoeODvOOCv1xyXG4gICAgICAgIHRoaXMuZ3JhcGhpY0RldmljZS5jb250ZXh0LnRleFBhcmFtZXRlcmkodGhpcy5ncmFwaGljRGV2aWNlLmNvbnRleHQuVEVYVFVSRV8yRCwgdGhpcy5ncmFwaGljRGV2aWNlLmNvbnRleHQuVEVYVFVSRV9NQUdfRklMVEVSLCB0aGlzLmdyYXBoaWNEZXZpY2UuY29udGV4dC5MSU5FQVIpO1xyXG4gICAgICAgIHRoaXMuZ3JhcGhpY0RldmljZS5jb250ZXh0LnRleFBhcmFtZXRlcmkodGhpcy5ncmFwaGljRGV2aWNlLmNvbnRleHQuVEVYVFVSRV8yRCwgdGhpcy5ncmFwaGljRGV2aWNlLmNvbnRleHQuVEVYVFVSRV9NSU5fRklMVEVSLCB0aGlzLmdyYXBoaWNEZXZpY2UuY29udGV4dC5MSU5FQVIpO1xyXG4gICAgICAgIC8vIOODleODrOODvOODoOODkOODg+ODleOCoeOBq+ODhuOCr+OCueODgeODo+OCkumWoumAo+S7mOOBkeOCi1xyXG4gICAgICAgIHRoaXMuZ3JhcGhpY0RldmljZS5jb250ZXh0LmZyYW1lYnVmZmVyVGV4dHVyZTJEKHRoaXMuZ3JhcGhpY0RldmljZS5jb250ZXh0LkZSQU1FQlVGRkVSLCB0aGlzLmdyYXBoaWNEZXZpY2UuY29udGV4dC5DT0xPUl9BVFRBQ0hNRU5UMCwgdGhpcy5ncmFwaGljRGV2aWNlLmNvbnRleHQuVEVYVFVSRV8yRCwgdGhpcy5kYXRhLCAwKTtcclxuICAgICAgICAvLyDlkITnqK7jgqrjg5bjgrjjgqfjgq/jg4jjga7jg5DjgqTjg7Pjg4njgpLop6PpmaRcclxuICAgICAgICB0aGlzLmdyYXBoaWNEZXZpY2UuY29udGV4dC5iaW5kVGV4dHVyZSh0aGlzLmdyYXBoaWNEZXZpY2UuY29udGV4dC5URVhUVVJFXzJELCBudWxsKTtcclxuICAgICAgICB0aGlzLmdyYXBoaWNEZXZpY2UuY29udGV4dC5iaW5kUmVuZGVyYnVmZmVyKHRoaXMuZ3JhcGhpY0RldmljZS5jb250ZXh0LlJFTkRFUkJVRkZFUiwgbnVsbCk7XHJcbiAgICAgICAgdGhpcy5ncmFwaGljRGV2aWNlLmNvbnRleHQuYmluZEZyYW1lYnVmZmVyKHRoaXMuZ3JhcGhpY0RldmljZS5jb250ZXh0LkZSQU1FQlVGRkVSLCBudWxsKTtcclxuICAgIH1cclxuICAgIEZyYW1lQnVmZmVyVGV4dHVyZS5wcm90b3R5cGUuU2V0Q29udGFpbmVyID0gZnVuY3Rpb24gKHJlc291cmNlQ29udGFpbmVyKSB7XHJcbiAgICB9O1xyXG4gICAgRnJhbWVCdWZmZXJUZXh0dXJlLnByb3RvdHlwZS5Mb2FkZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB9O1xyXG4gICAgRnJhbWVCdWZmZXJUZXh0dXJlLnByb3RvdHlwZS5Jc0xvYWRlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH07XHJcbiAgICBGcmFtZUJ1ZmZlclRleHR1cmUucHJvdG90eXBlLkluaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB9O1xyXG4gICAgRnJhbWVCdWZmZXJUZXh0dXJlLnByb3RvdHlwZS5BdHRhY2ggPSBmdW5jdGlvbiAoc2xvdCkge1xyXG4gICAgICAgIHRoaXMuZ3JhcGhpY0RldmljZS5jb250ZXh0LmFjdGl2ZVRleHR1cmUodGhpcy5ncmFwaGljRGV2aWNlLmNvbnRleHQuVEVYVFVSRTApO1xyXG4gICAgICAgIHRoaXMuZ3JhcGhpY0RldmljZS5jb250ZXh0LmJpbmRUZXh0dXJlKHRoaXMuZ3JhcGhpY0RldmljZS5jb250ZXh0LlRFWFRVUkVfMkQsIHRoaXMuZGF0YSk7XHJcbiAgICAgICAgdGhpcy5ncmFwaGljRGV2aWNlLmNvbnRleHQudW5pZm9ybTFpKHRoaXMuZ3JhcGhpY0RldmljZS5zaGFkZXIuR2V0VGV4dHVyZVNsb3Qoc2xvdCksIHNsb3QpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBGcmFtZUJ1ZmZlclRleHR1cmU7XHJcbn0oKSk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IEZyYW1lQnVmZmVyVGV4dHVyZTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIEdlb21ldHJ5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gR2VvbWV0cnkoZGF0YSwgaXNVViwgaXNOb3JtYWwsIGlzQ29sb3IsIGFyZ19kZXZpY2UpIHtcclxuICAgICAgICB0aGlzLmRldmljZSA9IGFyZ19kZXZpY2U7XHJcbiAgICAgICAgdGhpcy52Ym9MaXN0ID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgdGhpcy52Ym9MaXN0LnB1c2goYXJnX2RldmljZS5DcmVhdGVWQk8oZGF0YS5wKSk7XHJcbiAgICAgICAgaWYgKGlzVVYpIHtcclxuICAgICAgICAgICAgdGhpcy52Ym9MaXN0LnB1c2goYXJnX2RldmljZS5DcmVhdGVWQk8oZGF0YS51dikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNOb3JtYWwpIHtcclxuICAgICAgICAgICAgdGhpcy52Ym9MaXN0LnB1c2goYXJnX2RldmljZS5DcmVhdGVWQk8oZGF0YS5uKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc0NvbG9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmJvTGlzdC5wdXNoKGFyZ19kZXZpY2UuQ3JlYXRlVkJPKGRhdGEuYykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmlibyA9IGFyZ19kZXZpY2UuQ3JlYXRlSUJPKGRhdGEuaSk7XHJcbiAgICAgICAgdGhpcy5pbmRleFNpemUgPSBkYXRhLmkubGVuZ3RoO1xyXG4gICAgICAgIHRoaXMuc3Vic2V0ID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgdGhpcy5zdWJzZXQucHVzaChkYXRhLmkubGVuZ3RoKTtcclxuICAgIH1cclxuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5DaGFuZ2VWQk8gPSBmdW5jdGlvbiAodmJvLCBzbG90KSB7XHJcbiAgICAgICAgdGhpcy52Ym9MaXN0W3Nsb3RdID0gdmJvO1xyXG4gICAgfTtcclxuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5HZXRJbmRleFNpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhTaXplO1xyXG4gICAgfTtcclxuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5EcmF3ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZGV2aWNlLlNldFZCTyh0aGlzLnZib0xpc3QpO1xyXG4gICAgICAgIHRoaXMuZGV2aWNlLmNvbnRleHQuYmluZEJ1ZmZlcih0aGlzLmRldmljZS5jb250ZXh0LkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB0aGlzLmlibyk7XHJcbiAgICB9O1xyXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLlNldFN1YnNldCA9IGZ1bmN0aW9uIChhcmdfc3Vic2V0KSB7XHJcbiAgICAgICAgdGhpcy5zdWJzZXQgPSBhcmdfc3Vic2V0O1xyXG4gICAgfTtcclxuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5HZXRTdWJTZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3Vic2V0O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBHZW9tZXRyeTtcclxufSgpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gR2VvbWV0cnk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBFeFBhcmFtZXRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEV4UGFyYW1ldGVyKGFyZ19zbG90LCBhcmdfc2l6ZSwgYXJnX3BhcmFtKSB7XHJcbiAgICAgICAgdGhpcy5zbG90ID0gYXJnX3Nsb3Q7XHJcbiAgICAgICAgdGhpcy5wYXJhbSA9IGFyZ19wYXJhbTtcclxuICAgICAgICB0aGlzLnNpemUgPSBhcmdfc2l6ZTtcclxuICAgICAgICBzd2l0Y2ggKGFyZ19zaXplKSB7XHJcbiAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgIHRoaXMuYXRhY2hGdW5jID0gdGhpcy5BdGFjaDFmO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgIHRoaXMuYXRhY2hGdW5jID0gdGhpcy5BdGFjaDJmO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgIHRoaXMuYXRhY2hGdW5jID0gdGhpcy5BdGFjaDNmO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgIHRoaXMuYXRhY2hGdW5jID0gdGhpcy5BdGFjaDRmO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMTY6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmF0YWNoRnVuYyA9IHRoaXMuQXRhY2hNYXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBFeFBhcmFtZXRlci5wcm90b3R5cGUuQXRhY2gxZiA9IGZ1bmN0aW9uIChkZXZpY2UpIHtcclxuICAgICAgICBkZXZpY2UuY29udGV4dC51bmlmb3JtMWZ2KGRldmljZS5zaGFkZXIudW5pZm9ybUxvY2F0aW9uc1t0aGlzLnNsb3RdLCB0aGlzLnBhcmFtLmRhdGEpO1xyXG4gICAgfTtcclxuICAgIEV4UGFyYW1ldGVyLnByb3RvdHlwZS5BdGFjaDJmID0gZnVuY3Rpb24gKGRldmljZSkge1xyXG4gICAgICAgIGRldmljZS5jb250ZXh0LnVuaWZvcm0yZnYoZGV2aWNlLnNoYWRlci51bmlmb3JtTG9jYXRpb25zW3RoaXMuc2xvdF0sIHRoaXMucGFyYW0uZGF0YSk7XHJcbiAgICB9O1xyXG4gICAgRXhQYXJhbWV0ZXIucHJvdG90eXBlLkF0YWNoM2YgPSBmdW5jdGlvbiAoZGV2aWNlKSB7XHJcbiAgICAgICAgZGV2aWNlLmNvbnRleHQudW5pZm9ybTNmdihkZXZpY2Uuc2hhZGVyLnVuaWZvcm1Mb2NhdGlvbnNbdGhpcy5zbG90XSwgdGhpcy5wYXJhbS5kYXRhKTtcclxuICAgIH07XHJcbiAgICBFeFBhcmFtZXRlci5wcm90b3R5cGUuQXRhY2g0ZiA9IGZ1bmN0aW9uIChkZXZpY2UpIHtcclxuICAgICAgICBkZXZpY2UuY29udGV4dC51bmlmb3JtNGZ2KGRldmljZS5zaGFkZXIudW5pZm9ybUxvY2F0aW9uc1t0aGlzLnNsb3RdLCB0aGlzLnBhcmFtLmRhdGEpO1xyXG4gICAgfTtcclxuICAgIEV4UGFyYW1ldGVyLnByb3RvdHlwZS5BdGFjaE1hdCA9IGZ1bmN0aW9uIChkZXZpY2UpIHtcclxuICAgICAgICBkZXZpY2UuY29udGV4dC51bmlmb3JtTWF0cml4NGZ2KGRldmljZS5zaGFkZXIudW5pZm9ybUxvY2F0aW9uc1t0aGlzLnNsb3RdLCBmYWxzZSwgdGhpcy5wYXJhbS5kYXRhKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRXhQYXJhbWV0ZXI7XHJcbn0oKSk7XHJcbnZhciBNYXRlcmlhbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE1hdGVyaWFsKCkge1xyXG4gICAgfVxyXG4gICAgTWF0ZXJpYWwucHJvdG90eXBlLlNldFBhcmFtZXRlciA9IGZ1bmN0aW9uIChhcmdfYW1iaWVudCwgYXJnX2RldmljZSwgYXJnX2FyeV90ZXh0dXJlLCBhcmdfYXJ5X2V4UGFybXMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuYW1iaWVudENvbG9yID0gYXJnX2FtYmllbnQ7XHJcbiAgICAgICAgdGhpcy5kZXZpY2UgPSBhcmdfZGV2aWNlO1xyXG4gICAgICAgIGlmIChhcmdfYXJ5X3RleHR1cmUpXHJcbiAgICAgICAgICAgIHRoaXMudGV4dHVyZXMgPSBhcmdfYXJ5X3RleHR1cmU7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB0aGlzLnRleHR1cmVzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgdGhpcy5leFBhcmFtcyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIGlmIChhcmdfYXJ5X2V4UGFybXMpIHtcclxuICAgICAgICAgICAgYXJnX2FyeV9leFBhcm1zLmZvcmVhY2goZnVuY3Rpb24gKHBhcmFtKSB7IHJldHVybiBfdGhpcy5BZGRFeFBhcmFtKHBhcmFtLm4sIHBhcmFtLnMsIHBhcmFtLnApOyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgTWF0ZXJpYWwucHJvdG90eXBlLlNldFRleHR1cmUgPSBmdW5jdGlvbiAoYXJnX3RleHR1cmUsIHNsb3QpIHtcclxuICAgICAgICB0aGlzLnRleHR1cmVzW3Nsb3RdID0gYXJnX3RleHR1cmU7XHJcbiAgICB9O1xyXG4gICAgTWF0ZXJpYWwucHJvdG90eXBlLkFkZEV4UGFyYW0gPSBmdW5jdGlvbiAoYXJnX3Nsb3QsIGFyZ19zaXplLCBhcmdfcGFyYW0pIHtcclxuICAgICAgICB0aGlzLmV4UGFyYW1zLnB1c2gobmV3IEV4UGFyYW1ldGVyKGFyZ19zbG90LCBhcmdfc2l6ZSwgYXJnX3BhcmFtKSk7XHJcbiAgICB9O1xyXG4gICAgTWF0ZXJpYWwucHJvdG90eXBlLkF0dGFjaCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5kZXZpY2Uuc2hhZGVyLmFtYmllbnRTbG90KSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGV2aWNlLmNvbnRleHQudW5pZm9ybTRmdih0aGlzLmRldmljZS5zaGFkZXIudW5pZm9ybUxvY2F0aW9uc1t0aGlzLmRldmljZS5zaGFkZXIuYW1iaWVudFNsb3RdLCB0aGlzLmFtYmllbnRDb2xvci54eXp3KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnRleHR1cmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnRleHR1cmVzW2ldICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRleHR1cmVzW2ldLkF0dGFjaChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmV4UGFyYW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXhQYXJhbXNbaV0uYXRhY2hGdW5jKHRoaXMuZGV2aWNlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE1hdGVyaWFsO1xyXG59KCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBNYXRlcmlhbDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIE1lc2ggPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBNZXNoKCkge1xyXG4gICAgfVxyXG4gICAgTWVzaC5wcm90b3R5cGUuU2V0UGFyYW1ldGVyID0gZnVuY3Rpb24gKGFyZ19nZW9tZXRyeSwgYXJnX2FyeV9tYXRlcmlhbHMpIHtcclxuICAgICAgICB0aGlzLmdlb21ldHJ5ID0gYXJnX2dlb21ldHJ5O1xyXG4gICAgICAgIHRoaXMuYXJ5X21hdGVyaWFscyA9IGFyZ19hcnlfbWF0ZXJpYWxzO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBNZXNoO1xyXG59KCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBNZXNoO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgRmlsZUxvYWRlcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9Ub29sL0ZpbGVMb2FkZXJcIikpO1xyXG5mdW5jdGlvbiBHZXRTdHJpZGUoYXJnX3R5cGUpIHtcclxuICAgIHN3aXRjaCAoYXJnX3R5cGUpIHtcclxuICAgICAgICBjYXNlIFwidmVjMlwiOlxyXG4gICAgICAgICAgICByZXR1cm4gMjtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcInZlYzNcIjpcclxuICAgICAgICAgICAgcmV0dXJuIDM7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJ2ZWM0XCI6XHJcbiAgICAgICAgICAgIHJldHVybiA0O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiaW50XCI6XHJcbiAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiZmxvYXRcIjpcclxuICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgY29uc29sZS5sb2coXCJUeXBlIHVuZGlmaW5lZC5cIik7XHJcbiAgICByZXR1cm4gMDtcclxufVxyXG52YXIgU2hhZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gU2hhZGVyKHZzU291cmNlLCBmc1NvdXJjZSwgYXJnX2dyYXBoaWNEZXZpY2UsIHZzU291cmNlX2RpcmVjdCwgZnNTb3VyY2VfZGlyZWN0KSB7XHJcbiAgICAgICAgdGhpcy5ncmFwaGljRGV2aWNlID0gYXJnX2dyYXBoaWNEZXZpY2U7XHJcbiAgICAgICAgdmFyIHZzRGF0YTtcclxuICAgICAgICBpZiAodnNTb3VyY2VfZGlyZWN0KSB7XHJcbiAgICAgICAgICAgIHZzRGF0YSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHZzU291cmNlKS50ZXh0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHZzRGF0YSA9IEZpbGVMb2FkZXJfMS5kZWZhdWx0LkxvYWRUZXh0KHZzU291cmNlKTtcclxuICAgICAgICB2YXIgdl9zaGFkZXIgPSB0aGlzLmdyYXBoaWNEZXZpY2UuQ3JlYXRlVmVydGV4U2hhZGVyKHZzRGF0YSk7XHJcbiAgICAgICAgdmFyIGZzRGF0YTtcclxuICAgICAgICBpZiAoZnNTb3VyY2VfZGlyZWN0KSB7XHJcbiAgICAgICAgICAgIGZzRGF0YSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZzU291cmNlKS50ZXh0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGZzRGF0YSA9IEZpbGVMb2FkZXJfMS5kZWZhdWx0LkxvYWRUZXh0KGZzU291cmNlKTtcclxuICAgICAgICB2YXIgZl9zaGFkZXIgPSB0aGlzLmdyYXBoaWNEZXZpY2UuQ3JlYXRlRnJhZ21lbnRTaGFkZXIoZnNEYXRhKTtcclxuICAgICAgICB0aGlzLmFtYmllbnRTbG90ID0gLTE7XHJcbiAgICAgICAgdGhpcy5saWdodFBvc1Nsb3QgPSAtMTtcclxuICAgICAgICB0aGlzLmxpZ2h0RGlyU2xvdCA9IC0xO1xyXG4gICAgICAgIHRoaXMucHJvZ3JhbU9iamVjdCA9IHRoaXMuZ3JhcGhpY0RldmljZS5DcmVhdGVQcm9ncmFtKHZfc2hhZGVyLCBmX3NoYWRlcik7XHJcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVMb2NhdGlvbnMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICB0aGlzLmF0dHJpYnV0ZVN0cmlkZXMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICB0aGlzLnVuaWZvcm1Mb2NhdGlvbnMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICB0aGlzLnRleHR1cmVTbG90cyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIHZhciBhdHRyaWJ1dGVTb3VyY2UgPSB2c0RhdGEuc3BsaXQoXCI7XCIpO1xyXG4gICAgICAgIGF0dHJpYnV0ZVNvdXJjZSA9IGF0dHJpYnV0ZVNvdXJjZS5maWx0ZXIoZnVuY3Rpb24gKHNvdXJjZSkgeyByZXR1cm4gc291cmNlLmluZGV4T2YoXCJhdHRyaWJ1dGVcIikgIT0gLTE7IH0pO1xyXG4gICAgICAgIHZhciBhdHRyaWJ1dGVTZW1hbnRpY3MgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGF0dHJpYnV0ZVNvdXJjZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBhdHRyaWJ1dGVTb3VyY2VbaV0gPSBhdHRyaWJ1dGVTb3VyY2VbaV0ucmVwbGFjZSgvXFxyP1xcbi9nLCBcIlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYXR0cmlidXRlU291cmNlLmZvckVhY2goZnVuY3Rpb24gKHNvdXJjZSkgeyByZXR1cm4gYXR0cmlidXRlU2VtYW50aWNzLnB1c2goc291cmNlLnNwbGl0KFwiIFwiKSk7IH0pO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXR0cmlidXRlU2VtYW50aWNzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZVNlbWFudGljc1tpXSA9IGF0dHJpYnV0ZVNlbWFudGljc1tpXS5maWx0ZXIoZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMgIT0gXCJcIjsgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlTG9jYXRpb25zW2ldID0gdGhpcy5ncmFwaGljRGV2aWNlLmNvbnRleHQuZ2V0QXR0cmliTG9jYXRpb24odGhpcy5wcm9ncmFtT2JqZWN0LCBhdHRyaWJ1dGVTZW1hbnRpY3NbaV1bMl0pO1xyXG4gICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZVN0cmlkZXNbaV0gPSBHZXRTdHJpZGUoYXR0cmlidXRlU2VtYW50aWNzW2ldWzFdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHVuaVNvdXJjZSA9IGZzRGF0YS5zcGxpdChcIjtcIik7XHJcbiAgICAgICAgdW5pU291cmNlID0gdnNEYXRhLnNwbGl0KFwiO1wiKS5jb25jYXQodW5pU291cmNlKTtcclxuICAgICAgICB1bmlTb3VyY2UgPSB1bmlTb3VyY2UuZmlsdGVyKGZ1bmN0aW9uIChzb3VyY2UpIHsgcmV0dXJuIHNvdXJjZS5pbmRleE9mKFwidW5pZm9ybVwiKSAhPSAtMTsgfSk7XHJcbiAgICAgICAgdmFyIHVuaVNlbWFudGljcyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdW5pU291cmNlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHVuaVNvdXJjZVtpXSA9IHVuaVNvdXJjZVtpXS5yZXBsYWNlKC9cXHI/XFxuL2csIFwiXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB1bmlTb3VyY2UuZm9yRWFjaChmdW5jdGlvbiAoc291cmNlKSB7IHJldHVybiB1bmlTZW1hbnRpY3MucHVzaChzb3VyY2Uuc3BsaXQoXCIgXCIpKTsgfSk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB1bmlTZW1hbnRpY3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdW5pU2VtYW50aWNzW2ldID0gdW5pU2VtYW50aWNzW2ldLmZpbHRlcihmdW5jdGlvbiAocykgeyByZXR1cm4gcyAhPSBcIlwiOyB9KTtcclxuICAgICAgICAgICAgdGhpcy51bmlmb3JtTG9jYXRpb25zLnB1c2godGhpcy5ncmFwaGljRGV2aWNlLmNvbnRleHQuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMucHJvZ3JhbU9iamVjdCwgdW5pU2VtYW50aWNzW2ldWzJdKSk7XHJcbiAgICAgICAgICAgIGlmICh1bmlTZW1hbnRpY3NbaV1bMl0gPT0gXCJhbWJpZW50Q29sb3JcIikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hbWJpZW50U2xvdCA9IGk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodW5pU2VtYW50aWNzW2ldWzJdID09IFwibGlnaHRQb3NpdGlvblwiKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpZ2h0UG9zU2xvdCA9IGk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodW5pU2VtYW50aWNzW2ldWzJdID09IFwibGlnaHREaXJlY3Rpb25cIikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saWdodERpclNsb3QgPSBpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHVuaVNlbWFudGljc1tpXVsxXSA9PSBcInNhbXBsZXIyRFwiKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRleHR1cmVTbG90cy5wdXNoKGkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgU2hhZGVyLnByb3RvdHlwZS5HZXRUZXh0dXJlU2xvdCA9IGZ1bmN0aW9uIChhcmdfc2xvdCkge1xyXG4gICAgICAgIGlmICh0aGlzLnRleHR1cmVTbG90c1thcmdfc2xvdF0gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy51bmlmb3JtTG9jYXRpb25zW3RoaXMudGV4dHVyZVNsb3RzW2FyZ19zbG90XV07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFNoYWRlci5wcm90b3R5cGUuQXR0YWNoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZ3JhcGhpY0RldmljZS5TZXRTaGFkZXIodGhpcyk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFNoYWRlcjtcclxufSgpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gU2hhZGVyO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgU291bmQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTb3VuZChhcmdfc3JjKSB7XHJcbiAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhdWRpbycpO1xyXG4gICAgICAgIHRoaXMuYXVkaW9FbGVtZW50LnNyYyA9IGFyZ19zcmM7XHJcbiAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQucHJlbG9hZCA9IFwiYXV0b1wiO1xyXG4gICAgfVxyXG4gICAgU291bmQucHJvdG90eXBlLlBsYXkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQucGxheSgpO1xyXG4gICAgfTtcclxuICAgIFNvdW5kLnByb3RvdHlwZS5QbGF5X25ldyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXVkaW9FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKTtcclxuICAgICAgICBhdWRpb0VsZW1lbnQuc3JjID0gdGhpcy5hdWRpb0VsZW1lbnQuc3JjO1xyXG4gICAgICAgIGF1ZGlvRWxlbWVudC5wcmVsb2FkID0gXCJhdXRvXCI7XHJcbiAgICAgICAgYXVkaW9FbGVtZW50LnBsYXkoKTtcclxuICAgIH07XHJcbiAgICBTb3VuZC5wcm90b3R5cGUuUGF1c2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQucGF1c2UoKTtcclxuICAgIH07XHJcbiAgICBTb3VuZC5wcm90b3R5cGUuTXV0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmF1ZGlvRWxlbWVudC5tdXRlZCA9IHRydWU7XHJcbiAgICB9O1xyXG4gICAgU291bmQucHJvdG90eXBlLlNldFZvbHVtZSA9IGZ1bmN0aW9uIChhcmdfdm9sdW1lKSB7XHJcbiAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQudm9sdW1lID0gYXJnX3ZvbHVtZTtcclxuICAgIH07XHJcbiAgICBTb3VuZC5wcm90b3R5cGUuR2V0Vm9sdW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmF1ZGlvRWxlbWVudC52b2x1bWU7XHJcbiAgICB9O1xyXG4gICAgU291bmQucHJvdG90eXBlLkRpc011dGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQubXV0ZWQgPSBmYWxzZTtcclxuICAgIH07XHJcbiAgICBTb3VuZC5wcm90b3R5cGUuUmVzZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5hdWRpb0VsZW1lbnQuY3VycmVudFRpbWUgPSAwLjA7XHJcbiAgICB9O1xyXG4gICAgU291bmQucHJvdG90eXBlLlNldExvb3AgPSBmdW5jdGlvbiAoYXJnX2lzTG9vcCkge1xyXG4gICAgICAgIHRoaXMuYXVkaW9FbGVtZW50Lmxvb3AgPSBhcmdfaXNMb29wO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTb3VuZDtcclxufSgpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gU291bmQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBUZXh0dXJlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVGV4dHVyZShhcmdfcGF0aCwgYXJnX2RldmljZSkge1xyXG4gICAgICAgIHRoaXMuaXNMb2FkZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmdyYXBoaWNEZXZpY2UgPSBhcmdfZGV2aWNlO1xyXG4gICAgICAgIHRoaXMucGF0aCA9IGFyZ19wYXRoO1xyXG4gICAgfVxyXG4gICAgVGV4dHVyZS5wcm90b3R5cGUuTG9hZGVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuaXNMb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgIGlmICh0aGlzLnJlc291cmNlQ29udGFpbmVyKVxyXG4gICAgICAgICAgICB0aGlzLnJlc291cmNlQ29udGFpbmVyLkxvYWRFbmQoKTtcclxuICAgIH07XHJcbiAgICBUZXh0dXJlLnByb3RvdHlwZS5Jc0xvYWRlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pc0xvYWRlZDtcclxuICAgIH07XHJcbiAgICBUZXh0dXJlLnByb3RvdHlwZS5Jbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZ3JhcGhpY0RldmljZS5DcmVhdGVUZXh0dXJlKHRoaXMucGF0aCwgdGhpcyk7XHJcbiAgICB9O1xyXG4gICAgVGV4dHVyZS5wcm90b3R5cGUuQXR0YWNoID0gZnVuY3Rpb24gKHNsb3QpIHtcclxuICAgICAgICB0aGlzLmdyYXBoaWNEZXZpY2UuY29udGV4dC5hY3RpdmVUZXh0dXJlKHRoaXMuZ3JhcGhpY0RldmljZS5jb250ZXh0LlRFWFRVUkUwKTtcclxuICAgICAgICB0aGlzLmdyYXBoaWNEZXZpY2UuY29udGV4dC5iaW5kVGV4dHVyZSh0aGlzLmdyYXBoaWNEZXZpY2UuY29udGV4dC5URVhUVVJFXzJELCB0aGlzLmRhdGEpO1xyXG4gICAgICAgIHRoaXMuZ3JhcGhpY0RldmljZS5jb250ZXh0LnVuaWZvcm0xaSh0aGlzLmdyYXBoaWNEZXZpY2Uuc2hhZGVyLkdldFRleHR1cmVTbG90KHNsb3QpLCBzbG90KTtcclxuICAgICAgICB0aGlzLmdyYXBoaWNEZXZpY2UuY29udGV4dC50ZXhQYXJhbWV0ZXJpKHRoaXMuZ3JhcGhpY0RldmljZS5jb250ZXh0LlRFWFRVUkVfMkQsIHRoaXMuZ3JhcGhpY0RldmljZS5jb250ZXh0LlRFWFRVUkVfTUlOX0ZJTFRFUiwgdGhpcy5ncmFwaGljRGV2aWNlLmNvbnRleHQuTkVBUkVTVCk7XHJcbiAgICAgICAgdGhpcy5ncmFwaGljRGV2aWNlLmNvbnRleHQudGV4UGFyYW1ldGVyaSh0aGlzLmdyYXBoaWNEZXZpY2UuY29udGV4dC5URVhUVVJFXzJELCB0aGlzLmdyYXBoaWNEZXZpY2UuY29udGV4dC5URVhUVVJFX01BR19GSUxURVIsIHRoaXMuZ3JhcGhpY0RldmljZS5jb250ZXh0Lk5FQVJFU1QpO1xyXG4gICAgfTtcclxuICAgIFRleHR1cmUucHJvdG90eXBlLlNldENvbnRhaW5lciA9IGZ1bmN0aW9uIChyZXNvdXJjZUNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMucmVzb3VyY2VDb250YWluZXIgPSByZXNvdXJjZUNvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLnJlc291cmNlQ29udGFpbmVyLkxvYWRTdGFydCgpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBUZXh0dXJlO1xyXG59KCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBUZXh0dXJlO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59O1xyXG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn07XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIFNjZW5lXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vU2NlbmUvU2NlbmVcIikpO1xyXG52YXIgUmVzb3VyY2VDcmVhdGVyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vVG9vbC9SZXNvdXJjZUNyZWF0ZXJcIikpO1xyXG52YXIgUXVhdF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL01hdGgvUXVhdFwiKSk7XHJcbnZhciBWZWN0b3I0XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vTWF0aC9WZWN0b3I0XCIpKTtcclxudmFyIFZlY3RvcjNfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9NYXRoL1ZlY3RvcjNcIikpO1xyXG52YXIgUG9pbnRMaWdodF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL0xpZ2h0L1BvaW50TGlnaHRcIikpO1xyXG52YXIgTW9kZWxEcmF3Q29tcG9uZW50XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vQ29tcG9uZW50L01vZGVsRHJhd0NvbXBvbmVudFwiKSk7XHJcbnZhciBUcmFuc2Zvcm1fMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9UcmFuc2Zvcm1cIikpO1xyXG52YXIgSW5wdXRfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9Ub29sL0lucHV0XCIpKTtcclxudmFyIFNjZW5lQ2hhbmdlcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL0NvbXBvbmVudC9TY2VuZUNoYW5nZXJcIikpO1xyXG52YXIgVHJhbnNmb3JtQW5pbWF0aW9uXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vQ29tcG9uZW50L1RyYW5zZm9ybUFuaW1hdGlvblwiKSk7XHJcbnZhciBFYXNpbmdfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9Ub29sL0Vhc2luZ1wiKSk7XHJcbnZhciBTdWNpZGVDb21wb25lbnRfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9Db21wb25lbnQvU3VjaWRlQ29tcG9uZW50XCIpKTtcclxudmFyIFN0YWdlXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vQ3Jvc3N5TG9hZF9Db3B5L1N0YWdlXCIpKTtcclxudmFyIFByaW1pdGl2ZVR5cGU7XHJcbihmdW5jdGlvbiAoUHJpbWl0aXZlVHlwZSkge1xyXG4gICAgUHJpbWl0aXZlVHlwZVtQcmltaXRpdmVUeXBlW1wic3BoZXJlXCJdID0gMF0gPSBcInNwaGVyZVwiO1xyXG4gICAgUHJpbWl0aXZlVHlwZVtQcmltaXRpdmVUeXBlW1wiYm94X0FBQkJcIl0gPSAxXSA9IFwiYm94X0FBQkJcIjtcclxuICAgIFByaW1pdGl2ZVR5cGVbUHJpbWl0aXZlVHlwZVtcImJveF9PQkJcIl0gPSAyXSA9IFwiYm94X09CQlwiO1xyXG4gICAgUHJpbWl0aXZlVHlwZVtQcmltaXRpdmVUeXBlW1wicG9pbnRcIl0gPSAzXSA9IFwicG9pbnRcIjtcclxufSkoUHJpbWl0aXZlVHlwZSB8fCAoUHJpbWl0aXZlVHlwZSA9IHt9KSk7XHJcbnZhciBmbG9hdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIGZsb2F0KCkge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoMSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmxvYXQ7XHJcbn0oKSk7XHJcbnZhciBTYW1wbGVTY2VuZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhTYW1wbGVTY2VuZSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFNhbXBsZVNjZW5lKHNjZW5lTWFuZ2VyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc2NlbmVNYW5nZXIpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuYVF1YXRlcm5pb24gPSBuZXcgUXVhdF8xLmRlZmF1bHQoKS5JZGVudGl0eSgpO1xyXG4gICAgICAgIF90aGlzLmJRdWF0ZXJuaW9uID0gbmV3IFF1YXRfMS5kZWZhdWx0KCkuSWRlbnRpdHkoKTtcclxuICAgICAgICBfdGhpcy5zUXVhdGVybmlvbiA9IG5ldyBRdWF0XzEuZGVmYXVsdCgpLklkZW50aXR5KCk7XHJcbiAgICAgICAgX3RoaXMuem9vbURhdGEgPSBuZXcgZmxvYXQoKTtcclxuICAgICAgICBfdGhpcy56b29tRGF0YS5kYXRhWzBdID0gMC41O1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFNhbXBsZVNjZW5lLnByb3RvdHlwZS5Mb2FkaW5nVXBkYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgfTtcclxuICAgIFNhbXBsZVNjZW5lLnByb3RvdHlwZS5PbkxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZnJhbWVCdWZmZXIsIG1hdGVyaWFsO1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBmcmFtZUJ1ZmZlciA9IHRoaXMuc2NlbmVNYW5hZ2VyLkdldFJlc291cmNlQ29udGFpbmVyKCkuQWRkVGV4dHVyZShSZXNvdXJjZUNyZWF0ZXJfMS5kZWZhdWx0LkNyZWF0ZUZyYW1lQnVmZmVyKDEwMjQsIDEwMjQsIHRoaXMuc2NlbmVNYW5hZ2VyLkdldEdyYXBoaWNEZXZpY2UoKSksIFwicGxheUNhbWVyYVwiKTtcclxuICAgICAgICAgICAgICAgIG1hdGVyaWFsID0gdGhpcy5zY2VuZU1hbmFnZXIuR2V0UmVzb3VyY2VDb250YWluZXIoKS5BZGRNYXRlcmlhbChSZXNvdXJjZUNyZWF0ZXJfMS5kZWZhdWx0LkNyZWF0ZU1hdGVyaWFsKG5ldyBWZWN0b3I0XzEuZGVmYXVsdCgwLjEsIDAuMSwgMC4xLCAxLjApLCB0aGlzLnNjZW5lTWFuYWdlci5HZXRHcmFwaGljRGV2aWNlKCksIFt0aGlzLnNjZW5lTWFuYWdlci5HZXRSZXNvdXJjZUNvbnRhaW5lcigpLkdldFRleHR1cmUoXCJwbGF5Q2FtZXJhXCIpXSksIFwicGxheUNhbWVyYU1hdGVyaWFsXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBTYW1wbGVTY2VuZS5wcm90b3R5cGUuT25Jbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuQWRkTGF5ZXIoKTtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLkFkZExheWVyKCk7XHJcbiAgICAgICAgdGhpcy5Vc2VDb2xsaXNpb25NYW5hZ2VyKCk7XHJcbiAgICAgICAgdGhpcy5BZGRDYW1lcmEoMCwgMSwgXCJtYWluXCIsIGZhbHNlLCB0aGlzLnNjZW5lTWFuYWdlci5HZXRSZXNvdXJjZUNvbnRhaW5lcigpLkdldFRleHR1cmUoXCJwbGF5Q2FtZXJhXCIpKTtcclxuICAgICAgICB0aGlzLkFkZENhbWVyYSgxLCAyLCBcIlVJXCIsIHRydWUsIHRoaXMuc2NlbmVNYW5hZ2VyLkdldFJlc291cmNlQ29udGFpbmVyKCkuR2V0VGV4dHVyZShcInBsYXlDYW1lcmFcIikpO1xyXG4gICAgICAgIC8vIOmggueCueOCt+OCp+ODvOODgOOBqOODleODqeOCsOODoeODs+ODiOOCt+OCp+ODvOODgOOBrueUn+aIkFxyXG4gICAgICAgIHZhciBsaWdodCA9IG5ldyBQb2ludExpZ2h0XzEuZGVmYXVsdCh0aGlzLnNjZW5lTWFuYWdlci5HZXRHcmFwaGljRGV2aWNlKCkpO1xyXG4gICAgICAgIGxpZ2h0LnRyYW5zZm9ybS5Qb3NpdGlvbiA9IG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgtNSwgLTUsIDEwKTtcclxuICAgICAgICAvL3RoaXMucmVuZGVyZXIuU2V0TGlnaHQobGlnaHQsMCk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5TZXRMaWdodChsaWdodCwgMSk7XHJcbiAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuR2V0R3JhcGhpY0RldmljZSgpLkVuYWJsZVN0ZW5jaWwoKTtcclxuICAgICAgICB0aGlzLkdldENhbWVyYShcIm1haW5cIikudHJhbnNmb3JtLlBvc2l0aW9uID0gbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDEsIC02LCA0KTtcclxuICAgICAgICB0aGlzLkdldENhbWVyYShcIm1haW5cIikudHJhbnNmb3JtLkxvb2tBdChuZXcgVmVjdG9yM18xLmRlZmF1bHQoMCwgMCwgLTEpLCBWZWN0b3IzXzEuZGVmYXVsdC55QXhpcyk7XHJcbiAgICAgICAgdGhpcy5HZXRDYW1lcmEoXCJtYWluXCIpLmNsZWFyQ29sb3IgPSBuZXcgVmVjdG9yNF8xLmRlZmF1bHQoMC4zLCAwLjMsIDAuMywgMS4wKTtcclxuICAgICAgICB0aGlzLkdldENhbWVyYShcIlVJXCIpLmlzQ2xlYXIgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnByb2plY3Rpb25QbGFuZSA9IHRoaXMuZ2FtZU9iamVjdE1hbmFnZXIuQWRkR2FtZU9iamVjdChcInByb2plY3Rpb25DdWJlXCIpO1xyXG4gICAgICAgIC8vdGhpcy5jdWJlLlNldENvbXBvbmVudChuZXcgTW9kZWxEcmF3Q29tcG9uZW50KGZhbHNlLCBcImN1YmVcIixcImNhbG9yeU1hdGVyaWFsXCIsXCJ0ZXhTaGFkZXJcIiwxLGZhbHNlKSkgYXMgTW9kZWxEcmF3Q29tcG9uZW50O1xyXG4gICAgICAgIC8vdGhpcy5hbm90aGVyQ3ViZS5TZXRDb21wb25lbnQobmV3IE1vZGVsRHJhd0NvbXBvbmVudChmYWxzZSwgXCJjdWJlXCIsXCJjYWxvcnlNYXRlcmlhbFwiLFwidGV4U2hhZGVyXCIsMSxmYWxzZSkpIGFzIE1vZGVsRHJhd0NvbXBvbmVudDtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvamVjdGlvblBsYW5lLlNldENvbXBvbmVudChuZXcgTW9kZWxEcmF3Q29tcG9uZW50XzEuZGVmYXVsdChmYWxzZSwgXCJwbGFuZVwiLCBcInBsYXlDYW1lcmFNYXRlcmlhbFwiLCBcInRleFNoYWRlclwiLCAwLCBmYWxzZSkpO1xyXG4gICAgICAgICAgICB0aGlzLnByb2plY3Rpb25QbGFuZS50cmFuc2Zvcm0uU2NhbGUgPSBuZXcgVmVjdG9yM18xLmRlZmF1bHQoMCwgMCwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vdGhpcy5hbm90aGVyQ3ViZS50cmFuc2Zvcm0uQmFzZVRyYW5zZm9ybT10aGlzLmN1YmUudHJhbnNmb3JtO1xyXG4gICAgICAgIHRoaXMucHJvamVjdGlvblBsYW5lLnRyYW5zZm9ybS5Qb3NpdGlvbiA9IG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLCAwKTtcclxuICAgICAgICB0aGlzLnN0YWdlID0gbmV3IFN0YWdlXzEuZGVmYXVsdCh0aGlzKTtcclxuICAgICAgICB0aGlzLmdhbWVPYmplY3RNYW5hZ2VyLkFkZEdhbWVPYmplY3QoXCJzdGFnZVwiLCBuZXcgVHJhbnNmb3JtXzEuZGVmYXVsdChuZXcgVmVjdG9yM18xLmRlZmF1bHQoMCwgMCwgMCksIG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLCAwKSksIFwic3RhZ2VcIiwgW3RoaXMuc3RhZ2VdKTtcclxuICAgIH07XHJcbiAgICBTYW1wbGVTY2VuZS5wcm90b3R5cGUuT25TdGFydCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBJbnB1dF8xLmRlZmF1bHQuQWRkS2V5RG93bkV2ZW50KHRoaXMsIFwic2FtcGxlU2NlbmVFdmVudFwiLCB0cnVlKTtcclxuICAgICAgICBpZiAodGhpcy5Jc0xvYWRlZCgpKSB7XHJcbiAgICAgICAgICAgIHZhciB0cmFucyA9IG5ldyBUcmFuc2Zvcm1fMS5kZWZhdWx0KG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLCAtMSksIG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLCAwKSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDMwMCwgMzAwLCAwKSk7XHJcbiAgICAgICAgICAgIHRoaXMucHJvamVjdGlvblBsYW5lLlNldENvbXBvbmVudChuZXcgVHJhbnNmb3JtQW5pbWF0aW9uXzEuZGVmYXVsdCg5MCwgZmFsc2UsIHRyYW5zLCB0aGlzLnByb2plY3Rpb25QbGFuZS50cmFuc2Zvcm0sIEVhc2luZ18xLmRlZmF1bHQuRWFzZUluT3V0Q2lyYykpO1xyXG4gICAgICAgICAgICB0aGlzLnN0YWdlLlRvU3RhcnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgU2FtcGxlU2NlbmUucHJvdG90eXBlLk9uRW5kID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIElucHV0XzEuZGVmYXVsdC5SZW1vdmVLZXlEb3duRXZlbnQoXCJzYW1wbGVTY2VuZUV2ZW50XCIpO1xyXG4gICAgICAgIHRoaXMuc3RhZ2UuUmVzZXQoKTtcclxuICAgIH07XHJcbiAgICBTYW1wbGVTY2VuZS5wcm90b3R5cGUuT25VcGRhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8g44Kr44Km44Oz44K/44KS5YWD44Gr44Op44K444Ki44Oz44KS566X5Ye6XHJcbiAgICAgICAgdmFyIHJhZCA9ICh0aGlzLnNjZW5lTWFuYWdlci5HZXRHYW1lVGltZSgpLkFic29sdXRlRnJhbWUgJSAzNjApICogTWF0aC5QSSAvIDE4MDtcclxuICAgICAgICB2YXIgdGltZSA9IDEuNTtcclxuICAgIH07XHJcbiAgICBTYW1wbGVTY2VuZS5wcm90b3R5cGUuT25LZXlEb3duID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBpZiAoZS5rZXkgPT0gXCJFc2NhcGVcIikge1xyXG4gICAgICAgICAgICB2YXIgc2NlbmVDaGFuZ2VPYmplY3QgPSB0aGlzLmdhbWVPYmplY3RNYW5hZ2VyLkdldEdhbWVPYmplY3QoXCJzY2VuZUNoYW5nZXJcIik7XHJcbiAgICAgICAgICAgIGlmIChzY2VuZUNoYW5nZU9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNjZW5lQ2hhbmdlT2JqZWN0ID0gdGhpcy5nYW1lT2JqZWN0TWFuYWdlci5BZGRHYW1lT2JqZWN0KFwic2NlbmVDaGFuZ2VyXCIpO1xyXG4gICAgICAgICAgICBzY2VuZUNoYW5nZU9iamVjdC5TZXRDb21wb25lbnQobmV3IFNjZW5lQ2hhbmdlcl8xLmRlZmF1bHQoXCJ0aXRsZVwiLCAxMDAsIG51bGwpKTtcclxuICAgICAgICAgICAgdmFyIHRyYW5zID0gbmV3IFRyYW5zZm9ybV8xLmRlZmF1bHQobmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAsIDAsIDApLCBuZXcgVmVjdG9yM18xLmRlZmF1bHQoMCwgMCwgMCksIG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLCAwKSk7XHJcbiAgICAgICAgICAgIHNjZW5lQ2hhbmdlT2JqZWN0LlNldENvbXBvbmVudChuZXcgVHJhbnNmb3JtQW5pbWF0aW9uXzEuZGVmYXVsdCg5MCwgZmFsc2UsIHRyYW5zLCB0aGlzLnByb2plY3Rpb25QbGFuZS50cmFuc2Zvcm0sIEVhc2luZ18xLmRlZmF1bHQuRWFzZUluT3V0Q2lyYykpO1xyXG4gICAgICAgICAgICBzY2VuZUNoYW5nZU9iamVjdC5TZXRDb21wb25lbnQobmV3IFN1Y2lkZUNvbXBvbmVudF8xLmRlZmF1bHQoMTAwKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBTYW1wbGVTY2VuZTtcclxufShTY2VuZV8xLmRlZmF1bHQpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gU2FtcGxlU2NlbmU7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn07XHJcbnZhciBfX2dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufTtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgUmVuZGVyZXJfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vUGFydHMvUmVuZGVyZXJcIikpO1xyXG52YXIgQ2FtZXJhXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL0dyYXBoaWMvQ2FtZXJhXCIpKTtcclxudmFyIEdhbWVPYmplY3RNYW5hZ2VyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL0dhbWVPYmplY3QvR2FtZU9iamVjdE1hbmFnZXJcIikpO1xyXG52YXIgQ29sbGlzaW9uTWFuYWdlcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9QYXJ0cy9Db2xsaXNpb24vQ29sbGlzaW9uTWFuYWdlclwiKSk7XHJcbmZ1bmN0aW9uIFNsZWVwKHRpbWUpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgICAgIHNldFRpbWVvdXQocmVzb2x2ZSwgdGltZSk7XHJcbiAgICB9KTtcclxufVxyXG52YXIgU2NlbmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTY2VuZShzY2VuZU1hbmdlcikge1xyXG4gICAgICAgIHRoaXMuaXNDdXJyZW50ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pc0xvYWRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSBuZXcgUmVuZGVyZXJfMS5kZWZhdWx0KCk7XHJcbiAgICAgICAgdGhpcy5tYXBfY2FtZXJhID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuYXJ5X2NhbWVyYSA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyID0gc2NlbmVNYW5nZXI7XHJcbiAgICAgICAgdGhpcy5nYW1lT2JqZWN0TWFuYWdlciA9IG5ldyBHYW1lT2JqZWN0TWFuYWdlcl8xLmRlZmF1bHQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5VcGRhdGUgPSB0aGlzLlVwZGF0ZV9XaXRob3V0Q29sbGlzaW9uO1xyXG4gICAgICAgIHRoaXMuQWRkQ2FtZXJhKDAsIDAsIFwibGFzdFwiLCB0cnVlKTtcclxuICAgIH1cclxuICAgIFNjZW5lLnByb3RvdHlwZS5Jc0N1cnJlbnRTY2VuZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pc0N1cnJlbnQ7XHJcbiAgICB9O1xyXG4gICAgU2NlbmUucHJvdG90eXBlLlNldEN1cnJlbnRTY2VuZSA9IGZ1bmN0aW9uIChhcmdfaXNjdXJyZW50KSB7XHJcbiAgICAgICAgdGhpcy5pc0N1cnJlbnQgPSBhcmdfaXNjdXJyZW50O1xyXG4gICAgfTtcclxuICAgIFNjZW5lLnByb3RvdHlwZS5HZXRHYW1lTWFuYWdlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nYW1lT2JqZWN0TWFuYWdlcjtcclxuICAgIH07XHJcbiAgICBTY2VuZS5wcm90b3R5cGUuVXNlQ29sbGlzaW9uTWFuYWdlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmNvbGxpc2lvbk1hbmFnZXIgPSBuZXcgQ29sbGlzaW9uTWFuYWdlcl8xLmRlZmF1bHQoKTtcclxuICAgICAgICB0aGlzLlVwZGF0ZSA9IHRoaXMuVXBkYXRlX1dpdGhDb2xsaXNpb247XHJcbiAgICB9O1xyXG4gICAgU2NlbmUucHJvdG90eXBlLkdldENvbGxpc2lvbk1hbmFnZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sbGlzaW9uTWFuYWdlcjtcclxuICAgIH07XHJcbiAgICBTY2VuZS5wcm90b3R5cGUuSXNMb2FkZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNMb2FkZWQ7XHJcbiAgICB9O1xyXG4gICAgU2NlbmUucHJvdG90eXBlLlJlbGVhc2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5PblJlbGVhc2UoKTtcclxuICAgICAgICB0aGlzLnNjZW5lTWFuYWdlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5nYW1lT2JqZWN0TWFuYWdlci5SZWxlYXNlKCk7XHJcbiAgICAgICAgdGhpcy5jb2xsaXNpb25NYW5hZ2VyLlJlbGVhc2UoKTtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLlJlbGVhc2UoKTtcclxuICAgIH07XHJcbiAgICBTY2VuZS5wcm90b3R5cGUuT25SZWxlYXNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgfTtcclxuICAgIFNjZW5lLnByb3RvdHlwZS5HZXRDYW1lcmFDb3VudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hcnlfY2FtZXJhLmxlbmd0aDtcclxuICAgIH07XHJcbiAgICBTY2VuZS5wcm90b3R5cGUuQWRkQ2FtZXJhID0gZnVuY3Rpb24gKG9yZGVyLCBsYXllciwgY2FtZXJhTmFtZSwgaXNQYXJhcmVsbCwgZnJhbWVCdWZmZXJUZXh0dXJlKSB7XHJcbiAgICAgICAgdmFyIG5ld0NhbWVyYTtcclxuICAgICAgICBpZiAoZnJhbWVCdWZmZXJUZXh0dXJlKSB7XHJcbiAgICAgICAgICAgIG5ld0NhbWVyYSA9IG5ldyBDYW1lcmFfMS5kZWZhdWx0KHRoaXMuc2NlbmVNYW5hZ2VyLkdldEdyYXBoaWNEZXZpY2UoKSwgbGF5ZXIsIGlzUGFyYXJlbGwsIGZyYW1lQnVmZmVyVGV4dHVyZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgbmV3Q2FtZXJhID0gbmV3IENhbWVyYV8xLmRlZmF1bHQodGhpcy5zY2VuZU1hbmFnZXIuR2V0R3JhcGhpY0RldmljZSgpLCBsYXllciwgaXNQYXJhcmVsbCk7XHJcbiAgICAgICAgdGhpcy5hcnlfY2FtZXJhLnNwbGljZShvcmRlciwgMCwgbmV3Q2FtZXJhKTtcclxuICAgICAgICB0aGlzLm1hcF9jYW1lcmFbY2FtZXJhTmFtZV0gPSBuZXdDYW1lcmE7XHJcbiAgICAgICAgcmV0dXJuIG5ld0NhbWVyYTtcclxuICAgIH07XHJcbiAgICBTY2VuZS5wcm90b3R5cGUuR2V0Q2FtZXJhID0gZnVuY3Rpb24gKGNhbWVyYU5hbWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tYXBfY2FtZXJhW2NhbWVyYU5hbWVdO1xyXG4gICAgfTtcclxuICAgIFNjZW5lLnByb3RvdHlwZS5EcmF3ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5hcnlfY2FtZXJhLmZvckVhY2goZnVuY3Rpb24gKGNhbWVyYSkgeyByZXR1cm4gX3RoaXMucmVuZGVyZXIuRHJhdyhjYW1lcmEpOyB9KTtcclxuICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5HZXRHcmFwaGljRGV2aWNlKCkuUHJlc2VudCgpO1xyXG4gICAgfTtcclxuICAgIFNjZW5lLnByb3RvdHlwZS5VcGRhdGVfV2l0aENvbGxpc2lvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLk9uVXBkYXRlKCk7XHJcbiAgICAgICAgdGhpcy5nYW1lT2JqZWN0TWFuYWdlci5VcGRhdGUoKTtcclxuICAgICAgICB0aGlzLmNvbGxpc2lvbk1hbmFnZXIuQ2hlY2soKTtcclxuICAgICAgICB0aGlzLkRyYXcoKTtcclxuICAgIH07XHJcbiAgICBTY2VuZS5wcm90b3R5cGUuVXBkYXRlX1dpdGhvdXRDb2xsaXNpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5PblVwZGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuZ2FtZU9iamVjdE1hbmFnZXIuVXBkYXRlKCk7XHJcbiAgICAgICAgdGhpcy5EcmF3KCk7XHJcbiAgICB9O1xyXG4gICAgU2NlbmUucHJvdG90eXBlLkxvYWRpbmdVcGRhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5PbkxvYWRpbmdVcGRhdGUoKTtcclxuICAgICAgICB0aGlzLkRyYXcoKTtcclxuICAgIH07XHJcbiAgICBTY2VuZS5wcm90b3R5cGUuT25Mb2FkaW5nVXBkYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgfTtcclxuICAgIFNjZW5lLnByb3RvdHlwZS5PblVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIH07XHJcbiAgICBTY2VuZS5wcm90b3R5cGUuU3RhcnQgPSBmdW5jdGlvbiAoaW5mb3JtYXRpb24pIHtcclxuICAgICAgICB0aGlzLk9uU3RhcnQoaW5mb3JtYXRpb24pO1xyXG4gICAgfTtcclxuICAgIFNjZW5lLnByb3RvdHlwZS5PblN0YXJ0ID0gZnVuY3Rpb24gKGluZm9ybWF0aW9uKSB7XHJcbiAgICB9O1xyXG4gICAgU2NlbmUucHJvdG90eXBlLkVuZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLk9uRW5kKCk7XHJcbiAgICB9O1xyXG4gICAgU2NlbmUucHJvdG90eXBlLk9uRW5kID0gZnVuY3Rpb24gKCkge1xyXG4gICAgfTtcclxuICAgIFNjZW5lLnByb3RvdHlwZS5Jbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuT25Jbml0aWFsaXplKCk7XHJcbiAgICB9O1xyXG4gICAgU2NlbmUucHJvdG90eXBlLkJlZkxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB9O1xyXG4gICAgU2NlbmUucHJvdG90eXBlLkxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLkJlZkxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5PbkxvYWQoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5zY2VuZU1hbmFnZXIuR2V0UmVzb3VyY2VDb250YWluZXIoKS5HZXRMb2FkaW5nT2JqQ291bnQoKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFNsZWVwKDEwMCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLkluaXRpYWxpemUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBTY2VuZS5wcm90b3R5cGUuT25Mb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBTY2VuZS5wcm90b3R5cGUuT25Jbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgfTtcclxuICAgIFNjZW5lLnByb3RvdHlwZS5HZXRSZW5kZXJlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJlcjtcclxuICAgIH07XHJcbiAgICBTY2VuZS5wcm90b3R5cGUuR2V0U2NlbmVNYW5hZ2VyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNjZW5lTWFuYWdlcjtcclxuICAgIH07XHJcbiAgICByZXR1cm4gU2NlbmU7XHJcbn0oKSk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IFNjZW5lO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgR2FtZVRpbWVfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vUGFydHMvR2FtZVRpbWVcIikpO1xyXG52YXIgU2NlbmVNYW5hZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gU2NlbmVNYW5hZ2VyKGFyZ19tb2RlbENyZWF0ZXIsIGFyZ19yZXNvdXJjZUNvbnRhaW5lciwgYXJnX2dyYXBoaWNEZXZpY2UpIHtcclxuICAgICAgICB0aGlzLm1hcF9zY2VuZXMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5yZXNvdXJjZUNvbnRhaW5lciA9IGFyZ19yZXNvdXJjZUNvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLm1vZGVsQ3JlYXRlciA9IGFyZ19tb2RlbENyZWF0ZXI7XHJcbiAgICAgICAgdGhpcy5ncmFwaGljRGV2aWNlID0gYXJnX2dyYXBoaWNEZXZpY2U7XHJcbiAgICAgICAgdGhpcy5nYW1lVGltZSA9IG5ldyBHYW1lVGltZV8xLmRlZmF1bHQoKTtcclxuICAgIH1cclxuICAgIFNjZW5lTWFuYWdlci5wcm90b3R5cGUuR2V0R3JhcGhpY0RldmljZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ncmFwaGljRGV2aWNlO1xyXG4gICAgfTtcclxuICAgIFNjZW5lTWFuYWdlci5wcm90b3R5cGUuR2V0TW9kZWxDcmVhdGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1vZGVsQ3JlYXRlcjtcclxuICAgIH07XHJcbiAgICBTY2VuZU1hbmFnZXIucHJvdG90eXBlLkdldFJlc291cmNlQ29udGFpbmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlc291cmNlQ29udGFpbmVyO1xyXG4gICAgfTtcclxuICAgIFNjZW5lTWFuYWdlci5wcm90b3R5cGUuR2V0R2FtZVRpbWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2FtZVRpbWU7XHJcbiAgICB9O1xyXG4gICAgU2NlbmVNYW5hZ2VyLnByb3RvdHlwZS5VcGRhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFNjZW5lLklzTG9hZGVkKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50U2NlbmUuVXBkYXRlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZVRpbWUuQ291bnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFNjZW5lLkRyYXcoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgU2NlbmVNYW5hZ2VyLnByb3RvdHlwZS5BZGRTY2VuZSA9IGZ1bmN0aW9uIChhcmdfc2NlbmUsIGtleSkge1xyXG4gICAgICAgIGFyZ19zY2VuZS5Mb2FkKCk7XHJcbiAgICAgICAgdGhpcy5tYXBfc2NlbmVzW2tleV0gPSBhcmdfc2NlbmU7XHJcbiAgICAgICAgcmV0dXJuIGFyZ19zY2VuZTtcclxuICAgIH07XHJcbiAgICBTY2VuZU1hbmFnZXIucHJvdG90eXBlLkdldFNjZW5lID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1hcF9zY2VuZXNba2V5XTtcclxuICAgIH07XHJcbiAgICBTY2VuZU1hbmFnZXIucHJvdG90eXBlLkdldEN1cnJlbnRTY2VuZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50U2NlbmU7XHJcbiAgICB9O1xyXG4gICAgU2NlbmVNYW5hZ2VyLnByb3RvdHlwZS5DaGFuZ2VTY2VuZSA9IGZ1bmN0aW9uIChrZXksIGluZm9ybWF0aW9uKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFNjZW5lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFNjZW5lLlNldEN1cnJlbnRTY2VuZShmYWxzZSk7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFNjZW5lLkVuZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmN1cnJlbnRTY2VuZSA9IHRoaXMubWFwX3NjZW5lc1trZXldO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFNjZW5lLlNldEN1cnJlbnRTY2VuZSh0cnVlKTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRTY2VuZS5TdGFydCgpO1xyXG4gICAgfTtcclxuICAgIFNjZW5lTWFuYWdlci5wcm90b3R5cGUuUmVtb3ZlU2NlbmUgPSBmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgaWYgKHRoaXMubWFwX3NjZW5lc1trZXldKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWFwX3NjZW5lc1trZXldLlJlbGVhc2UoKTtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMubWFwX3NjZW5lc1trZXldO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gU2NlbmVNYW5hZ2VyO1xyXG59KCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBTY2VuZU1hbmFnZXI7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn07XHJcbnZhciBfX2dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufTtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgU2NlbmVfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9TY2VuZS9TY2VuZVwiKSk7XHJcbnZhciBSZXNvdXJjZUNyZWF0ZXJfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9Ub29sL1Jlc291cmNlQ3JlYXRlclwiKSk7XHJcbnZhciBHZW9tZXRyeUdlbmVyYXRvcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1Rvb2wvR2VvbWV0cnlHZW5lcmF0b3JcIikpO1xyXG52YXIgUXVhdF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL01hdGgvUXVhdFwiKSk7XHJcbnZhciBWZWN0b3I0XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vTWF0aC9WZWN0b3I0XCIpKTtcclxudmFyIFZlY3RvcjNfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9NYXRoL1ZlY3RvcjNcIikpO1xyXG52YXIgUG9pbnRMaWdodF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL0xpZ2h0L1BvaW50TGlnaHRcIikpO1xyXG52YXIgTW9kZWxEcmF3Q29tcG9uZW50XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vQ29tcG9uZW50L01vZGVsRHJhd0NvbXBvbmVudFwiKSk7XHJcbnZhciBWZWN0b3IyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vTWF0aC9WZWN0b3IyXCIpKTtcclxudmFyIFRleHREcmF3Q29tcG9uZW50XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vQ29tcG9uZW50L1RleHREcmF3Q29tcG9uZW50XCIpKTtcclxudmFyIFRyYW5zZm9ybV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1RyYW5zZm9ybVwiKSk7XHJcbnZhciBJbnB1dF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1Rvb2wvSW5wdXRcIikpO1xyXG52YXIgVHJhbnNmb3JtQW5pbWF0aW9uXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vQ29tcG9uZW50L1RyYW5zZm9ybUFuaW1hdGlvblwiKSk7XHJcbnZhciBTY2VuZUNoYW5nZXJfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9Db21wb25lbnQvU2NlbmVDaGFuZ2VyXCIpKTtcclxudmFyIEVhc2luZ18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1Rvb2wvRWFzaW5nXCIpKTtcclxudmFyIFN1Y2lkZUNvbXBvbmVudF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL0NvbXBvbmVudC9TdWNpZGVDb21wb25lbnRcIikpO1xyXG52YXIgZmxvYXQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBmbG9hdCgpIHtcclxuICAgICAgICB0aGlzLmRhdGEgPSBuZXcgRmxvYXQzMkFycmF5KDEpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZsb2F0O1xyXG59KCkpO1xyXG52YXIgVGl0bGVTY2VuZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhUaXRsZVNjZW5lLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gVGl0bGVTY2VuZShzY2VuZU1hbmdlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHNjZW5lTWFuZ2VyKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmFRdWF0ZXJuaW9uID0gbmV3IFF1YXRfMS5kZWZhdWx0KCkuSWRlbnRpdHkoKTtcclxuICAgICAgICBfdGhpcy5iUXVhdGVybmlvbiA9IG5ldyBRdWF0XzEuZGVmYXVsdCgpLklkZW50aXR5KCk7XHJcbiAgICAgICAgX3RoaXMuc1F1YXRlcm5pb24gPSBuZXcgUXVhdF8xLmRlZmF1bHQoKS5JZGVudGl0eSgpO1xyXG4gICAgICAgIF90aGlzLnpvb21EYXRhID0gbmV3IGZsb2F0KCk7XHJcbiAgICAgICAgX3RoaXMuaXNMb2FkID0gZmFsc2U7XHJcbiAgICAgICAgX3RoaXMuem9vbURpcmVjdGlvbiA9IDEuMDtcclxuICAgICAgICBfdGhpcy56b29tRGF0YS5kYXRhWzBdID0gMC41O1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIFRpdGxlU2NlbmUucHJvdG90eXBlLkxvYWRpbmdVcGRhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB9O1xyXG4gICAgVGl0bGVTY2VuZS5wcm90b3R5cGUuT25Mb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGZyYW1lQnVmZmVyLCBtYXRlcmlhbDtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuR2V0UmVzb3VyY2VDb250YWluZXIoKS5BZGRTaGFkZXIoUmVzb3VyY2VDcmVhdGVyXzEuZGVmYXVsdC5DcmVhdGVTaGFkZXIoJ3NoYWRlci9VVk5vcm1hbENvbG9yVlMuZ2xzbCcsIFwic2hhZGVyL0RlZmF1bHRGUy5nbHNsXCIsIHRoaXMuc2NlbmVNYW5hZ2VyLkdldEdyYXBoaWNEZXZpY2UoKSksIFwidGV4U2hhZGVyXCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuR2V0UmVzb3VyY2VDb250YWluZXIoKS5BZGRTaGFkZXIoUmVzb3VyY2VDcmVhdGVyXzEuZGVmYXVsdC5DcmVhdGVTaGFkZXIoJ3NoYWRlci9VVk5vcm1hbENvbG9yVlMuZ2xzbCcsIFwic2hhZGVyL0ZvbnRTaGFkZXJGUy5nbHNsXCIsIHRoaXMuc2NlbmVNYW5hZ2VyLkdldEdyYXBoaWNEZXZpY2UoKSksIFwiZm9udFNoYWRlclwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLkdldFJlc291cmNlQ29udGFpbmVyKCkuQWRkR2VvbWV0cnkoUmVzb3VyY2VDcmVhdGVyXzEuZGVmYXVsdC5DcmVhdGVHZW9tZXRyeShHZW9tZXRyeUdlbmVyYXRvcl8xLmRlZmF1bHQuQ3JlYXRlUGxhbmUobmV3IFZlY3RvcjJfMS5kZWZhdWx0KDEsIDEpLCBmYWxzZSwgbmV3IFZlY3RvcjRfMS5kZWZhdWx0KDEuMCwgMS4wLCAxLjAsIDEpKSwgdHJ1ZSwgZmFsc2UsIGZhbHNlLCB0aGlzLnNjZW5lTWFuYWdlci5HZXRHcmFwaGljRGV2aWNlKCkpLCBcInBsYW5lXCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuR2V0UmVzb3VyY2VDb250YWluZXIoKS5BZGRTb3VuZEZyb21GaWxlKFwiYXVkaW8vdGl0bGVfc2UzLndhdlwiLCBcInRpdGxlXCIpO1xyXG4gICAgICAgICAgICAgICAgLy8g44OG44Kv44K544OB44Oj44KS55Sf5oiQXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lTWFuYWdlci5HZXRSZXNvdXJjZUNvbnRhaW5lcigpLkFkZFRleHR1cmUoUmVzb3VyY2VDcmVhdGVyXzEuZGVmYXVsdC5DcmVhdGVUZXh0dXJlKCdpbWFnZS9jaGFybWFwLnBuZycsIHRoaXMuc2NlbmVNYW5hZ2VyLkdldEdyYXBoaWNEZXZpY2UoKSksIFwiZm9udFwiKTtcclxuICAgICAgICAgICAgICAgIGZyYW1lQnVmZmVyID0gdGhpcy5zY2VuZU1hbmFnZXIuR2V0UmVzb3VyY2VDb250YWluZXIoKS5BZGRUZXh0dXJlKFJlc291cmNlQ3JlYXRlcl8xLmRlZmF1bHQuQ3JlYXRlRnJhbWVCdWZmZXIoMTAyNCwgMTAyNCwgdGhpcy5zY2VuZU1hbmFnZXIuR2V0R3JhcGhpY0RldmljZSgpKSwgXCJ0aXRsZUNhbWVyYVwiKTtcclxuICAgICAgICAgICAgICAgIGZyYW1lQnVmZmVyID0gdGhpcy5zY2VuZU1hbmFnZXIuR2V0UmVzb3VyY2VDb250YWluZXIoKS5BZGRUZXh0dXJlKFJlc291cmNlQ3JlYXRlcl8xLmRlZmF1bHQuQ3JlYXRlRnJhbWVCdWZmZXIoMTAyNCwgMTAyNCwgdGhpcy5zY2VuZU1hbmFnZXIuR2V0R3JhcGhpY0RldmljZSgpKSwgXCJsb2FkaW5nQ2FtZXJhXCIpO1xyXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwgPSB0aGlzLnNjZW5lTWFuYWdlci5HZXRSZXNvdXJjZUNvbnRhaW5lcigpLkFkZE1hdGVyaWFsKFJlc291cmNlQ3JlYXRlcl8xLmRlZmF1bHQuQ3JlYXRlTWF0ZXJpYWwobmV3IFZlY3RvcjRfMS5kZWZhdWx0KDAuMSwgMC4xLCAwLjEsIDEuMCksIHRoaXMuc2NlbmVNYW5hZ2VyLkdldEdyYXBoaWNEZXZpY2UoKSwgW3RoaXMuc2NlbmVNYW5hZ2VyLkdldFJlc291cmNlQ29udGFpbmVyKCkuR2V0VGV4dHVyZShcInRpdGxlQ2FtZXJhXCIpXSksIFwidGl0bGVDYW1lcmFNYXRlcmlhbFwiKTtcclxuICAgICAgICAgICAgICAgIG1hdGVyaWFsLkFkZEV4UGFyYW0oNCwgMSwgdGhpcy56b29tRGF0YSk7XHJcbiAgICAgICAgICAgICAgICBtYXRlcmlhbCA9IHRoaXMuc2NlbmVNYW5hZ2VyLkdldFJlc291cmNlQ29udGFpbmVyKCkuQWRkTWF0ZXJpYWwoUmVzb3VyY2VDcmVhdGVyXzEuZGVmYXVsdC5DcmVhdGVNYXRlcmlhbChuZXcgVmVjdG9yNF8xLmRlZmF1bHQoMC4xLCAwLjEsIDAuMSwgMS4wKSwgdGhpcy5zY2VuZU1hbmFnZXIuR2V0R3JhcGhpY0RldmljZSgpLCBbdGhpcy5zY2VuZU1hbmFnZXIuR2V0UmVzb3VyY2VDb250YWluZXIoKS5HZXRUZXh0dXJlKFwibG9hZGluZ0NhbWVyYVwiKV0pLCBcImxvYWRpbmdDYW1lcmFNYXRlcmlhbFwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgVGl0bGVTY2VuZS5wcm90b3R5cGUuT25Jbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuQWRkTGF5ZXIoKTtcclxuICAgICAgICB0aGlzLkFkZENhbWVyYSgwLCAxLCBcIm1haW5cIiwgZmFsc2UsIHRoaXMuc2NlbmVNYW5hZ2VyLkdldFJlc291cmNlQ29udGFpbmVyKCkuR2V0VGV4dHVyZShcInRpdGxlQ2FtZXJhXCIpKTtcclxuICAgICAgICAvLyDpoILngrnjgrfjgqfjg7zjg4Djgajjg5Xjg6njgrDjg6Hjg7Pjg4jjgrfjgqfjg7zjg4Djga7nlJ/miJBcclxuICAgICAgICB2YXIgbGlnaHQgPSBuZXcgUG9pbnRMaWdodF8xLmRlZmF1bHQodGhpcy5zY2VuZU1hbmFnZXIuR2V0R3JhcGhpY0RldmljZSgpKTtcclxuICAgICAgICBsaWdodC50cmFuc2Zvcm0uUG9zaXRpb24gPSBuZXcgVmVjdG9yM18xLmRlZmF1bHQoLTUsIC01LCAxMCk7XHJcbiAgICAgICAgLy90aGlzLnJlbmRlcmVyLlNldExpZ2h0KGxpZ2h0LDApO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuU2V0TGlnaHQobGlnaHQsIDEpO1xyXG4gICAgICAgIHRoaXMuc2NlbmVNYW5hZ2VyLkdldEdyYXBoaWNEZXZpY2UoKS5FbmFibGVTdGVuY2lsKCk7XHJcbiAgICAgICAgdGhpcy5HZXRDYW1lcmEoXCJtYWluXCIpLnRyYW5zZm9ybS5Qb3NpdGlvbiA9IG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLCAxMCk7XHJcbiAgICAgICAgdGhpcy5HZXRDYW1lcmEoXCJtYWluXCIpLnRyYW5zZm9ybS5Mb29rQXQobmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAsIDAsIDApLCBWZWN0b3IzXzEuZGVmYXVsdC55QXhpcyk7XHJcbiAgICAgICAgdGhpcy5HZXRDYW1lcmEoXCJtYWluXCIpLmNsZWFyQ29sb3IgPSBuZXcgVmVjdG9yNF8xLmRlZmF1bHQoMS4wLCAxLjAsIDEuMCwgMS4wKTtcclxuICAgICAgICB0aGlzLnRleHRzID0gdGhpcy5nYW1lT2JqZWN0TWFuYWdlci5BZGRHYW1lT2JqZWN0KFwidGV4dFwiKTtcclxuICAgICAgICB0aGlzLnByb2plY3Rpb25QbGFuZSA9IHRoaXMuZ2FtZU9iamVjdE1hbmFnZXIuQWRkR2FtZU9iamVjdChcInByb2plY3Rpb25QbGFuZVwiKTtcclxuICAgICAgICAvL3RoaXMudG9ydXMuU2V0Q29tcG9uZW50KG5ldyBNb2RlbERyYXdDb21wb25lbnQoXCJoc3ZUb3J1c1wiLFwiY2Fsb3J5TWF0ZXJpYWxcIixcInBvaW50TGlnaHRcIiwxKSkgYXMgTW9kZWxEcmF3Q29tcG9uZW50O1xyXG4gICAgICAgIC8vdGhpcy5jdWJlLlNldENvbXBvbmVudChuZXcgTW9kZWxEcmF3Q29tcG9uZW50KGZhbHNlLCBcImN1YmVcIixcImNhbG9yeU1hdGVyaWFsXCIsXCJ0ZXhTaGFkZXJcIiwxLGZhbHNlKSkgYXMgTW9kZWxEcmF3Q29tcG9uZW50O1xyXG4gICAgICAgIHZhciB0ciA9IG5ldyBUcmFuc2Zvcm1fMS5kZWZhdWx0KCk7XHJcbiAgICAgICAgdHIuUG9zaXRpb24gPSBuZXcgVmVjdG9yM18xLmRlZmF1bHQoMSwgMSwgMSk7XHJcbiAgICAgICAgdmFyIHRyMiA9IG5ldyBUcmFuc2Zvcm1fMS5kZWZhdWx0KCk7XHJcbiAgICAgICAgdHIyLlBvc2l0aW9uID0gbmV3IFZlY3RvcjNfMS5kZWZhdWx0KC0xLCAtMSwgMik7XHJcbiAgICAgICAgdmFyIHRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm1fMS5kZWZhdWx0KCk7XHJcbiAgICAgICAgdHJhbnNmb3JtLlNjYWxlID0gbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAuNSwgMC41LCAwLjUpO1xyXG4gICAgICAgIHRyYW5zZm9ybS5Qb3NpdGlvbiA9IG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAtMS4wLCAwKTtcclxuICAgICAgICB2YXIgcHJlc3NBbnlUcmFuc2Zvcm0gPSBuZXcgVHJhbnNmb3JtXzEuZGVmYXVsdCgpO1xyXG4gICAgICAgIHByZXNzQW55VHJhbnNmb3JtLlNjYWxlID0gbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAuMjUsIDAuMjUsIDAuMjUpO1xyXG4gICAgICAgIHByZXNzQW55VHJhbnNmb3JtLlBvc2l0aW9uID0gbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAsIDEsIDApO1xyXG4gICAgICAgIHZhciBwcmVzc1RhcmdldCA9IG5ldyBUcmFuc2Zvcm1fMS5kZWZhdWx0KCk7XHJcbiAgICAgICAgcHJlc3NUYXJnZXQuU2NhbGUgPSBuZXcgVmVjdG9yM18xLmRlZmF1bHQoMC40LCAwLjQsIDAuNCk7XHJcbiAgICAgICAgcHJlc3NUYXJnZXQuUG9zaXRpb24gPSBuZXcgVmVjdG9yM18xLmRlZmF1bHQoMCwgMSwgMCk7XHJcbiAgICAgICAgdGhpcy50ZXh0cy5TZXRDb21wb25lbnQobmV3IFRleHREcmF3Q29tcG9uZW50XzEuZGVmYXVsdChcIlRpdGxlXCIsIFwiZm9udFwiLCBcImZvbnRTaGFkZXJcIiwgbmV3IFZlY3RvcjRfMS5kZWZhdWx0KDAuNzUsIDAuNzUsIDAuMjUsIDEpLCAxLCB0cnVlLCB0cmFuc2Zvcm0pKTtcclxuICAgICAgICB0aGlzLnRleHRzLlNldENvbXBvbmVudChuZXcgVGV4dERyYXdDb21wb25lbnRfMS5kZWZhdWx0KFwiUHJlc3MgQW55IEtleVwiLCBcImZvbnRcIiwgXCJmb250U2hhZGVyXCIsIG5ldyBWZWN0b3I0XzEuZGVmYXVsdCgwLjAsIDAuMCwgMC4wLCAxKSwgMSwgdHJ1ZSwgcHJlc3NBbnlUcmFuc2Zvcm0pKTtcclxuICAgICAgICB0aGlzLnRleHRzLlNldENvbXBvbmVudChuZXcgVHJhbnNmb3JtQW5pbWF0aW9uXzEuZGVmYXVsdCg2MCwgdHJ1ZSwgcHJlc3NUYXJnZXQsIHByZXNzQW55VHJhbnNmb3JtKSk7XHJcbiAgICAgICAgLy90aGlzLmFub3RoZXJDdWJlLlNldENvbXBvbmVudChuZXcgTW9kZWxEcmF3Q29tcG9uZW50KGZhbHNlLCBcImN1YmVcIixcImNhbG9yeU1hdGVyaWFsXCIsXCJ0ZXhTaGFkZXJcIiwxLHRydWUpKSBhcyBNb2RlbERyYXdDb21wb25lbnQ7XHJcbiAgICAgICAgdGhpcy5wcm9qZWN0aW9uUGxhbmUuU2V0Q29tcG9uZW50KG5ldyBNb2RlbERyYXdDb21wb25lbnRfMS5kZWZhdWx0KGZhbHNlLCBcInBsYW5lXCIsIFwidGl0bGVDYW1lcmFNYXRlcmlhbFwiLCBcInRleFNoYWRlclwiLCAwLCBmYWxzZSkpO1xyXG4gICAgICAgIHRoaXMucHJvamVjdGlvblBsYW5lLnRyYW5zZm9ybS5TY2FsZSA9IG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgzMDAsIDMwMCwgMSk7XHJcbiAgICAgICAgdGhpcy50ZXh0cy50cmFuc2Zvcm0uUG9zaXRpb24gPSBuZXcgVmVjdG9yM18xLmRlZmF1bHQoMCwgMCwgMC41KTtcclxuICAgICAgICB0aGlzLnByb2plY3Rpb25QbGFuZS50cmFuc2Zvcm0uUG9zaXRpb24gPSBuZXcgVmVjdG9yM18xLmRlZmF1bHQoMCwgMCwgLTEpO1xyXG4gICAgfTtcclxuICAgIFRpdGxlU2NlbmUucHJvdG90eXBlLk9uVXBkYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgfTtcclxuICAgIFRpdGxlU2NlbmUucHJvdG90eXBlLk9uU3RhcnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgSW5wdXRfMS5kZWZhdWx0LkFkZEtleURvd25FdmVudCh0aGlzLCBcInRpdGxlU2NlbmVFdmVudFwiLCB0cnVlKTtcclxuICAgICAgICBpZiAodGhpcy5Jc0xvYWRlZCgpKSB7XHJcbiAgICAgICAgICAgIHZhciB0cmFucyA9IG5ldyBUcmFuc2Zvcm1fMS5kZWZhdWx0KG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLCAtMSksIG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLCAwKSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDMwMCwgMzAwLCAxKSk7XHJcbiAgICAgICAgICAgIHRoaXMudGV4dHMuU2V0Q29tcG9uZW50KG5ldyBUcmFuc2Zvcm1BbmltYXRpb25fMS5kZWZhdWx0KDkwLCBmYWxzZSwgdHJhbnMsIHRoaXMucHJvamVjdGlvblBsYW5lLnRyYW5zZm9ybSwgRWFzaW5nXzEuZGVmYXVsdC5FYXNlSW5PdXRDaXJjKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFRpdGxlU2NlbmUucHJvdG90eXBlLk9uRW5kID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIElucHV0XzEuZGVmYXVsdC5SZW1vdmVLZXlEb3duRXZlbnQoXCJ0aXRsZVNjZW5lRXZlbnRcIik7XHJcbiAgICAgICAgdGhpcy5nYW1lT2JqZWN0TWFuYWdlci5HZXRHYW1lT2JqZWN0KFwic2NlbmVDaGFuZ2VyXCIpLkRlYWQoKTtcclxuICAgIH07XHJcbiAgICBUaXRsZVNjZW5lLnByb3RvdHlwZS5PbktleURvd24gPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGlmIChlLmtleSAhPSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgICAgICAgIHZhciBzY2VuZUNoYW5nZU9iamVjdCA9IHRoaXMuZ2FtZU9iamVjdE1hbmFnZXIuR2V0R2FtZU9iamVjdChcInNjZW5lQ2hhbmdlclwiKTtcclxuICAgICAgICAgICAgaWYgKHNjZW5lQ2hhbmdlT2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zY2VuZU1hbmFnZXIuR2V0UmVzb3VyY2VDb250YWluZXIoKS5HZXRTb3VuZChcInRpdGxlXCIpLlBsYXkoKTtcclxuICAgICAgICAgICAgc2NlbmVDaGFuZ2VPYmplY3QgPSB0aGlzLmdhbWVPYmplY3RNYW5hZ2VyLkFkZEdhbWVPYmplY3QoXCJzY2VuZUNoYW5nZXJcIik7XHJcbiAgICAgICAgICAgIHNjZW5lQ2hhbmdlT2JqZWN0LlNldENvbXBvbmVudChuZXcgU2NlbmVDaGFuZ2VyXzEuZGVmYXVsdChcImxvYWRcIiwgMTAwLCBudWxsKSk7XHJcbiAgICAgICAgICAgIHZhciB0cmFucyA9IG5ldyBUcmFuc2Zvcm1fMS5kZWZhdWx0KG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLCAtMSksIG5ldyBWZWN0b3IzXzEuZGVmYXVsdCgwLCAwLCAwKSwgbmV3IFZlY3RvcjNfMS5kZWZhdWx0KDAsIDAsIDApKTtcclxuICAgICAgICAgICAgc2NlbmVDaGFuZ2VPYmplY3QuU2V0Q29tcG9uZW50KG5ldyBUcmFuc2Zvcm1BbmltYXRpb25fMS5kZWZhdWx0KDkwLCBmYWxzZSwgdHJhbnMsIHRoaXMucHJvamVjdGlvblBsYW5lLnRyYW5zZm9ybSwgRWFzaW5nXzEuZGVmYXVsdC5FYXNlSW5PdXRDaXJjKSk7XHJcbiAgICAgICAgICAgIHNjZW5lQ2hhbmdlT2JqZWN0LlNldENvbXBvbmVudChuZXcgU3VjaWRlQ29tcG9uZW50XzEuZGVmYXVsdCgxMDApKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFRpdGxlU2NlbmU7XHJcbn0oU2NlbmVfMS5kZWZhdWx0KSk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IFRpdGxlU2NlbmU7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBCaW5hcnlSZWFkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBCaW5hcnlSZWFkZXIoYXJnX2J1ZmZlcikge1xyXG4gICAgICAgIHRoaXMuYnVmZmVyVmlldyA9IG5ldyBEYXRhVmlldyhhcmdfYnVmZmVyKTtcclxuICAgICAgICB0aGlzLnBvaW50ID0gMDtcclxuICAgIH1cclxuICAgIEJpbmFyeVJlYWRlci5wcm90b3R5cGUuR2V0U3RyaW5nID0gZnVuY3Rpb24gKHNpemUpIHtcclxuICAgICAgICB2YXIgb3V0cHV0ID0gXCJcIjtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgcmVhZCA9IHRoaXMuYnVmZmVyVmlldy5nZXRJbnQ4KHRoaXMucG9pbnQpO1xyXG4gICAgICAgICAgICBpZiAocmVhZCA+IDkpXHJcbiAgICAgICAgICAgICAgICBvdXRwdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShyZWFkKTtcclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHJlYWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dCArPSBcIjBcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQgKz0gXCIxXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0ICs9IFwiMlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dCArPSBcIjNcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQgKz0gXCI0XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0ICs9IFwiNVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dCArPSBcIjZcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA3OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQgKz0gXCI3XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgODpcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0ICs9IFwiOFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dCArPSBcIjlcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5wb2ludCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfTtcclxuICAgIEJpbmFyeVJlYWRlci5wcm90b3R5cGUuR2V0V1N0cmluZyA9IGZ1bmN0aW9uIChzaXplKSB7XHJcbiAgICAgICAgdmFyIG91dHB1dCA9IFwiXCI7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplICogMjsgaSsrKSB7XHJcbiAgICAgICAgICAgIG91dHB1dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHRoaXMuYnVmZmVyVmlldy5nZXRJbnQ4KHRoaXMucG9pbnQpKTtcclxuICAgICAgICAgICAgdGhpcy5wb2ludCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfTtcclxuICAgIEJpbmFyeVJlYWRlci5wcm90b3R5cGUuR2V0Q2hhciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgb3V0cHV0ID0gdGhpcy5idWZmZXJWaWV3LmdldEludDgodGhpcy5wb2ludCk7XHJcbiAgICAgICAgdGhpcy5wb2ludCArPSAxO1xyXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9O1xyXG4gICAgQmluYXJ5UmVhZGVyLnByb3RvdHlwZS5HZXRGbG9hdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgb3V0cHV0ID0gdGhpcy5idWZmZXJWaWV3LmdldEZsb2F0MzIodGhpcy5wb2ludCwgdHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5wb2ludCArPSA0O1xyXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9O1xyXG4gICAgQmluYXJ5UmVhZGVyLnByb3RvdHlwZS5HZXREb3VibGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG91dHB1dCA9IHRoaXMuYnVmZmVyVmlldy5nZXRGbG9hdDY0KHRoaXMucG9pbnQsIHRydWUpO1xyXG4gICAgICAgIHRoaXMucG9pbnQgKz0gNTtcclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfTtcclxuICAgIEJpbmFyeVJlYWRlci5wcm90b3R5cGUuR2V0SW50ID0gZnVuY3Rpb24gKHNpemUpIHtcclxuICAgICAgICBpZiAoIXNpemUpIHtcclxuICAgICAgICAgICAgdmFyIG91dHB1dCA9IHRoaXMuYnVmZmVyVmlldy5nZXRJbnQzMih0aGlzLnBvaW50LCB0cnVlKTtcclxuICAgICAgICAgICAgdGhpcy5wb2ludCArPSA0O1xyXG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc2l6ZSA9PSAxKSB7XHJcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSB0aGlzLmJ1ZmZlclZpZXcuZ2V0SW50OCh0aGlzLnBvaW50KTtcclxuICAgICAgICAgICAgdGhpcy5wb2ludCArPSAxO1xyXG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChzaXplID09IDIpIHtcclxuICAgICAgICAgICAgdmFyIG91dHB1dCA9IHRoaXMuYnVmZmVyVmlldy5nZXRJbnQxNih0aGlzLnBvaW50LCB0cnVlKTtcclxuICAgICAgICAgICAgdGhpcy5wb2ludCArPSAyO1xyXG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChzaXplID09IDQpIHtcclxuICAgICAgICAgICAgdmFyIG91dHB1dCA9IHRoaXMuYnVmZmVyVmlldy5nZXRJbnQzMih0aGlzLnBvaW50LCB0cnVlKTtcclxuICAgICAgICAgICAgdGhpcy5wb2ludCArPSA0O1xyXG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBCaW5hcnlSZWFkZXIucHJvdG90eXBlLkdldFVJbnQgPSBmdW5jdGlvbiAoc2l6ZSkge1xyXG4gICAgICAgIGlmICghc2l6ZSkge1xyXG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gdGhpcy5idWZmZXJWaWV3LmdldFVpbnQzMih0aGlzLnBvaW50LCB0cnVlKTtcclxuICAgICAgICAgICAgdGhpcy5wb2ludCArPSA0O1xyXG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc2l6ZSA9PSAxKSB7XHJcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSB0aGlzLmJ1ZmZlclZpZXcuZ2V0VWludDgodGhpcy5wb2ludCk7XHJcbiAgICAgICAgICAgIHRoaXMucG9pbnQgKz0gMTtcclxuICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoc2l6ZSA9PSAyKSB7XHJcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSB0aGlzLmJ1ZmZlclZpZXcuZ2V0VWludDE2KHRoaXMucG9pbnQsIHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLnBvaW50ICs9IDI7XHJcbiAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHNpemUgPT0gNCkge1xyXG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gdGhpcy5idWZmZXJWaWV3LmdldFVpbnQzMih0aGlzLnBvaW50LCB0cnVlKTtcclxuICAgICAgICAgICAgdGhpcy5wb2ludCArPSA0O1xyXG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gQmluYXJ5UmVhZGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBCaW5hcnlSZWFkZXI7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBCb3hfQUFCQl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9NYXRoL0dlb21ldHJ5L0JveF9BQUJCXCIpKTtcclxudmFyIEJveF9PQkJfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vTWF0aC9HZW9tZXRyeS9Cb3hfT0JCXCIpKTtcclxudmFyIEdlb21ldHJ5SGVscGVyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL01hdGgvR2VvbWV0cnkvR2VvbWV0cnlIZWxwZXJcIikpO1xyXG52YXIgU3BoZXJlXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL01hdGgvR2VvbWV0cnkvU3BoZXJlXCIpKTtcclxudmFyIFZlY3RvcjNfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vTWF0aC9WZWN0b3IzXCIpKTtcclxudmFyIENvbGxpc2lvbk9iamVjdF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9QYXJ0cy9Db2xsaXNpb24vQ29sbGlzaW9uT2JqZWN0XCIpKTtcclxudmFyIENvbGxpc2lvbk9iamVjdENyZWF0ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBDb2xsaXNpb25PYmplY3RDcmVhdGVyKCkge1xyXG4gICAgfVxyXG4gICAgQ29sbGlzaW9uT2JqZWN0Q3JlYXRlci5DcmVhdGVQb2ludCA9IGZ1bmN0aW9uIChhcmdfZ2FtZU9iamVjdCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgQ29sbGlzaW9uT2JqZWN0XzEuZGVmYXVsdChhcmdfZ2FtZU9iamVjdCwgbmV3IENvbGxpc2lvblByaW1pdGl2ZV9Qb2ludChhcmdfZ2FtZU9iamVjdC50cmFuc2Zvcm0pKTtcclxuICAgIH07XHJcbiAgICBDb2xsaXNpb25PYmplY3RDcmVhdGVyLkNyZWF0ZVNwaGVyZSA9IGZ1bmN0aW9uIChhcmdfcmFkaXVzLCBhcmdfZ2FtZU9iamVjdCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgQ29sbGlzaW9uT2JqZWN0XzEuZGVmYXVsdChhcmdfZ2FtZU9iamVjdCwgbmV3IENvbGxpc2lvblByaW1pdGl2ZV9TcGhlcmUoYXJnX3JhZGl1cywgYXJnX2dhbWVPYmplY3QudHJhbnNmb3JtKSk7XHJcbiAgICB9O1xyXG4gICAgQ29sbGlzaW9uT2JqZWN0Q3JlYXRlci5DcmVhdGVDdWJlX0FBQkIgPSBmdW5jdGlvbiAoYXJnX2xlbmd0aCwgYXJnX2dhbWVPYmplY3QpIHtcclxuICAgICAgICByZXR1cm4gbmV3IENvbGxpc2lvbk9iamVjdF8xLmRlZmF1bHQoYXJnX2dhbWVPYmplY3QsIG5ldyBDb2xsaXNpb25QcmltaXRpdmVfQm94X0FBQkIoYXJnX2xlbmd0aCwgYXJnX2dhbWVPYmplY3QudHJhbnNmb3JtKSk7XHJcbiAgICB9O1xyXG4gICAgQ29sbGlzaW9uT2JqZWN0Q3JlYXRlci5DcmVhdGVDdWJlX09CQiA9IGZ1bmN0aW9uIChhcmdfbGVuZ3RoLCBhcmdfZ2FtZU9iamVjdCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgQ29sbGlzaW9uT2JqZWN0XzEuZGVmYXVsdChhcmdfZ2FtZU9iamVjdCwgbmV3IENvbGxpc2lvblByaW1pdGl2ZV9Cb3hfT0JCKGFyZ19sZW5ndGgsIGFyZ19nYW1lT2JqZWN0LnRyYW5zZm9ybSkpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBDb2xsaXNpb25PYmplY3RDcmVhdGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBDb2xsaXNpb25PYmplY3RDcmVhdGVyO1xyXG52YXIgQ29sbGlzaW9uUHJpbWl0aXZlX1BvaW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQ29sbGlzaW9uUHJpbWl0aXZlX1BvaW50KGFyZ190cmFuc2Zvcm0pIHtcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IGFyZ190cmFuc2Zvcm07XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHRoaXMudHJhbnNmb3JtLlBvc2l0aW9uO1xyXG4gICAgfVxyXG4gICAgQ29sbGlzaW9uUHJpbWl0aXZlX1BvaW50LnByb3RvdHlwZS5Jbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgfTtcclxuICAgIENvbGxpc2lvblByaW1pdGl2ZV9Qb2ludC5wcm90b3R5cGUuUHJlSW5pdGlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIH07XHJcbiAgICBDb2xsaXNpb25QcmltaXRpdmVfUG9pbnQucHJvdG90eXBlLlVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uID0gdGhpcy50cmFuc2Zvcm0uUG9zaXRpb247XHJcbiAgICB9O1xyXG4gICAgQ29sbGlzaW9uUHJpbWl0aXZlX1BvaW50LnByb3RvdHlwZS5HZXRQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm0uUG9zaXRpb247XHJcbiAgICB9O1xyXG4gICAgQ29sbGlzaW9uUHJpbWl0aXZlX1BvaW50LnByb3RvdHlwZS5Jc0hpdCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiBvdGhlci5Jc0hpdFBvaW50KHRoaXMpO1xyXG4gICAgfTtcclxuICAgIENvbGxpc2lvblByaW1pdGl2ZV9Qb2ludC5wcm90b3R5cGUuR2V0TWF4UG9pbnRBbmRNaW5Qb2ludCA9IGZ1bmN0aW9uIChhcmdfb3V0cHV0TWF4LCBhcmdfb3V0cHV0TWluKSB7XHJcbiAgICAgICAgdmFyIHBvaW50ID0gdGhpcy50cmFuc2Zvcm0uUG9zaXRpb247XHJcbiAgICAgICAgYXJnX291dHB1dE1heC5kYXRhID0gcG9pbnQuZGF0YTtcclxuICAgICAgICBhcmdfb3V0cHV0TWluLmRhdGEgPSBwb2ludC5kYXRhO1xyXG4gICAgfTtcclxuICAgIENvbGxpc2lvblByaW1pdGl2ZV9Qb2ludC5wcm90b3R5cGUuSXNIaXRQb2ludCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiBvdGhlci5HZXRQb3NpdGlvbigpID09IHRoaXMuR2V0UG9zaXRpb24oKTtcclxuICAgIH07XHJcbiAgICBDb2xsaXNpb25QcmltaXRpdmVfUG9pbnQucHJvdG90eXBlLklzSGl0U3BoZXJlID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIEdlb21ldHJ5SGVscGVyXzEuZGVmYXVsdC5Jc0hpdFBvaW50U3BoZXJlKHRoaXMucG9zaXRpb24sIG90aGVyLmdlb21ldHJ5KTtcclxuICAgIH07XHJcbiAgICBDb2xsaXNpb25QcmltaXRpdmVfUG9pbnQucHJvdG90eXBlLklzSGl0Qm94X0FBQkIgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gR2VvbWV0cnlIZWxwZXJfMS5kZWZhdWx0LklzSGl0UG9pbnRCb3hfQUFCQih0aGlzLnBvc2l0aW9uLCBvdGhlci5nZW9tZXRyeSk7XHJcbiAgICB9O1xyXG4gICAgQ29sbGlzaW9uUHJpbWl0aXZlX1BvaW50LnByb3RvdHlwZS5Jc0hpdEJveF9PQkIgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gR2VvbWV0cnlIZWxwZXJfMS5kZWZhdWx0LklzSGl0UG9pbnRCb3hfT0JCKHRoaXMucG9zaXRpb24sIG90aGVyLmdlb21ldHJ5KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQ29sbGlzaW9uUHJpbWl0aXZlX1BvaW50O1xyXG59KCkpO1xyXG47XHJcbnZhciBDb2xsaXNpb25QcmltaXRpdmVfU3BoZXJlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQ29sbGlzaW9uUHJpbWl0aXZlX1NwaGVyZShhcmdfcmFkaXVzLCBhcmdfdHJhbnNmb3JtKSB7XHJcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0gPSBhcmdfdHJhbnNmb3JtO1xyXG4gICAgICAgIHRoaXMuZ2VvbWV0cnkgPSBuZXcgU3BoZXJlXzEuZGVmYXVsdChhcmdfcmFkaXVzLCB0aGlzLnRyYW5zZm9ybS5Qb3NpdGlvbiwgdGhpcy50cmFuc2Zvcm0uU2NhbGUueCk7XHJcbiAgICB9XHJcbiAgICBDb2xsaXNpb25QcmltaXRpdmVfU3BoZXJlLnByb3RvdHlwZS5Jbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgfTtcclxuICAgIENvbGxpc2lvblByaW1pdGl2ZV9TcGhlcmUucHJvdG90eXBlLlByZUluaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB9O1xyXG4gICAgQ29sbGlzaW9uUHJpbWl0aXZlX1NwaGVyZS5wcm90b3R5cGUuR2V0TWF4UG9pbnRBbmRNaW5Qb2ludCA9IGZ1bmN0aW9uIChhcmdfb3V0cHV0TWF4LCBhcmdfb3V0cHV0TWluKSB7XHJcbiAgICAgICAgYXJnX291dHB1dE1heC5kYXRhID0gdGhpcy5nZW9tZXRyeS5wb3NpdGlvbi5BZGQobmV3IFZlY3RvcjNfMS5kZWZhdWx0KHRoaXMuZ2VvbWV0cnkucmFkaXVzLCB0aGlzLmdlb21ldHJ5LnJhZGl1cywgdGhpcy5nZW9tZXRyeS5yYWRpdXMpKS5kYXRhO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coYXJnX291dHB1dE1heCk7XHJcbiAgICAgICAgYXJnX291dHB1dE1pbi5kYXRhID0gdGhpcy5nZW9tZXRyeS5wb3NpdGlvbi5TdWIobmV3IFZlY3RvcjNfMS5kZWZhdWx0KHRoaXMuZ2VvbWV0cnkucmFkaXVzLCB0aGlzLmdlb21ldHJ5LnJhZGl1cywgdGhpcy5nZW9tZXRyeS5yYWRpdXMpKS5kYXRhO1xyXG4gICAgfTtcclxuICAgIENvbGxpc2lvblByaW1pdGl2ZV9TcGhlcmUucHJvdG90eXBlLlVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmdlb21ldHJ5LnBvc2l0aW9uID0gdGhpcy50cmFuc2Zvcm0uUG9zaXRpb247XHJcbiAgICAgICAgdGhpcy5nZW9tZXRyeS5yYWRpdXMgPSB0aGlzLnRyYW5zZm9ybS5TY2FsZS54ICogdGhpcy5nZW9tZXRyeS5pbml0UmFkaXVzO1xyXG4gICAgfTtcclxuICAgIENvbGxpc2lvblByaW1pdGl2ZV9TcGhlcmUucHJvdG90eXBlLklzSGl0ID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIG90aGVyLklzSGl0U3BoZXJlKHRoaXMpO1xyXG4gICAgfTtcclxuICAgIENvbGxpc2lvblByaW1pdGl2ZV9TcGhlcmUucHJvdG90eXBlLklzSGl0Qm94X09CQiA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiBHZW9tZXRyeUhlbHBlcl8xLmRlZmF1bHQuSXNIaXRTcGhlcmVCb3hfT0JCKHRoaXMuZ2VvbWV0cnksIG90aGVyLmdlb21ldHJ5KTtcclxuICAgIH07XHJcbiAgICBDb2xsaXNpb25QcmltaXRpdmVfU3BoZXJlLnByb3RvdHlwZS5Jc0hpdFBvaW50ID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIEdlb21ldHJ5SGVscGVyXzEuZGVmYXVsdC5Jc0hpdFBvaW50U3BoZXJlKG90aGVyLnBvc2l0aW9uLCB0aGlzLmdlb21ldHJ5KTtcclxuICAgIH07XHJcbiAgICBDb2xsaXNpb25QcmltaXRpdmVfU3BoZXJlLnByb3RvdHlwZS5Jc0hpdFNwaGVyZSA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiBHZW9tZXRyeUhlbHBlcl8xLmRlZmF1bHQuSXNIaXRTcGhlcmVTcGhlcmUodGhpcy5nZW9tZXRyeSwgb3RoZXIuZ2VvbWV0cnkpO1xyXG4gICAgfTtcclxuICAgIENvbGxpc2lvblByaW1pdGl2ZV9TcGhlcmUucHJvdG90eXBlLklzSGl0Qm94X0FBQkIgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gR2VvbWV0cnlIZWxwZXJfMS5kZWZhdWx0LklzSGl0U3BoZXJlQm94X0FBQkIodGhpcy5nZW9tZXRyeSwgb3RoZXIuZ2VvbWV0cnkpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBDb2xsaXNpb25QcmltaXRpdmVfU3BoZXJlO1xyXG59KCkpO1xyXG47XHJcbnZhciBDb2xsaXNpb25QcmltaXRpdmVfQm94X0FBQkIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBDb2xsaXNpb25QcmltaXRpdmVfQm94X0FBQkIoYXJnX2xlbmd0aCwgYXJnX3dlYWtfdHJhbnNmb3JtKSB7XHJcbiAgICAgICAgdGhpcy5nZW9tZXRyeSA9IG5ldyBCb3hfQUFCQl8xLmRlZmF1bHQoYXJnX2xlbmd0aCwgYXJnX3dlYWtfdHJhbnNmb3JtLlBvc2l0aW9uKTtcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IGFyZ193ZWFrX3RyYW5zZm9ybTtcclxuICAgICAgICB0aGlzLmdlb21ldHJ5LmluaXRMZW5ndGhlcyA9IGFyZ19sZW5ndGguRGl2KDIpO1xyXG4gICAgfVxyXG4gICAgQ29sbGlzaW9uUHJpbWl0aXZlX0JveF9BQUJCLnByb3RvdHlwZS5Jbml0aWFsaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgfTtcclxuICAgIENvbGxpc2lvblByaW1pdGl2ZV9Cb3hfQUFCQi5wcm90b3R5cGUuUHJlSW5pdGlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIH07XHJcbiAgICBDb2xsaXNpb25QcmltaXRpdmVfQm94X0FBQkIucHJvdG90eXBlLkdldE1heFBvaW50QW5kTWluUG9pbnQgPSBmdW5jdGlvbiAoYXJnX291dHB1dE1heCwgYXJnX291dHB1dE1pbikge1xyXG4gICAgICAgIGFyZ19vdXRwdXRNYXguZGF0YSA9IHRoaXMuZ2VvbWV0cnkucG9zaXRpb24uQWRkKHRoaXMuZ2VvbWV0cnkuaGFsZkxlbmd0aGVzKS5kYXRhO1xyXG4gICAgICAgIGFyZ19vdXRwdXRNaW4uZGF0YSA9IHRoaXMuZ2VvbWV0cnkucG9zaXRpb24uU3ViKHRoaXMuZ2VvbWV0cnkuaGFsZkxlbmd0aGVzKS5kYXRhO1xyXG4gICAgfTtcclxuICAgIENvbGxpc2lvblByaW1pdGl2ZV9Cb3hfQUFCQi5wcm90b3R5cGUuVXBkYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZ2VvbWV0cnkucG9zaXRpb24gPSB0aGlzLnRyYW5zZm9ybS5Qb3NpdGlvbjtcclxuICAgICAgICB0aGlzLmdlb21ldHJ5LmhhbGZMZW5ndGhlcyA9IHRoaXMuZ2VvbWV0cnkuaW5pdExlbmd0aGVzLk11bHRpcGx5X1ZlYzModGhpcy50cmFuc2Zvcm0uU2NhbGUpO1xyXG4gICAgfTtcclxuICAgIENvbGxpc2lvblByaW1pdGl2ZV9Cb3hfQUFCQi5wcm90b3R5cGUuSXNIaXQgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gb3RoZXIuSXNIaXRCb3hfQUFCQih0aGlzKTtcclxuICAgIH07XHJcbiAgICBDb2xsaXNpb25QcmltaXRpdmVfQm94X0FBQkIucHJvdG90eXBlLklzSGl0Qm94X09CQiA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiBHZW9tZXRyeUhlbHBlcl8xLmRlZmF1bHQuSXNIaXRCb3hfT0JCQm94X0FBQkIodGhpcy5nZW9tZXRyeSwgb3RoZXIuZ2VvbWV0cnkpO1xyXG4gICAgfTtcclxuICAgIENvbGxpc2lvblByaW1pdGl2ZV9Cb3hfQUFCQi5wcm90b3R5cGUuSXNIaXRQb2ludCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiBHZW9tZXRyeUhlbHBlcl8xLmRlZmF1bHQuSXNIaXRQb2ludEJveF9BQUJCKG90aGVyLnBvc2l0aW9uLCB0aGlzLmdlb21ldHJ5KTtcclxuICAgIH07XHJcbiAgICBDb2xsaXNpb25QcmltaXRpdmVfQm94X0FBQkIucHJvdG90eXBlLklzSGl0U3BoZXJlID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIEdlb21ldHJ5SGVscGVyXzEuZGVmYXVsdC5Jc0hpdFNwaGVyZUJveF9BQUJCKG90aGVyLmdlb21ldHJ5LCB0aGlzLmdlb21ldHJ5KTtcclxuICAgIH07XHJcbiAgICBDb2xsaXNpb25QcmltaXRpdmVfQm94X0FBQkIucHJvdG90eXBlLklzSGl0Qm94X0FBQkIgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gR2VvbWV0cnlIZWxwZXJfMS5kZWZhdWx0LklzSGl0Qm94X0FBQkIodGhpcy5nZW9tZXRyeSwgb3RoZXIuZ2VvbWV0cnkpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBDb2xsaXNpb25QcmltaXRpdmVfQm94X0FBQkI7XHJcbn0oKSk7XHJcbjtcclxudmFyIENvbGxpc2lvblByaW1pdGl2ZV9Cb3hfT0JCID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQ29sbGlzaW9uUHJpbWl0aXZlX0JveF9PQkIoYXJnX2xlbmd0aCwgYXJnX3dlYWtfdHJhbnNmb3JtKSB7XHJcbiAgICAgICAgdGhpcy5nZW9tZXRyeSA9IG5ldyBCb3hfT0JCXzEuZGVmYXVsdChhcmdfbGVuZ3RoKTtcclxuICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IGFyZ193ZWFrX3RyYW5zZm9ybTtcclxuICAgICAgICB0aGlzLmdlb21ldHJ5LmluaXRMZW5ndGhlcyA9IGFyZ19sZW5ndGguRGl2KDIpO1xyXG4gICAgfVxyXG4gICAgQ29sbGlzaW9uUHJpbWl0aXZlX0JveF9PQkIucHJvdG90eXBlLkluaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB9O1xyXG4gICAgQ29sbGlzaW9uUHJpbWl0aXZlX0JveF9PQkIucHJvdG90eXBlLlByZUluaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB9O1xyXG4gICAgQ29sbGlzaW9uUHJpbWl0aXZlX0JveF9PQkIucHJvdG90eXBlLkdldE1heFBvaW50QW5kTWluUG9pbnQgPSBmdW5jdGlvbiAoYXJnX291dHB1dE1heCwgYXJnX291dHB1dE1pbikge1xyXG4gICAgICAgIHZhciBhYWJiX2xlZ3RoZXMgPSBHZW9tZXRyeUhlbHBlcl8xLmRlZmF1bHQuR2V0Qm94X09CQkNvbnRhaW5BQUJCTGVuZ3RoKHRoaXMuZ2VvbWV0cnkpO1xyXG4gICAgICAgIGFyZ19vdXRwdXRNYXguZGF0YSA9IHRoaXMuZ2VvbWV0cnkucG9zaXRpb24uQWRkKGFhYmJfbGVndGhlcykuZGF0YTtcclxuICAgICAgICBhcmdfb3V0cHV0TWluLmRhdGEgPSB0aGlzLmdlb21ldHJ5LnBvc2l0aW9uLlN1YihhYWJiX2xlZ3RoZXMpLmRhdGE7XHJcbiAgICB9O1xyXG4gICAgQ29sbGlzaW9uUHJpbWl0aXZlX0JveF9PQkIucHJvdG90eXBlLlVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmdlb21ldHJ5LnBvc2l0aW9uID0gdGhpcy50cmFuc2Zvcm0uUG9zaXRpb247XHJcbiAgICAgICAgdGhpcy5nZW9tZXRyeS5kaXJlY3RzWzBdID0gdGhpcy50cmFuc2Zvcm0uR2V0UmlnaHQoKTtcclxuICAgICAgICB0aGlzLmdlb21ldHJ5LmRpcmVjdHNbMV0gPSB0aGlzLnRyYW5zZm9ybS5HZXRVcCgpO1xyXG4gICAgICAgIHRoaXMuZ2VvbWV0cnkuZGlyZWN0c1syXSA9IHRoaXMudHJhbnNmb3JtLkdldEZyb250KCk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLmdlb21ldHJ5LmRpcmVjdHNbMF0pO1xyXG4gICAgICAgIHRoaXMuZ2VvbWV0cnkuaGFsZkxlbmd0aGVzID0gdGhpcy5nZW9tZXRyeS5pbml0TGVuZ3RoZXMuTXVsdGlwbHlfVmVjMyh0aGlzLnRyYW5zZm9ybS5TY2FsZSk7XHJcbiAgICB9O1xyXG4gICAgQ29sbGlzaW9uUHJpbWl0aXZlX0JveF9PQkIucHJvdG90eXBlLklzSGl0ID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIG90aGVyLklzSGl0Qm94X09CQih0aGlzKTtcclxuICAgIH07XHJcbiAgICBDb2xsaXNpb25QcmltaXRpdmVfQm94X09CQi5wcm90b3R5cGUuSXNIaXRCb3hfT0JCID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIEdlb21ldHJ5SGVscGVyXzEuZGVmYXVsdC5Jc0hpdEJveF9PQkIob3RoZXIuZ2VvbWV0cnksIHRoaXMuZ2VvbWV0cnkpO1xyXG4gICAgfTtcclxuICAgIENvbGxpc2lvblByaW1pdGl2ZV9Cb3hfT0JCLnByb3RvdHlwZS5Jc0hpdFBvaW50ID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIEdlb21ldHJ5SGVscGVyXzEuZGVmYXVsdC5Jc0hpdFBvaW50Qm94X09CQihvdGhlci5wb3NpdGlvbiwgdGhpcy5nZW9tZXRyeSk7XHJcbiAgICB9O1xyXG4gICAgQ29sbGlzaW9uUHJpbWl0aXZlX0JveF9PQkIucHJvdG90eXBlLklzSGl0U3BoZXJlID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIEdlb21ldHJ5SGVscGVyXzEuZGVmYXVsdC5Jc0hpdFNwaGVyZUJveF9PQkIob3RoZXIuZ2VvbWV0cnksIHRoaXMuZ2VvbWV0cnkpO1xyXG4gICAgfTtcclxuICAgIENvbGxpc2lvblByaW1pdGl2ZV9Cb3hfT0JCLnByb3RvdHlwZS5Jc0hpdEJveF9BQUJCID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIEdlb21ldHJ5SGVscGVyXzEuZGVmYXVsdC5Jc0hpdEJveF9PQkJCb3hfQUFCQihvdGhlci5nZW9tZXRyeSwgdGhpcy5nZW9tZXRyeSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENvbGxpc2lvblByaW1pdGl2ZV9Cb3hfT0JCO1xyXG59KCkpO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgVmVjdG9yNF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9NYXRoL1ZlY3RvcjRcIikpO1xyXG52YXIgQ29sb3JDb250cm9sbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQ29sb3JDb250cm9sbGVyKCkge1xyXG4gICAgfVxyXG4gICAgQ29sb3JDb250cm9sbGVyLmhzdmEgPSBmdW5jdGlvbiAoaCwgcywgdiwgYSkge1xyXG4gICAgICAgIGlmIChzID4gMSB8fCB2ID4gMSB8fCBhID4gMSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB0aCA9IGggJSAzNjA7XHJcbiAgICAgICAgdmFyIGkgPSBNYXRoLmZsb29yKHRoIC8gNjApO1xyXG4gICAgICAgIHZhciBmID0gdGggLyA2MCAtIGk7XHJcbiAgICAgICAgdmFyIG0gPSB2ICogKDEgLSBzKTtcclxuICAgICAgICB2YXIgbiA9IHYgKiAoMSAtIHMgKiBmKTtcclxuICAgICAgICB2YXIgayA9IHYgKiAoMSAtIHMgKiAoMSAtIGYpKTtcclxuICAgICAgICB2YXIgY29sb3I7XHJcbiAgICAgICAgaWYgKCEocyA+IDApICYmICEocyA8IDApKSB7XHJcbiAgICAgICAgICAgIGNvbG9yID0gbmV3IFZlY3RvcjRfMS5kZWZhdWx0KHYsIHYsIHYsIGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIHIgPSBuZXcgQXJyYXkodiwgbiwgbSwgbSwgaywgdik7XHJcbiAgICAgICAgICAgIHZhciBnID0gbmV3IEFycmF5KGssIHYsIHYsIG4sIG0sIG0pO1xyXG4gICAgICAgICAgICB2YXIgYiA9IG5ldyBBcnJheShtLCBtLCBrLCB2LCB2LCBuKTtcclxuICAgICAgICAgICAgY29sb3IgPSBuZXcgVmVjdG9yNF8xLmRlZmF1bHQocltpXSwgZ1tpXSwgYltpXSwgYSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjb2xvcjtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQ29sb3JDb250cm9sbGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBDb2xvckNvbnRyb2xsZXI7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBFYXNpbmcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBFYXNpbmcoKSB7XHJcbiAgICB9XHJcbiAgICBFYXNpbmcuRWFzZUluU2luZSA9IGZ1bmN0aW9uICh4KSB7XHJcbiAgICAgICAgcmV0dXJuIDEgLSBNYXRoLmNvcygoeCAqIE1hdGguUEkpIC8gMik7XHJcbiAgICB9O1xyXG4gICAgRWFzaW5nLkVhc2VPdXRTaW5lID0gZnVuY3Rpb24gKHgpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5zaW4oKHggKiBNYXRoLlBJKSAvIDIpO1xyXG4gICAgfTtcclxuICAgIEVhc2luZy5FYXNlSW5PdXRTaW5lID0gZnVuY3Rpb24gKHgpIHtcclxuICAgICAgICByZXR1cm4gLShNYXRoLmNvcyhNYXRoLlBJICogeCkgLSAxKSAvIDI7XHJcbiAgICB9O1xyXG4gICAgRWFzaW5nLkVhc2VJblF1YWQgPSBmdW5jdGlvbiAoeCkge1xyXG4gICAgICAgIHJldHVybiB4ICogeDtcclxuICAgIH07XHJcbiAgICBFYXNpbmcuRWFzZU91dFF1YWQgPSBmdW5jdGlvbiAoeCkge1xyXG4gICAgICAgIHJldHVybiAxIC0gKDEgLSB4KSAqICgxIC0geCk7XHJcbiAgICB9O1xyXG4gICAgRWFzaW5nLkVhc2VJbk91dFF1YWQgPSBmdW5jdGlvbiAoeCkge1xyXG4gICAgICAgIHJldHVybiB4IDwgMC41ID8gMiAqIHggKiB4IDogMSAtIE1hdGgucG93KC0yICogeCArIDIsIDIpIC8gMjtcclxuICAgIH07XHJcbiAgICBFYXNpbmcuRWFzZUluQ3ViaWMgPSBmdW5jdGlvbiAoeCkge1xyXG4gICAgICAgIHJldHVybiB4ICogeCAqIHg7XHJcbiAgICB9O1xyXG4gICAgRWFzaW5nLkVhc2VPdXRDdWJpYyA9IGZ1bmN0aW9uICh4KSB7XHJcbiAgICAgICAgcmV0dXJuIDEgLSBNYXRoLnBvdygxIC0geCwgMyk7XHJcbiAgICB9O1xyXG4gICAgRWFzaW5nLkVhc2VJbk91dEN1YmljID0gZnVuY3Rpb24gKHgpIHtcclxuICAgICAgICByZXR1cm4geCA8IDAuNSA/IDQgKiB4ICogeCAqIHggOiAxIC0gTWF0aC5wb3coLTIgKiB4ICsgMiwgMykgLyAyO1xyXG4gICAgfTtcclxuICAgIEVhc2luZy5FYXNlSW5RdWFydCA9IGZ1bmN0aW9uICh4KSB7XHJcbiAgICAgICAgcmV0dXJuIHggKiB4ICogeCAqIHg7XHJcbiAgICB9O1xyXG4gICAgRWFzaW5nLkVhc2VPdXRRdWFydCA9IGZ1bmN0aW9uICh4KSB7XHJcbiAgICAgICAgcmV0dXJuIDEgLSBNYXRoLnBvdygxIC0geCwgNCk7XHJcbiAgICB9O1xyXG4gICAgRWFzaW5nLkVhc2VJbk91dFF1YXJ0ID0gZnVuY3Rpb24gKHgpIHtcclxuICAgICAgICByZXR1cm4geCA8IDAuNSA/IDggKiB4ICogeCAqIHggKiB4IDogMSAtIE1hdGgucG93KC0yICogeCArIDIsIDQpIC8gMjtcclxuICAgIH07XHJcbiAgICBFYXNpbmcuRWFzZUluQ2lyYyA9IGZ1bmN0aW9uICh4KSB7XHJcbiAgICAgICAgcmV0dXJuIDEgLSBNYXRoLnNxcnQoMSAtIE1hdGgucG93KHgsIDIpKTtcclxuICAgIH07XHJcbiAgICBFYXNpbmcuRWFzZU91dENpcmMgPSBmdW5jdGlvbiAoeCkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQoMSAtIE1hdGgucG93KHggLSAxLCAyKSk7XHJcbiAgICB9O1xyXG4gICAgRWFzaW5nLkVhc2VJbk91dENpcmMgPSBmdW5jdGlvbiAoeCkge1xyXG4gICAgICAgIHJldHVybiB4IDwgMC41XHJcbiAgICAgICAgICAgID8gKDEgLSBNYXRoLnNxcnQoMSAtIE1hdGgucG93KDIgKiB4LCAyKSkpIC8gMlxyXG4gICAgICAgICAgICA6IChNYXRoLnNxcnQoMSAtIE1hdGgucG93KC0yICogeCArIDIsIDIpKSArIDEpIC8gMjtcclxuICAgIH07XHJcbiAgICBFYXNpbmcuRWFzZUluQmFjayA9IGZ1bmN0aW9uICh4KSB7XHJcbiAgICAgICAgdmFyIGMxID0gMS43MDE1ODtcclxuICAgICAgICB2YXIgYzMgPSBjMSArIDE7XHJcbiAgICAgICAgcmV0dXJuIGMzICogeCAqIHggKiB4IC0gYzEgKiB4ICogeDtcclxuICAgIH07XHJcbiAgICBFYXNpbmcuRWFzZU91dEJhY2sgPSBmdW5jdGlvbiAoeCkge1xyXG4gICAgICAgIHZhciBjMSA9IDEuNzAxNTg7XHJcbiAgICAgICAgdmFyIGMzID0gYzEgKyAxO1xyXG4gICAgICAgIHJldHVybiAxICsgYzMgKiBNYXRoLnBvdyh4IC0gMSwgMykgKyBjMSAqIE1hdGgucG93KHggLSAxLCAyKTtcclxuICAgIH07XHJcbiAgICBFYXNpbmcuRWFzZUluT3V0QmFjayA9IGZ1bmN0aW9uICh4KSB7XHJcbiAgICAgICAgdmFyIGMxID0gMS43MDE1ODtcclxuICAgICAgICB2YXIgYzIgPSBjMSAqIDEuNTI1O1xyXG4gICAgICAgIHJldHVybiB4IDwgMC41XHJcbiAgICAgICAgICAgID8gKE1hdGgucG93KDIgKiB4LCAyKSAqICgoYzIgKyAxKSAqIDIgKiB4IC0gYzIpKSAvIDJcclxuICAgICAgICAgICAgOiAoTWF0aC5wb3coMiAqIHggLSAyLCAyKSAqICgoYzIgKyAxKSAqICh4ICogMiAtIDIpICsgYzIpICsgMikgLyAyO1xyXG4gICAgfTtcclxuICAgIEVhc2luZy5FYXNlSW5FbGFzdGljID0gZnVuY3Rpb24gKHgpIHtcclxuICAgICAgICB2YXIgYzQgPSAoMiAqIE1hdGguUEkpIC8gMztcclxuICAgICAgICByZXR1cm4geCA9PT0gMFxyXG4gICAgICAgICAgICA/IDBcclxuICAgICAgICAgICAgOiB4ID09PSAxXHJcbiAgICAgICAgICAgICAgICA/IDFcclxuICAgICAgICAgICAgICAgIDogLU1hdGgucG93KDIsIDEwICogeCAtIDEwKSAqIE1hdGguc2luKCh4ICogMTAgLSAxMC43NSkgKiBjNCk7XHJcbiAgICB9O1xyXG4gICAgRWFzaW5nLkVhc2VPdXRFbGFzdGljID0gZnVuY3Rpb24gKHgpIHtcclxuICAgICAgICB2YXIgYzQgPSAoMiAqIE1hdGguUEkpIC8gMztcclxuICAgICAgICByZXR1cm4geCA9PT0gMFxyXG4gICAgICAgICAgICA/IDBcclxuICAgICAgICAgICAgOiB4ID09PSAxXHJcbiAgICAgICAgICAgICAgICA/IDFcclxuICAgICAgICAgICAgICAgIDogTWF0aC5wb3coMiwgLTEwICogeCkgKiBNYXRoLnNpbigoeCAqIDEwIC0gMC43NSkgKiBjNCkgKyAxO1xyXG4gICAgfTtcclxuICAgIEVhc2luZy5FYXNlSW5PdXRFbGFzdGljID0gZnVuY3Rpb24gKHgpIHtcclxuICAgICAgICB2YXIgYzUgPSAoMiAqIE1hdGguUEkpIC8gNC41O1xyXG4gICAgICAgIHJldHVybiB4ID09PSAwXHJcbiAgICAgICAgICAgID8gMFxyXG4gICAgICAgICAgICA6IHggPT09IDFcclxuICAgICAgICAgICAgICAgID8gMVxyXG4gICAgICAgICAgICAgICAgOiB4IDwgMC41XHJcbiAgICAgICAgICAgICAgICAgICAgPyAtKE1hdGgucG93KDIsIDIwICogeCAtIDEwKSAqIE1hdGguc2luKCgyMCAqIHggLSAxMS4xMjUpICogYzUpKSAvIDJcclxuICAgICAgICAgICAgICAgICAgICA6IChNYXRoLnBvdygyLCAtMjAgKiB4ICsgMTApICogTWF0aC5zaW4oKDIwICogeCAtIDExLjEyNSkgKiBjNSkpIC8gMiArIDE7XHJcbiAgICB9O1xyXG4gICAgRWFzaW5nLkVhc2VJblF1aW50ID0gZnVuY3Rpb24gKHgpIHtcclxuICAgICAgICByZXR1cm4geCAqIHggKiB4ICogeCAqIHg7XHJcbiAgICB9O1xyXG4gICAgRWFzaW5nLkVhc2VPdXRRdWludCA9IGZ1bmN0aW9uICh4KSB7XHJcbiAgICAgICAgcmV0dXJuIDEgLSBNYXRoLnBvdygxIC0geCwgNSk7XHJcbiAgICB9O1xyXG4gICAgRWFzaW5nLkVhc2VJbk91dFF1aW50ID0gZnVuY3Rpb24gKHgpIHtcclxuICAgICAgICByZXR1cm4geCA8IDAuNSA/IDE2ICogeCAqIHggKiB4ICogeCAqIHggOiAxIC0gTWF0aC5wb3coLTIgKiB4ICsgMiwgNSkgLyAyO1xyXG4gICAgfTtcclxuICAgIEVhc2luZy5FYXNlSW5FeHBvID0gZnVuY3Rpb24gKHgpIHtcclxuICAgICAgICByZXR1cm4geCA9PT0gMCA/IDAgOiBNYXRoLnBvdygyLCAxMCAqIHggLSAxMCk7XHJcbiAgICB9O1xyXG4gICAgRWFzaW5nLkVhc2VPdXRFeHBvID0gZnVuY3Rpb24gKHgpIHtcclxuICAgICAgICByZXR1cm4geCA9PT0gMSA/IDEgOiAxIC0gTWF0aC5wb3coMiwgLTEwICogeCk7XHJcbiAgICB9O1xyXG4gICAgRWFzaW5nLkVhc2VJbk91dEV4cG8gPSBmdW5jdGlvbiAoeCkge1xyXG4gICAgICAgIHJldHVybiB4ID09PSAwXHJcbiAgICAgICAgICAgID8gMFxyXG4gICAgICAgICAgICA6IHggPT09IDFcclxuICAgICAgICAgICAgICAgID8gMVxyXG4gICAgICAgICAgICAgICAgOiB4IDwgMC41ID8gTWF0aC5wb3coMiwgMjAgKiB4IC0gMTApIC8gMlxyXG4gICAgICAgICAgICAgICAgICAgIDogKDIgLSBNYXRoLnBvdygyLCAtMjAgKiB4ICsgMTApKSAvIDI7XHJcbiAgICB9O1xyXG4gICAgRWFzaW5nLlBhcmFib2xhID0gZnVuY3Rpb24gKHgpIHtcclxuICAgICAgICByZXR1cm4gLSh4IC0gMC41KSAqICh4IC0gMC41KSAqIDQgKyAxO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBFYXNpbmc7XHJcbn0oKSk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IEVhc2luZztcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIEZpbGVMb2FkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGaWxlTG9hZGVyKCkge1xyXG4gICAgfVxyXG4gICAgRmlsZUxvYWRlci5Mb2FkVGV4dCA9IGZ1bmN0aW9uIChhcmdfZmlsZVBhdGgsIGlzQXN5bmNoKSB7XHJcbiAgICAgICAgdmFyIHhtbEh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICBpZiAoaXNBc3luY2gpXHJcbiAgICAgICAgICAgIHhtbEh0dHAub3BlbihcIkdFVFwiLCBhcmdfZmlsZVBhdGgsIGlzQXN5bmNoKTtcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgeG1sSHR0cC5vcGVuKFwiR0VUXCIsIGFyZ19maWxlUGF0aCwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB4bWxIdHRwLnNlbmQobnVsbCk7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB4bWxIdHRwLnJlc3BvbnNlVGV4dDtcclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgIH07XHJcbiAgICBGaWxlTG9hZGVyLkxvYWRCaW4gPSBmdW5jdGlvbiAoYXJnX2ZpbGVQYXRoLCBhcmdfb3V0KSB7XHJcbiAgICAgICAgdmFyIHhtbEh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICB4bWxIdHRwLm9wZW4oXCJHRVRcIiwgYXJnX2ZpbGVQYXRoLCB0cnVlKTtcclxuICAgICAgICB4bWxIdHRwLnJlc3BvbnNlVHlwZSA9IFwiYXJyYXlidWZmZXJcIjtcclxuICAgICAgICB4bWxIdHRwLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgT25CaW5Mb2FkKGFyZ19vdXQsIHhtbEh0dHAucmVzcG9uc2UpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgeG1sSHR0cC5zZW5kKG51bGwpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBGaWxlTG9hZGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBGaWxlTG9hZGVyO1xyXG5mdW5jdGlvbiBPbkJpbkxvYWQoYXJnX291dCwgYXJnX2FyeUJ1ZmZlcikge1xyXG4gICAgYXJnX291dC5idWZmZXIgPSBhcmdfYXJ5QnVmZmVyO1xyXG4gICAgYXJnX291dC5Jbml0aWFsaXplKCk7XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIENvbG9yQ29udHJvbGxlcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL0NvbG9yQ29udHJvbGxlclwiKSk7XHJcbnZhciBHZW9tZXRyeUdlbmVyYXRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEdlb21ldHJ5R2VuZXJhdGVyKCkge1xyXG4gICAgfVxyXG4gICAgR2VvbWV0cnlHZW5lcmF0ZXIuQ3JlYXRlVG9ydXMgPSBmdW5jdGlvbiAocm93LCBjb2x1bW4sIGlyYWQsIG9yYWQsIGNvbG9yKSB7XHJcbiAgICAgICAgdmFyIHBvcyA9IG5ldyBBcnJheSgpLCBub3IgPSBuZXcgQXJyYXkoKSwgY29sID0gbmV3IEFycmF5KCksIHN0ID0gbmV3IEFycmF5KCksIGlkeCA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IHJvdzsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciByID0gTWF0aC5QSSAqIDIgLyByb3cgKiBpO1xyXG4gICAgICAgICAgICB2YXIgcnIgPSBNYXRoLmNvcyhyKTtcclxuICAgICAgICAgICAgdmFyIHJ5ID0gTWF0aC5zaW4ocik7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGlpID0gMDsgaWkgPD0gY29sdW1uOyBpaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdHIgPSBNYXRoLlBJICogMiAvIGNvbHVtbiAqIGlpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHR4ID0gKHJyICogaXJhZCArIG9yYWQpICogTWF0aC5jb3ModHIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHR5ID0gcnkgKiBpcmFkO1xyXG4gICAgICAgICAgICAgICAgdmFyIHR6ID0gKHJyICogaXJhZCArIG9yYWQpICogTWF0aC5zaW4odHIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJ4ID0gcnIgKiBNYXRoLmNvcyh0cik7XHJcbiAgICAgICAgICAgICAgICB2YXIgcnogPSByciAqIE1hdGguc2luKHRyKTtcclxuICAgICAgICAgICAgICAgIHZhciB0YztcclxuICAgICAgICAgICAgICAgIGlmIChjb2xvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRjID0gY29sb3I7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0YyA9IENvbG9yQ29udHJvbGxlcl8xLmRlZmF1bHQuaHN2YSgzNjAgLyBjb2x1bW4gKiBpaSwgMSwgMSwgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgcnMgPSAxIC8gY29sdW1uICogaWk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcnQgPSAxIC8gcm93ICogaSArIDAuNTtcclxuICAgICAgICAgICAgICAgIGlmIChydCA+IDEuMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJ0IC09IDEuMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJ0ID0gMS4wIC0gcnQ7XHJcbiAgICAgICAgICAgICAgICBwb3MucHVzaCh0eCwgdHksIHR6KTtcclxuICAgICAgICAgICAgICAgIG5vci5wdXNoKHJ4LCByeSwgcnopO1xyXG4gICAgICAgICAgICAgICAgY29sLnB1c2godGMueCwgdGMueSwgdGMueiwgdGMudyk7XHJcbiAgICAgICAgICAgICAgICBzdC5wdXNoKHJzLCBydCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHJvdzsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAoaWkgPSAwOyBpaSA8IGNvbHVtbjsgaWkrKykge1xyXG4gICAgICAgICAgICAgICAgciA9IChjb2x1bW4gKyAxKSAqIGkgKyBpaTtcclxuICAgICAgICAgICAgICAgIGlkeC5wdXNoKHIsIHIgKyBjb2x1bW4gKyAxLCByICsgMSk7XHJcbiAgICAgICAgICAgICAgICBpZHgucHVzaChyICsgY29sdW1uICsgMSwgciArIGNvbHVtbiArIDIsIHIgKyAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgb3V0cHV0ID0geyBwOiBwb3MsIG46IG5vciwgYzogY29sLCB1djogc3QsIGk6IGlkeCB9O1xyXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9O1xyXG4gICAgR2VvbWV0cnlHZW5lcmF0ZXIuQ3JlYXRlU3BoZXJlID0gZnVuY3Rpb24gKHJvdywgY29sdW1uLCByYWQsIGNvbG9yKSB7XHJcbiAgICAgICAgdmFyIHBvcyA9IG5ldyBBcnJheSgpLCBub3IgPSBuZXcgQXJyYXkoKSwgY29sID0gbmV3IEFycmF5KCksIHN0ID0gbmV3IEFycmF5KCksIGlkeCA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IHJvdzsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciByID0gTWF0aC5QSSAvIHJvdyAqIGk7XHJcbiAgICAgICAgICAgIHZhciByeSA9IE1hdGguY29zKHIpO1xyXG4gICAgICAgICAgICB2YXIgcnIgPSBNYXRoLnNpbihyKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaWkgPSAwOyBpaSA8PSBjb2x1bW47IGlpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciB0ciA9IE1hdGguUEkgKiAyIC8gY29sdW1uICogaWk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdHggPSByciAqIHJhZCAqIE1hdGguY29zKHRyKTtcclxuICAgICAgICAgICAgICAgIHZhciB0eSA9IHJ5ICogcmFkO1xyXG4gICAgICAgICAgICAgICAgdmFyIHR6ID0gcnIgKiByYWQgKiBNYXRoLnNpbih0cik7XHJcbiAgICAgICAgICAgICAgICB2YXIgcnggPSByciAqIE1hdGguY29zKHRyKTtcclxuICAgICAgICAgICAgICAgIHZhciByeiA9IHJyICogTWF0aC5zaW4odHIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRjO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGMgPSBjb2xvcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRjID0gQ29sb3JDb250cm9sbGVyXzEuZGVmYXVsdC5oc3ZhKDM2MCAvIHJvdyAqIGksIDAuNSwgMC41LCAxLjApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcG9zLnB1c2godHgsIHR5LCB0eik7XHJcbiAgICAgICAgICAgICAgICBub3IucHVzaChyeCwgcnksIHJ6KTtcclxuICAgICAgICAgICAgICAgIGNvbC5wdXNoKHRjLmRhdGFbMF0sIHRjLmRhdGFbMV0sIHRjLmRhdGFbMl0sIHRjLmRhdGFbM10pO1xyXG4gICAgICAgICAgICAgICAgc3QucHVzaCgxIC0gMSAvIGNvbHVtbiAqIGlpLCAxIC8gcm93ICogaSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgciA9IDA7XHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHJvdzsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAoaWkgPSAwOyBpaSA8IGNvbHVtbjsgaWkrKykge1xyXG4gICAgICAgICAgICAgICAgciA9IChjb2x1bW4gKyAxKSAqIGkgKyBpaTtcclxuICAgICAgICAgICAgICAgIGlkeC5wdXNoKHIsIHIgKyAxLCByICsgY29sdW1uICsgMik7XHJcbiAgICAgICAgICAgICAgICBpZHgucHVzaChyLCByICsgY29sdW1uICsgMiwgciArIGNvbHVtbiArIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IHA6IHBvcywgbjogbm9yLCBjOiBjb2wsIHV2OiBzdCwgaTogaWR4IH07XHJcbiAgICB9O1xyXG4gICAgR2VvbWV0cnlHZW5lcmF0ZXIuQ3JlYXRlQ3ViZSA9IGZ1bmN0aW9uIChzaWRlLCBjb2xvcikge1xyXG4gICAgICAgIHZhciBocyA9IHNpZGUgKiAwLjU7XHJcbiAgICAgICAgdmFyIHBvcyA9IFtcclxuICAgICAgICAgICAgLWhzLCAtaHMsIGhzLCBocywgLWhzLCBocywgaHMsIGhzLCBocywgLWhzLCBocywgaHMsXHJcbiAgICAgICAgICAgIC1ocywgLWhzLCAtaHMsIC1ocywgaHMsIC1ocywgaHMsIGhzLCAtaHMsIGhzLCAtaHMsIC1ocyxcclxuICAgICAgICAgICAgLWhzLCBocywgLWhzLCAtaHMsIGhzLCBocywgaHMsIGhzLCBocywgaHMsIGhzLCAtaHMsXHJcbiAgICAgICAgICAgIC1ocywgLWhzLCAtaHMsIGhzLCAtaHMsIC1ocywgaHMsIC1ocywgaHMsIC1ocywgLWhzLCBocyxcclxuICAgICAgICAgICAgaHMsIC1ocywgLWhzLCBocywgaHMsIC1ocywgaHMsIGhzLCBocywgaHMsIC1ocywgaHMsXHJcbiAgICAgICAgICAgIC1ocywgLWhzLCAtaHMsIC1ocywgLWhzLCBocywgLWhzLCBocywgaHMsIC1ocywgaHMsIC1oc1xyXG4gICAgICAgIF07XHJcbiAgICAgICAgdmFyIG5vciA9IFtcclxuICAgICAgICAgICAgLTEuMCwgLTEuMCwgMS4wLCAxLjAsIC0xLjAsIDEuMCwgMS4wLCAxLjAsIDEuMCwgLTEuMCwgMS4wLCAxLjAsXHJcbiAgICAgICAgICAgIC0xLjAsIC0xLjAsIC0xLjAsIC0xLjAsIDEuMCwgLTEuMCwgMS4wLCAxLjAsIC0xLjAsIDEuMCwgLTEuMCwgLTEuMCxcclxuICAgICAgICAgICAgLTEuMCwgMS4wLCAtMS4wLCAtMS4wLCAxLjAsIDEuMCwgMS4wLCAxLjAsIDEuMCwgMS4wLCAxLjAsIC0xLjAsXHJcbiAgICAgICAgICAgIC0xLjAsIC0xLjAsIC0xLjAsIDEuMCwgLTEuMCwgLTEuMCwgMS4wLCAtMS4wLCAxLjAsIC0xLjAsIC0xLjAsIDEuMCxcclxuICAgICAgICAgICAgMS4wLCAtMS4wLCAtMS4wLCAxLjAsIDEuMCwgLTEuMCwgMS4wLCAxLjAsIDEuMCwgMS4wLCAtMS4wLCAxLjAsXHJcbiAgICAgICAgICAgIC0xLjAsIC0xLjAsIC0xLjAsIC0xLjAsIC0xLjAsIDEuMCwgLTEuMCwgMS4wLCAxLjAsIC0xLjAsIDEuMCwgLTEuMFxyXG4gICAgICAgIF07XHJcbiAgICAgICAgdmFyIGNvbCA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zLmxlbmd0aCAvIDM7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoY29sb3IpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0YyA9IGNvbG9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGMgPSBDb2xvckNvbnRyb2xsZXJfMS5kZWZhdWx0LmhzdmEoMzYwIC8gcG9zLmxlbmd0aCAvIDMgKiBpLCAxLCAxLCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb2wucHVzaCh0Yy54LCB0Yy55LCB0Yy56LCB0Yy53KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHN0ID0gW1xyXG4gICAgICAgICAgICAwLjAsIDAuMCwgMS4wLCAwLjAsIDEuMCwgMS4wLCAwLjAsIDEuMCxcclxuICAgICAgICAgICAgMC4wLCAwLjAsIDEuMCwgMC4wLCAxLjAsIDEuMCwgMC4wLCAxLjAsXHJcbiAgICAgICAgICAgIDAuMCwgMC4wLCAxLjAsIDAuMCwgMS4wLCAxLjAsIDAuMCwgMS4wLFxyXG4gICAgICAgICAgICAwLjAsIDAuMCwgMS4wLCAwLjAsIDEuMCwgMS4wLCAwLjAsIDEuMCxcclxuICAgICAgICAgICAgMC4wLCAwLjAsIDEuMCwgMC4wLCAxLjAsIDEuMCwgMC4wLCAxLjAsXHJcbiAgICAgICAgICAgIDAuMCwgMC4wLCAxLjAsIDAuMCwgMS4wLCAxLjAsIDAuMCwgMS4wXHJcbiAgICAgICAgXTtcclxuICAgICAgICB2YXIgaWR4ID0gW1xyXG4gICAgICAgICAgICAwLCAxLCAyLCAwLCAyLCAzLFxyXG4gICAgICAgICAgICA0LCA1LCA2LCA0LCA2LCA3LFxyXG4gICAgICAgICAgICA4LCA5LCAxMCwgOCwgMTAsIDExLFxyXG4gICAgICAgICAgICAxMiwgMTMsIDE0LCAxMiwgMTQsIDE1LFxyXG4gICAgICAgICAgICAxNiwgMTcsIDE4LCAxNiwgMTgsIDE5LFxyXG4gICAgICAgICAgICAyMCwgMjEsIDIyLCAyMCwgMjIsIDIzXHJcbiAgICAgICAgXTtcclxuICAgICAgICByZXR1cm4geyBwOiBwb3MsIG46IG5vciwgYzogY29sLCB1djogc3QsIGk6IGlkeCB9O1xyXG4gICAgfTtcclxuICAgIEdlb21ldHJ5R2VuZXJhdGVyLkNyZWF0ZVBsYW5lID0gZnVuY3Rpb24gKGFyZ19zaXplLCBpc1JldmVyc2UsIGFyZ19jb2xvcikge1xyXG4gICAgICAgIHZhciBwb3MgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICB2YXIgbm9yID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgdmFyIGNvbCA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIHZhciBpZHggPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICB2YXIgdXYgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICBwb3MgPSBbXHJcbiAgICAgICAgICAgIC1hcmdfc2l6ZS54LCBhcmdfc2l6ZS55LCAwLjAsXHJcbiAgICAgICAgICAgIGFyZ19zaXplLngsIGFyZ19zaXplLnksIDAuMCxcclxuICAgICAgICAgICAgLWFyZ19zaXplLngsIC1hcmdfc2l6ZS55LCAwLjAsXHJcbiAgICAgICAgICAgIGFyZ19zaXplLngsIC1hcmdfc2l6ZS55LCAwLjAsXHJcbiAgICAgICAgXTtcclxuICAgICAgICBub3IgPSBbXHJcbiAgICAgICAgICAgIDAuMCwgMC4wLCAtMS4wLFxyXG4gICAgICAgICAgICAwLjAsIDAuMCwgLTEuMCxcclxuICAgICAgICAgICAgMC4wLCAwLjAsIC0xLjAsXHJcbiAgICAgICAgICAgIDAuMCwgMC4wLCAtMS4wLFxyXG4gICAgICAgIF07XHJcbiAgICAgICAgaWYgKGFyZ19jb2xvcikge1xyXG4gICAgICAgICAgICBjb2wgPSBbXHJcbiAgICAgICAgICAgICAgICBhcmdfY29sb3IueCwgYXJnX2NvbG9yLnksIGFyZ19jb2xvci56LCBhcmdfY29sb3IudyxcclxuICAgICAgICAgICAgICAgIGFyZ19jb2xvci54LCBhcmdfY29sb3IueSwgYXJnX2NvbG9yLnosIGFyZ19jb2xvci53LFxyXG4gICAgICAgICAgICAgICAgYXJnX2NvbG9yLngsIGFyZ19jb2xvci55LCBhcmdfY29sb3IueiwgYXJnX2NvbG9yLncsXHJcbiAgICAgICAgICAgICAgICBhcmdfY29sb3IueCwgYXJnX2NvbG9yLnksIGFyZ19jb2xvci56LCBhcmdfY29sb3Iud1xyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29sID0gWzEsIDEsIDEsIDEsXHJcbiAgICAgICAgICAgICAgICAxLCAxLCAxLCAxLFxyXG4gICAgICAgICAgICAgICAgMSwgMSwgMSwgMSxcclxuICAgICAgICAgICAgICAgIDEsIDEsIDEsIDFcclxuICAgICAgICAgICAgXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWR4ID0gW1xyXG4gICAgICAgICAgICAyLCAzLCAxLFxyXG4gICAgICAgICAgICAyLCAxLCAwLFxyXG4gICAgICAgIF07XHJcbiAgICAgICAgaWYgKGlzUmV2ZXJzZSlcclxuICAgICAgICAgICAgdXYgPSBbXHJcbiAgICAgICAgICAgICAgICAwLjAsIDEuMCxcclxuICAgICAgICAgICAgICAgIDEuMCwgMS4wLFxyXG4gICAgICAgICAgICAgICAgMC4wLCAwLjAsXHJcbiAgICAgICAgICAgICAgICAxLjAsIDAuMFxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB1diA9IFtcclxuICAgICAgICAgICAgICAgIDAuMCwgMC4wLFxyXG4gICAgICAgICAgICAgICAgMS4wLCAwLjAsXHJcbiAgICAgICAgICAgICAgICAwLjAsIDEuMCxcclxuICAgICAgICAgICAgICAgIDEuMCwgMS4wXHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IHA6IHBvcywgbjogbm9yLCBjOiBjb2wsIGk6IGlkeCwgdXY6IHV2IH07XHJcbiAgICB9O1xyXG4gICAgR2VvbWV0cnlHZW5lcmF0ZXIuQ3JlYXRlQmFyID0gZnVuY3Rpb24gKGFyZ19zaXplLCBpc1JldmVyc2UsIGFyZ19jb2xvcikge1xyXG4gICAgICAgIHZhciBwb3MgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICB2YXIgbm9yID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgdmFyIGNvbCA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIHZhciBpZHggPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICB2YXIgdXYgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICBwb3MgPSBbXHJcbiAgICAgICAgICAgIC1hcmdfc2l6ZS54LCAwLCAwLjAsXHJcbiAgICAgICAgICAgIGFyZ19zaXplLngsIDAsIDAuMCxcclxuICAgICAgICAgICAgLWFyZ19zaXplLngsIC1hcmdfc2l6ZS55ICogMiwgMC4wLFxyXG4gICAgICAgICAgICBhcmdfc2l6ZS54LCAtYXJnX3NpemUueSAqIDIsIDAuMCxcclxuICAgICAgICBdO1xyXG4gICAgICAgIG5vciA9IFtcclxuICAgICAgICAgICAgMC4wLCAwLjAsIC0xLjAsXHJcbiAgICAgICAgICAgIDAuMCwgMC4wLCAtMS4wLFxyXG4gICAgICAgICAgICAwLjAsIDAuMCwgLTEuMCxcclxuICAgICAgICAgICAgMC4wLCAwLjAsIC0xLjAsXHJcbiAgICAgICAgXTtcclxuICAgICAgICBpZiAoYXJnX2NvbG9yKSB7XHJcbiAgICAgICAgICAgIGNvbCA9IFtcclxuICAgICAgICAgICAgICAgIGFyZ19jb2xvci54LCBhcmdfY29sb3IueSwgYXJnX2NvbG9yLnosIGFyZ19jb2xvci53LFxyXG4gICAgICAgICAgICAgICAgYXJnX2NvbG9yLngsIGFyZ19jb2xvci55LCBhcmdfY29sb3IueiwgYXJnX2NvbG9yLncsXHJcbiAgICAgICAgICAgICAgICBhcmdfY29sb3IueCwgYXJnX2NvbG9yLnksIGFyZ19jb2xvci56LCBhcmdfY29sb3IudyxcclxuICAgICAgICAgICAgICAgIGFyZ19jb2xvci54LCBhcmdfY29sb3IueSwgYXJnX2NvbG9yLnosIGFyZ19jb2xvci53XHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb2wgPSBbMSwgMSwgMSwgMSxcclxuICAgICAgICAgICAgICAgIDEsIDEsIDEsIDEsXHJcbiAgICAgICAgICAgICAgICAxLCAxLCAxLCAxLFxyXG4gICAgICAgICAgICAgICAgMSwgMSwgMSwgMVxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZHggPSBbXHJcbiAgICAgICAgICAgIDIsIDMsIDEsXHJcbiAgICAgICAgICAgIDIsIDEsIDAsXHJcbiAgICAgICAgXTtcclxuICAgICAgICBpZiAoaXNSZXZlcnNlKVxyXG4gICAgICAgICAgICB1diA9IFtcclxuICAgICAgICAgICAgICAgIDAuMCwgMS4wLFxyXG4gICAgICAgICAgICAgICAgMS4wLCAxLjAsXHJcbiAgICAgICAgICAgICAgICAwLjAsIDAuMCxcclxuICAgICAgICAgICAgICAgIDEuMCwgMC4wXHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHV2ID0gW1xyXG4gICAgICAgICAgICAgICAgMC4wLCAwLjAsXHJcbiAgICAgICAgICAgICAgICAxLjAsIDAuMCxcclxuICAgICAgICAgICAgICAgIDAuMCwgMS4wLFxyXG4gICAgICAgICAgICAgICAgMS4wLCAxLjBcclxuICAgICAgICAgICAgXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHsgcDogcG9zLCBuOiBub3IsIGM6IGNvbCwgaTogaWR4LCB1djogdXYgfTtcclxuICAgIH07XHJcbiAgICBHZW9tZXRyeUdlbmVyYXRlci5DcmVhdGVUZXh0R2VvbWV0cnkgPSBmdW5jdGlvbiAodGV4dExlbmd0aCkge1xyXG4gICAgICAgIHZhciBwb3MgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICB2YXIgaWR4ID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgdmFyIHV2ID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgdmFyIHVuaXQgPSAxLjA7XHJcbiAgICAgICAgdmFyIGhhbGYgPSB0ZXh0TGVuZ3RoIC8gMi4wO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGV4dExlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHBvcy5wdXNoKC11bml0ICogMC41ICsgaSAqIHVuaXQgLSB1bml0ICogaGFsZiwgdW5pdCwgMC4wKTtcclxuICAgICAgICAgICAgcG9zLnB1c2godW5pdCAqIDAuNSArIGkgKiB1bml0IC0gdW5pdCAqIGhhbGYsIHVuaXQsIDAuMCk7XHJcbiAgICAgICAgICAgIHBvcy5wdXNoKC11bml0ICogMC41ICsgaSAqIHVuaXQgLSB1bml0ICogaGFsZiwgLXVuaXQsIDAuMCk7XHJcbiAgICAgICAgICAgIHBvcy5wdXNoKHVuaXQgKiAwLjUgKyBpICogdW5pdCAtIHVuaXQgKiBoYWxmLCAtdW5pdCwgMC4wKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZXh0TGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWR4LnB1c2goMiArIGkgKiA0LCAzICsgaSAqIDQsIDEgKyBpICogNCk7XHJcbiAgICAgICAgICAgIGlkeC5wdXNoKDIgKyBpICogNCwgMSArIGkgKiA0LCAwICsgaSAqIDQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRleHRMZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB1di5wdXNoKDAuMCwgMS4wKTtcclxuICAgICAgICAgICAgdXYucHVzaCgxLjAsIDEuMCk7XHJcbiAgICAgICAgICAgIHV2LnB1c2goMC4wLCAwLjApO1xyXG4gICAgICAgICAgICB1di5wdXNoKDEuMCwgMC4wKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHsgcDogcG9zLCBpOiBpZHgsIHV2OiB1diB9O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBHZW9tZXRyeUdlbmVyYXRlcjtcclxufSgpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gR2VvbWV0cnlHZW5lcmF0ZXI7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBWZWN0b3IyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL01hdGgvVmVjdG9yMlwiKSk7XHJcbnZhciBJbnB1dCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIElucHV0KCkge1xyXG4gICAgfVxyXG4gICAgSW5wdXQuR2V0Q2FudmFzUG9zaXRpb24gPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yMl8xLmRlZmF1bHQoZS5jbGllbnRYIC0gdGhpcy5jYW52YXMub2Zmc2V0TGVmdCAtIHRoaXMuY2FudmFzLndpZHRoICogMC41LCBlLmNsaWVudFkgLSB0aGlzLmNhbnZhcy5vZmZzZXRUb3AgLSB0aGlzLmNhbnZhcy5oZWlnaHQgKiAwLjUpO1xyXG4gICAgfTtcclxuICAgIElucHV0LkFkZENsaWNrRXZlbnQgPSBmdW5jdGlvbiAoYXJnX29iaiwgYXJnX2V2ZW50TmFtZSwgaXNVc2VFdmVudCkge1xyXG4gICAgICAgIHZhciBldmVudCA9IHRoaXMuY2xpY2tFdmVudHNbYXJnX2V2ZW50TmFtZV07XHJcbiAgICAgICAgaWYgKCFldmVudCkge1xyXG4gICAgICAgICAgICBldmVudCA9IHsgb2JqOiBhcmdfb2JqLCBoYW5kbGVFdmVudDogT25DbGljayB9O1xyXG4gICAgICAgICAgICB0aGlzLmNsaWNrRXZlbnRzW2FyZ19ldmVudE5hbWVdID0gZXZlbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc1VzZUV2ZW50KVxyXG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnQsIGlzVXNlRXZlbnQpO1xyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnQsIGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSW5wdXQuQWRkTW91c2VEb3duRXZlbnQgPSBmdW5jdGlvbiAoYXJnX29iaiwgYXJnX2V2ZW50TmFtZSwgaXNVc2VFdmVudCkge1xyXG4gICAgICAgIHZhciBldmVudCA9IHRoaXMubW91c2VEb3duRXZlbnRzW2FyZ19ldmVudE5hbWVdO1xyXG4gICAgICAgIGlmICghZXZlbnQpIHtcclxuICAgICAgICAgICAgZXZlbnQgPSB7IG9iajogYXJnX29iaiwgaGFuZGxlRXZlbnQ6IE9uTW91c2VEb3duIH07XHJcbiAgICAgICAgICAgIHRoaXMubW91c2VEb3duRXZlbnRzW2FyZ19ldmVudE5hbWVdID0gZXZlbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc1VzZUV2ZW50KVxyXG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGV2ZW50LCBpc1VzZUV2ZW50KTtcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBldmVudCwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBJbnB1dC5BZGRNb3VzZVVwRXZlbnQgPSBmdW5jdGlvbiAoYXJnX29iaiwgYXJnX2V2ZW50TmFtZSwgaXNVc2VFdmVudCkge1xyXG4gICAgICAgIHZhciBldmVudCA9IHRoaXMubW91c2VVcEV2ZW50c1thcmdfZXZlbnROYW1lXTtcclxuICAgICAgICBpZiAoIWV2ZW50KSB7XHJcbiAgICAgICAgICAgIGV2ZW50ID0geyBvYmo6IGFyZ19vYmosIGhhbmRsZUV2ZW50OiBPbk1vdXNlVXAgfTtcclxuICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICB0aGlzLm1vdXNlVXBFdmVudHNbYXJnX2V2ZW50TmFtZV0gPSBldmVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzVXNlRXZlbnQpXHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGV2ZW50LCBpc1VzZUV2ZW50KTtcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgZXZlbnQsIGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSW5wdXQuQWRkS2V5VXBFdmVudCA9IGZ1bmN0aW9uIChhcmdfb2JqLCBhcmdfZXZlbnROYW1lLCBpc1VzZUV2ZW50KSB7XHJcbiAgICAgICAgdmFyIGV2ZW50ID0gdGhpcy5rZXlVcEV2ZW50c1thcmdfZXZlbnROYW1lXTtcclxuICAgICAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmxvZyhcIkFkZEtleVwiKTtcclxuICAgICAgICBldmVudCA9IHsgb2JqOiBhcmdfb2JqLCBoYW5kbGVFdmVudDogT25LZXlVcCB9O1xyXG4gICAgICAgIHRoaXMua2V5VXBFdmVudHNbYXJnX2V2ZW50TmFtZV0gPSBldmVudDtcclxuICAgICAgICBpZiAoaXNVc2VFdmVudClcclxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIGV2ZW50LCBpc1VzZUV2ZW50KTtcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIGV2ZW50LCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIElucHV0LkFkZEtleURvd25FdmVudCA9IGZ1bmN0aW9uIChhcmdfb2JqLCBhcmdfZXZlbnROYW1lLCBpc1VzZUV2ZW50KSB7XHJcbiAgICAgICAgdmFyIGV2ZW50ID0gdGhpcy5rZXlEb3duRXZlbnRzW2FyZ19ldmVudE5hbWVdO1xyXG4gICAgICAgIGlmIChldmVudCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGV2ZW50ID0geyBvYmo6IGFyZ19vYmosIGhhbmRsZUV2ZW50OiBPbktleURvd24gfTtcclxuICAgICAgICB0aGlzLmtleURvd25FdmVudHNbYXJnX2V2ZW50TmFtZV0gPSBldmVudDtcclxuICAgICAgICBpZiAoaXNVc2VFdmVudClcclxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZXZlbnQsIGlzVXNlRXZlbnQpO1xyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBldmVudCwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBJbnB1dC5BZGRNb3VzZU1vdmVFdmVudCA9IGZ1bmN0aW9uIChhcmdfb2JqLCBhcmdfZXZlbnROYW1lLCBpc1VzZUV2ZW50KSB7XHJcbiAgICAgICAgdmFyIGV2ZW50ID0gdGhpcy5tb3VzZU1vdmVFdmVudHNbYXJnX2V2ZW50TmFtZV07XHJcbiAgICAgICAgaWYgKCFldmVudCkge1xyXG4gICAgICAgICAgICBldmVudCA9IHsgb2JqOiBhcmdfb2JqLCBoYW5kbGVFdmVudDogT25Nb3VzZU1vdmUgfTtcclxuICAgICAgICAgICAgdGhpcy5tb3VzZU1vdmVFdmVudHNbYXJnX2V2ZW50TmFtZV0gPSBldmVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzVXNlRXZlbnQpXHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgZXZlbnQsIGlzVXNlRXZlbnQpO1xyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIGV2ZW50LCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIElucHV0LkFkZE1vdXNlV2hlZWxFdmVudCA9IGZ1bmN0aW9uIChhcmdfb2JqLCBhcmdfZXZlbnROYW1lLCBpc1VzZUV2ZW50KSB7XHJcbiAgICAgICAgdmFyIGV2ZW50ID0gdGhpcy5tb3VzZVdoZWVsRXZlbnRzW2FyZ19ldmVudE5hbWVdO1xyXG4gICAgICAgIGlmICghZXZlbnQpIHtcclxuICAgICAgICAgICAgZXZlbnQgPSB7IG9iajogYXJnX29iaiwgaGFuZGxlRXZlbnQ6IE9uTW91c2VXaGVlbCB9O1xyXG4gICAgICAgICAgICB0aGlzLm1vdXNlV2hlZWxFdmVudHNbYXJnX2V2ZW50TmFtZV0gPSBldmVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzVXNlRXZlbnQpXHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXdoZWVsXCIsIGV2ZW50LCBpc1VzZUV2ZW50KTtcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNld2hlZWxcIiwgZXZlbnQsIGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSW5wdXQuUmVtb3ZlS2V5RG93bkV2ZW50ID0gZnVuY3Rpb24gKGFyZ19ldmVudE5hbWUpIHtcclxuICAgICAgICB2YXIgZXZlbnQgPSB0aGlzLmtleURvd25FdmVudHNbYXJnX2V2ZW50TmFtZV07XHJcbiAgICAgICAgaWYgKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGFyZ19ldmVudE5hbWUpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBldmVudCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMua2V5RG93bkV2ZW50c1thcmdfZXZlbnROYW1lXSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIElucHV0LlJlbW92ZUtleVVwRXZlbnQgPSBmdW5jdGlvbiAoYXJnX2V2ZW50TmFtZSkge1xyXG4gICAgICAgIHZhciBldmVudCA9IHRoaXMua2V5VXBFdmVudHNbYXJnX2V2ZW50TmFtZV07XHJcbiAgICAgICAgaWYgKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCBldmVudCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMua2V5VXBFdmVudHNbYXJnX2V2ZW50TmFtZV0gPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBJbnB1dC5SZW1vdmVDbGlja0V2ZW50ID0gZnVuY3Rpb24gKGFyZ19ldmVudE5hbWUpIHtcclxuICAgICAgICB2YXIgZXZlbnQgPSB0aGlzLmNsaWNrRXZlbnRzW2FyZ19ldmVudE5hbWVdO1xyXG4gICAgICAgIGlmIChldmVudCkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZXZlbnQsIHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLmNsaWNrRXZlbnRzW2FyZ19ldmVudE5hbWVdID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSW5wdXQuUmVtb3ZlTW91c2VVcEV2ZW50ID0gZnVuY3Rpb24gKGFyZ19ldmVudE5hbWUpIHtcclxuICAgICAgICB2YXIgZXZlbnQgPSB0aGlzLm1vdXNlVXBFdmVudHNbYXJnX2V2ZW50TmFtZV07XHJcbiAgICAgICAgaWYgKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGV2ZW50LCB0cnVlKTtcclxuICAgICAgICAgICAgdGhpcy5tb3VzZVVwRXZlbnRzW2FyZ19ldmVudE5hbWVdID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSW5wdXQuUmVtb3ZlTW91c2VEb3duRXZlbnQgPSBmdW5jdGlvbiAoYXJnX2V2ZW50TmFtZSkge1xyXG4gICAgICAgIHZhciBldmVudCA9IHRoaXMubW91c2VEb3duRXZlbnRzW2FyZ19ldmVudE5hbWVdO1xyXG4gICAgICAgIGlmIChldmVudCkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW9zZWRvd25cIiwgZXZlbnQsIHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLm1vdXNlRG93bkV2ZW50c1thcmdfZXZlbnROYW1lXSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIElucHV0LlJlbW92ZU1vdXNlTW92ZUV2ZW50ID0gZnVuY3Rpb24gKGFyZ19ldmVudE5hbWUpIHtcclxuICAgICAgICB2YXIgZXZlbnQgPSB0aGlzLm1vdXNlTW92ZUV2ZW50c1thcmdfZXZlbnROYW1lXTtcclxuICAgICAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBldmVudCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMubW91c2VNb3ZlRXZlbnRzW2FyZ19ldmVudE5hbWVdID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSW5wdXQuUmVtb3ZlV2hlZWxFdmVudCA9IGZ1bmN0aW9uIChhcmdfZXZlbnROYW1lKSB7XHJcbiAgICAgICAgdmFyIGV2ZW50ID0gdGhpcy5tb3VzZVdoZWVsRXZlbnRzW2FyZ19ldmVudE5hbWVdO1xyXG4gICAgICAgIGlmIChldmVudCkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V3aGVlbFwiLCBldmVudCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMubW91c2VXaGVlbEV2ZW50c1thcmdfZXZlbnROYW1lXSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIElucHV0LmNsaWNrRXZlbnRzID0gbmV3IE1hcCgpO1xyXG4gICAgSW5wdXQubW91c2VEb3duRXZlbnRzID0gbmV3IE1hcCgpO1xyXG4gICAgSW5wdXQubW91c2VVcEV2ZW50cyA9IG5ldyBNYXAoKTtcclxuICAgIElucHV0LmtleVVwRXZlbnRzID0gbmV3IE1hcCgpO1xyXG4gICAgSW5wdXQua2V5RG93bkV2ZW50cyA9IG5ldyBNYXAoKTtcclxuICAgIElucHV0Lm1vdXNlTW92ZUV2ZW50cyA9IG5ldyBNYXAoKTtcclxuICAgIElucHV0Lm1vdXNlV2hlZWxFdmVudHMgPSBuZXcgTWFwKCk7XHJcbiAgICByZXR1cm4gSW5wdXQ7XHJcbn0oKSk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IElucHV0O1xyXG5mdW5jdGlvbiBPbkNsaWNrKGUpIHtcclxuICAgIHRoaXMub2JqLk9uQ2xpY2soZSk7XHJcbn1cclxuZnVuY3Rpb24gT25LZXlEb3duKGUpIHtcclxuICAgIHRoaXMub2JqLk9uS2V5RG93bihlKTtcclxufVxyXG5mdW5jdGlvbiBPbktleVVwKGUpIHtcclxuICAgIHRoaXMub2JqLk9uS2V5VXAoZSk7XHJcbn1cclxuZnVuY3Rpb24gT25Nb3VzZVVwKGUpIHtcclxuICAgIHRoaXMub2JqLk9uTW91c2VVcChlKTtcclxufVxyXG5mdW5jdGlvbiBPbk1vdXNlRG93bihlKSB7XHJcbiAgICB0aGlzLm9iai5Pbk1vdXNlVXAoZSk7XHJcbn1cclxuZnVuY3Rpb24gT25Nb3VzZU1vdmUoZSkge1xyXG4gICAgdGhpcy5vYmouT25Nb3VzZU1vdmUoZSk7XHJcbn1cclxuZnVuY3Rpb24gT25Nb3VzZVdoZWVsKGUpIHtcclxuICAgIHRoaXMub2JqLk9uTW91c2VXaGVlbChlKTtcclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgcmFkID0gTWF0aC5QSSAvIDE4MDtcclxudmFyIHNpblJldHMgPSBuZXcgRmxvYXQzMkFycmF5KDM2MCk7XHJcbnZhciBNYXRoSGVscGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTWF0aEhlbHBlcigpIHtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNYXRoSGVscGVyLnByb3RvdHlwZSwgXCJSYWRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmFkO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE1hdGhIZWxwZXIuSW5pdFNpblJldHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNJbml0U2luKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzNjA7IGkrKykge1xyXG4gICAgICAgICAgICBzaW5SZXRzW2ldID0gTWF0aC5zaW4odGhpcy5Ub1JhZGlhbihpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaXNJbml0U2luID0gdHJ1ZTtcclxuICAgIH07XHJcbiAgICBNYXRoSGVscGVyLlRvUmFkaWFuID0gZnVuY3Rpb24gKGRlZ3JlZSkge1xyXG4gICAgICAgIHJldHVybiBkZWdyZWUgKiByYWQ7XHJcbiAgICB9O1xyXG4gICAgTWF0aEhlbHBlci5HZXRTaW5Qb3MgPSBmdW5jdGlvbiAoYXJnX3QpIHtcclxuICAgICAgICByZXR1cm4gc2luUmV0c1thcmdfdCAlIDM2MF07XHJcbiAgICB9O1xyXG4gICAgTWF0aEhlbHBlci5pc0luaXRTaW4gPSBmYWxzZTtcclxuICAgIHJldHVybiBNYXRoSGVscGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBNYXRoSGVscGVyO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgUmFuZG9tSGVscGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUmFuZG9tSGVscGVyKCkge1xyXG4gICAgfVxyXG4gICAgUmFuZG9tSGVscGVyLkdldFJhbmRvbUludCA9IGZ1bmN0aW9uIChtaW4sIG1heCkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBNYXRoLmZsb29yKG1heCAtIG1pbiArIDEpKSArIG1pbjtcclxuICAgIH07XHJcbiAgICBSYW5kb21IZWxwZXIuR2V0UmFuZG9tRmxvYXQgPSBmdW5jdGlvbiAobWluLCBtYXgpIHtcclxuICAgICAgICByZXR1cm4gKE1hdGgucmFuZG9tKCkgKiBNYXRoLmZsb29yKG1heCAtIG1pbiArIDEpKSArIG1pbjtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUmFuZG9tSGVscGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBSYW5kb21IZWxwZXI7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBUZXh0dXJlXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL1Jlc291cmNlL1RleHR1cmVcIikpO1xyXG52YXIgTWF0ZXJpYWxfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vUmVzb3VyY2UvTWF0ZXJpYWxcIikpO1xyXG52YXIgU2hhZGVyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL1Jlc291cmNlL1NoYWRlclwiKSk7XHJcbnZhciBHZW9tZXRyeV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9SZXNvdXJjZS9HZW9tZXRyeVwiKSk7XHJcbnZhciBWZWN0b3I0XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL01hdGgvVmVjdG9yNFwiKSk7XHJcbnZhciBGcmFtZUJ1ZmZlclRleHR1cmVfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vUmVzb3VyY2UvRnJhbWVCdWZmZXJUZXh0dXJlXCIpKTtcclxudmFyIE1lc2hfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vUmVzb3VyY2UvTWVzaFwiKSk7XHJcbnZhciBGaWxlTG9hZGVyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vRmlsZUxvYWRlclwiKSk7XHJcbnZhciBCaW5hcnlSZWFkZXJfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vVG9vbC9CaW5hcnlSZWFkZXJcIikpO1xyXG52YXIgU291bmRfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vUmVzb3VyY2UvU291bmRcIikpO1xyXG52YXIgVmVydGV4VHlwZTtcclxuKGZ1bmN0aW9uIChWZXJ0ZXhUeXBlKSB7XHJcbiAgICBWZXJ0ZXhUeXBlW1ZlcnRleFR5cGVbXCJWZXJ0ZXhfVVZcIl0gPSAwXSA9IFwiVmVydGV4X1VWXCI7XHJcbiAgICBWZXJ0ZXhUeXBlW1ZlcnRleFR5cGVbXCJWZXJ0ZXhfTm9ybWFsXCJdID0gMV0gPSBcIlZlcnRleF9Ob3JtYWxcIjtcclxuICAgIFZlcnRleFR5cGVbVmVydGV4VHlwZVtcIlZlcnRleF9VVl9Ob3JtYWxcIl0gPSAyXSA9IFwiVmVydGV4X1VWX05vcm1hbFwiO1xyXG4gICAgVmVydGV4VHlwZVtWZXJ0ZXhUeXBlW1wiVmVydGV4X1VWX05vcm1hbF9Db2xvclwiXSA9IDNdID0gXCJWZXJ0ZXhfVVZfTm9ybWFsX0NvbG9yXCI7XHJcbiAgICBWZXJ0ZXhUeXBlW1ZlcnRleFR5cGVbXCJWZXJ0ZXhfTW9kZWxfU2luZ2xlQm9uZVwiXSA9IDRdID0gXCJWZXJ0ZXhfTW9kZWxfU2luZ2xlQm9uZVwiO1xyXG4gICAgVmVydGV4VHlwZVtWZXJ0ZXhUeXBlW1wiVmVydGV4X01vZGVsX0RvdWJsZUJvbmVcIl0gPSA1XSA9IFwiVmVydGV4X01vZGVsX0RvdWJsZUJvbmVcIjtcclxuICAgIFZlcnRleFR5cGVbVmVydGV4VHlwZVtcIlZlcnRleF9Nb2RlbF9RdWFkQm9uZVwiXSA9IDZdID0gXCJWZXJ0ZXhfTW9kZWxfUXVhZEJvbmVcIjtcclxuICAgIFZlcnRleFR5cGVbVmVydGV4VHlwZVtcIlZlcnRleF9Nb2RlbF9TREVGQm9uZVwiXSA9IDddID0gXCJWZXJ0ZXhfTW9kZWxfU0RFRkJvbmVcIjtcclxuICAgIFZlcnRleFR5cGVbVmVydGV4VHlwZVtcIlZlcnRleF9Nb2RlbF9NaXhcIl0gPSA4XSA9IFwiVmVydGV4X01vZGVsX01peFwiO1xyXG59KShWZXJ0ZXhUeXBlIHx8IChWZXJ0ZXhUeXBlID0ge30pKTtcclxuZnVuY3Rpb24gR2V0RGlyZWN0b3J5KGFyZ19wYXRoKSB7XHJcbiAgICB2YXIgc3BsaXRlZCA9IGFyZ19wYXRoLnNwbGl0KFwiL1wiKTtcclxuICAgIHZhciBvdXRwdXQgPSBcIlwiO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzcGxpdGVkLmxlbmd0aCAtIDE7IGkrKykge1xyXG4gICAgICAgIG91dHB1dCArPSBzcGxpdGVkW2ldICsgXCIvXCI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0cHV0O1xyXG59XHJcbnZhciBCM01Ib2xkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBCM01Ib2xkZXIoKSB7XHJcbiAgICB9XHJcbiAgICBCM01Ib2xkZXIucHJvdG90eXBlLkluaXRpYWxpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGdlb21ldHJ5O1xyXG4gICAgICAgIHZhciBhcnlfbWF0ZXJpYWwgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICB0aGlzLmJ1ZmZlclJlYWRlciA9IG5ldyBCaW5hcnlSZWFkZXJfMS5kZWZhdWx0KHRoaXMuYnVmZmVyKTtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vaGVkZXJUZXN0XHJcbiAgICAgICAgICAgIHZhciBoZWFkU3RyID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0U3RyaW5nKDE1KTtcclxuICAgICAgICAgICAgaWYgKGhlYWRTdHIgIT0gXCJCdXRpM0RNb2RlbERhdGFcIilcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9tb2RlbOOBruWQjeWJjeOBquOBqSAgXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdmVyc2lvbiA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgIC8vMOOBp3N0ZDo6d3N0cmluZyAsMeOBp3N0ZDo6c3RyaW5nXHJcbiAgICAgICAgICAgIHZhciBlbmNvZGVUeXBlID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0Q2hhcigpO1xyXG4gICAgICAgICAgICB2YXIgdGV4dENvdW50ID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0SW50KCk7XHJcbiAgICAgICAgICAgIC8v5Yi25L2c6ICF44Gu5ZCN5YmN44Gu6Kqt44G/6L6844G/XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBuYW1lU3RyO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVuY29kZVR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lU3RyID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0U3RyaW5nKHRleHRDb3VudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lU3RyID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0V1N0cmluZyh0ZXh0Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8v5Yi25L2c6ICF44Gu5ZCN5YmN44Gu6Kqt44G/6L6844G/KGVuZylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGV4dENvdW50ID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0SW50KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmFtZVN0cjtcclxuICAgICAgICAgICAgICAgIGlmIChlbmNvZGVUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZVN0ciA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldFN0cmluZyh0ZXh0Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZVN0ciA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldFdTdHJpbmcodGV4dENvdW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL+ODouODh+ODq+WQjVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0Q291bnQgPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRJbnQoKTtcclxuICAgICAgICAgICAgICAgIHZhciBuYW1lV1N0cjtcclxuICAgICAgICAgICAgICAgIGlmIChlbmNvZGVUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZVdTdHIgPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRTdHJpbmcodGV4dENvdW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWVXU3RyID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0V1N0cmluZyh0ZXh0Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8v44Oi44OH44Or5ZCN6IuxXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRleHRDb3VudCA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEludCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5hbWVXU3RyO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVuY29kZVR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lV1N0ciA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldFN0cmluZyh0ZXh0Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZVdTdHIgPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRXU3RyaW5nKHRleHRDb3VudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy/jgrPjg6Hjg7Pjg4hcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGV4dENvdW50ID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0SW50KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmFtZVdTdHI7XHJcbiAgICAgICAgICAgICAgICBpZiAoZW5jb2RlVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWVXU3RyID0gKHRoaXMuYnVmZmVyUmVhZGVyLkdldFN0cmluZyh0ZXh0Q291bnQpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWVXU3RyID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0V1N0cmluZyh0ZXh0Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8v44Kz44Oh44Oz44OI6IuxXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRleHRDb3VudCA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEludCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5hbWVXU3RyO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVuY29kZVR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lV1N0ciA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldFN0cmluZyh0ZXh0Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZVdTdHIgPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRXU3RyaW5nKHRleHRDb3VudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy/poILngrnjgqTjg7Pjg4fjg4Pjgq/jgrnjga7jg5DjgqTjg4jmlbBcclxuICAgICAgICB2YXIgdmVydGV4SW5kZXhCeXRlU2l6ZSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldENoYXIoKTtcclxuICAgICAgICAvL+ODnuODhuODquOCouODq+OCpOODs+ODh+ODg+OCr+OCueOBruODkOOCpOODiOaVsFxyXG4gICAgICAgIHZhciBtYXRlcmlhbEluZGV4Qnl0ZVNpemUgPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRDaGFyKCk7XHJcbiAgICAgICAgLy/jg5zjg7zjg7PjgqTjg7Pjg4fjg4Pjgq/jgrnjga7jg5DjgqTjg4jmlbBcclxuICAgICAgICB2YXIgYm9uZUluZGV4Qnl0ZUNvdW50ID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0Q2hhcigpO1xyXG4gICAgICAgIC8v44Oi44O844OV44Kk44Oz44OH44OD44Kv44K544Gu44OQ44Kk44OI5pWwXHJcbiAgICAgICAgdmFyIG1vcnBoSW5kZXhCeXRlU2l6ZSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldENoYXIoKTtcclxuICAgICAgICAvL+mggueCueani+mAoOS9k+OBruWIl+aMmeWei1xyXG4gICAgICAgIHZhciB0eXBlID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0Q2hhcigpO1xyXG4gICAgICAgIHZhciB1dkV4Q291bnQgPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRDaGFyKCk7XHJcbiAgICAgICAgdmFyIHZlcnRleENvdW50ID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0VUludCh2ZXJ0ZXhJbmRleEJ5dGVTaXplKTtcclxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBWZXJ0ZXhUeXBlLlZlcnRleF9VVl9Ob3JtYWw6XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh1dkV4Q291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSBuZXcgQXJyYXkoMyAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXYgPSBuZXcgQXJyYXkoMiAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbm9ybWFsID0gbmV3IEFycmF5KDMgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2ZXJ0ZXhDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ZXJ0ZXhUeXBlID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0Q2hhcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMl0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dltpICogMiArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZbaSAqIDIgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAyXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHggPSB0aGlzLlJlYWRJbmRleCh2ZXJ0ZXhJbmRleEJ5dGVTaXplKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeSA9IFJlc291cmNlQ3JlYXRlci5DcmVhdGVHZW9tZXRyeSh7IHA6IHBvcywgbjogbm9ybWFsLCB1djogdXYsIGk6IGlkeCB9LCB0cnVlLCB0cnVlLCBmYWxzZSwgdGhpcy5ncmFwaGljRGV2aWNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvcyA9IG5ldyBBcnJheSgzICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1diA9IG5ldyBBcnJheSgyICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleHV2XzEgPSBuZXcgQXJyYXkoNCAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbm9ybWFsID0gbmV3IEFycmF5KDMgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2ZXJ0ZXhDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ZXJ0ZXhUeXBlID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0Q2hhcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMl0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dltpICogMiArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZbaSAqIDIgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dXZfMS5wdXNoKHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMl0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gdGhpcy5SZWFkSW5kZXgodmVydGV4SW5kZXhCeXRlU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkgPSBSZXNvdXJjZUNyZWF0ZXIuQ3JlYXRlR2VvbWV0cnkoeyBwOiBwb3MsIG46IG5vcm1hbCwgdXY6IHV2LCBpOiBpZHggfSwgdHJ1ZSwgdHJ1ZSwgZmFsc2UsIHRoaXMuZ3JhcGhpY0RldmljZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSBuZXcgQXJyYXkoMyAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXYgPSBuZXcgQXJyYXkoMiAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXh1dl8xID0gbmV3IEFycmF5KDQgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4dXZfMiA9IG5ldyBBcnJheSg0ICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBub3JtYWwgPSBuZXcgQXJyYXkoMyAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZlcnRleENvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZlcnRleFR5cGUgPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRDaGFyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAyXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV2W2kgKiAyICsgMF0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dltpICogMiArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh1dl8xLnB1c2godGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dXZfMi5wdXNoKHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMl0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gdGhpcy5SZWFkSW5kZXgodmVydGV4SW5kZXhCeXRlU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkgPSBSZXNvdXJjZUNyZWF0ZXIuQ3JlYXRlR2VvbWV0cnkoeyBwOiBwb3MsIG46IG5vcm1hbCwgdXY6IHV2LCBpOiBpZHggfSwgdHJ1ZSwgdHJ1ZSwgZmFsc2UsIHRoaXMuZ3JhcGhpY0RldmljZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSBuZXcgQXJyYXkoMyAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXYgPSBuZXcgQXJyYXkoMiAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXh1dl8xID0gbmV3IEFycmF5KDQgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4dXZfMiA9IG5ldyBBcnJheSg0ICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleHV2XzMgPSBuZXcgQXJyYXkoNCAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbm9ybWFsID0gbmV3IEFycmF5KDMgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2ZXJ0ZXhDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ZXJ0ZXhUeXBlID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0Q2hhcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMl0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dltpICogMiArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZbaSAqIDIgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dXZfMS5wdXNoKHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHV2XzIucHVzaCh0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh1dl8zLnB1c2godGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAyXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHggPSB0aGlzLlJlYWRJbmRleCh2ZXJ0ZXhJbmRleEJ5dGVTaXplKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeSA9IFJlc291cmNlQ3JlYXRlci5DcmVhdGVHZW9tZXRyeSh7IHA6IHBvcywgbjogbm9ybWFsLCB1djogdXYsIGk6IGlkeCB9LCB0cnVlLCB0cnVlLCBmYWxzZSwgdGhpcy5ncmFwaGljRGV2aWNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvcyA9IG5ldyBBcnJheSgzICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1diA9IG5ldyBBcnJheSgyICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleHV2XzEgPSBuZXcgQXJyYXkoNCAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXh1dl8yID0gbmV3IEFycmF5KDQgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4dXZfMyA9IG5ldyBBcnJheSg0ICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleHV2XzQgPSBuZXcgQXJyYXkoNCAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbm9ybWFsID0gbmV3IEFycmF5KDMgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2ZXJ0ZXhDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ZXJ0ZXhUeXBlID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0Q2hhcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMl0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dltpICogMiArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZbaSAqIDIgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dXZfMS5wdXNoKHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHV2XzIucHVzaCh0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh1dl8zLnB1c2godGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dXZfNC5wdXNoKHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMl0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gdGhpcy5SZWFkSW5kZXgodmVydGV4SW5kZXhCeXRlU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkgPSBSZXNvdXJjZUNyZWF0ZXIuQ3JlYXRlR2VvbWV0cnkoeyBwOiBwb3MsIG46IG5vcm1hbCwgdXY6IHV2LCBpOiBpZHggfSwgdHJ1ZSwgdHJ1ZSwgZmFsc2UsIHRoaXMuZ3JhcGhpY0RldmljZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFZlcnRleFR5cGUuVmVydGV4X01vZGVsX1NpbmdsZUJvbmU6XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh1dkV4Q291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSBuZXcgQXJyYXkoMyAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXYgPSBuZXcgQXJyYXkoMiAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbm9ybWFsID0gbmV3IEFycmF5KDMgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVJbmRleCA9IG5ldyBBcnJheSh2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2ZXJ0ZXhDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ZXJ0ZXhUeXBlID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0Q2hhcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMl0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dltpICogMiArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZbaSAqIDIgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAyXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleFtpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEludCgyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gdGhpcy5SZWFkSW5kZXgodmVydGV4SW5kZXhCeXRlU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkgPSBSZXNvdXJjZUNyZWF0ZXIuQ3JlYXRlR2VvbWV0cnkoeyBwOiBwb3MsIG46IG5vcm1hbCwgdXY6IHV2LCBpOiBpZHggfSwgdHJ1ZSwgdHJ1ZSwgZmFsc2UsIHRoaXMuZ3JhcGhpY0RldmljZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSBuZXcgQXJyYXkoMyAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXYgPSBuZXcgQXJyYXkoMiAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXh1dl8xID0gbmV3IEFycmF5KDQgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vcm1hbCA9IG5ldyBBcnJheSgzICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lSW5kZXggPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmVydGV4Q291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmVydGV4VHlwZSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldENoYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMF0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDJdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZbaSAqIDIgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV2W2kgKiAyICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHV2XzEucHVzaCh0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMF0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDJdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZUluZGV4W2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0SW50KDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHggPSB0aGlzLlJlYWRJbmRleCh2ZXJ0ZXhJbmRleEJ5dGVTaXplKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeSA9IFJlc291cmNlQ3JlYXRlci5DcmVhdGVHZW9tZXRyeSh7IHA6IHBvcywgbjogbm9ybWFsLCB1djogdXYsIGk6IGlkeCB9LCB0cnVlLCB0cnVlLCBmYWxzZSwgdGhpcy5ncmFwaGljRGV2aWNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvcyA9IG5ldyBBcnJheSgzICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1diA9IG5ldyBBcnJheSgyICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleHV2XzEgPSBuZXcgQXJyYXkoNCAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXh1dl8yID0gbmV3IEFycmF5KDQgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vcm1hbCA9IG5ldyBBcnJheSgzICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lSW5kZXggPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmVydGV4Q291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmVydGV4VHlwZSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldENoYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMF0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDJdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZbaSAqIDIgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV2W2kgKiAyICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHV2XzEucHVzaCh0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh1dl8yLnB1c2godGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAyXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleFtpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEludCgyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gdGhpcy5SZWFkSW5kZXgodmVydGV4SW5kZXhCeXRlU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkgPSBSZXNvdXJjZUNyZWF0ZXIuQ3JlYXRlR2VvbWV0cnkoeyBwOiBwb3MsIG46IG5vcm1hbCwgdXY6IHV2LCBpOiBpZHggfSwgdHJ1ZSwgdHJ1ZSwgZmFsc2UsIHRoaXMuZ3JhcGhpY0RldmljZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSBuZXcgQXJyYXkoMyAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXYgPSBuZXcgQXJyYXkoMiAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXh1dl8xID0gbmV3IEFycmF5KDQgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4dXZfMiA9IG5ldyBBcnJheSg0ICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleHV2XzMgPSBuZXcgQXJyYXkoNCAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbm9ybWFsID0gbmV3IEFycmF5KDMgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVJbmRleCA9IG5ldyBBcnJheSh2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2ZXJ0ZXhDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ZXJ0ZXhUeXBlID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0Q2hhcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMl0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dltpICogMiArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZbaSAqIDIgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dXZfMS5wdXNoKHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHV2XzIucHVzaCh0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh1dl8zLnB1c2godGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAyXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleFtpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEludCgyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gdGhpcy5SZWFkSW5kZXgodmVydGV4SW5kZXhCeXRlU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkgPSBSZXNvdXJjZUNyZWF0ZXIuQ3JlYXRlR2VvbWV0cnkoeyBwOiBwb3MsIG46IG5vcm1hbCwgdXY6IHV2LCBpOiBpZHggfSwgdHJ1ZSwgdHJ1ZSwgZmFsc2UsIHRoaXMuZ3JhcGhpY0RldmljZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSBuZXcgQXJyYXkoMyAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXYgPSBuZXcgQXJyYXkoMiAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXh1dl8xID0gbmV3IEFycmF5KDQgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4dXZfMiA9IG5ldyBBcnJheSg0ICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleHV2XzMgPSBuZXcgQXJyYXkoNCAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXh1dl80ID0gbmV3IEFycmF5KDQgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vcm1hbCA9IG5ldyBBcnJheSgzICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lSW5kZXggPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmVydGV4Q291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmVydGV4VHlwZSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldENoYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMF0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDJdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZbaSAqIDIgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV2W2kgKiAyICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHV2XzEucHVzaCh0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh1dl8yLnB1c2godGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dXZfMy5wdXNoKHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHV2XzQucHVzaCh0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMF0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDJdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZUluZGV4W2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0SW50KDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHggPSB0aGlzLlJlYWRJbmRleCh2ZXJ0ZXhJbmRleEJ5dGVTaXplKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeSA9IFJlc291cmNlQ3JlYXRlci5DcmVhdGVHZW9tZXRyeSh7IHA6IHBvcywgbjogbm9ybWFsLCB1djogdXYsIGk6IGlkeCB9LCB0cnVlLCB0cnVlLCBmYWxzZSwgdGhpcy5ncmFwaGljRGV2aWNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgVmVydGV4VHlwZS5WZXJ0ZXhfTW9kZWxfRG91YmxlQm9uZTpcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHV2RXhDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvcyA9IG5ldyBBcnJheSgzICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1diA9IG5ldyBBcnJheSgyICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBub3JtYWwgPSBuZXcgQXJyYXkoMyAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZUluZGV4ID0gbmV3IEFycmF5KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZUluZGV4MiA9IG5ldyBBcnJheSh2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVXZWlnaHQgPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmVydGV4Q291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmVydGV4VHlwZSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldENoYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMF0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDJdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZbaSAqIDIgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV2W2kgKiAyICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMl0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lSW5kZXhbaV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRJbnQoMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZUluZGV4MltpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEludCgyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0W2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gdGhpcy5SZWFkSW5kZXgodmVydGV4SW5kZXhCeXRlU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkgPSBSZXNvdXJjZUNyZWF0ZXIuQ3JlYXRlR2VvbWV0cnkoeyBwOiBwb3MsIG46IG5vcm1hbCwgdXY6IHV2LCBpOiBpZHggfSwgdHJ1ZSwgdHJ1ZSwgZmFsc2UsIHRoaXMuZ3JhcGhpY0RldmljZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSBuZXcgQXJyYXkoMyAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXYgPSBuZXcgQXJyYXkoMiAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXh1dl8xID0gbmV3IEFycmF5KDQgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vcm1hbCA9IG5ldyBBcnJheSgzICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lSW5kZXggPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lSW5kZXgyID0gbmV3IEFycmF5KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZVdlaWdodCA9IG5ldyBBcnJheSh2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2ZXJ0ZXhDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ZXJ0ZXhUeXBlID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0Q2hhcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMl0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dltpICogMiArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZbaSAqIDIgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dXZfMS5wdXNoKHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMl0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lSW5kZXhbaV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRJbnQoMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZUluZGV4MltpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEludCgyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0W2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gdGhpcy5SZWFkSW5kZXgodmVydGV4SW5kZXhCeXRlU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkgPSBSZXNvdXJjZUNyZWF0ZXIuQ3JlYXRlR2VvbWV0cnkoeyBwOiBwb3MsIG46IG5vcm1hbCwgdXY6IHV2LCBpOiBpZHggfSwgdHJ1ZSwgdHJ1ZSwgZmFsc2UsIHRoaXMuZ3JhcGhpY0RldmljZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSBuZXcgQXJyYXkoMyAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXYgPSBuZXcgQXJyYXkoMiAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXh1dl8xID0gbmV3IEFycmF5KDQgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4dXZfMiA9IG5ldyBBcnJheSg0ICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBub3JtYWwgPSBuZXcgQXJyYXkoMyAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZUluZGV4ID0gbmV3IEFycmF5KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZUluZGV4MiA9IG5ldyBBcnJheSh2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVXZWlnaHQgPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmVydGV4Q291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmVydGV4VHlwZSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldENoYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMF0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDJdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZbaSAqIDIgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV2W2kgKiAyICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHV2XzEucHVzaCh0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh1dl8yLnB1c2godGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAyXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleFtpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEludCgyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lSW5kZXgyW2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0SW50KDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVXZWlnaHRbaV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHggPSB0aGlzLlJlYWRJbmRleCh2ZXJ0ZXhJbmRleEJ5dGVTaXplKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeSA9IFJlc291cmNlQ3JlYXRlci5DcmVhdGVHZW9tZXRyeSh7IHA6IHBvcywgbjogbm9ybWFsLCB1djogdXYsIGk6IGlkeCB9LCB0cnVlLCB0cnVlLCBmYWxzZSwgdGhpcy5ncmFwaGljRGV2aWNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvcyA9IG5ldyBBcnJheSgzICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1diA9IG5ldyBBcnJheSgyICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleHV2XzEgPSBuZXcgQXJyYXkoNCAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXh1dl8yID0gbmV3IEFycmF5KDQgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4dXZfMyA9IG5ldyBBcnJheSg0ICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBub3JtYWwgPSBuZXcgQXJyYXkoMyAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZUluZGV4ID0gbmV3IEFycmF5KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZUluZGV4MiA9IG5ldyBBcnJheSh2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVXZWlnaHQgPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmVydGV4Q291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmVydGV4VHlwZSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldENoYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMF0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDJdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZbaSAqIDIgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV2W2kgKiAyICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHV2XzEucHVzaCh0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh1dl8yLnB1c2godGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dXZfMy5wdXNoKHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMl0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lSW5kZXhbaV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRJbnQoMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZUluZGV4MltpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEludCgyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0W2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gdGhpcy5SZWFkSW5kZXgodmVydGV4SW5kZXhCeXRlU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkgPSBSZXNvdXJjZUNyZWF0ZXIuQ3JlYXRlR2VvbWV0cnkoeyBwOiBwb3MsIG46IG5vcm1hbCwgdXY6IHV2LCBpOiBpZHggfSwgdHJ1ZSwgdHJ1ZSwgZmFsc2UsIHRoaXMuZ3JhcGhpY0RldmljZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSBuZXcgQXJyYXkoMyAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXYgPSBuZXcgQXJyYXkoMiAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXh1dl8xID0gbmV3IEFycmF5KDQgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4dXZfMiA9IG5ldyBBcnJheSg0ICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleHV2XzMgPSBuZXcgQXJyYXkoNCAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXh1dl80ID0gbmV3IEFycmF5KDQgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vcm1hbCA9IG5ldyBBcnJheSgzICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lSW5kZXggPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lSW5kZXgyID0gbmV3IEFycmF5KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZVdlaWdodCA9IG5ldyBBcnJheSh2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2ZXJ0ZXhDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ZXJ0ZXhUeXBlID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0Q2hhcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMl0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dltpICogMiArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZbaSAqIDIgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dXZfMS5wdXNoKHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHV2XzIucHVzaCh0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh1dl8zLnB1c2godGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dXZfNC5wdXNoKHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMl0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lSW5kZXhbaV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRJbnQoMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZUluZGV4MltpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEludCgyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0W2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gdGhpcy5SZWFkSW5kZXgodmVydGV4SW5kZXhCeXRlU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkgPSBSZXNvdXJjZUNyZWF0ZXIuQ3JlYXRlR2VvbWV0cnkoeyBwOiBwb3MsIG46IG5vcm1hbCwgdXY6IHV2LCBpOiBpZHggfSwgdHJ1ZSwgdHJ1ZSwgZmFsc2UsIHRoaXMuZ3JhcGhpY0RldmljZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFZlcnRleFR5cGUuVmVydGV4X01vZGVsX1F1YWRCb25lOlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodXZFeENvdW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9zID0gbmV3IEFycmF5KDMgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHV2ID0gbmV3IEFycmF5KDIgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vcm1hbCA9IG5ldyBBcnJheSgzICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lSW5kZXggPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lSW5kZXgyID0gbmV3IEFycmF5KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZUluZGV4MyA9IG5ldyBBcnJheSh2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVJbmRleDQgPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lV2VpZ2h0ID0gbmV3IEFycmF5KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZVdlaWdodDIgPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lV2VpZ2h0MyA9IG5ldyBBcnJheSh2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVXZWlnaHQ0ID0gbmV3IEFycmF5KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZlcnRleENvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZlcnRleFR5cGUgPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRDaGFyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMV0gPSAtdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMl0gPSAtdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZbaSAqIDIgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV2W2kgKiAyICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMl0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lSW5kZXhbaV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRJbnQoMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleDJbaV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRJbnQoMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleDNbaV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRJbnQoMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleDRbaV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRJbnQoMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVXZWlnaHRbaV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0MltpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVXZWlnaHQzW2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZVdlaWdodDRbaV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gdGhpcy5SZWFkSW5kZXgodmVydGV4SW5kZXhCeXRlU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkgPSBSZXNvdXJjZUNyZWF0ZXIuQ3JlYXRlR2VvbWV0cnkoeyBwOiBwb3MsIG46IG5vcm1hbCwgdXY6IHV2LCBpOiBpZHggfSwgdHJ1ZSwgdHJ1ZSwgZmFsc2UsIHRoaXMuZ3JhcGhpY0RldmljZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSBuZXcgQXJyYXkoMyAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXYgPSBuZXcgQXJyYXkoMiAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXh1dl8xID0gbmV3IEFycmF5KDQgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vcm1hbCA9IG5ldyBBcnJheSgzICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lSW5kZXggPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lSW5kZXgyID0gbmV3IEFycmF5KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZUluZGV4MyA9IG5ldyBBcnJheSh2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVJbmRleDQgPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lV2VpZ2h0ID0gbmV3IEFycmF5KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZVdlaWdodDIgPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lV2VpZ2h0MyA9IG5ldyBBcnJheSh2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVXZWlnaHQ0ID0gbmV3IEFycmF5KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZlcnRleENvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZlcnRleFR5cGUgPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRDaGFyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAyXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV2W2kgKiAyICsgMF0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dltpICogMiArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh1dl8xLnB1c2godGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAyXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleFtpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEludCgyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lSW5kZXgyW2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0SW50KDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleDNbaV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRJbnQoMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZUluZGV4NFtpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEludCgyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0W2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0MltpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZVdlaWdodDNbaV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVXZWlnaHQ0W2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gdGhpcy5SZWFkSW5kZXgodmVydGV4SW5kZXhCeXRlU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkgPSBSZXNvdXJjZUNyZWF0ZXIuQ3JlYXRlR2VvbWV0cnkoeyBwOiBwb3MsIG46IG5vcm1hbCwgdXY6IHV2LCBpOiBpZHggfSwgdHJ1ZSwgdHJ1ZSwgZmFsc2UsIHRoaXMuZ3JhcGhpY0RldmljZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSBuZXcgQXJyYXkoMyAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXYgPSBuZXcgQXJyYXkoMiAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXh1dl8xID0gbmV3IEFycmF5KDQgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4dXZfMiA9IG5ldyBBcnJheSg0ICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBub3JtYWwgPSBuZXcgQXJyYXkoMyAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZUluZGV4ID0gbmV3IEFycmF5KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZUluZGV4MiA9IG5ldyBBcnJheSh2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVJbmRleDMgPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lSW5kZXg0ID0gbmV3IEFycmF5KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZVdlaWdodCA9IG5ldyBBcnJheSh2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVXZWlnaHQyID0gbmV3IEFycmF5KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZVdlaWdodDMgPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lV2VpZ2h0NCA9IG5ldyBBcnJheSh2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2ZXJ0ZXhDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ZXJ0ZXhUeXBlID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0Q2hhcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMl0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dltpICogMiArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZbaSAqIDIgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dXZfMS5wdXNoKHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHV2XzIucHVzaCh0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMF0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDJdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZUluZGV4W2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0SW50KDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleDJbaV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRJbnQoMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZUluZGV4M1tpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEludCgyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lSW5kZXg0W2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0SW50KDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVXZWlnaHRbaV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVXZWlnaHQyW2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0M1tpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZVdlaWdodDRbaV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHggPSB0aGlzLlJlYWRJbmRleCh2ZXJ0ZXhJbmRleEJ5dGVTaXplKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeSA9IFJlc291cmNlQ3JlYXRlci5DcmVhdGVHZW9tZXRyeSh7IHA6IHBvcywgbjogbm9ybWFsLCB1djogdXYsIGk6IGlkeCB9LCB0cnVlLCB0cnVlLCBmYWxzZSwgdGhpcy5ncmFwaGljRGV2aWNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvcyA9IG5ldyBBcnJheSgzICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1diA9IG5ldyBBcnJheSgyICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleHV2XzEgPSBuZXcgQXJyYXkoNCAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXh1dl8yID0gbmV3IEFycmF5KDQgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4dXZfMyA9IG5ldyBBcnJheSg0ICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBub3JtYWwgPSBuZXcgQXJyYXkoMyAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZUluZGV4ID0gbmV3IEFycmF5KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZUluZGV4MiA9IG5ldyBBcnJheSh2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVJbmRleDMgPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lSW5kZXg0ID0gbmV3IEFycmF5KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZVdlaWdodCA9IG5ldyBBcnJheSh2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVXZWlnaHQyID0gbmV3IEFycmF5KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZVdlaWdodDMgPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lV2VpZ2h0NCA9IG5ldyBBcnJheSh2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2ZXJ0ZXhDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ZXJ0ZXhUeXBlID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0Q2hhcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMl0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dltpICogMiArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZbaSAqIDIgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dXZfMS5wdXNoKHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHV2XzIucHVzaCh0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh1dl8zLnB1c2godGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAyXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleFtpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEludCgyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lSW5kZXgyW2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0SW50KDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleDNbaV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRJbnQoMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZUluZGV4NFtpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEludCgyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0W2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0MltpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZVdlaWdodDNbaV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVXZWlnaHQ0W2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gdGhpcy5SZWFkSW5kZXgodmVydGV4SW5kZXhCeXRlU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkgPSBSZXNvdXJjZUNyZWF0ZXIuQ3JlYXRlR2VvbWV0cnkoeyBwOiBwb3MsIG46IG5vcm1hbCwgdXY6IHV2LCBpOiBpZHggfSwgdHJ1ZSwgdHJ1ZSwgZmFsc2UsIHRoaXMuZ3JhcGhpY0RldmljZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSBuZXcgQXJyYXkoMyAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXYgPSBuZXcgQXJyYXkoMiAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXh1dl8xID0gbmV3IEFycmF5KDQgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4dXZfMiA9IG5ldyBBcnJheSg0ICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleHV2XzMgPSBuZXcgQXJyYXkoNCAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXh1dl80ID0gbmV3IEFycmF5KDQgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vcm1hbCA9IG5ldyBBcnJheSgzICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lSW5kZXggPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lSW5kZXgyID0gbmV3IEFycmF5KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZUluZGV4MyA9IG5ldyBBcnJheSh2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVJbmRleDQgPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lV2VpZ2h0ID0gbmV3IEFycmF5KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZVdlaWdodDIgPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lV2VpZ2h0MyA9IG5ldyBBcnJheSh2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVXZWlnaHQ0ID0gbmV3IEFycmF5KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZlcnRleENvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZlcnRleFR5cGUgPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRDaGFyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAyXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV2W2kgKiAyICsgMF0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dltpICogMiArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh1dl8xLnB1c2godGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dXZfMi5wdXNoKHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHV2XzMucHVzaCh0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh1dl80LnB1c2godGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAyXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleFtpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEludCgyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lSW5kZXgyW2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0SW50KDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleDNbaV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRJbnQoMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZUluZGV4NFtpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEludCgyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0W2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0MltpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZVdlaWdodDNbaV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVXZWlnaHQ0W2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gdGhpcy5SZWFkSW5kZXgodmVydGV4SW5kZXhCeXRlU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkgPSBSZXNvdXJjZUNyZWF0ZXIuQ3JlYXRlR2VvbWV0cnkoeyBwOiBwb3MsIG46IG5vcm1hbCwgdXY6IHV2LCBpOiBpZHggfSwgdHJ1ZSwgdHJ1ZSwgZmFsc2UsIHRoaXMuZ3JhcGhpY0RldmljZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFZlcnRleFR5cGUuVmVydGV4X01vZGVsX1NERUZCb25lOlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwic2RlZiBpcyBub3Qgc3VwcG9ydC5cIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBWZXJ0ZXhUeXBlLlZlcnRleF9Nb2RlbF9NaXg6XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh1dkV4Q291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSBuZXcgQXJyYXkoMyAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXYgPSBuZXcgQXJyYXkoMiAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbm9ybWFsID0gbmV3IEFycmF5KDMgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVJbmRleCA9IG5ldyBBcnJheSh2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVJbmRleDIgPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lSW5kZXgzID0gbmV3IEFycmF5KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZUluZGV4NCA9IG5ldyBBcnJheSh2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVXZWlnaHQgPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lV2VpZ2h0MiA9IG5ldyBBcnJheSh2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVXZWlnaHQzID0gbmV3IEFycmF5KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZVdlaWdodDQgPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmVydGV4Q291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmVydGV4VHlwZSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldENoYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh2ZXJ0ZXhUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFZlcnRleFR5cGUuVmVydGV4X01vZGVsX1NpbmdsZUJvbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMl0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dltpICogMiArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZbaSAqIDIgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAyXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleFtpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEludCgyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lSW5kZXgyLnB1c2goLTEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lSW5kZXgzLnB1c2goLTEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lSW5kZXg0LnB1c2goLTEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0LnB1c2goMS4wKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZVdlaWdodDIucHVzaCgwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZVdlaWdodDMucHVzaCgwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZVdlaWdodDQucHVzaCgwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFZlcnRleFR5cGUuVmVydGV4X01vZGVsX0RvdWJsZUJvbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMl0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dltpICogMiArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZbaSAqIDIgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAyXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleFtpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEludCgyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lSW5kZXgyW2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0SW50KDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3ZWlnaHQgPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0LnB1c2god2VpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZUluZGV4My5wdXNoKC0xKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZUluZGV4NC5wdXNoKC0xKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZVdlaWdodDIucHVzaCgxLjAgLSB3ZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0My5wdXNoKDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0NC5wdXNoKDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgVmVydGV4VHlwZS5WZXJ0ZXhfTW9kZWxfUXVhZEJvbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMl0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dltpICogMiArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZbaSAqIDIgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAyXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleFtpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEludCgyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lSW5kZXgyW2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0SW50KDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleDNbaV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRJbnQoMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZUluZGV4NFtpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEludCgyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0W2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0MltpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZVdlaWdodDNbaV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVXZWlnaHQ0W2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgVmVydGV4VHlwZS5WZXJ0ZXhfTW9kZWxfU0RFRkJvbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChcInNkZWYgaXMgbm90IHN1cHBvcnRlZC5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gdGhpcy5SZWFkSW5kZXgodmVydGV4SW5kZXhCeXRlU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkgPSBSZXNvdXJjZUNyZWF0ZXIuQ3JlYXRlR2VvbWV0cnkoeyBwOiBwb3MsIG46IG5vcm1hbCwgdXY6IHV2LCBpOiBpZHggfSwgdHJ1ZSwgdHJ1ZSwgZmFsc2UsIHRoaXMuZ3JhcGhpY0RldmljZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSBuZXcgQXJyYXkoMyAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXYgPSBuZXcgQXJyYXkoMiAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXh1dl8xID0gbmV3IEFycmF5KDQgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vcm1hbCA9IG5ldyBBcnJheSgzICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lSW5kZXggPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lSW5kZXgyID0gbmV3IEFycmF5KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZUluZGV4MyA9IG5ldyBBcnJheSh2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVJbmRleDQgPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lV2VpZ2h0ID0gbmV3IEFycmF5KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZVdlaWdodDIgPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lV2VpZ2h0MyA9IG5ldyBBcnJheSh2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVXZWlnaHQ0ID0gbmV3IEFycmF5KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZlcnRleENvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZlcnRleFR5cGUgPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRDaGFyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodmVydGV4VHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBWZXJ0ZXhUeXBlLlZlcnRleF9Nb2RlbF9TaW5nbGVCb25lOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMF0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDJdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZbaSAqIDIgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV2W2kgKiAyICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHV2XzEucHVzaCh0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMF0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDJdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZUluZGV4W2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0SW50KDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleDIucHVzaCgtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleDMucHVzaCgtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleDQucHVzaCgtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVXZWlnaHQucHVzaCgxLjApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0Mi5wdXNoKDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0My5wdXNoKDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0NC5wdXNoKDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgVmVydGV4VHlwZS5WZXJ0ZXhfTW9kZWxfRG91YmxlQm9uZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAyXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV2W2kgKiAyICsgMF0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dltpICogMiArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh1dl8xLnB1c2godGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAyXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleFtpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEludCgyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lSW5kZXgyW2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0SW50KDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3ZWlnaHQgPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0LnB1c2god2VpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZUluZGV4My5wdXNoKC0xKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZUluZGV4NC5wdXNoKC0xKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZVdlaWdodDIucHVzaCgxLjAgLSB3ZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0My5wdXNoKDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0NC5wdXNoKDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgVmVydGV4VHlwZS5WZXJ0ZXhfTW9kZWxfUXVhZEJvbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMl0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dltpICogMiArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZbaSAqIDIgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dXZfMS5wdXNoKHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMl0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lSW5kZXhbaV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRJbnQoMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZUluZGV4MltpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEludCgyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lSW5kZXgzW2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0SW50KDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleDRbaV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRJbnQoMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZVdlaWdodFtpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZVdlaWdodDJbaV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVXZWlnaHQzW2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0NFtpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFZlcnRleFR5cGUuVmVydGV4X01vZGVsX1NERUZCb25lOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCJzZGVmIGlzIG5vdCBzdXBwb3J0ZWQuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkeCA9IHRoaXMuUmVhZEluZGV4KHZlcnRleEluZGV4Qnl0ZVNpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5ID0gUmVzb3VyY2VDcmVhdGVyLkNyZWF0ZUdlb21ldHJ5KHsgcDogcG9zLCBuOiBub3JtYWwsIHV2OiB1diwgaTogaWR4IH0sIHRydWUsIHRydWUsIGZhbHNlLCB0aGlzLmdyYXBoaWNEZXZpY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9zID0gbmV3IEFycmF5KDMgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHV2ID0gbmV3IEFycmF5KDIgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4dXZfMSA9IG5ldyBBcnJheSg0ICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleHV2XzIgPSBuZXcgQXJyYXkoNCAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbm9ybWFsID0gbmV3IEFycmF5KDMgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVJbmRleCA9IG5ldyBBcnJheSh2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVJbmRleDIgPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lSW5kZXgzID0gbmV3IEFycmF5KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZUluZGV4NCA9IG5ldyBBcnJheSh2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVXZWlnaHQgPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lV2VpZ2h0MiA9IG5ldyBBcnJheSh2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVXZWlnaHQzID0gbmV3IEFycmF5KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZVdlaWdodDQgPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmVydGV4Q291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmVydGV4VHlwZSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldENoYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh2ZXJ0ZXhUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFZlcnRleFR5cGUuVmVydGV4X01vZGVsX1NpbmdsZUJvbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMl0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dltpICogMiArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZbaSAqIDIgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dXZfMS5wdXNoKHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHV2XzIucHVzaCh0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMF0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDJdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZUluZGV4W2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0SW50KDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleDIucHVzaCgtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleDMucHVzaCgtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleDQucHVzaCgtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVXZWlnaHQucHVzaCgxLjApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0Mi5wdXNoKDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0My5wdXNoKDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0NC5wdXNoKDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgVmVydGV4VHlwZS5WZXJ0ZXhfTW9kZWxfRG91YmxlQm9uZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAyXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV2W2kgKiAyICsgMF0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dltpICogMiArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh1dl8xLnB1c2godGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dXZfMi5wdXNoKHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMl0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lSW5kZXhbaV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRJbnQoMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZUluZGV4MltpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEludCgyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgd2VpZ2h0ID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZVdlaWdodC5wdXNoKHdlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleDMucHVzaCgtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleDQucHVzaCgtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVXZWlnaHQyLnB1c2goMS4wIC0gd2VpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZVdlaWdodDMucHVzaCgwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZVdlaWdodDQucHVzaCgwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFZlcnRleFR5cGUuVmVydGV4X01vZGVsX1F1YWRCb25lOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMF0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDJdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZbaSAqIDIgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV2W2kgKiAyICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHV2XzEucHVzaCh0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh1dl8yLnB1c2godGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAyXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleFtpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEludCgyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lSW5kZXgyW2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0SW50KDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleDNbaV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRJbnQoMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZUluZGV4NFtpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEludCgyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0W2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0MltpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZVdlaWdodDNbaV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVXZWlnaHQ0W2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgVmVydGV4VHlwZS5WZXJ0ZXhfTW9kZWxfU0RFRkJvbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChcInNkZWYgaXMgbm90IHN1cHBvcnRlZC5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gdGhpcy5SZWFkSW5kZXgodmVydGV4SW5kZXhCeXRlU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkgPSBSZXNvdXJjZUNyZWF0ZXIuQ3JlYXRlR2VvbWV0cnkoeyBwOiBwb3MsIG46IG5vcm1hbCwgdXY6IHV2LCBpOiBpZHggfSwgdHJ1ZSwgdHJ1ZSwgZmFsc2UsIHRoaXMuZ3JhcGhpY0RldmljZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSBuZXcgQXJyYXkoMyAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXYgPSBuZXcgQXJyYXkoMiAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXh1dl8xID0gbmV3IEFycmF5KDQgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4dXZfMiA9IG5ldyBBcnJheSg0ICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleHV2XzMgPSBuZXcgQXJyYXkoNCAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbm9ybWFsID0gbmV3IEFycmF5KDMgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVJbmRleCA9IG5ldyBBcnJheSh2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVJbmRleDIgPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lSW5kZXgzID0gbmV3IEFycmF5KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZUluZGV4NCA9IG5ldyBBcnJheSh2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVXZWlnaHQgPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lV2VpZ2h0MiA9IG5ldyBBcnJheSh2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVXZWlnaHQzID0gbmV3IEFycmF5KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZVdlaWdodDQgPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmVydGV4Q291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmVydGV4VHlwZSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldENoYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh2ZXJ0ZXhUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFZlcnRleFR5cGUuVmVydGV4X01vZGVsX1NpbmdsZUJvbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMl0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dltpICogMiArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZbaSAqIDIgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dXZfMS5wdXNoKHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHV2XzIucHVzaCh0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh1dl8zLnB1c2godGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAyXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleFtpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEludCgyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lSW5kZXgyLnB1c2goLTEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lSW5kZXgzLnB1c2goLTEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lSW5kZXg0LnB1c2goLTEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0LnB1c2goMS4wKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZVdlaWdodDIucHVzaCgwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZVdlaWdodDMucHVzaCgwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZVdlaWdodDQucHVzaCgwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFZlcnRleFR5cGUuVmVydGV4X01vZGVsX0RvdWJsZUJvbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMl0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dltpICogMiArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZbaSAqIDIgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dXZfMS5wdXNoKHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHV2XzIucHVzaCh0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh1dl8zLnB1c2godGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAyXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleFtpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEludCgyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lSW5kZXgyW2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0SW50KDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3ZWlnaHQgPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0LnB1c2god2VpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZUluZGV4My5wdXNoKC0xKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZUluZGV4NC5wdXNoKC0xKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZVdlaWdodDIucHVzaCgxLjAgLSB3ZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0My5wdXNoKDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0NC5wdXNoKDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgVmVydGV4VHlwZS5WZXJ0ZXhfTW9kZWxfUXVhZEJvbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMl0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dltpICogMiArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZbaSAqIDIgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dXZfMS5wdXNoKHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHV2XzIucHVzaCh0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh1dl8zLnB1c2godGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAyXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleFtpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEludCgyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lSW5kZXgyW2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0SW50KDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleDNbaV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRJbnQoMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZUluZGV4NFtpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEludCgyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0W2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0MltpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZVdlaWdodDNbaV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVXZWlnaHQ0W2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgVmVydGV4VHlwZS5WZXJ0ZXhfTW9kZWxfU0RFRkJvbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChcInNkZWYgaXMgbm90IHN1cHBvcnRlZC5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gdGhpcy5SZWFkSW5kZXgodmVydGV4SW5kZXhCeXRlU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkgPSBSZXNvdXJjZUNyZWF0ZXIuQ3JlYXRlR2VvbWV0cnkoeyBwOiBwb3MsIG46IG5vcm1hbCwgdXY6IHV2LCBpOiBpZHggfSwgdHJ1ZSwgdHJ1ZSwgZmFsc2UsIHRoaXMuZ3JhcGhpY0RldmljZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSBuZXcgQXJyYXkoMyAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXYgPSBuZXcgQXJyYXkoMiAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXh1dl8xID0gbmV3IEFycmF5KDQgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4dXZfMiA9IG5ldyBBcnJheSg0ICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleHV2XzMgPSBuZXcgQXJyYXkoNCAqIHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXh1dl80ID0gbmV3IEFycmF5KDQgKiB2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vcm1hbCA9IG5ldyBBcnJheSgzICogdmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lSW5kZXggPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lSW5kZXgyID0gbmV3IEFycmF5KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZUluZGV4MyA9IG5ldyBBcnJheSh2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVJbmRleDQgPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lV2VpZ2h0ID0gbmV3IEFycmF5KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9uZVdlaWdodDIgPSBuZXcgQXJyYXkodmVydGV4Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib25lV2VpZ2h0MyA9IG5ldyBBcnJheSh2ZXJ0ZXhDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvbmVXZWlnaHQ0ID0gbmV3IEFycmF5KHZlcnRleENvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZlcnRleENvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZlcnRleFR5cGUgPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRDaGFyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodmVydGV4VHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBWZXJ0ZXhUeXBlLlZlcnRleF9Nb2RlbF9TaW5nbGVCb25lOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMF0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDJdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZbaSAqIDIgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV2W2kgKiAyICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHV2XzEucHVzaCh0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh1dl8yLnB1c2godGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dXZfMy5wdXNoKHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHV2XzQucHVzaCh0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMF0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDJdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZUluZGV4W2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0SW50KDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleDIucHVzaCgtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleDMucHVzaCgtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleDQucHVzaCgtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVXZWlnaHQucHVzaCgxLjApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0Mi5wdXNoKDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0My5wdXNoKDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0NC5wdXNoKDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgVmVydGV4VHlwZS5WZXJ0ZXhfTW9kZWxfRG91YmxlQm9uZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAyXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV2W2kgKiAyICsgMF0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dltpICogMiArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh1dl8xLnB1c2godGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dXZfMi5wdXNoKHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHV2XzMucHVzaCh0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh1dl80LnB1c2godGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAyXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleFtpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEludCgyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lSW5kZXgyW2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0SW50KDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3ZWlnaHQgPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0LnB1c2god2VpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZUluZGV4My5wdXNoKC0xKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZUluZGV4NC5wdXNoKC0xKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZVdlaWdodDIucHVzaCgxLjAgLSB3ZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0My5wdXNoKDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0NC5wdXNoKDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgVmVydGV4VHlwZS5WZXJ0ZXhfTW9kZWxfUXVhZEJvbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NbaSAqIDMgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc1tpICogMyArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zW2kgKiAzICsgMl0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dltpICogMiArIDBdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXZbaSAqIDIgKyAxXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dXZfMS5wdXNoKHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHV2XzIucHVzaCh0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpLCB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh1dl8zLnB1c2godGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSwgdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dXZfNC5wdXNoKHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCksIHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxbaSAqIDMgKyAwXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbFtpICogMyArIDFdID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsW2kgKiAzICsgMl0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lSW5kZXhbaV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRJbnQoMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZUluZGV4MltpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEludCgyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lSW5kZXgzW2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0SW50KDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVJbmRleDRbaV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRJbnQoMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZVdlaWdodFtpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9uZVdlaWdodDJbaV0gPSB0aGlzLmJ1ZmZlclJlYWRlci5HZXRGbG9hdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbmVXZWlnaHQzW2ldID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0RmxvYXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib25lV2VpZ2h0NFtpXSA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFZlcnRleFR5cGUuVmVydGV4X01vZGVsX1NERUZCb25lOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCJzZGVmIGlzIG5vdCBzdXBwb3J0ZWQuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkeCA9IHRoaXMuUmVhZEluZGV4KHZlcnRleEluZGV4Qnl0ZVNpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5ID0gUmVzb3VyY2VDcmVhdGVyLkNyZWF0ZUdlb21ldHJ5KHsgcDogcG9zLCBuOiBub3JtYWwsIHV2OiB1diwgaTogaWR4IH0sIHRydWUsIHRydWUsIGZhbHNlLCB0aGlzLmdyYXBoaWNEZXZpY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgbWF0ZXJpYWxDb3VudDtcclxuICAgICAgICBtYXRlcmlhbENvdW50ID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0SW50KG1hdGVyaWFsSW5kZXhCeXRlU2l6ZSk7XHJcbiAgICAgICAgdmFyIHN1YnNldCA9IG5ldyBBcnJheShtYXRlcmlhbENvdW50KTtcclxuICAgICAgICB2YXIgZGlyID0gR2V0RGlyZWN0b3J5KHRoaXMuZmlsZVBhdGgpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF0ZXJpYWxDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBmaWxlTmFtZUNvdW50ID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0SW50KCk7XHJcbiAgICAgICAgICAgIGlmIChlbmNvZGVUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWF0ZXJpYWxGaWxlUGF0aCA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldFN0cmluZyhmaWxlTmFtZUNvdW50KTtcclxuICAgICAgICAgICAgICAgIGFyeV9tYXRlcmlhbC5wdXNoKFJlc291cmNlQ3JlYXRlci5DcmVhdGVNYXRlcmlhbEZyb21GaWxlKGRpciArIG1hdGVyaWFsRmlsZVBhdGgsIHRoaXMuY29udGFpbmVyLCB0aGlzLmdyYXBoaWNEZXZpY2UpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBtYXRlcmlhbEZpbGVQYXRoID0gdGhpcy5idWZmZXJSZWFkZXIuR2V0V1N0cmluZyhmaWxlTmFtZUNvdW50KTtcclxuICAgICAgICAgICAgICAgIGFyeV9tYXRlcmlhbC5wdXNoKFJlc291cmNlQ3JlYXRlci5DcmVhdGVNYXRlcmlhbEZyb21GaWxlKGRpciArIG1hdGVyaWFsRmlsZVBhdGgsIHRoaXMuY29udGFpbmVyLCB0aGlzLmdyYXBoaWNEZXZpY2UpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzdWJzZXRbaV0gPSAodGhpcy5idWZmZXJSZWFkZXIuR2V0SW50KCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBnZW9tZXRyeS5TZXRTdWJzZXQoc3Vic2V0KTtcclxuICAgICAgICB0aGlzLm1lc2guU2V0UGFyYW1ldGVyKGdlb21ldHJ5LCBhcnlfbWF0ZXJpYWwpO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLkxvYWRFbmQoKTtcclxuICAgIH07XHJcbiAgICBCM01Ib2xkZXIucHJvdG90eXBlLlJlYWRJbmRleCA9IGZ1bmN0aW9uICh2ZXJ0ZXhJbmRleEJ5dGVTaXplKSB7XHJcbiAgICAgICAgLy/jgqTjg7Pjg4fjg4Pjgq/jgrnjga7oqq3jgb/ovrzjgb9cclxuICAgICAgICB2YXIgaW5kZXhDb3VudCA9IHRoaXMuYnVmZmVyUmVhZGVyLkdldEludCgpO1xyXG4gICAgICAgIHZhciBpZHggPSBuZXcgQXJyYXkoaW5kZXhDb3VudCAqIDMpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5kZXhDb3VudCAqIDM7IGkrKykge1xyXG4gICAgICAgICAgICBpZHhbaV0gPSAodGhpcy5idWZmZXJSZWFkZXIuR2V0VUludCh2ZXJ0ZXhJbmRleEJ5dGVTaXplKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpZHg7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEIzTUhvbGRlcjtcclxufSgpKTtcclxudmFyIE1hdGVyaWFsQmluTG9hZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTWF0ZXJpYWxCaW5Mb2FkZXIoKSB7XHJcbiAgICB9XHJcbiAgICBNYXRlcmlhbEJpbkxvYWRlci5wcm90b3R5cGUuSW5pdGlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbWF0O1xyXG4gICAgICAgIHZhciBtYXRlcmlhbFJlYWRlciA9IG5ldyBCaW5hcnlSZWFkZXJfMS5kZWZhdWx0KHRoaXMuYnVmZmVyKTtcclxuICAgICAgICB2YXIgbWFnaWMgPSBtYXRlcmlhbFJlYWRlci5HZXRTdHJpbmcoMTYpO1xyXG4gICAgICAgIGlmIChtYWdpYyAhPSBcIkJ1dGlNYXRlcmlhbERhdGFcIikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIuODleOCoeOCpOODq+OBjOmBleOBhOOBvuOBmVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdmVyc2lvbiA9IG1hdGVyaWFsUmVhZGVyLkdldEZsb2F0KCk7XHJcbiAgICAgICAgLy8w44Gnc3RkOjp3c3RyaW5nICwx44Gnc3RkOjpzdHJpbmdcclxuICAgICAgICB2YXIgZW5jb2RlVHlwZSA9IG1hdGVyaWFsUmVhZGVyLkdldENoYXIoKTtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBtYXRlcmlhbE5hbWVDb3VudCA9IG1hdGVyaWFsUmVhZGVyLkdldEludCgpO1xyXG4gICAgICAgICAgICBpZiAoZW5jb2RlVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWxSZWFkZXIuR2V0U3RyaW5nKG1hdGVyaWFsTmFtZUNvdW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG1hdGVyaWFsUmVhZGVyLkdldFdTdHJpbmcobWF0ZXJpYWxOYW1lQ291bnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v44Oe44OG44Oq44Ki44Or5ZCN6IuxXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbWF0ZXJpYWxOYW1lQ291bnQgPSBtYXRlcmlhbFJlYWRlci5HZXRJbnQoKTtcclxuICAgICAgICAgICAgaWYgKGVuY29kZVR5cGUpIHtcclxuICAgICAgICAgICAgICAgIG1hdGVyaWFsUmVhZGVyLkdldFN0cmluZyhtYXRlcmlhbE5hbWVDb3VudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBtYXRlcmlhbFJlYWRlci5HZXRXU3RyaW5nKG1hdGVyaWFsTmFtZUNvdW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvL+ODhuOCr+OCueODgeODo1xyXG4gICAgICAgIHZhciB0ZXh0dXJlQ291bnQgPSBtYXRlcmlhbFJlYWRlci5HZXRDaGFyKCk7XHJcbiAgICAgICAgdmFyIGFyeV90ZXh0dXJlID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgdmFyIGRpciA9IEdldERpcmVjdG9yeSh0aGlzLmZpbGVQYXRoKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRleHR1cmVDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciB0ZXhOYW1lQ291bnQgPSBtYXRlcmlhbFJlYWRlci5HZXRJbnQoKTtcclxuICAgICAgICAgICAgaWYgKHRleE5hbWVDb3VudCA8IDApIHtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChlbmNvZGVUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGV4dHVyZU5hbWUgPSBtYXRlcmlhbFJlYWRlci5HZXRTdHJpbmcodGV4TmFtZUNvdW50KTtcclxuICAgICAgICAgICAgICAgIGFyeV90ZXh0dXJlLnB1c2godGhpcy5jb250YWluZXIuQWRkVGV4dHVyZUZyb21GaWxlKGRpciArIFwiLi4vXCIgKyB0ZXh0dXJlTmFtZSwgdGhpcy5ncmFwaGljRGV2aWNlKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGV4dHVyZU5hbWUgPSBtYXRlcmlhbFJlYWRlci5HZXRXU3RyaW5nKHRleE5hbWVDb3VudCk7XHJcbiAgICAgICAgICAgICAgICBhcnlfdGV4dHVyZS5wdXNoKHRoaXMuY29udGFpbmVyLkFkZFRleHR1cmVGcm9tRmlsZShkaXIgKyBcIi4uL1wiICsgdGV4dHVyZU5hbWUsIHRoaXMuZ3JhcGhpY0RldmljZSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v44Oe44OG44Oq44Ki44OrXHJcbiAgICAgICAgdmFyIGRpZmZ1c2UgPSBuZXcgVmVjdG9yNF8xLmRlZmF1bHQobWF0ZXJpYWxSZWFkZXIuR2V0RmxvYXQoKSwgbWF0ZXJpYWxSZWFkZXIuR2V0RmxvYXQoKSwgbWF0ZXJpYWxSZWFkZXIuR2V0RmxvYXQoKSwgbWF0ZXJpYWxSZWFkZXIuR2V0RmxvYXQoKSk7XHJcbiAgICAgICAgdmFyIHNwZWN1bGFyID0gbmV3IFZlY3RvcjRfMS5kZWZhdWx0KG1hdGVyaWFsUmVhZGVyLkdldEZsb2F0KCksIG1hdGVyaWFsUmVhZGVyLkdldEZsb2F0KCksIG1hdGVyaWFsUmVhZGVyLkdldEZsb2F0KCksIG1hdGVyaWFsUmVhZGVyLkdldEZsb2F0KCkpO1xyXG4gICAgICAgIHZhciBhbWJpZW50ID0gbmV3IFZlY3RvcjRfMS5kZWZhdWx0KG1hdGVyaWFsUmVhZGVyLkdldEZsb2F0KCksIG1hdGVyaWFsUmVhZGVyLkdldEZsb2F0KCksIG1hdGVyaWFsUmVhZGVyLkdldEZsb2F0KCksIG1hdGVyaWFsUmVhZGVyLkdldEZsb2F0KCkpO1xyXG4gICAgICAgIHZhciBlbWlzc2l2ZSA9IG5ldyBWZWN0b3I0XzEuZGVmYXVsdChtYXRlcmlhbFJlYWRlci5HZXRGbG9hdCgpLCBtYXRlcmlhbFJlYWRlci5HZXRGbG9hdCgpLCBtYXRlcmlhbFJlYWRlci5HZXRGbG9hdCgpLCBtYXRlcmlhbFJlYWRlci5HZXRGbG9hdCgpKTtcclxuICAgICAgICB2YXIgYnl0ZUZsYWcgPSBtYXRlcmlhbFJlYWRlci5HZXRDaGFyKCk7XHJcbiAgICAgICAgdmFyIHNwaGVyZUZsYWcgPSBtYXRlcmlhbFJlYWRlci5HZXRDaGFyKCk7XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgbWF0ZXJpYWxOYW1lQ291bnQgPSBtYXRlcmlhbFJlYWRlci5HZXRJbnQoKTtcclxuICAgICAgICAgICAgaWYgKGVuY29kZVR5cGUpIHtcclxuICAgICAgICAgICAgICAgIG1hdGVyaWFsUmVhZGVyLkdldFN0cmluZyhtYXRlcmlhbE5hbWVDb3VudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBtYXRlcmlhbFJlYWRlci5HZXRXU3RyaW5nKG1hdGVyaWFsTmFtZUNvdW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1hdGVyaWFsLlNldFBhcmFtZXRlcihkaWZmdXNlLCB0aGlzLmdyYXBoaWNEZXZpY2UsIGFyeV90ZXh0dXJlKTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5Mb2FkRW5kKCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE1hdGVyaWFsQmluTG9hZGVyO1xyXG59KCkpO1xyXG52YXIgUmVzb3VyY2VDcmVhdGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUmVzb3VyY2VDcmVhdGVyKCkge1xyXG4gICAgfVxyXG4gICAgUmVzb3VyY2VDcmVhdGVyLkNyZWF0ZUdlb21ldHJ5ID0gZnVuY3Rpb24gKGRhdGEsIGlzVVYsIGlzTm9ybWFsLCBpc0NvbG9yLCBhcmdfZGV2aWNlKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBHZW9tZXRyeV8xLmRlZmF1bHQoZGF0YSwgaXNVViwgaXNOb3JtYWwsIGlzQ29sb3IsIGFyZ19kZXZpY2UpO1xyXG4gICAgfTtcclxuICAgIFJlc291cmNlQ3JlYXRlci5DcmVhdGVNYXRlcmlhbCA9IGZ1bmN0aW9uIChhcmdfYW1iaWVudCwgYXJnX2RldmljZSwgYXJnX2FyeV90ZXh0dXJlLCBhcmdfYXJ5X2V4UGFybXMpIHtcclxuICAgICAgICB2YXIgbWF0ID0gbmV3IE1hdGVyaWFsXzEuZGVmYXVsdCgpO1xyXG4gICAgICAgIG1hdC5TZXRQYXJhbWV0ZXIoYXJnX2FtYmllbnQsIGFyZ19kZXZpY2UsIGFyZ19hcnlfdGV4dHVyZSwgYXJnX2FyeV9leFBhcm1zKTtcclxuICAgICAgICByZXR1cm4gbWF0O1xyXG4gICAgfTtcclxuICAgIFJlc291cmNlQ3JlYXRlci5DcmVhdGVTaGFkZXIgPSBmdW5jdGlvbiAodnNTb3VyY2UsIGZzU291cmNlLCBhcmdfZ3JhcGhpY0RldmljZSwgdnNTb3VyY2VfZGlyZWN0LCBmc1NvdXJjZV9kaXJlY3QpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFNoYWRlcl8xLmRlZmF1bHQodnNTb3VyY2UsIGZzU291cmNlLCBhcmdfZ3JhcGhpY0RldmljZSwgdnNTb3VyY2VfZGlyZWN0LCBmc1NvdXJjZV9kaXJlY3QpO1xyXG4gICAgfTtcclxuICAgIFJlc291cmNlQ3JlYXRlci5DcmVhdGVTb3VuZCA9IGZ1bmN0aW9uIChhcmdfc291bmRTb3JjZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgU291bmRfMS5kZWZhdWx0KGFyZ19zb3VuZFNvcmNlKTtcclxuICAgIH07XHJcbiAgICBSZXNvdXJjZUNyZWF0ZXIuQ3JlYXRlVGV4dHVyZSA9IGZ1bmN0aW9uIChhcmdfcGF0aCwgYXJnX2RldmljZSkge1xyXG4gICAgICAgIHZhciB0ZXggPSBuZXcgVGV4dHVyZV8xLmRlZmF1bHQoYXJnX3BhdGgsIGFyZ19kZXZpY2UpO1xyXG4gICAgICAgIHRleC5Jbml0aWFsaXplKCk7XHJcbiAgICAgICAgcmV0dXJuIHRleDtcclxuICAgIH07XHJcbiAgICBSZXNvdXJjZUNyZWF0ZXIuQ3JlYXRlRnJhbWVCdWZmZXIgPSBmdW5jdGlvbiAod2lkdGgsIGhlaWdodCwgYXJnX2RldmljZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRnJhbWVCdWZmZXJUZXh0dXJlXzEuZGVmYXVsdChhcmdfZGV2aWNlLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgIH07XHJcbiAgICBSZXNvdXJjZUNyZWF0ZXIuQ3JlYXRlTWVzaFJlc291cmNlRnJvbUZpbGUgPSBmdW5jdGlvbiAoYXJnX2ZpbGVQYXRoLCByZXNvdXJjZUNvbnRhaW5lciwgYXJnX2RldmljZSkge1xyXG4gICAgICAgIHZhciBvdXQgPSBuZXcgTWVzaF8xLmRlZmF1bHQoKTtcclxuICAgICAgICB2YXIgaG9sZGVyID0gbmV3IEIzTUhvbGRlcigpO1xyXG4gICAgICAgIHJlc291cmNlQ29udGFpbmVyLkxvYWRTdGFydCgpO1xyXG4gICAgICAgIGhvbGRlci5ncmFwaGljRGV2aWNlID0gYXJnX2RldmljZTtcclxuICAgICAgICBob2xkZXIuY29udGFpbmVyID0gcmVzb3VyY2VDb250YWluZXI7XHJcbiAgICAgICAgaG9sZGVyLmZpbGVQYXRoID0gYXJnX2ZpbGVQYXRoO1xyXG4gICAgICAgIGhvbGRlci5tZXNoID0gb3V0O1xyXG4gICAgICAgIEZpbGVMb2FkZXJfMS5kZWZhdWx0LkxvYWRCaW4oYXJnX2ZpbGVQYXRoLCBob2xkZXIpO1xyXG4gICAgICAgIHJldHVybiBvdXQ7XHJcbiAgICB9O1xyXG4gICAgUmVzb3VyY2VDcmVhdGVyLkNyZWF0ZU1hdGVyaWFsRnJvbUZpbGUgPSBmdW5jdGlvbiAoYXJnX2ZpbGVQYXRoLCByZXNvdXJjZUNvbnRhaW5lciwgYXJnX2RldmljZSkge1xyXG4gICAgICAgIHZhciBvdXQgPSBuZXcgTWF0ZXJpYWxfMS5kZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyIGhvbGRlciA9IG5ldyBNYXRlcmlhbEJpbkxvYWRlcigpO1xyXG4gICAgICAgIHJlc291cmNlQ29udGFpbmVyLkxvYWRTdGFydCgpO1xyXG4gICAgICAgIGhvbGRlci5ncmFwaGljRGV2aWNlID0gYXJnX2RldmljZTtcclxuICAgICAgICBob2xkZXIuY29udGFpbmVyID0gcmVzb3VyY2VDb250YWluZXI7XHJcbiAgICAgICAgaG9sZGVyLmZpbGVQYXRoID0gYXJnX2ZpbGVQYXRoO1xyXG4gICAgICAgIGhvbGRlci5tYXRlcmlhbCA9IG91dDtcclxuICAgICAgICBGaWxlTG9hZGVyXzEuZGVmYXVsdC5Mb2FkQmluKGFyZ19maWxlUGF0aCwgaG9sZGVyKTtcclxuICAgICAgICByZXR1cm4gb3V0O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBSZXNvdXJjZUNyZWF0ZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IFJlc291cmNlQ3JlYXRlcjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbn07XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIE1hdHJpeF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL01hdGgvTWF0cml4XCIpKTtcclxudmFyIFZlY3RvcjNfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9NYXRoL1ZlY3RvcjNcIikpO1xyXG52YXIgTWF0aEhlbHBlcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1Rvb2wvTWF0aEhlbHBlclwiKSk7XHJcbnZhciBjYWxjTWF0cml4NHg0ID0gbmV3IE1hdHJpeF8xLmRlZmF1bHQoKS5JZGVudGl0eSgpO1xyXG52YXIgVHJhbnNmb3JtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVHJhbnNmb3JtKHBvc2l0aW9uLCByb3RhdGlvbiwgc2NhbGUpIHtcclxuICAgICAgICBpZiAocG9zaXRpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24gPSBuZXcgVmVjdG9yM18xLmRlZmF1bHQoMCwgMCwgMCk7XHJcbiAgICAgICAgaWYgKHNjYWxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NhbGUgPSBzY2FsZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NhbGUgPSBuZXcgVmVjdG9yM18xLmRlZmF1bHQoMSwgMSwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucm90YXRpb24gPSBuZXcgTWF0cml4XzEuZGVmYXVsdCgpLklkZW50aXR5KCk7XHJcbiAgICAgICAgaWYgKHJvdGF0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMucm90YXRpb24uUm90YXRlX2IoTWF0aEhlbHBlcl8xLmRlZmF1bHQuVG9SYWRpYW4ocm90YXRpb24ueiksIFZlY3RvcjNfMS5kZWZhdWx0LnpBeGlzKS5NdWx0aXBseV9iKG5ldyBNYXRyaXhfMS5kZWZhdWx0KCkuSWRlbnRpdHkoKS5Sb3RhdGVfYihNYXRoSGVscGVyXzEuZGVmYXVsdC5Ub1JhZGlhbihyb3RhdGlvbi55KSwgVmVjdG9yM18xLmRlZmF1bHQueUF4aXMpKS5NdWx0aXBseV9iKG5ldyBNYXRyaXhfMS5kZWZhdWx0KCkuSWRlbnRpdHkoKS5Sb3RhdGVfYihNYXRoSGVscGVyXzEuZGVmYXVsdC5Ub1JhZGlhbihyb3RhdGlvbi54KSwgVmVjdG9yM18xLmRlZmF1bHQueEF4aXMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5nZW5lcmF0ZUZ1bmMgPSB0aGlzLlNjYWxlUm90YXRpb25UcmFuc2xhdGU7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVHJhbnNmb3JtLnByb3RvdHlwZSwgXCJQb3NpdGlvblwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBtYXQgPSB0aGlzLk1hdHJpeDtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IzXzEuZGVmYXVsdChtYXQuZGF0YVsxMl0sIG1hdC5kYXRhWzEzXSwgbWF0LmRhdGFbMTRdKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24ueCA9IHZhbHVlLng7XHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24ueSA9IHZhbHVlLnk7XHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24ueiA9IHZhbHVlLno7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1hdHJpeCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXRyaXguZGF0YVsxMl0gPSB0aGlzLnBvc2l0aW9uLng7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hdHJpeC5kYXRhWzEzXSA9IHRoaXMucG9zaXRpb24ueTtcclxuICAgICAgICAgICAgICAgIHRoaXMubWF0cml4LmRhdGFbMTRdID0gdGhpcy5wb3NpdGlvbi56O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRyYW5zZm9ybS5wcm90b3R5cGUsIFwiTG9jYWxQb3NpdGlvblwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLkNsb25lKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRyYW5zZm9ybS5wcm90b3R5cGUsIFwiUm90YXRpb25cIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5iYXNlVHJhbnNmb3JtICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmJhc2VUcmFuc2Zvcm0uUm90YXRpb24uTXVsdGlwbHkodGhpcy5yb3RhdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucm90YXRpb247XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnJvdGF0aW9uID0gdmFsdWUuQ2xvbmUoKTtcclxuICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBudWxsO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUcmFuc2Zvcm0ucHJvdG90eXBlLCBcIlNjYWxlXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2NhbGUuQ2xvbmUoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NhbGUueCA9IHZhbHVlLng7XHJcbiAgICAgICAgICAgIHRoaXMuc2NhbGUueSA9IHZhbHVlLnk7XHJcbiAgICAgICAgICAgIHRoaXMuc2NhbGUueiA9IHZhbHVlLno7XHJcbiAgICAgICAgICAgIHRoaXMubWF0cml4ID0gbnVsbDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVHJhbnNmb3JtLnByb3RvdHlwZSwgXCJNYXRyaXhcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5tYXRyaXggPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVGdW5jKCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmJhc2VUcmFuc2Zvcm0gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmFzZVRyYW5zZm9ybS5NYXRyaXguTXVsdGlwbHkodGhpcy5tYXRyaXgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRyYW5zZm9ybS5wcm90b3R5cGUsIFwiTG9jYWxNYXRyaXhcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5tYXRyaXggPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVGdW5jKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1hdHJpeDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVHJhbnNmb3JtLnByb3RvdHlwZSwgXCJCYXNlVHJhbnNmb3JtXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmFzZVRyYW5zZm9ybTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKGFyZ19iYXNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmFzZVRyYW5zZm9ybSA9IGFyZ19iYXNlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShUcmFuc2Zvcm0ucHJvdG90eXBlLCBcIlNldFBvc2l0aW9uXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBudWxsO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVHJhbnNmb3JtLnByb3RvdHlwZSwgXCJTZXRTY2FsZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWF0cml4ID0gbnVsbDtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2NhbGU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgVHJhbnNmb3JtLnByb3RvdHlwZS5HZXRGcm9udCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gVmVjdG9yM18xLmRlZmF1bHQuekF4aXMuTXVsdGlwbHlfTWF0cml4KHRoaXMuUm90YXRpb24pLk5vcm1hbGl6ZV9iKCk7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNmb3JtLnByb3RvdHlwZS5HZXRSaWdodCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gVmVjdG9yM18xLmRlZmF1bHQueEF4aXMuTXVsdGlwbHlfTWF0cml4KHRoaXMuUm90YXRpb24pLk5vcm1hbGl6ZV9iKCk7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNmb3JtLnByb3RvdHlwZS5HZXRVcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gVmVjdG9yM18xLmRlZmF1bHQueUF4aXMuTXVsdGlwbHlfTWF0cml4KHRoaXMuUm90YXRpb24pLk5vcm1hbGl6ZV9iKCk7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNmb3JtLnByb3RvdHlwZS5TY2FsZVJvdGF0aW9uVHJhbnNsYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubWF0cml4ID0gbmV3IE1hdHJpeF8xLmRlZmF1bHQoKTtcclxuICAgICAgICB0aGlzLm1hdHJpeC5JZGVudGl0eSgpO1xyXG4gICAgICAgIHRoaXMubWF0cml4LlRyYW5zbGF0ZV9iKHRoaXMucG9zaXRpb24pO1xyXG4gICAgICAgIHRoaXMubWF0cml4Lk11bHRpcGx5X2IodGhpcy5yb3RhdGlvbik7XHJcbiAgICAgICAgdGhpcy5tYXRyaXguU2NhbGVfYih0aGlzLnNjYWxlKTtcclxuICAgIH07XHJcbiAgICBUcmFuc2Zvcm0ucHJvdG90eXBlLkxvb2tBdCA9IGZ1bmN0aW9uIChhcmdfdGFyZ2V0UG9zLCBhcmdfdXBBeGlzKSB7XHJcbiAgICAgICAgdGhpcy5yb3RhdGlvbi5JZGVudGl0eSgpO1xyXG4gICAgICAgIHZhciB6ID0gKGFyZ190YXJnZXRQb3MuU3ViKHRoaXMuUG9zaXRpb24pKS5Ob3JtYWxpemUoKS5NdWx0aXBseSgtMSk7XHJcbiAgICAgICAgdmFyIHggPSBhcmdfdXBBeGlzLkNyb3NzKHopLk5vcm1hbGl6ZSgpO1xyXG4gICAgICAgIHZhciB5ID0gei5Dcm9zcyh4KS5Ob3JtYWxpemUoKTtcclxuICAgICAgICB0aGlzLnJvdGF0aW9uLmRhdGFbMF0gPSB4Lng7XHJcbiAgICAgICAgdGhpcy5yb3RhdGlvbi5kYXRhWzFdID0geC55O1xyXG4gICAgICAgIHRoaXMucm90YXRpb24uZGF0YVsyXSA9IHguejtcclxuICAgICAgICB0aGlzLnJvdGF0aW9uLmRhdGFbNF0gPSB5Lng7XHJcbiAgICAgICAgdGhpcy5yb3RhdGlvbi5kYXRhWzVdID0geS55O1xyXG4gICAgICAgIHRoaXMucm90YXRpb24uZGF0YVs2XSA9IHkuejtcclxuICAgICAgICB0aGlzLnJvdGF0aW9uLmRhdGFbOF0gPSB6Lng7XHJcbiAgICAgICAgdGhpcy5yb3RhdGlvbi5kYXRhWzldID0gei55O1xyXG4gICAgICAgIHRoaXMucm90YXRpb24uZGF0YVsxMF0gPSB6Lno7XHJcbiAgICAgICAgdGhpcy5tYXRyaXggPSBudWxsO1xyXG4gICAgfTtcclxuICAgIFRyYW5zZm9ybS5wcm90b3R5cGUuU2NhbGVUcmFuc2xhdGVSb3RhdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm1hdHJpeCA9IG5ldyBNYXRyaXhfMS5kZWZhdWx0KCk7XHJcbiAgICAgICAgdGhpcy5tYXRyaXguSWRlbnRpdHkoKTtcclxuICAgICAgICB0aGlzLm1hdHJpeC5NdWx0aXBseV9iKHRoaXMucm90YXRpb24pO1xyXG4gICAgICAgIHRoaXMubWF0cml4LlRyYW5zbGF0ZV9iKHRoaXMucG9zaXRpb24pO1xyXG4gICAgICAgIHRoaXMubWF0cml4LlNjYWxlX2IodGhpcy5zY2FsZSk7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNmb3JtLnByb3RvdHlwZS5UcmFuc2xhdGUgPSBmdW5jdGlvbiAoYXJnX3ZlbG9jaXR5KSB7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbi54ID0gdGhpcy5wb3NpdGlvbi54ICsgYXJnX3ZlbG9jaXR5Lng7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbi55ID0gdGhpcy5wb3NpdGlvbi55ICsgYXJnX3ZlbG9jaXR5Lnk7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbi56ID0gdGhpcy5wb3NpdGlvbi56ICsgYXJnX3ZlbG9jaXR5Lno7XHJcbiAgICAgICAgaWYgKHRoaXMubWF0cml4KSB7XHJcbiAgICAgICAgICAgIHRoaXMubWF0cml4LmRhdGFbMTJdID0gdGhpcy5wb3NpdGlvbi54O1xyXG4gICAgICAgICAgICB0aGlzLm1hdHJpeC5kYXRhWzEzXSA9IHRoaXMucG9zaXRpb24ueTtcclxuICAgICAgICAgICAgdGhpcy5tYXRyaXguZGF0YVsxNF0gPSB0aGlzLnBvc2l0aW9uLno7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFRyYW5zZm9ybS5wcm90b3R5cGUuVHJhbnNsYXRlWCA9IGZ1bmN0aW9uIChhcmdfeCkge1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24uZGF0YVswXSArPSBhcmdfeDtcclxuICAgICAgICBpZiAodGhpcy5tYXRyaXgpIHtcclxuICAgICAgICAgICAgdGhpcy5tYXRyaXguZGF0YVsxMl0gPSB0aGlzLnBvc2l0aW9uLng7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFRyYW5zZm9ybS5wcm90b3R5cGUuVHJhbnNsYXRlWSA9IGZ1bmN0aW9uIChhcmdfeSkge1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24uZGF0YVsxXSArPSBhcmdfeTtcclxuICAgICAgICBpZiAodGhpcy5tYXRyaXgpIHtcclxuICAgICAgICAgICAgdGhpcy5tYXRyaXguZGF0YVsxM10gPSB0aGlzLnBvc2l0aW9uLnk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFRyYW5zZm9ybS5wcm90b3R5cGUuVHJhbnNsYXRlWiA9IGZ1bmN0aW9uIChhcmdfeikge1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24uZGF0YVsyXSArPSBhcmdfejtcclxuICAgICAgICBpZiAodGhpcy5tYXRyaXgpIHtcclxuICAgICAgICAgICAgdGhpcy5tYXRyaXguZGF0YVsxNF0gPSB0aGlzLnBvc2l0aW9uLno7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFRyYW5zZm9ybS5wcm90b3R5cGUuU2V0UG9zaXRpb25YID0gZnVuY3Rpb24gKGFyZ194KSB7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbi5kYXRhWzBdID0gYXJnX3g7XHJcbiAgICAgICAgaWYgKHRoaXMubWF0cml4KSB7XHJcbiAgICAgICAgICAgIHRoaXMubWF0cml4LmRhdGFbMTJdID0gdGhpcy5wb3NpdGlvbi54O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBUcmFuc2Zvcm0ucHJvdG90eXBlLlNldFBvc2l0aW9uWSA9IGZ1bmN0aW9uIChhcmdfeSkge1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24uZGF0YVsxXSA9IGFyZ195O1xyXG4gICAgICAgIGlmICh0aGlzLm1hdHJpeCkge1xyXG4gICAgICAgICAgICB0aGlzLm1hdHJpeC5kYXRhWzEzXSA9IGFyZ195O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBUcmFuc2Zvcm0ucHJvdG90eXBlLlNldFBvc2l0aW9uWiA9IGZ1bmN0aW9uIChhcmdfeikge1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24uZGF0YVsyXSA9IGFyZ196O1xyXG4gICAgICAgIGlmICh0aGlzLm1hdHJpeCkge1xyXG4gICAgICAgICAgICB0aGlzLm1hdHJpeC5kYXRhWzE0XSA9IHRoaXMucG9zaXRpb24uejtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgVHJhbnNmb3JtLnByb3RvdHlwZS5TZXRTY2FsZVggPSBmdW5jdGlvbiAoYXJnX3gpIHtcclxuICAgICAgICB0aGlzLnNjYWxlLmRhdGFbMF0gPSBhcmdfeDtcclxuICAgICAgICB0aGlzLm1hdHJpeCA9IG51bGw7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNmb3JtLnByb3RvdHlwZS5TZXRTY2FsZVkgPSBmdW5jdGlvbiAoYXJnX3kpIHtcclxuICAgICAgICB0aGlzLnNjYWxlLmRhdGFbMV0gPSBhcmdfeTtcclxuICAgICAgICB0aGlzLm1hdHJpeCA9IG51bGw7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNmb3JtLnByb3RvdHlwZS5TZXRTY2FsZVogPSBmdW5jdGlvbiAoYXJnX3opIHtcclxuICAgICAgICB0aGlzLnNjYWxlLmRhdGFbMl0gPSBhcmdfejtcclxuICAgICAgICB0aGlzLm1hdHJpeCA9IG51bGw7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNmb3JtLnByb3RvdHlwZS5Sb2xsX0xvY2FsID0gZnVuY3Rpb24gKGFyZ19yb3RhdGVNYXRyaXgpIHtcclxuICAgICAgICB0aGlzLnJvdGF0aW9uLk11bHRpcGx5X2IoYXJnX3JvdGF0ZU1hdHJpeCk7XHJcbiAgICAgICAgdGhpcy5tYXRyaXggPSBudWxsO1xyXG4gICAgfTtcclxuICAgIFRyYW5zZm9ybS5wcm90b3R5cGUuUm9sbF9Xb3JsZCA9IGZ1bmN0aW9uIChhcmdfcm90YXRlTWF0cml4KSB7XHJcbiAgICAgICAgdGhpcy5yb3RhdGlvbiA9IGFyZ19yb3RhdGVNYXRyaXguTXVsdGlwbHkodGhpcy5yb3RhdGlvbik7XHJcbiAgICAgICAgdGhpcy5tYXRyaXggPSBudWxsO1xyXG4gICAgfTtcclxuICAgIFRyYW5zZm9ybS5wcm90b3R5cGUuUm9sbFhfTG9jYWxfRGVncmVlcyA9IGZ1bmN0aW9uIChhcmdfZGVncmVlcykge1xyXG4gICAgICAgIHRoaXMuUm9sbFhfTG9jYWxfUmFkaWFucyhNYXRoSGVscGVyXzEuZGVmYXVsdC5Ub1JhZGlhbihhcmdfZGVncmVlcykpO1xyXG4gICAgfTtcclxuICAgIFRyYW5zZm9ybS5wcm90b3R5cGUuUm9sbFhfTG9jYWxfUmFkaWFucyA9IGZ1bmN0aW9uIChhcmdfcmFkaWFucykge1xyXG4gICAgICAgIGNhbGNNYXRyaXg0eDQuSWRlbnRpdHkoKTtcclxuICAgICAgICBjYWxjTWF0cml4NHg0LlJvdGF0ZV9iKGFyZ19yYWRpYW5zLCBWZWN0b3IzXzEuZGVmYXVsdC54QXhpcyk7XHJcbiAgICAgICAgdGhpcy5yb3RhdGlvbi5NdWx0aXBseV9iKGNhbGNNYXRyaXg0eDQpO1xyXG4gICAgICAgIHRoaXMubWF0cml4ID0gbnVsbDtcclxuICAgIH07XHJcbiAgICBUcmFuc2Zvcm0ucHJvdG90eXBlLlJvbGxYX1dvcmxkX0RlZ3JlZXMgPSBmdW5jdGlvbiAoYXJnX2RlZ3JlZXMpIHtcclxuICAgICAgICB0aGlzLlJvbGxYX1dvcmxkX1JhZGlhbnMoTWF0aEhlbHBlcl8xLmRlZmF1bHQuVG9SYWRpYW4oYXJnX2RlZ3JlZXMpKTtcclxuICAgIH07XHJcbiAgICBUcmFuc2Zvcm0ucHJvdG90eXBlLlJvbGxYX1dvcmxkX1JhZGlhbnMgPSBmdW5jdGlvbiAoYXJnX3JhZGlhbnMpIHtcclxuICAgICAgICBjYWxjTWF0cml4NHg0LklkZW50aXR5KCk7XHJcbiAgICAgICAgY2FsY01hdHJpeDR4NC5Sb3RhdGVfYihhcmdfcmFkaWFucywgVmVjdG9yM18xLmRlZmF1bHQueEF4aXMpO1xyXG4gICAgICAgIHRoaXMucm90YXRpb24gPSBjYWxjTWF0cml4NHg0Lk11bHRpcGx5KHRoaXMucm90YXRpb24pO1xyXG4gICAgICAgIHRoaXMubWF0cml4ID0gbnVsbDtcclxuICAgIH07XHJcbiAgICBUcmFuc2Zvcm0ucHJvdG90eXBlLlJvbGxZX0xvY2FsX0RlZ3JlZXMgPSBmdW5jdGlvbiAoYXJnX2RlZ3JlZXMpIHtcclxuICAgICAgICB0aGlzLlJvbGxZX0xvY2FsX1JhZGlhbnMoTWF0aEhlbHBlcl8xLmRlZmF1bHQuVG9SYWRpYW4oYXJnX2RlZ3JlZXMpKTtcclxuICAgIH07XHJcbiAgICBUcmFuc2Zvcm0ucHJvdG90eXBlLlJvbGxZX0xvY2FsX1JhZGlhbnMgPSBmdW5jdGlvbiAoYXJnX3JhZGlhbnMpIHtcclxuICAgICAgICBjYWxjTWF0cml4NHg0LklkZW50aXR5KCk7XHJcbiAgICAgICAgY2FsY01hdHJpeDR4NC5Sb3RhdGVfYihhcmdfcmFkaWFucywgVmVjdG9yM18xLmRlZmF1bHQueUF4aXMpO1xyXG4gICAgICAgIHRoaXMucm90YXRpb24uTXVsdGlwbHlfYihjYWxjTWF0cml4NHg0KTtcclxuICAgICAgICB0aGlzLm1hdHJpeCA9IG51bGw7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNmb3JtLnByb3RvdHlwZS5Sb2xsWV9Xb3JsZF9EZWdyZWVzID0gZnVuY3Rpb24gKGFyZ19kZWdyZWVzKSB7XHJcbiAgICAgICAgdGhpcy5Sb2xsWV9Xb3JsZF9SYWRpYW5zKE1hdGhIZWxwZXJfMS5kZWZhdWx0LlRvUmFkaWFuKGFyZ19kZWdyZWVzKSk7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNmb3JtLnByb3RvdHlwZS5Sb2xsWV9Xb3JsZF9SYWRpYW5zID0gZnVuY3Rpb24gKGFyZ19yYWRpYW5zKSB7XHJcbiAgICAgICAgY2FsY01hdHJpeDR4NC5JZGVudGl0eSgpO1xyXG4gICAgICAgIGNhbGNNYXRyaXg0eDQuUm90YXRlX2IoYXJnX3JhZGlhbnMsIFZlY3RvcjNfMS5kZWZhdWx0LnlBeGlzKTtcclxuICAgICAgICB0aGlzLnJvdGF0aW9uID0gY2FsY01hdHJpeDR4NC5NdWx0aXBseSh0aGlzLnJvdGF0aW9uKTtcclxuICAgICAgICB0aGlzLm1hdHJpeCA9IG51bGw7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNmb3JtLnByb3RvdHlwZS5Sb2xsWl9Mb2NhbF9EZWdyZWVzID0gZnVuY3Rpb24gKGFyZ19kZWdyZWVzKSB7XHJcbiAgICAgICAgdGhpcy5Sb2xsWl9Mb2NhbF9SYWRpYW5zKE1hdGhIZWxwZXJfMS5kZWZhdWx0LlRvUmFkaWFuKGFyZ19kZWdyZWVzKSk7XHJcbiAgICB9O1xyXG4gICAgVHJhbnNmb3JtLnByb3RvdHlwZS5Sb2xsWl9Mb2NhbF9SYWRpYW5zID0gZnVuY3Rpb24gKGFyZ19yYWRpYW5zKSB7XHJcbiAgICAgICAgY2FsY01hdHJpeDR4NC5JZGVudGl0eSgpO1xyXG4gICAgICAgIGNhbGNNYXRyaXg0eDQuUm90YXRlX2IoYXJnX3JhZGlhbnMsIFZlY3RvcjNfMS5kZWZhdWx0LnpBeGlzKTtcclxuICAgICAgICB0aGlzLnJvdGF0aW9uLk11bHRpcGx5X2IoY2FsY01hdHJpeDR4NCk7XHJcbiAgICAgICAgdGhpcy5tYXRyaXggPSBudWxsO1xyXG4gICAgfTtcclxuICAgIFRyYW5zZm9ybS5wcm90b3R5cGUuUm9sbFpfV29ybGRfRGVncmVlcyA9IGZ1bmN0aW9uIChhcmdfZGVncmVlcykge1xyXG4gICAgICAgIHRoaXMuUm9sbFpfV29ybGRfUmFkaWFucyhNYXRoSGVscGVyXzEuZGVmYXVsdC5Ub1JhZGlhbihhcmdfZGVncmVlcykpO1xyXG4gICAgfTtcclxuICAgIFRyYW5zZm9ybS5wcm90b3R5cGUuUm9sbFpfV29ybGRfUmFkaWFucyA9IGZ1bmN0aW9uIChhcmdfcmFkaWFucykge1xyXG4gICAgICAgIGNhbGNNYXRyaXg0eDQuSWRlbnRpdHkoKTtcclxuICAgICAgICBjYWxjTWF0cml4NHg0LlJvdGF0ZV9iKGFyZ19yYWRpYW5zLCBWZWN0b3IzXzEuZGVmYXVsdC56QXhpcyk7XHJcbiAgICAgICAgdGhpcy5yb3RhdGlvbiA9IGNhbGNNYXRyaXg0eDQuTXVsdGlwbHkodGhpcy5yb3RhdGlvbik7XHJcbiAgICAgICAgdGhpcy5tYXRyaXggPSBudWxsO1xyXG4gICAgfTtcclxuICAgIFRyYW5zZm9ybS5wcm90b3R5cGUuQ2xvbmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG91dCA9IG5ldyBUcmFuc2Zvcm0odGhpcy5Mb2NhbFBvc2l0aW9uKTtcclxuICAgICAgICBvdXQuc2NhbGUgPSB0aGlzLnNjYWxlO1xyXG4gICAgICAgIG91dC5yb3RhdGlvbiA9IHRoaXMucm90YXRpb247XHJcbiAgICAgICAgb3V0LmJhc2VUcmFuc2Zvcm0gPSB0aGlzLmJhc2VUcmFuc2Zvcm07XHJcbiAgICAgICAgcmV0dXJuIG91dDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVHJhbnNmb3JtO1xyXG59KCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBUcmFuc2Zvcm07XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBHcmFwaGljRGV2aWNlXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vR3JhcGhpYy9HcmFwaGljRGV2aWNlXCIpKTtcclxudmFyIFJlc291cmNlQ29udGFpbmVyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vUGFydHMvUmVzb3VyY2VDb250YWluZXJcIikpO1xyXG52YXIgTW9kZWxDcmVhdGVyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vUGFydHMvTW9kZWxDcmVhdGVyXCIpKTtcclxudmFyIFNjZW5lTWFuYWdlcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1NjZW5lL1NjZW5lTWFuYWdlclwiKSk7XHJcbnZhciBJbnB1dF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1Rvb2wvSW5wdXRcIikpO1xyXG52YXIgVGl0bGVTY2VuZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL1RpdGxlU2NlbmVcIikpO1xyXG52YXIgTG9hZFNjZW5lXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vTG9hZFNjZW5lXCIpKTtcclxub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc29sZS5sb2coXCJ0aGlzIGpzIGlzIHdlYkdML2luZGV4LnRzXCIpO1xyXG4gICAgLy9jYW52YXPjgqjjg6zjg6Hjg7Pjg4jjgpLlj5blvpdcclxuICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXlDYW52YXMnKTtcclxuICAgIC8vYXVkaW9FbGVtZW50LnZvbHVtZT0wLjA7XHJcbiAgICBjYW52YXMuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsIFwiXCIpO1xyXG4gICAgY2FudmFzLndpZHRoID0gNjAwO1xyXG4gICAgY2FudmFzLmhlaWdodCA9IDYwMDtcclxuICAgIElucHV0XzEuZGVmYXVsdC5jYW52YXMgPSBjYW52YXM7XHJcbiAgICB2YXIgcmVzb3VyY2VDb250YWluZXIgPSBuZXcgUmVzb3VyY2VDb250YWluZXJfMS5kZWZhdWx0KCk7XHJcbiAgICB2YXIgZ3JhcGhpY0RldmljZSA9IG5ldyBHcmFwaGljRGV2aWNlXzEuZGVmYXVsdChjYW52YXMpO1xyXG4gICAgdmFyIG1vZGVsQ3JlYXRlciA9IG5ldyBNb2RlbENyZWF0ZXJfMS5kZWZhdWx0KGdyYXBoaWNEZXZpY2UsIHJlc291cmNlQ29udGFpbmVyKTtcclxuICAgIHZhciBzY2VuZU1hbmFnZXIgPSBuZXcgU2NlbmVNYW5hZ2VyXzEuZGVmYXVsdChtb2RlbENyZWF0ZXIsIHJlc291cmNlQ29udGFpbmVyLCBncmFwaGljRGV2aWNlKTtcclxuICAgIHNjZW5lTWFuYWdlci5BZGRTY2VuZShuZXcgVGl0bGVTY2VuZV8xLmRlZmF1bHQoc2NlbmVNYW5hZ2VyKSwgXCJ0aXRsZVwiKTtcclxuICAgIHNjZW5lTWFuYWdlci5BZGRTY2VuZShuZXcgTG9hZFNjZW5lXzEuZGVmYXVsdChzY2VuZU1hbmFnZXIpLCBcImxvYWRcIik7XHJcbiAgICBzY2VuZU1hbmFnZXIuQ2hhbmdlU2NlbmUoXCJ0aXRsZVwiKTtcclxuICAgIHRpY2soKTtcclxuICAgIC8vIOaBkuW4uOODq+ODvOODl1xyXG4gICAgZnVuY3Rpb24gdGljaygpIHtcclxuICAgICAgICBzY2VuZU1hbmFnZXIuVXBkYXRlKCk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhJbnB1dC5tb3VzZVBvc2l0aW9uLngrXCIsXCIrSW5wdXQubW91c2VQb3NpdGlvbi54KTtcclxuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGljayk7XHJcbiAgICB9XHJcbiAgICA7XHJcbn07XHJcbiIsIlxyXG5yZXF1aXJlKFwiLi9XZWJHbC9pbmRleFwiKSJdLCJzb3VyY2VSb290IjoiIn0=