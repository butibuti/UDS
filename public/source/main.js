!function(t){var e={};function a(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=e,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(r,i,function(e){return t[e]}.bind(null,i));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=24)}([function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,a){this.data=new Float32Array(3),this.data[0]=t,this.data[1]=e,this.data[2]=a}return Object.defineProperty(t.prototype,"x",{get:function(){return this.data[0]},set:function(t){this.data[0]=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.data[1]},set:function(t){this.data[1]=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this.data[2]},set:function(t){this.data[2]=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"xyz",{get:function(){return this.data},enumerable:!1,configurable:!0}),t.prototype.Add=function(e){var a=new t(0,0,0);return a.data[0]=this.data[0]+e.data[0],a.data[1]=this.data[1]+e.data[1],a.data[2]=this.data[2]+e.data[2],a},t.prototype.Add_b=function(t){return this.data[0]=this.data[0]+t.data[0],this.data[1]=this.data[1]+t.data[1],this.data[2]=this.data[2]+t.data[2],this},t.prototype.AddX_b=function(t){return this.data[0]+=t,this},t.prototype.AddY=function(t){var e=this.Clone();return e.data[1]+=t,e},t.prototype.AddY_b=function(t){return this.data[1]+=t,this},t.prototype.AddZ_b=function(t){return this.data[2]+=t,this},t.prototype.Sub=function(e){var a=new t(0,0,0);return a.data[0]=this.data[0]-e.data[0],a.data[1]=this.data[1]-e.data[1],a.data[2]=this.data[2]-e.data[2],a},t.prototype.Sub_b=function(t){return this.data[0]=this.data[0]-t.data[0],this.data[1]=this.data[1]-t.data[1],this.data[2]=this.data[2]-t.data[2],this},t.prototype.Multiply=function(e){var a=new t(0,0,0);return a.data[0]=this.data[0]*e,a.data[1]=this.data[1]*e,a.data[2]=this.data[2]*e,a},t.prototype.Multiply_Vec3=function(e){var a=new t(0,0,0);return a.data[0]=this.data[0]*e.data[0],a.data[1]=this.data[1]*e.data[1],a.data[2]=this.data[2]*e.data[2],a},t.prototype.Multiply_b=function(t){return this.data[0]*=t,this.data[1]*=t,this.data[2]*=t,this},t.prototype.Multiply_Vec3_b=function(t){return this.data[0]=this.data[0]*t.data[0],this.data[1]=this.data[1]*t.data[1],this.data[2]=this.data[2]*t.data[2],this},t.prototype.Multiply_Matrix=function(e){var a=new t(0,0,0);return a.data[0]=this.data[0]*e.data[0]+this.data[1]*e.data[4]+this.data[2]*e.data[8]+e.data[12],a.data[1]=this.data[0]*e.data[1]+this.data[1]*e.data[5]+this.data[2]*e.data[9]+e.data[13],a.data[2]=this.data[0]*e.data[2]+this.data[1]*e.data[6]+this.data[2]*e.data[10]+e.data[14],a},t.prototype.Div=function(e){var a=new t(0,0,0);return a.data[0]=this.data[0]/e,a.data[1]=this.data[1]/e,a.data[2]=this.data[2]/e,a},t.prototype.Div_b=function(t){return this.data[0]/=t,this.data[1]/=t,this.data[2]/=t,this},t.prototype.Length=function(){return Math.sqrt(this.data[0]*this.data[0]+this.data[1]*this.data[1]+this.data[2]*this.data[2])},t.prototype.LengthSqr=function(){return this.data[0]*this.data[0]+this.data[1]*this.data[1]+this.data[2]*this.data[2]},t.prototype.Dot=function(t){return this.data[0]*t.data[0]+this.data[1]*t.data[1]+this.data[2]*t.data[2]},t.prototype.Cross=function(e){var a=new t(0,0,0);return a.data[0]=this.data[1]*e.data[2]-this.data[2]*e.data[1],a.data[1]=this.data[2]*e.data[0]-this.data[0]*e.data[2],a.data[2]=this.data[0]*e.data[1]-this.data[1]*e.data[0],a},t.prototype.Normalize=function(){var e=new t(0,0,0);e.data[0]=this.data[0],e.data[1]=this.data[1],e.data[2]=this.data[2];var a=this.Length();return e.Div_b(a),e},t.prototype.Normalize_b=function(){var t=this.Length();return this.Div_b(t),this},t.prototype.Clone=function(){return new t(this.data[0],this.data[1],this.data[2])},t.xAxis=new t(1,0,0),t.yAxis=new t(0,1,0),t.zAxis=new t(0,0,1),t}();e.default=r},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return Object.defineProperty(t.prototype,"IsRemove",{get:function(){return this.isRemove},enumerable:!1,configurable:!0}),t.prototype.Set=function(t){this.gameObject=t,this.isRemove=!1,this.OnSet()},t.prototype.Dead=function(){this.isRemove=!0},t.prototype.OnSet=function(){},t.prototype.Remove=function(){this.isRemove=!0,this.OnRemove(),this.gameObject=null},t.prototype.OnRemove=function(){},t.prototype.Release=function(){this.OnRelease(),this.gameObject=null},t.prototype.OnRelease=function(){},t.prototype.Update=function(){},t.prototype.OnCollision=function(t){},t.prototype.OnCollisionEnter=function(t){},t.prototype.OnCollisionRelease=function(t){},t.prototype.GetComponentName=function(){return"Component"},t}();e.default=r},function(t,e,a){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(a(17)),n=r(a(0)),o=r(a(45)),s=(new i.default).Identity(),h=function(){function t(t,e,a){this.position=t||new n.default(0,0,0),this.scale=a||new n.default(1,1,1),this.rotation=(new i.default).Identity(),e&&this.rotation.Rotate_b(o.default.ToRadian(e.z),n.default.zAxis).Multiply_b((new i.default).Identity().Rotate_b(o.default.ToRadian(e.y),n.default.yAxis)).Multiply_b((new i.default).Identity().Rotate_b(o.default.ToRadian(e.x),n.default.xAxis)),this.generateFunc=this.ScaleRotationTranslate}return Object.defineProperty(t.prototype,"Position",{get:function(){var t=this.Matrix;return new n.default(t.data[12],t.data[13],t.data[14])},set:function(t){this.position.x=t.x,this.position.y=t.y,this.position.z=t.z,this.matrix&&(this.matrix.data[12]=this.position.x,this.matrix.data[13]=this.position.y,this.matrix.data[14]=this.position.z)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"LocalPosition",{get:function(){return this.position.Clone()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Rotation",{get:function(){return null!=this.baseTransform?this.baseTransform.Rotation.Multiply(this.rotation):this.rotation},set:function(t){this.rotation=t.Clone(),this.matrix=null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Scale",{get:function(){return this.scale.Clone()},set:function(t){this.scale.x=t.x,this.scale.y=t.y,this.scale.z=t.z,this.matrix=null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Matrix",{get:function(){return null==this.matrix&&this.generateFunc(),null!=this.baseTransform?this.baseTransform.Matrix.Multiply(this.matrix):this.matrix},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"LocalMatrix",{get:function(){return null==this.matrix&&this.generateFunc(),this.matrix},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"BaseTransform",{get:function(){return this.baseTransform},set:function(t){this.baseTransform=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"SetPosition",{get:function(){return this.matrix=null,this.position},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"SetScale",{get:function(){return this.matrix=null,this.scale},enumerable:!1,configurable:!0}),t.prototype.GetFront=function(){return n.default.zAxis.Multiply_Matrix(this.Rotation).Normalize_b()},t.prototype.GetRight=function(){return n.default.xAxis.Multiply_Matrix(this.Rotation).Normalize_b()},t.prototype.GetUp=function(){return n.default.yAxis.Multiply_Matrix(this.Rotation).Normalize_b()},t.prototype.ScaleRotationTranslate=function(){this.matrix=new i.default,this.matrix.Identity(),this.matrix.Translate_b(this.position),this.matrix.Multiply_b(this.rotation),this.matrix.Scale_b(this.scale)},t.prototype.LookAt=function(t,e){this.rotation.Identity();var a=t.Sub(this.Position).Normalize().Multiply(-1),r=e.Cross(a).Normalize(),i=a.Cross(r).Normalize();this.rotation.data[0]=r.x,this.rotation.data[1]=r.y,this.rotation.data[2]=r.z,this.rotation.data[4]=i.x,this.rotation.data[5]=i.y,this.rotation.data[6]=i.z,this.rotation.data[8]=a.x,this.rotation.data[9]=a.y,this.rotation.data[10]=a.z,this.matrix=null},t.prototype.ScaleTranslateRotation=function(){this.matrix=new i.default,this.matrix.Identity(),this.matrix.Multiply_b(this.rotation),this.matrix.Translate_b(this.position),this.matrix.Scale_b(this.scale)},t.prototype.Translate=function(t){this.position.x=this.position.x+t.x,this.position.y=this.position.y+t.y,this.position.z=this.position.z+t.z,this.matrix&&(this.matrix.data[12]=this.position.x,this.matrix.data[13]=this.position.y,this.matrix.data[14]=this.position.z)},t.prototype.TranslateX=function(t){this.position.data[0]+=t,this.matrix&&(this.matrix.data[12]=this.position.x)},t.prototype.TranslateY=function(t){this.position.data[1]+=t,this.matrix&&(this.matrix.data[13]=this.position.y)},t.prototype.TranslateZ=function(t){this.position.data[2]+=t,this.matrix&&(this.matrix.data[14]=this.position.z)},t.prototype.SetPositionX=function(t){this.position.data[0]=t,this.matrix&&(this.matrix.data[12]=this.position.x)},t.prototype.SetPositionY=function(t){this.position.data[1]=t,this.matrix&&(this.matrix.data[13]=t)},t.prototype.SetPositionZ=function(t){this.position.data[2]=t,this.matrix&&(this.matrix.data[14]=this.position.z)},t.prototype.SetScaleX=function(t){this.scale.data[0]=t,this.matrix=null},t.prototype.SetScaleY=function(t){this.scale.data[1]=t,this.matrix=null},t.prototype.SetScaleZ=function(t){this.scale.data[2]=t,this.matrix=null},t.prototype.Roll_Local=function(t){this.rotation.Multiply_b(t),this.matrix=null},t.prototype.Roll_World=function(t){this.rotation=t.Multiply(this.rotation),this.matrix=null},t.prototype.RollX_Local_Degrees=function(t){this.RollX_Local_Radians(o.default.ToRadian(t))},t.prototype.RollX_Local_Radians=function(t){s.Identity(),s.Rotate_b(t,n.default.xAxis),this.rotation.Multiply_b(s),this.matrix=null},t.prototype.RollX_World_Degrees=function(t){this.RollX_World_Radians(o.default.ToRadian(t))},t.prototype.RollX_World_Radians=function(t){s.Identity(),s.Rotate_b(t,n.default.xAxis),this.rotation=s.Multiply(this.rotation),this.matrix=null},t.prototype.RollY_Local_Degrees=function(t){this.RollY_Local_Radians(o.default.ToRadian(t))},t.prototype.RollY_Local_Radians=function(t){s.Identity(),s.Rotate_b(t,n.default.yAxis),this.rotation.Multiply_b(s),this.matrix=null},t.prototype.RollY_World_Degrees=function(t){this.RollY_World_Radians(o.default.ToRadian(t))},t.prototype.RollY_World_Radians=function(t){s.Identity(),s.Rotate_b(t,n.default.yAxis),this.rotation=s.Multiply(this.rotation),this.matrix=null},t.prototype.RollZ_Local_Degrees=function(t){this.RollZ_Local_Radians(o.default.ToRadian(t))},t.prototype.RollZ_Local_Radians=function(t){s.Identity(),s.Rotate_b(t,n.default.zAxis),this.rotation.Multiply_b(s),this.matrix=null},t.prototype.RollZ_World_Degrees=function(t){this.RollZ_World_Radians(o.default.ToRadian(t))},t.prototype.RollZ_World_Radians=function(t){s.Identity(),s.Rotate_b(t,n.default.zAxis),this.rotation=s.Multiply(this.rotation),this.matrix=null},t.prototype.Clone=function(){var e=new t(this.LocalPosition);return e.scale=this.scale,e.rotation=this.rotation,e.baseTransform=this.baseTransform,e},t}();e.default=h},function(t,e,a){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(a(1)),s=function(){this.meshName=null},h=function(t){function e(e,a,r,i,n,o,h,u){var f=t.call(this)||this;return f.info=new s,f.transform=null,f.layer=n,h&&(f.info.meshName=h),f.info.geometryName=a,f.info.shaderName=i,f.info.materialName=r,u&&(f.transform=u),f.info.lighting=e,f.info.billBoard=o,f}return i(e,t),Object.defineProperty(e.prototype,"Layer",{get:function(){return this.layer},enumerable:!1,configurable:!0}),e.prototype.OnSet=function(){this.transform||(this.transform=this.gameObject.transform),this.info.meshName?this.model=this.gameObject.Manager.Scene.GetSceneManager().GetModelCreater().CreateModelFromMesh(this.info.lighting,this.info.billBoard,this.info.meshName,this.info.shaderName,this.transform):this.model=this.gameObject.Manager.Scene.GetSceneManager().GetModelCreater().CreateModel(this.info.lighting,this.info.billBoard,this.info.geometryName,this.info.materialName,this.info.shaderName,this.transform),this.RegistDraw()},e.prototype.OnRemove=function(){this.UnRegistDraw()},e.prototype.RegistDraw=function(){this.modelID||(this.modelID=this.gameObject.GetRenderer().Regist(this.model,this.layer))},e.prototype.UnRegistDraw=function(){this.modelID&&(this.gameObject.GetRenderer().UnRegist(this.modelID,this.layer),this.modelID=null)},e}(o.default);e.default=h},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,a,r){this.data=new Float32Array(4),this.data[0]=t,this.data[1]=e,this.data[2]=a,this.data[3]=r}return Object.defineProperty(t.prototype,"x",{get:function(){return this.data[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.data[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this.data[2]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"w",{get:function(){return this.data[3]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"xyzw",{get:function(){return this.data},enumerable:!1,configurable:!0}),t.prototype.Set=function(t,e,a,r){this.data[0]=t,this.data[1]=e,this.data[2]=a,this.data[3]=r},t.prototype.Add=function(e){var a=new t(0,0,0,0);return a.data[0]=this.data[0]+e.data[0],a.data[1]=this.data[1]+e.data[1],a.data[2]=this.data[2]+e.data[2],a.data[3]=this.data[3]+e.data[3],a},t.prototype.Add_b=function(t){return this.data[0]=this.data[0]+t.data[0],this.data[1]=this.data[1]+t.data[1],this.data[2]=this.data[2]+t.data[2],this.data[3]=this.data[3]+t.data[3],this},t.prototype.Sub=function(e){var a=new t(0,0,0,0);return a.data[0]=this.data[0]-e.data[0],a.data[1]=this.data[1]-e.data[1],a.data[2]=this.data[2]-e.data[2],a.data[3]=this.data[3]-e.data[3],a},t.prototype.Sub_b=function(t){return this.data[0]=this.data[0]-t.data[0],this.data[1]=this.data[1]-t.data[1],this.data[2]=this.data[2]-t.data[2],this.data[3]=this.data[3]-t.data[3],this},t.prototype.Multiply=function(e){var a=new t(0,0,0,0);return a.data[0]=this.data[0]*e,a.data[1]=this.data[1]*e,a.data[2]=this.data[2]*e,a.data[3]=this.data[3]*e,a},t.prototype.Multiply_b=function(t){return this.data[0]*=t,this.data[1]*=t,this.data[2]*=t,this.data[3]*=t,this},t.prototype.Div=function(e){var a=new t(0,0,0,0);return a.data[0]=this.data[0]/e,a.data[1]=this.data[1]/e,a.data[2]=this.data[2]/e,a.data[3]=this.data[3]/e,a},t.prototype.Div_b=function(t){return this.data[0]/=t,this.data[1]/=t,this.data[2]/=t,this.data[3]/=t,this},t.prototype.Length=function(){return Math.sqrt(this.data[0]*this.data[0]+this.data[1]*this.data[1]+this.data[2]*this.data[2]+this.data[3]*this.data[3])},t.prototype.LengthSqr=function(){return this.data[0]*this.data[0]+this.data[1]*this.data[1]+this.data[2]*this.data[2]+this.data[3]*this.data[3]},t.prototype.Dot=function(t){return this.data[0]*t.data[0]+this.data[1]*t.data[1]+this.data[2]*t.data[2]+this.data[3]*t.data[3]},t.prototype.Normalize=function(){var e=new t(this.data[0],this.data[1],this.data[2],this.data[3]),a=this.Length();return e.Div_b(a),e},t.prototype.Normalize_b=function(){var t=this.Length();return this.Div_b(t),this},t}();e.default=r},function(t,e,a){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(a(16)),n=new Map,o=function(){function t(){}return t.GetID=function(t){return n.get(t)||n.set(t,new i.default(n.size)),n.get(t)},t}();e.default=o},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.EaseInSine=function(t){return 1-Math.cos(t*Math.PI/2)},t.EaseOutSine=function(t){return Math.sin(t*Math.PI/2)},t.EaseInOutSine=function(t){return-(Math.cos(Math.PI*t)-1)/2},t.EaseInQuad=function(t){return t*t},t.EaseOutQuad=function(t){return 1-(1-t)*(1-t)},t.EaseInOutQuad=function(t){return t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2},t.EaseInCubic=function(t){return t*t*t},t.EaseOutCubic=function(t){return 1-Math.pow(1-t,3)},t.EaseInOutCubic=function(t){return t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2},t.EaseInQuart=function(t){return t*t*t*t},t.EaseOutQuart=function(t){return 1-Math.pow(1-t,4)},t.EaseInOutQuart=function(t){return t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2},t.EaseInCirc=function(t){return 1-Math.sqrt(1-Math.pow(t,2))},t.EaseOutCirc=function(t){return Math.sqrt(1-Math.pow(t-1,2))},t.EaseInOutCirc=function(t){return t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2},t.EaseInBack=function(t){return 2.70158*t*t*t-1.70158*t*t},t.EaseOutBack=function(t){return 1+2.70158*Math.pow(t-1,3)+1.70158*Math.pow(t-1,2)},t.EaseInOutBack=function(t){var e=2.5949095;return t<.5?Math.pow(2*t,2)*(7.189819*t-e)/2:(Math.pow(2*t-2,2)*((e+1)*(2*t-2)+e)+2)/2},t.EaseInElastic=function(t){var e=2*Math.PI/3;return 0===t?0:1===t?1:-Math.pow(2,10*t-10)*Math.sin((10*t-10.75)*e)},t.EaseOutElastic=function(t){var e=2*Math.PI/3;return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin((10*t-.75)*e)+1},t.EaseInOutElastic=function(t){var e=2*Math.PI/4.5;return 0===t?0:1===t?1:t<.5?-Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*e)/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*e)/2+1},t.EaseInQuint=function(t){return t*t*t*t*t},t.EaseOutQuint=function(t){return 1-Math.pow(1-t,5)},t.EaseInOutQuint=function(t){return t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2},t.EaseInExpo=function(t){return 0===t?0:Math.pow(2,10*t-10)},t.EaseOutExpo=function(t){return 1===t?1:1-Math.pow(2,-10*t)},t.EaseInOutExpo=function(t){return 0===t?0:1===t?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2},t.Parabola=function(t){return-(t-.5)*(t-.5)*4+1},t}();e.default=r},function(t,e,a){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i,n=r(a(28)),o=r(a(29)),s=r(a(30)),h=r(a(31)),u=r(a(4)),f=r(a(32)),d=r(a(33)),c=r(a(22)),l=r(a(34)),p=r(a(35));function m(t){for(var e=t.split("/"),a="",r=0;r<e.length-1;r++)a+=e[r]+"/";return a}!function(t){t[t.Vertex_UV=0]="Vertex_UV",t[t.Vertex_Normal=1]="Vertex_Normal",t[t.Vertex_UV_Normal=2]="Vertex_UV_Normal",t[t.Vertex_UV_Normal_Color=3]="Vertex_UV_Normal_Color",t[t.Vertex_Model_SingleBone=4]="Vertex_Model_SingleBone",t[t.Vertex_Model_DoubleBone=5]="Vertex_Model_DoubleBone",t[t.Vertex_Model_QuadBone=6]="Vertex_Model_QuadBone",t[t.Vertex_Model_SDEFBone=7]="Vertex_Model_SDEFBone",t[t.Vertex_Model_Mix=8]="Vertex_Model_Mix"}(i||(i={}));var y=function(){function t(){}return t.prototype.Initialize=function(){var t,e=new Array;if(this.bufferReader=new l.default(this.buffer),"Buti3DModelData"==this.bufferReader.GetString(15)){this.bufferReader.GetFloat();var a=this.bufferReader.GetChar(),r=this.bufferReader.GetInt();a?this.bufferReader.GetString(r):this.bufferReader.GetWString(r),r=this.bufferReader.GetInt(),a?this.bufferReader.GetString(r):this.bufferReader.GetWString(r),r=this.bufferReader.GetInt(),a?this.bufferReader.GetString(r):this.bufferReader.GetWString(r),r=this.bufferReader.GetInt(),a?this.bufferReader.GetString(r):this.bufferReader.GetWString(r),r=this.bufferReader.GetInt(),a?this.bufferReader.GetString(r):this.bufferReader.GetWString(r),r=this.bufferReader.GetInt(),a?this.bufferReader.GetString(r):this.bufferReader.GetWString(r);var n,o=this.bufferReader.GetChar(),s=this.bufferReader.GetChar(),h=(this.bufferReader.GetChar(),this.bufferReader.GetChar(),this.bufferReader.GetChar()),u=this.bufferReader.GetChar(),f=this.bufferReader.GetUInt(o);switch(h){case i.Vertex_UV_Normal:switch(u){case 0:for(var d=new Array(3*f),c=new Array(2*f),p=new Array(3*f),y=0;y<f;y++){this.bufferReader.GetChar();d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat()}var b=this.ReadIndex(o);t=g.CreateGeometry({p:d,n:p,uv:c,i:b},!0,!0,!1,this.graphicDevice);break;case 1:d=new Array(3*f),c=new Array(2*f);var G=new Array(4*f);for(p=new Array(3*f),y=0;y<f;y++){this.bufferReader.GetChar();d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),G.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat()}b=this.ReadIndex(o);t=g.CreateGeometry({p:d,n:p,uv:c,i:b},!0,!0,!1,this.graphicDevice);break;case 2:d=new Array(3*f),c=new Array(2*f),G=new Array(4*f);var v=new Array(4*f);for(p=new Array(3*f),y=0;y<f;y++){this.bufferReader.GetChar();d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),G.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),v.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat()}b=this.ReadIndex(o);t=g.CreateGeometry({p:d,n:p,uv:c,i:b},!0,!0,!1,this.graphicDevice);break;case 3:d=new Array(3*f),c=new Array(2*f),G=new Array(4*f),v=new Array(4*f);var R=new Array(4*f);for(p=new Array(3*f),y=0;y<f;y++){this.bufferReader.GetChar();d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),G.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),v.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),R.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat()}b=this.ReadIndex(o);t=g.CreateGeometry({p:d,n:p,uv:c,i:b},!0,!0,!1,this.graphicDevice);break;case 4:d=new Array(3*f),c=new Array(2*f),G=new Array(4*f),v=new Array(4*f),R=new Array(4*f);var _=new Array(4*f);for(p=new Array(3*f),y=0;y<f;y++){this.bufferReader.GetChar();d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),G.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),v.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),R.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),_.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat()}b=this.ReadIndex(o);t=g.CreateGeometry({p:d,n:p,uv:c,i:b},!0,!0,!1,this.graphicDevice)}break;case i.Vertex_Model_SingleBone:switch(u){case 0:d=new Array(3*f),c=new Array(2*f),p=new Array(3*f);var w=new Array(f);for(y=0;y<f;y++){this.bufferReader.GetChar();d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat(),w[y]=this.bufferReader.GetInt(2)}b=this.ReadIndex(o);t=g.CreateGeometry({p:d,n:p,uv:c,i:b},!0,!0,!1,this.graphicDevice);break;case 1:for(d=new Array(3*f),c=new Array(2*f),G=new Array(4*f),p=new Array(3*f),w=new Array(f),y=0;y<f;y++){this.bufferReader.GetChar();d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),G.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat(),w[y]=this.bufferReader.GetInt(2)}b=this.ReadIndex(o);t=g.CreateGeometry({p:d,n:p,uv:c,i:b},!0,!0,!1,this.graphicDevice);break;case 2:for(d=new Array(3*f),c=new Array(2*f),G=new Array(4*f),v=new Array(4*f),p=new Array(3*f),w=new Array(f),y=0;y<f;y++){this.bufferReader.GetChar();d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),G.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),v.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat(),w[y]=this.bufferReader.GetInt(2)}b=this.ReadIndex(o);t=g.CreateGeometry({p:d,n:p,uv:c,i:b},!0,!0,!1,this.graphicDevice);break;case 3:for(d=new Array(3*f),c=new Array(2*f),G=new Array(4*f),v=new Array(4*f),R=new Array(4*f),p=new Array(3*f),w=new Array(f),y=0;y<f;y++){this.bufferReader.GetChar();d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),G.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),v.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),R.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat(),w[y]=this.bufferReader.GetInt(2)}b=this.ReadIndex(o);t=g.CreateGeometry({p:d,n:p,uv:c,i:b},!0,!0,!1,this.graphicDevice);break;case 4:for(d=new Array(3*f),c=new Array(2*f),G=new Array(4*f),v=new Array(4*f),R=new Array(4*f),_=new Array(4*f),p=new Array(3*f),w=new Array(f),y=0;y<f;y++){this.bufferReader.GetChar();d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),G.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),v.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),R.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),_.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat(),w[y]=this.bufferReader.GetInt(2)}b=this.ReadIndex(o);t=g.CreateGeometry({p:d,n:p,uv:c,i:b},!0,!0,!1,this.graphicDevice)}break;case i.Vertex_Model_DoubleBone:switch(u){case 0:d=new Array(3*f),c=new Array(2*f),p=new Array(3*f),w=new Array(f);var x=new Array(f),M=new Array(f);for(y=0;y<f;y++){this.bufferReader.GetChar();d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat(),w[y]=this.bufferReader.GetInt(2),x[y]=this.bufferReader.GetInt(2),M[y]=this.bufferReader.GetFloat()}b=this.ReadIndex(o);t=g.CreateGeometry({p:d,n:p,uv:c,i:b},!0,!0,!1,this.graphicDevice);break;case 1:for(d=new Array(3*f),c=new Array(2*f),G=new Array(4*f),p=new Array(3*f),w=new Array(f),x=new Array(f),M=new Array(f),y=0;y<f;y++){this.bufferReader.GetChar();d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),G.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat(),w[y]=this.bufferReader.GetInt(2),x[y]=this.bufferReader.GetInt(2),M[y]=this.bufferReader.GetFloat()}b=this.ReadIndex(o);t=g.CreateGeometry({p:d,n:p,uv:c,i:b},!0,!0,!1,this.graphicDevice);break;case 2:for(d=new Array(3*f),c=new Array(2*f),G=new Array(4*f),v=new Array(4*f),p=new Array(3*f),w=new Array(f),x=new Array(f),M=new Array(f),y=0;y<f;y++){this.bufferReader.GetChar();d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),G.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),v.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat(),w[y]=this.bufferReader.GetInt(2),x[y]=this.bufferReader.GetInt(2),M[y]=this.bufferReader.GetFloat()}b=this.ReadIndex(o);t=g.CreateGeometry({p:d,n:p,uv:c,i:b},!0,!0,!1,this.graphicDevice);break;case 3:for(d=new Array(3*f),c=new Array(2*f),G=new Array(4*f),v=new Array(4*f),R=new Array(4*f),p=new Array(3*f),w=new Array(f),x=new Array(f),M=new Array(f),y=0;y<f;y++){this.bufferReader.GetChar();d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),G.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),v.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),R.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat(),w[y]=this.bufferReader.GetInt(2),x[y]=this.bufferReader.GetInt(2),M[y]=this.bufferReader.GetFloat()}b=this.ReadIndex(o);t=g.CreateGeometry({p:d,n:p,uv:c,i:b},!0,!0,!1,this.graphicDevice);break;case 4:for(d=new Array(3*f),c=new Array(2*f),G=new Array(4*f),v=new Array(4*f),R=new Array(4*f),_=new Array(4*f),p=new Array(3*f),w=new Array(f),x=new Array(f),M=new Array(f),y=0;y<f;y++){this.bufferReader.GetChar();d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),G.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),v.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),R.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),_.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat(),w[y]=this.bufferReader.GetInt(2),x[y]=this.bufferReader.GetInt(2),M[y]=this.bufferReader.GetFloat()}b=this.ReadIndex(o);t=g.CreateGeometry({p:d,n:p,uv:c,i:b},!0,!0,!1,this.graphicDevice)}break;case i.Vertex_Model_QuadBone:switch(u){case 0:d=new Array(3*f),c=new Array(2*f),p=new Array(3*f),w=new Array(f),x=new Array(f);var F=new Array(f),A=new Array(f),C=(M=new Array(f),new Array(f)),S=new Array(f),O=new Array(f);for(y=0;y<f;y++){this.bufferReader.GetChar();d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=-this.bufferReader.GetFloat(),d[3*y+2]=-this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat(),w[y]=this.bufferReader.GetInt(2),x[y]=this.bufferReader.GetInt(2),F[y]=this.bufferReader.GetInt(2),A[y]=this.bufferReader.GetInt(2),M[y]=this.bufferReader.GetFloat(),C[y]=this.bufferReader.GetFloat(),S[y]=this.bufferReader.GetFloat(),O[y]=this.bufferReader.GetFloat()}b=this.ReadIndex(o);t=g.CreateGeometry({p:d,n:p,uv:c,i:b},!0,!0,!1,this.graphicDevice);break;case 1:for(d=new Array(3*f),c=new Array(2*f),G=new Array(4*f),p=new Array(3*f),w=new Array(f),x=new Array(f),F=new Array(f),A=new Array(f),M=new Array(f),C=new Array(f),S=new Array(f),O=new Array(f),y=0;y<f;y++){this.bufferReader.GetChar();d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),G.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat(),w[y]=this.bufferReader.GetInt(2),x[y]=this.bufferReader.GetInt(2),F[y]=this.bufferReader.GetInt(2),A[y]=this.bufferReader.GetInt(2),M[y]=this.bufferReader.GetFloat(),C[y]=this.bufferReader.GetFloat(),S[y]=this.bufferReader.GetFloat(),O[y]=this.bufferReader.GetFloat()}b=this.ReadIndex(o);t=g.CreateGeometry({p:d,n:p,uv:c,i:b},!0,!0,!1,this.graphicDevice);break;case 2:for(d=new Array(3*f),c=new Array(2*f),G=new Array(4*f),v=new Array(4*f),p=new Array(3*f),w=new Array(f),x=new Array(f),F=new Array(f),A=new Array(f),M=new Array(f),C=new Array(f),S=new Array(f),O=new Array(f),y=0;y<f;y++){this.bufferReader.GetChar();d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),G.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),v.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat(),w[y]=this.bufferReader.GetInt(2),x[y]=this.bufferReader.GetInt(2),F[y]=this.bufferReader.GetInt(2),A[y]=this.bufferReader.GetInt(2),M[y]=this.bufferReader.GetFloat(),C[y]=this.bufferReader.GetFloat(),S[y]=this.bufferReader.GetFloat(),O[y]=this.bufferReader.GetFloat()}b=this.ReadIndex(o);t=g.CreateGeometry({p:d,n:p,uv:c,i:b},!0,!0,!1,this.graphicDevice);break;case 3:for(d=new Array(3*f),c=new Array(2*f),G=new Array(4*f),v=new Array(4*f),R=new Array(4*f),p=new Array(3*f),w=new Array(f),x=new Array(f),F=new Array(f),A=new Array(f),M=new Array(f),C=new Array(f),S=new Array(f),O=new Array(f),y=0;y<f;y++){this.bufferReader.GetChar();d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),G.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),v.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),R.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat(),w[y]=this.bufferReader.GetInt(2),x[y]=this.bufferReader.GetInt(2),F[y]=this.bufferReader.GetInt(2),A[y]=this.bufferReader.GetInt(2),M[y]=this.bufferReader.GetFloat(),C[y]=this.bufferReader.GetFloat(),S[y]=this.bufferReader.GetFloat(),O[y]=this.bufferReader.GetFloat()}b=this.ReadIndex(o);t=g.CreateGeometry({p:d,n:p,uv:c,i:b},!0,!0,!1,this.graphicDevice);break;case 4:for(d=new Array(3*f),c=new Array(2*f),G=new Array(4*f),v=new Array(4*f),R=new Array(4*f),_=new Array(4*f),p=new Array(3*f),w=new Array(f),x=new Array(f),F=new Array(f),A=new Array(f),M=new Array(f),C=new Array(f),S=new Array(f),O=new Array(f),y=0;y<f;y++){this.bufferReader.GetChar();d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),G.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),v.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),R.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),_.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat(),w[y]=this.bufferReader.GetInt(2),x[y]=this.bufferReader.GetInt(2),F[y]=this.bufferReader.GetInt(2),A[y]=this.bufferReader.GetInt(2),M[y]=this.bufferReader.GetFloat(),C[y]=this.bufferReader.GetFloat(),S[y]=this.bufferReader.GetFloat(),O[y]=this.bufferReader.GetFloat()}b=this.ReadIndex(o);t=g.CreateGeometry({p:d,n:p,uv:c,i:b},!0,!0,!1,this.graphicDevice)}break;case i.Vertex_Model_SDEFBone:alert("sdef is not support.");break;case i.Vertex_Model_Mix:switch(u){case 0:for(d=new Array(3*f),c=new Array(2*f),p=new Array(3*f),w=new Array(f),x=new Array(f),F=new Array(f),A=new Array(f),M=new Array(f),C=new Array(f),S=new Array(f),O=new Array(f),y=0;y<f;y++){switch(this.bufferReader.GetChar()){case i.Vertex_Model_SingleBone:d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat(),w[y]=this.bufferReader.GetInt(2),x.push(-1),F.push(-1),A.push(-1),M.push(1),C.push(0),S.push(0),O.push(0);break;case i.Vertex_Model_DoubleBone:d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat(),w[y]=this.bufferReader.GetInt(2),x[y]=this.bufferReader.GetInt(2);var D=this.bufferReader.GetFloat();M.push(D),F.push(-1),A.push(-1),C.push(1-D),S.push(0),O.push(0);break;case i.Vertex_Model_QuadBone:d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat(),w[y]=this.bufferReader.GetInt(2),x[y]=this.bufferReader.GetInt(2),F[y]=this.bufferReader.GetInt(2),A[y]=this.bufferReader.GetInt(2),M[y]=this.bufferReader.GetFloat(),C[y]=this.bufferReader.GetFloat(),S[y]=this.bufferReader.GetFloat(),O[y]=this.bufferReader.GetFloat();break;case i.Vertex_Model_SDEFBone:alert("sdef is not supported.")}}b=this.ReadIndex(o);t=g.CreateGeometry({p:d,n:p,uv:c,i:b},!0,!0,!1,this.graphicDevice);break;case 1:for(d=new Array(3*f),c=new Array(2*f),G=new Array(4*f),p=new Array(3*f),w=new Array(f),x=new Array(f),F=new Array(f),A=new Array(f),M=new Array(f),C=new Array(f),S=new Array(f),O=new Array(f),y=0;y<f;y++){switch(this.bufferReader.GetChar()){case i.Vertex_Model_SingleBone:d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),G.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat(),w[y]=this.bufferReader.GetInt(2),x.push(-1),F.push(-1),A.push(-1),M.push(1),C.push(0),S.push(0),O.push(0);break;case i.Vertex_Model_DoubleBone:d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),G.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat(),w[y]=this.bufferReader.GetInt(2),x[y]=this.bufferReader.GetInt(2);D=this.bufferReader.GetFloat();M.push(D),F.push(-1),A.push(-1),C.push(1-D),S.push(0),O.push(0);break;case i.Vertex_Model_QuadBone:d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),G.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat(),w[y]=this.bufferReader.GetInt(2),x[y]=this.bufferReader.GetInt(2),F[y]=this.bufferReader.GetInt(2),A[y]=this.bufferReader.GetInt(2),M[y]=this.bufferReader.GetFloat(),C[y]=this.bufferReader.GetFloat(),S[y]=this.bufferReader.GetFloat(),O[y]=this.bufferReader.GetFloat();break;case i.Vertex_Model_SDEFBone:alert("sdef is not supported.")}}b=this.ReadIndex(o);t=g.CreateGeometry({p:d,n:p,uv:c,i:b},!0,!0,!1,this.graphicDevice);break;case 2:for(d=new Array(3*f),c=new Array(2*f),G=new Array(4*f),v=new Array(4*f),p=new Array(3*f),w=new Array(f),x=new Array(f),F=new Array(f),A=new Array(f),M=new Array(f),C=new Array(f),S=new Array(f),O=new Array(f),y=0;y<f;y++){switch(this.bufferReader.GetChar()){case i.Vertex_Model_SingleBone:d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),G.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),v.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat(),w[y]=this.bufferReader.GetInt(2),x.push(-1),F.push(-1),A.push(-1),M.push(1),C.push(0),S.push(0),O.push(0);break;case i.Vertex_Model_DoubleBone:d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),G.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),v.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat(),w[y]=this.bufferReader.GetInt(2),x[y]=this.bufferReader.GetInt(2);D=this.bufferReader.GetFloat();M.push(D),F.push(-1),A.push(-1),C.push(1-D),S.push(0),O.push(0);break;case i.Vertex_Model_QuadBone:d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),G.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),v.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat(),w[y]=this.bufferReader.GetInt(2),x[y]=this.bufferReader.GetInt(2),F[y]=this.bufferReader.GetInt(2),A[y]=this.bufferReader.GetInt(2),M[y]=this.bufferReader.GetFloat(),C[y]=this.bufferReader.GetFloat(),S[y]=this.bufferReader.GetFloat(),O[y]=this.bufferReader.GetFloat();break;case i.Vertex_Model_SDEFBone:alert("sdef is not supported.")}}b=this.ReadIndex(o);t=g.CreateGeometry({p:d,n:p,uv:c,i:b},!0,!0,!1,this.graphicDevice);break;case 3:for(d=new Array(3*f),c=new Array(2*f),G=new Array(4*f),v=new Array(4*f),R=new Array(4*f),p=new Array(3*f),w=new Array(f),x=new Array(f),F=new Array(f),A=new Array(f),M=new Array(f),C=new Array(f),S=new Array(f),O=new Array(f),y=0;y<f;y++){switch(this.bufferReader.GetChar()){case i.Vertex_Model_SingleBone:d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),G.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),v.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),R.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat(),w[y]=this.bufferReader.GetInt(2),x.push(-1),F.push(-1),A.push(-1),M.push(1),C.push(0),S.push(0),O.push(0);break;case i.Vertex_Model_DoubleBone:d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),G.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),v.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),R.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat(),w[y]=this.bufferReader.GetInt(2),x[y]=this.bufferReader.GetInt(2);D=this.bufferReader.GetFloat();M.push(D),F.push(-1),A.push(-1),C.push(1-D),S.push(0),O.push(0);break;case i.Vertex_Model_QuadBone:d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),G.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),v.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),R.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat(),w[y]=this.bufferReader.GetInt(2),x[y]=this.bufferReader.GetInt(2),F[y]=this.bufferReader.GetInt(2),A[y]=this.bufferReader.GetInt(2),M[y]=this.bufferReader.GetFloat(),C[y]=this.bufferReader.GetFloat(),S[y]=this.bufferReader.GetFloat(),O[y]=this.bufferReader.GetFloat();break;case i.Vertex_Model_SDEFBone:alert("sdef is not supported.")}}b=this.ReadIndex(o);t=g.CreateGeometry({p:d,n:p,uv:c,i:b},!0,!0,!1,this.graphicDevice);break;case 4:for(d=new Array(3*f),c=new Array(2*f),G=new Array(4*f),v=new Array(4*f),R=new Array(4*f),_=new Array(4*f),p=new Array(3*f),w=new Array(f),x=new Array(f),F=new Array(f),A=new Array(f),M=new Array(f),C=new Array(f),S=new Array(f),O=new Array(f),y=0;y<f;y++){switch(this.bufferReader.GetChar()){case i.Vertex_Model_SingleBone:d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),G.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),v.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),R.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),_.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat(),w[y]=this.bufferReader.GetInt(2),x.push(-1),F.push(-1),A.push(-1),M.push(1),C.push(0),S.push(0),O.push(0);break;case i.Vertex_Model_DoubleBone:d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),G.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),v.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),R.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),_.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat(),w[y]=this.bufferReader.GetInt(2),x[y]=this.bufferReader.GetInt(2);D=this.bufferReader.GetFloat();M.push(D),F.push(-1),A.push(-1),C.push(1-D),S.push(0),O.push(0);break;case i.Vertex_Model_QuadBone:d[3*y+0]=this.bufferReader.GetFloat(),d[3*y+1]=this.bufferReader.GetFloat(),d[3*y+2]=this.bufferReader.GetFloat(),c[2*y+0]=this.bufferReader.GetFloat(),c[2*y+1]=this.bufferReader.GetFloat(),G.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),v.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),R.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),_.push(this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat(),this.bufferReader.GetFloat()),p[3*y+0]=this.bufferReader.GetFloat(),p[3*y+1]=this.bufferReader.GetFloat(),p[3*y+2]=this.bufferReader.GetFloat(),w[y]=this.bufferReader.GetInt(2),x[y]=this.bufferReader.GetInt(2),F[y]=this.bufferReader.GetInt(2),A[y]=this.bufferReader.GetInt(2),M[y]=this.bufferReader.GetFloat(),C[y]=this.bufferReader.GetFloat(),S[y]=this.bufferReader.GetFloat(),O[y]=this.bufferReader.GetFloat();break;case i.Vertex_Model_SDEFBone:alert("sdef is not supported.")}}b=this.ReadIndex(o);t=g.CreateGeometry({p:d,n:p,uv:c,i:b},!0,!0,!1,this.graphicDevice)}}n=this.bufferReader.GetInt(s);var P=new Array(n),j=m(this.filePath);for(y=0;y<n;y++){var T=this.bufferReader.GetInt();if(a){var I=this.bufferReader.GetString(T);e.push(g.CreateMaterialFromFile(j+I,this.container,this.graphicDevice))}else{I=this.bufferReader.GetWString(T);e.push(g.CreateMaterialFromFile(j+I,this.container,this.graphicDevice))}P[y]=this.bufferReader.GetInt()}t.SetSubset(P),this.mesh.SetParameter(t,e),this.container.LoadEnd()}},t.prototype.ReadIndex=function(t){for(var e=this.bufferReader.GetInt(),a=new Array(3*e),r=0;r<3*e;r++)a[r]=this.bufferReader.GetUInt(t);return a},t}(),b=function(){function t(){}return t.prototype.Initialize=function(){var t=new l.default(this.buffer);if("ButiMaterialData"==t.GetString(16)){t.GetFloat();var e=t.GetChar(),a=t.GetInt();e?t.GetString(a):t.GetWString(a);a=t.GetInt();e?t.GetString(a):t.GetWString(a);for(var r=t.GetChar(),i=new Array,n=m(this.filePath),o=0;o<r;o++){var s=t.GetInt();if(s<0);else if(e){var h=t.GetString(s);i.push(this.container.AddTextureFromFile(n+"../"+h,this.graphicDevice))}else{h=t.GetWString(s);i.push(this.container.AddTextureFromFile(n+"../"+h,this.graphicDevice))}}var f=new u.default(t.GetFloat(),t.GetFloat(),t.GetFloat(),t.GetFloat());new u.default(t.GetFloat(),t.GetFloat(),t.GetFloat(),t.GetFloat()),new u.default(t.GetFloat(),t.GetFloat(),t.GetFloat(),t.GetFloat()),new u.default(t.GetFloat(),t.GetFloat(),t.GetFloat(),t.GetFloat()),t.GetChar(),t.GetChar(),a=t.GetInt();e?t.GetString(a):t.GetWString(a),this.material.SetParameter(f,this.graphicDevice,i),this.container.LoadEnd()}else console.log("")},t}(),g=function(){function t(){}return t.CreateGeometry=function(t,e,a,r,i){return new h.default(t,e,a,r,i)},t.CreateMaterial=function(t,e,a,r){var i=new o.default;return i.SetParameter(t,e,a,r),i},t.CreateShader=function(t,e,a,r,i){return new s.default(t,e,a,r,i)},t.CreateSound=function(t){return new p.default(t)},t.CreateTexture=function(t,e){var a=new n.default(t,e);return a.Initialize(),a},t.CreateFrameBuffer=function(t,e,a){return new f.default(a,t,e)},t.CreateMeshResourceFromFile=function(t,e,a){var r=new d.default,i=new y;return e.LoadStart(),i.graphicDevice=a,i.container=e,i.filePath=t,i.mesh=r,c.default.LoadBin(t,i),r},t.CreateMaterialFromFile=function(t,e,a){var r=new o.default,i=new b;return e.LoadStart(),i.graphicDevice=a,i.container=e,i.filePath=t,i.material=r,c.default.LoadBin(t,i),r},t}();e.default=g},function(t,e,a){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(a(12)),n=function(){function t(){}return t.GetCanvasPosition=function(t){return new i.default(t.clientX-this.canvas.offsetLeft-.5*this.canvas.width,t.clientY-this.canvas.offsetTop-.5*this.canvas.height)},t.AddClickEvent=function(t,e,a){var r=this.clickEvents[e];r||(r={obj:t,handleEvent:o},this.clickEvents[e]=r),a?this.canvas.addEventListener("click",r,a):this.canvas.addEventListener("click",r,!1)},t.AddMouseDownEvent=function(t,e,a){var r=this.mouseDownEvents[e];r||(r={obj:t,handleEvent:f},this.mouseDownEvents[e]=r),a?this.canvas.addEventListener("mousedown",r,a):this.canvas.addEventListener("mousedown",r,!1)},t.AddMouseUpEvent=function(t,e,a){var r=this.mouseUpEvents[e];r||(r={obj:t,handleEvent:u},this.mouseUpEvents[e]=r),a?this.canvas.addEventListener("mouseup",r,a):this.canvas.addEventListener("mouseup",r,!1)},t.AddKeyUpEvent=function(t,e,a){var r=this.keyUpEvents[e];r||(r={obj:t,handleEvent:h},this.keyUpEvents[e]=r,a?document.addEventListener("keyup",r,a):document.addEventListener("keyup",r,!1))},t.AddKeyDownEvent=function(t,e,a){var r=this.keyDownEvents[e];r||(r={obj:t,handleEvent:s},this.keyDownEvents[e]=r,a?document.addEventListener("keydown",r,a):document.addEventListener("keydown",r,!1))},t.AddMouseMoveEvent=function(t,e,a){var r=this.mouseMoveEvents[e];r||(r={obj:t,handleEvent:d},this.mouseMoveEvents[e]=r),a?this.canvas.addEventListener("mousemove",r,a):this.canvas.addEventListener("mousemove",r,!1)},t.AddMouseWheelEvent=function(t,e,a){var r=this.mouseWheelEvents[e];r||(r={obj:t,handleEvent:c},this.mouseWheelEvents[e]=r),a?this.canvas.addEventListener("mousewheel",r,a):this.canvas.addEventListener("mousewheel",r,!1)},t.RemoveKeyDownEvent=function(t){var e=this.keyDownEvents[t];e&&(document.removeEventListener("keydown",e,!0),this.keyDownEvents[t]=null)},t.RemoveKeyUpEvent=function(t){var e=this.keyUpEvents[t];e&&(document.removeEventListener("keyup",e,!0),this.keyUpEvents[t]=null)},t.RemoveClickEvent=function(t){var e=this.clickEvents[t];e&&(document.removeEventListener("click",e,!0),this.clickEvents[t]=null)},t.RemoveMouseUpEvent=function(t){var e=this.mouseUpEvents[t];e&&(document.removeEventListener("mouseup",e,!0),this.mouseUpEvents[t]=null)},t.RemoveMouseDownEvent=function(t){var e=this.mouseDownEvents[t];e&&(document.removeEventListener("mosedown",e,!0),this.mouseDownEvents[t]=null)},t.RemoveMouseMoveEvent=function(t){var e=this.mouseMoveEvents[t];e&&(document.removeEventListener("mousemove",e,!0),this.mouseMoveEvents[t]=null)},t.RemoveWheelEvent=function(t){var e=this.mouseWheelEvents[t];e&&(document.removeEventListener("mousewheel",e,!0),this.mouseWheelEvents[t]=null)},t.clickEvents=new Map,t.mouseDownEvents=new Map,t.mouseUpEvents=new Map,t.keyUpEvents=new Map,t.keyDownEvents=new Map,t.mouseMoveEvents=new Map,t.mouseWheelEvents=new Map,t}();function o(t){this.obj.OnClick(t)}function s(t){this.obj.OnKeyDown(t)}function h(t){this.obj.OnKeyUp(t)}function u(t){this.obj.OnMouseUp(t)}function f(t){this.obj.OnMouseUp(t)}function d(t){this.obj.OnMouseMove(t)}function c(t){this.obj.OnMouseWheel(t)}e.default=n},function(t,e,a){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(a(6)),s=function(t){function e(e,a,r,i,n,s,h){var u=t.call(this)||this;return u.currentTime=0,u.direction=1,u.time=e,u.linerPase=1/e,u.targetTransform=r,i&&(u.transform=i),u.easingFunction_scale=n||o.default.EaseInOutBack,u.easingFunction_translate=s||o.default.EaseInOutBack,u.TimeUpdate=a?u.TimeUpdate_Loop:h?u.TimeUpdate_NoLoop_NoSucide:u.TimeUpdate_NoLoop,u}return i(e,t),e.prototype.OnSet=function(){this.transform||(this.transform=this.gameObject.transform),this.offset=this.targetTransform.Position.Sub(this.transform.LocalPosition),this.scalePase=this.targetTransform.Scale.Sub(this.transform.Scale),this.initPosition=this.transform.LocalPosition,this.initScale=this.transform.Scale,this.rotateQuat=this.transform.Rotation.ToQuaternion(),this.targetRotateQuat=this.targetTransform.Rotation.ToQuaternion()},e.prototype.ChangeTarget=function(t){this.targetTransform=t,this.offset=this.targetTransform.Position.Sub(this.transform.LocalPosition),this.scalePase=this.targetTransform.Scale.Sub(this.transform.Scale),this.initPosition=this.transform.LocalPosition,this.initScale=this.transform.Scale,this.currentTime=0},e.prototype.TimeUpdate_Loop=function(){this.currentTime>=this.time?(this.currentTime=this.time,this.direction=-1):this.currentTime<=0&&(this.currentTime=0,this.direction=1),this.currentTime+=this.direction},e.prototype.TimeUpdate_NoLoop=function(){this.currentTime>=this.time&&(this.currentTime=this.time,this.Remove()),this.currentTime+=this.direction},e.prototype.TimeUpdate_NoLoop_NoSucide=function(){this.currentTime>=this.time&&(this.currentTime=this.time),this.currentTime+=this.direction},e.prototype.Update=function(){this.TimeUpdate();var t=this.currentTime/this.time;this.transform.Position=this.initPosition.Add(this.offset.Multiply(this.easingFunction_translate(t))),this.transform.Scale=this.initScale.Add(this.scalePase.Multiply(this.easingFunction_scale(t)))},e}(n(a(1)).default);e.default=s},function(t,e,a){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(a(1)),h=n(a(55));!function(t){t[t.sphere=0]="sphere",t[t.box_AABB=1]="box_AABB",t[t.box_OBB=2]="box_OBB",t[t.point=3]="point"}(o||(o={}));var u=function(t){function e(e,a,r){var i=t.call(this)||this;return i.layer=0,i.type=e,i.size=a,r&&(i.layer=r),i}return i(e,t),e.prototype.OnSet=function(){switch(this.type){case o.sphere:this.collision=h.default.CreateSphere(this.size.x,this.gameObject);break;case o.point:this.collision=h.default.CreatePoint(this.gameObject);break;case o.box_AABB:this.collision=h.default.CreateCube_AABB(this.size,this.gameObject);break;case o.box_OBB:this.collision=h.default.CreateCube_OBB(this.size,this.gameObject)}this.id=this.gameObject.GetCollisionManager().Regist(this.collision,this.layer)},e.prototype.OnRemove=function(){this.gameObject.GetCollisionManager().UnRegist(this.id,this.layer)},e.prototype.Update=function(){this.collision.Update()},e}(s.default);e.default=u},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.GetRandomInt=function(t,e){return Math.floor(Math.random()*Math.floor(e-t+1))+t},t.GetRandomFloat=function(t,e){return Math.random()*Math.floor(e-t+1)+t},t}();e.default=r},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){this.data=new Float32Array(2),this.data[0]=t,this.data[1]=e}return Object.defineProperty(t.prototype,"x",{get:function(){return this.data[0]},set:function(t){this.data[0]=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.data[1]},set:function(t){this.data[1]=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"xy",{get:function(){return this.data},enumerable:!1,configurable:!0}),t.prototype.Add=function(e){var a=new t(0,0);return a.data[0]=this.data[0]+e.data[0],a.data[1]=this.data[1]+e.data[1],a},t.prototype.Add_b=function(t){return this.data[0]=this.data[0]+t.data[0],this.data[1]=this.data[1]+t.data[1],this},t.prototype.Sub=function(e){var a=new t(0,0);return a.data[0]=this.data[0]-e.data[0],a.data[1]=this.data[1]-e.data[1],a},t.prototype.Sub_b=function(t){return this.data[0]=this.data[0]-t.data[0],this.data[1]=this.data[1]-t.data[1],this},t.prototype.Multiply=function(e){var a=new t(0,0);return a.data[0]=this.data[0]*e,a.data[1]=this.data[1]*e,a},t.prototype.Multiply_b=function(t){return this.data[0]*=t,this.data[1]*=t,this},t.prototype.Div=function(e){var a=new t(0,0);return a.data[0]=this.data[0]/e,a.data[1]=this.data[1]/e,a},t.prototype.Div_b=function(t){return this.data[0]/=t,this.data[1]/=t,this},t.prototype.Length=function(){return Math.sqrt(this.data[0]*this.data[0]+this.data[1]*this.data[1])},t.prototype.LengthSqr=function(){return this.data[0]*this.data[0]+this.data[1]*this.data[1]},t.prototype.Dot=function(t){return this.data[0]*t.data[0]+this.data[1]*t.data[1]},t.prototype.Cross=function(t){return this.x*t.y-this.y*t.x},t.prototype.Normalize=function(){var e=new t(this.data[0],this.data[1]),a=this.Length();return e.Div_b(a),e},t.prototype.Normalize_b=function(){var t=this.Length();return this.Div_b(t),this},t}();e.default=r},function(t,e,a){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(a(17)),n=r(a(0)),o=function(){function t(){this.data=new Float32Array(4)}return t.prototype.Identity=function(){return this.data[0]=0,this.data[1]=0,this.data[2]=0,this.data[3]=1,this},t.prototype.Inverse=function(){var e=new t;return e.data[0]=-this.data[0],e.data[1]=-this.data[1],e.data[2]=-this.data[2],e.data[3]=this.data[3],e},t.prototype.Inverse_b=function(){return this.data[0]=-this.data[0],this.data[1]=-this.data[1],this.data[2]=-this.data[2],this.data[3]=this.data[3],this},t.prototype.Normalize=function(){var e=new t;e.data[0]=this.data[0],e.data[1]=this.data[1],e.data[2]=this.data[2],e.data[3]=this.data[3];var a=e.data[0],r=e.data[1],i=e.data[2],n=e.data[3],o=Math.sqrt(a*a+r*r+i*i+n*n);return 0===o?(e.data[0]=0,e.data[1]=0,e.data[2]=0,e.data[3]=0):(o=1/o,e.data[0]=a*o,e.data[1]=r*o,e.data[2]=i*o,e.data[3]=n*o),e},t.prototype.Normalize_b=function(){var t=Math.sqrt(this.data[0]*this.data[0]+this.data[1]*this.data[1]+this.data[2]*this.data[2]+this.data[3]*this.data[3]);return 0===t?(this.data[0]=0,this.data[1]=0,this.data[2]=0,this.data[3]=0):(t=1/t,this.data[0]=this.data[0]*t,this.data[1]=this.data[1]*t,this.data[2]=this.data[2]*t,this.data[3]=this.data[3]*t),this},t.prototype.Multiply=function(e){var a=new t,r=this.data[0],i=this.data[1],n=this.data[2],o=this.data[3],s=e.data[0],h=e.data[1],u=e.data[2],f=e.data[3];return a.data[0]=r*f+o*s+i*u-n*h,a.data[1]=i*f+o*h+n*s-r*u,a.data[2]=n*f+o*u+r*h-i*s,a.data[3]=o*f-r*s-i*h-n*u,a},t.prototype.Multiply_b=function(t){var e=this.data[0],a=this.data[1],r=this.data[2],i=this.data[3],n=t.data[0],o=t.data[1],s=t.data[2],h=t.data[3];return this.data[0]=e*h+i*n+a*s-r*o,this.data[1]=a*h+i*o+r*n-e*s,this.data[2]=r*h+i*s+e*o-a*n,this.data[3]=i*h-e*n-a*o-r*s,this},t.prototype.Rotate=function(t,e){var a=e.Length();if(!a)return null;var r=e.x,i=e.y,n=e.z;1!=a&&(r*=a=1/a,i*=a,n*=a);var o=Math.sin(.5*t);return this.data[0]=r*o,this.data[1]=i*o,this.data[2]=n*o,this.data[3]=Math.cos(.5*t),this},t.prototype.ToVector3=function(e){var a=new n.default(0,0,0),r=new t,i=new t,o=this.Inverse();return r.data[0]=e.x,r.data[1]=e.y,r.data[2]=e.z,i=o.Multiply(r),o=i.Multiply(this),a.data[0]=o.data[0],a.data[1]=o.data[1],a.data[2]=o.data[2],a},t.prototype.ToMatrix4x4=function(){var t=new i.default,e=this.data[0],a=this.data[1],r=this.data[2],n=this.data[3],o=e+e,s=a+a,h=r+r,u=e*o,f=e*s,d=e*h,c=a*s,l=a*h,p=r*h,m=n*o,y=n*s,b=n*h;return t.data[0]=1-(c+p),t.data[1]=f-b,t.data[2]=d+y,t.data[3]=0,t.data[4]=f+b,t.data[5]=1-(u+p),t.data[6]=l-m,t.data[7]=0,t.data[8]=d-y,t.data[9]=l+m,t.data[10]=1-(u+c),t.data[11]=0,t.data[12]=0,t.data[13]=0,t.data[14]=0,t.data[15]=1,t},t.prototype.SphereLerp=function(e,a){var r=new t,i=this.data[0]*e.data[0]+this.data[1]*e.data[1]+this.data[2]*e.data[2]+this.data[3]*e.data[3],n=1-i*i;if(n<=0)r.data[0]=this.data[0],r.data[1]=this.data[1],r.data[2]=this.data[2],r.data[3]=this.data[3];else if(n=Math.sqrt(n),Math.abs(n)<1e-4)r.data[0]=.5*this.data[0]+.5*e.data[0],r.data[1]=.5*this.data[1]+.5*e.data[1],r.data[2]=.5*this.data[2]+.5*e.data[2],r.data[3]=.5*this.data[3]+.5*e.data[3];else{var o=Math.acos(i),s=o*a,h=Math.sin(o-s)/n,u=Math.sin(s)/n;r.data[0]=this.data[0]*h+e.data[0]*u,r.data[1]=this.data[1]*h+e.data[1]*u,r.data[2]=this.data[2]*h+e.data[2]*u,r.data[3]=this.data[3]*h+e.data[3]*u}return r},t.prototype.SphereLerp_b=function(t,e){var a=this.data[0]*t.data[0]+this.data[1]*t.data[1]+this.data[2]*t.data[2]+this.data[3]*t.data[3],r=1-a*a;if(r<=0)return this;if(r=Math.sqrt(r),Math.abs(r)<1e-4)this.data[0]=.5*this.data[0]+.5*t.data[0],this.data[1]=.5*this.data[1]+.5*t.data[1],this.data[2]=.5*this.data[2]+.5*t.data[2],this.data[3]=.5*this.data[3]+.5*t.data[3];else{var i=Math.acos(a),n=i*e,o=Math.sin(i-n)/r,s=Math.sin(n)/r;this.data[0]=this.data[0]*o+t.data[0]*s,this.data[1]=this.data[1]*o+t.data[1]*s,this.data[2]=this.data[2]*o+t.data[2]*s,this.data[3]=this.data[3]*o+t.data[3]*s}return this},t}();e.default=o},function(t,e,a){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(a(38)),n=function(){function t(){}return t.CreateTorus=function(t,e,a,r,n){for(var o=new Array,s=new Array,h=new Array,u=new Array,f=new Array,d=0;d<=t;d++)for(var c=2*Math.PI/t*d,l=Math.cos(c),p=Math.sin(c),m=0;m<=e;m++){var y,b=2*Math.PI/e*m,g=(l*a+r)*Math.cos(b),G=p*a,v=(l*a+r)*Math.sin(b),R=l*Math.cos(b),_=l*Math.sin(b);y=n||i.default.hsva(360/e*m,1,1,1);var w=1/e*m,x=1/t*d+.5;x>1&&(x-=1),x=1-x,o.push(g,G,v),s.push(R,p,_),h.push(y.x,y.y,y.z,y.w),u.push(w,x)}for(d=0;d<t;d++)for(m=0;m<e;m++)c=(e+1)*d+m,f.push(c,c+e+1,c+1),f.push(c+e+1,c+e+2,c+1);return{p:o,n:s,c:h,uv:u,i:f}},t.CreateSphere=function(t,e,a,r){for(var n=new Array,o=new Array,s=new Array,h=new Array,u=new Array,f=0;f<=t;f++)for(var d=Math.PI/t*f,c=Math.cos(d),l=Math.sin(d),p=0;p<=e;p++){var m,y=2*Math.PI/e*p,b=l*a*Math.cos(y),g=c*a,G=l*a*Math.sin(y),v=l*Math.cos(y),R=l*Math.sin(y);m=r||i.default.hsva(360/t*f,.5,.5,1),n.push(b,g,G),o.push(v,c,R),s.push(m.data[0],m.data[1],m.data[2],m.data[3]),h.push(1-1/e*p,1/t*f)}for(d=0,f=0;f<t;f++)for(p=0;p<e;p++)d=(e+1)*f+p,u.push(d,d+1,d+e+2),u.push(d,d+e+2,d+e+1);return{p:n,n:o,c:s,uv:h,i:u}},t.CreateCube=function(t,e){for(var a=.5*t,r=[-a,-a,a,a,-a,a,a,a,a,-a,a,a,-a,-a,-a,-a,a,-a,a,a,-a,a,-a,-a,-a,a,-a,-a,a,a,a,a,a,a,a,-a,-a,-a,-a,a,-a,-a,a,-a,a,-a,-a,a,a,-a,-a,a,a,-a,a,a,a,a,-a,a,-a,-a,-a,-a,-a,a,-a,a,a,-a,a,-a],n=new Array,o=0;o<r.length/3;o++){if(e)var s=e;else s=i.default.hsva(360/r.length/3*o,1,1,1);n.push(s.x,s.y,s.z,s.w)}return{p:r,n:[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1],c:n,uv:[0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1],i:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]}},t.CreateCubeSandWitch=function(t,e){for(var a=.5*t,r=[-a-t,-a,a,a-t,-a,a,a-t,a,a,-a-t,a,a,-a-t,-a,-a,-a-t,a,-a,a-t,a,-a,a-t,-a,-a,-a-t,a,-a,-a-t,a,a,a-t,a,a,a-t,a,-a,-a-t,-a,-a,a-t,-a,-a,a-t,-a,a,-a-t,-a,a,a-t,-a,-a,a-t,a,-a,a-t,a,a,a-t,-a,a,-a-t,-a,-a,-a-t,-a,a,-a-t,a,a,-a-t,a,-a,-a+t,-a,a,a+t,-a,a,a+t,a,a,-a+t,a,a,-a+t,-a,-a,-a+t,a,-a,a+t,a,-a,a+t,-a,-a,-a+t,a,-a,-a+t,a,a,a+t,a,a,a+t,a,-a,-a+t,-a,-a,a+t,-a,-a,a+t,-a,a,-a+t,-a,a,a+t,-a,-a,a+t,a,-a,a+t,a,a,a+t,-a,a,-a+t,-a,-a,-a+t,-a,a,-a+t,a,a,-a+t,a,-a],n=new Array,o=0;o<r.length/3;o++){if(e)var s=e;else s=i.default.hsva(360/r.length/3*o,1,1,1);n.push(s.x,s.y,s.z,s.w)}return{p:r,n:[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1],c:n,uv:[0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1],i:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23,24,25,26,24,26,27,28,29,30,28,30,31,32,31,34,32,34,35,36,37,38,36,38,39,40,41,42,40,42,43,44,45,46,44,46,47]}},t.CreatePlane=function(t,e,a){new Array,new Array,new Array,new Array,new Array;return{p:[-t.x,t.y,0,t.x,t.y,0,-t.x,-t.y,0,t.x,-t.y,0],n:[0,0,-1,0,0,-1,0,0,-1,0,0,-1],c:a?[a.x,a.y,a.z,a.w,a.x,a.y,a.z,a.w,a.x,a.y,a.z,a.w,a.x,a.y,a.z,a.w]:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],i:[2,3,1,2,1,0],uv:e?[0,1,1,1,0,0,1,0]:[0,0,1,0,0,1,1,1]}},t.CreateBar=function(t,e,a){new Array,new Array,new Array,new Array,new Array;return{p:[-t.x,0,0,t.x,0,0,-t.x,2*-t.y,0,t.x,2*-t.y,0],n:[0,0,-1,0,0,-1,0,0,-1,0,0,-1],c:a?[a.x,a.y,a.z,a.w,a.x,a.y,a.z,a.w,a.x,a.y,a.z,a.w,a.x,a.y,a.z,a.w]:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],i:[2,3,1,2,1,0],uv:e?[0,1,1,1,0,0,1,0]:[0,0,1,0,0,1,1,1]}},t.CreateTextGeometry=function(t){for(var e=new Array,a=new Array,r=new Array,i=t/2,n=0;n<t;n++)e.push(1*n-.5-1*i,1,0),e.push(.5+1*n-1*i,1,0),e.push(1*n-.5-1*i,-1,0),e.push(.5+1*n-1*i,-1,0);for(n=0;n<t;n++)a.push(2+4*n,3+4*n,1+4*n),a.push(2+4*n,1+4*n,0+4*n);for(n=0;n<t;n++)r.push(0,1),r.push(1,1),r.push(0,0),r.push(1,0);return{p:e,i:a,uv:r}},t}();e.default=n},function(t,e,a){"use strict";var r=this&&this.__awaiter||function(t,e,a,r){return new(a||(a=Promise))((function(i,n){function o(t){try{h(r.next(t))}catch(t){n(t)}}function s(t){try{h(r.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(o,s)}h((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var a,r,i,n,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return n={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function s(n){return function(s){return function(n){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,r&&(i=2&n[0]?r.return:n[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return o.label++,{value:n[1],done:!1};case 5:o.label++,r=n[1],n=[0];continue;case 7:n=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==n[0]&&2!==n[0])){o=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){o.label=n[1];break}if(6===n[0]&&o.label<i[1]){o.label=i[1],i=n;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(n);break}i[2]&&o.ops.pop(),o.trys.pop();continue}n=e.call(t,o)}catch(t){n=[6,t],r=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}},n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(a(43)),s=n(a(44)),h=n(a(46)),u=n(a(48));var f=function(){function t(t){this.isCurrent=!1,this.isLoaded=!1,this.renderer=new o.default,this.map_camera=new Map,this.ary_camera=new Array,this.sceneManager=t,this.gameObjectManager=new h.default(this),this.Update=this.Update_WithoutCollision,this.AddCamera(0,0,"last",!0)}return t.prototype.IsCurrentScene=function(){return this.isCurrent},t.prototype.SetCurrentScene=function(t){this.isCurrent=t},t.prototype.GetGameManager=function(){return this.gameObjectManager},t.prototype.UseCollisionManager=function(){this.collisionManager=new u.default,this.Update=this.Update_WithCollision},t.prototype.GetCollisionManager=function(){return this.collisionManager},t.prototype.IsLoaded=function(){return this.isLoaded},t.prototype.Release=function(){this.OnRelease(),this.sceneManager=null,this.gameObjectManager.Release(),this.collisionManager.Release(),this.renderer.Release()},t.prototype.OnRelease=function(){},t.prototype.GetCameraCount=function(){return this.ary_camera.length},t.prototype.AddCamera=function(t,e,a,r,i){var n;return n=i?new s.default(this.sceneManager.GetGraphicDevice(),e,r,i):new s.default(this.sceneManager.GetGraphicDevice(),e,r),this.ary_camera.splice(t,0,n),this.map_camera[a]=n,n},t.prototype.GetCamera=function(t){return this.map_camera[t]},t.prototype.Draw=function(){var t=this;this.ary_camera.forEach((function(e){return t.renderer.Draw(e)})),this.sceneManager.GetGraphicDevice().Present()},t.prototype.Update_WithCollision=function(){this.OnUpdate(),this.gameObjectManager.Update(),this.collisionManager.Check(),this.Draw()},t.prototype.Update_WithoutCollision=function(){this.OnUpdate(),this.gameObjectManager.Update(),this.Draw()},t.prototype.LoadingUpdate=function(){this.OnLoadingUpdate(),this.Draw()},t.prototype.OnLoadingUpdate=function(){},t.prototype.OnUpdate=function(){},t.prototype.Start=function(t){this.OnStart(t)},t.prototype.OnStart=function(t){},t.prototype.End=function(){this.OnEnd()},t.prototype.OnEnd=function(){},t.prototype.Initialize=function(){this.OnInitialize()},t.prototype.BefLoad=function(){},t.prototype.Load=function(){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return this.BefLoad(),[4,this.OnLoad()];case 1:t.sent(),t.label=2;case 2:return this.sceneManager.GetResourceContainer().GetLoadingObjCount()?[4,(e=100,new Promise((function(t){setTimeout(t,e)})))]:[3,4];case 3:return t.sent(),[3,2];case 4:return this.isLoaded=!0,this.Initialize(),[2]}var e}))}))},t.prototype.OnLoad=function(){return r(this,void 0,void 0,(function(){return i(this,(function(t){return[2]}))}))},t.prototype.OnInitialize=function(){},t.prototype.GetRenderer=function(){return this.renderer},t.prototype.GetSceneManager=function(){return this.sceneManager},t}();e.default=f},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.num=t}return t.prototype.Equal=function(t){return this.num==t.num},t}();e.default=r},function(t,e,a){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(a(13)),n=new Array(4),o=function(){function t(){this.data=new Float32Array(16)}return t.prototype.Identity=function(){return this.data[0]=1,this.data[1]=0,this.data[2]=0,this.data[3]=0,this.data[4]=0,this.data[5]=1,this.data[6]=0,this.data[7]=0,this.data[8]=0,this.data[9]=0,this.data[10]=1,this.data[11]=0,this.data[12]=0,this.data[13]=0,this.data[14]=0,this.data[15]=1,this},t.prototype.Clone=function(){for(var e=new t,a=0;a<16;a++)e.data[a]=this.data[a];return e},t.prototype.Multiply=function(e){var a=new t,r=this.data[0],i=this.data[1],n=this.data[2],o=this.data[3],s=this.data[4],h=this.data[5],u=this.data[6],f=this.data[7],d=this.data[8],c=this.data[9],l=this.data[10],p=this.data[11],m=this.data[12],y=this.data[13],b=this.data[14],g=this.data[15],G=e.data[0],v=e.data[1],R=e.data[2],_=e.data[3],w=e.data[4],x=e.data[5],M=e.data[6],F=e.data[7],A=e.data[8],C=e.data[9],S=e.data[10],O=e.data[11],D=e.data[12],P=e.data[13],j=e.data[14],T=e.data[15];return a.data[0]=G*r+v*s+R*d+_*m,a.data[1]=G*i+v*h+R*c+_*y,a.data[2]=G*n+v*u+R*l+_*b,a.data[3]=G*o+v*f+R*p+_*g,a.data[4]=w*r+x*s+M*d+F*m,a.data[5]=w*i+x*h+M*c+F*y,a.data[6]=w*n+x*u+M*l+F*b,a.data[7]=w*o+x*f+M*p+F*g,a.data[8]=A*r+C*s+S*d+O*m,a.data[9]=A*i+C*h+S*c+O*y,a.data[10]=A*n+C*u+S*l+O*b,a.data[11]=A*o+C*f+S*p+O*g,a.data[12]=D*r+P*s+j*d+T*m,a.data[13]=D*i+P*h+j*c+T*y,a.data[14]=D*n+P*u+j*l+T*b,a.data[15]=D*o+P*f+j*p+T*g,a},t.prototype.Multiply_b=function(t){var e=this.data[0],a=this.data[1],r=this.data[2],i=this.data[3],n=this.data[4],o=this.data[5],s=this.data[6],h=this.data[7],u=this.data[8],f=this.data[9],d=this.data[10],c=this.data[11],l=this.data[12],p=this.data[13],m=this.data[14],y=this.data[15],b=t.data[0],g=t.data[1],G=t.data[2],v=t.data[3],R=t.data[4],_=t.data[5],w=t.data[6],x=t.data[7],M=t.data[8],F=t.data[9],A=t.data[10],C=t.data[11],S=t.data[12],O=t.data[13],D=t.data[14],P=t.data[15];return this.data[0]=b*e+g*n+G*u+v*l,this.data[1]=b*a+g*o+G*f+v*p,this.data[2]=b*r+g*s+G*d+v*m,this.data[3]=b*i+g*h+G*c+v*y,this.data[4]=R*e+_*n+w*u+x*l,this.data[5]=R*a+_*o+w*f+x*p,this.data[6]=R*r+_*s+w*d+x*m,this.data[7]=R*i+_*h+w*c+x*y,this.data[8]=M*e+F*n+A*u+C*l,this.data[9]=M*a+F*o+A*f+C*p,this.data[10]=M*r+F*s+A*d+C*m,this.data[11]=M*i+F*h+A*c+C*y,this.data[12]=S*e+O*n+D*u+P*l,this.data[13]=S*a+O*o+D*f+P*p,this.data[14]=S*r+O*s+D*d+P*m,this.data[15]=S*i+O*h+D*c+P*y,this},t.prototype.Scale=function(e){var a=new t;return a.data[0]=this.data[0]*e.x,a.data[1]=this.data[1]*e.x,a.data[2]=this.data[2]*e.x,a.data[3]=this.data[3]*e.x,a.data[4]=this.data[4]*e.y,a.data[5]=this.data[5]*e.y,a.data[6]=this.data[6]*e.y,a.data[7]=this.data[7]*e.y,a.data[8]=this.data[8]*e.z,a.data[9]=this.data[9]*e.z,a.data[10]=this.data[10]*e.z,a.data[11]=this.data[11]*e.z,a.data[12]=this.data[12],a.data[13]=this.data[13],a.data[14]=this.data[14],a.data[15]=this.data[15],a},t.prototype.Scale_b=function(t){return this.data[0]=this.data[0]*t.x,this.data[1]=this.data[1]*t.x,this.data[2]=this.data[2]*t.x,this.data[3]=this.data[3]*t.x,this.data[4]=this.data[4]*t.y,this.data[5]=this.data[5]*t.y,this.data[6]=this.data[6]*t.y,this.data[7]=this.data[7]*t.y,this.data[8]=this.data[8]*t.z,this.data[9]=this.data[9]*t.z,this.data[10]=this.data[10]*t.z,this.data[11]=this.data[11]*t.z,this.data[12]=this.data[12],this.data[13]=this.data[13],this.data[14]=this.data[14],this.data[15]=this.data[15],this},t.prototype.Translate=function(e){var a=new t;return a.data[0]=this.data[0],a.data[1]=this.data[1],a.data[2]=this.data[2],a.data[3]=this.data[3],a.data[4]=this.data[4],a.data[5]=this.data[5],a.data[6]=this.data[6],a.data[7]=this.data[7],a.data[8]=this.data[8],a.data[9]=this.data[9],a.data[10]=this.data[10],a.data[11]=this.data[11],a.data[12]=this.data[0]*e.x+this.data[4]*e.y+this.data[8]*e.z+this.data[12],a.data[13]=this.data[1]*e.x+this.data[5]*e.y+this.data[9]*e.z+this.data[13],a.data[14]=this.data[2]*e.x+this.data[6]*e.y+this.data[10]*e.z+this.data[14],a.data[15]=this.data[3]*e.x+this.data[7]*e.y+this.data[11]*e.z+this.data[15],a},t.prototype.Translate_b=function(t){return this.data[12]=this.data[0]*t.x+this.data[4]*t.y+this.data[8]*t.z+this.data[12],this.data[13]=this.data[1]*t.x+this.data[5]*t.y+this.data[9]*t.z+this.data[13],this.data[14]=this.data[2]*t.x+this.data[6]*t.y+this.data[10]*t.z+this.data[14],this.data[15]=this.data[3]*t.x+this.data[7]*t.y+this.data[11]*t.z+this.data[15],this},t.prototype.Rotate=function(e,a){var r=new t,i=a.Length();if(!i)return null;var n=a.x,o=a.y,s=a.z;1!=i&&(n*=i=1/i,o*=i,s*=i);var h=Math.sin(e),u=Math.cos(e),f=1-u,d=this.data[0],c=this.data[1],l=this.data[2],p=this.data[3],m=this.data[4],y=this.data[5],b=this.data[6],g=this.data[7],G=this.data[8],v=this.data[9],R=this.data[10],_=this.data[11],w=n*n*f+u,x=o*n*f+s*h,M=s*n*f-o*h,F=n*o*f-s*h,A=o*o*f+u,C=s*o*f+n*h,S=n*s*f+o*h,O=o*s*f-n*h,D=s*s*f+u;return e?this.data!=r.data&&(r.data[12]=this.data[12],r.data[13]=this.data[13],r.data[14]=this.data[14],r.data[15]=this.data[15]):r.data=this.data,r.data[0]=d*w+m*x+G*M,r.data[1]=c*w+y*x+v*M,r.data[2]=l*w+b*x+R*M,r.data[3]=p*w+g*x+_*M,r.data[4]=d*F+m*A+G*C,r.data[5]=c*F+y*A+v*C,r.data[6]=l*F+b*A+R*C,r.data[7]=p*F+g*A+_*C,r.data[8]=d*S+m*O+G*D,r.data[9]=c*S+y*O+v*D,r.data[10]=l*S+b*O+R*D,r.data[11]=p*S+g*O+_*D,r},t.prototype.Rotate_b=function(t,e){var a=e.Length();if(!a)return null;var r=e.x,i=e.y,n=e.z;1!=a&&(r*=a=1/a,i*=a,n*=a);var o=Math.sin(t),s=Math.cos(t),h=1-s,u=this.data[0],f=this.data[1],d=this.data[2],c=this.data[3],l=this.data[4],p=this.data[5],m=this.data[6],y=this.data[7],b=this.data[8],g=this.data[9],G=this.data[10],v=this.data[11],R=r*r*h+s,_=i*r*h+n*o,w=n*r*h-i*o,x=r*i*h-n*o,M=i*i*h+s,F=n*i*h+r*o,A=r*n*h+i*o,C=i*n*h-r*o,S=n*n*h+s;return this.data[0]=u*R+l*_+b*w,this.data[1]=f*R+p*_+g*w,this.data[2]=d*R+m*_+G*w,this.data[3]=c*R+y*_+v*w,this.data[4]=u*x+l*M+b*F,this.data[5]=f*x+p*M+g*F,this.data[6]=d*x+m*M+G*F,this.data[7]=c*x+y*M+v*F,this.data[8]=u*A+l*C+b*S,this.data[9]=f*A+p*C+g*S,this.data[10]=d*A+m*C+G*S,this.data[11]=c*A+y*C+v*S,this},t.prototype.LookAt=function(t,e,a){var r,i,n,o,s,h,u,f,d,c,l=t.x,p=t.y,m=t.z,y=a.x,b=a.y,g=a.z,G=e.x,v=e.y,R=e.z;return l==G&&p==v&&m==R?this.Identity():(u=l-e.x,f=p-e.y,d=m-e.z,r=b*(d*=c=1/Math.sqrt(u*u+f*f+d*d))-g*(f*=c),i=g*(u*=c)-y*d,n=y*f-b*u,(c=Math.sqrt(r*r+i*i+n*n))?(r*=c=1/c,i*=c,n*=c):(r=0,i=0,n=0),o=f*n-d*i,s=d*r-u*n,h=u*i-f*r,(c=Math.sqrt(o*o+s*s+h*h))?(o*=c=1/c,s*=c,h*=c):(o=0,s=0,h=0),this.data[0]=r,this.data[1]=o,this.data[2]=u,this.data[3]=0,this.data[4]=i,this.data[5]=s,this.data[6]=f,this.data[7]=0,this.data[8]=n,this.data[9]=h,this.data[10]=d,this.data[11]=0,this.data[12]=-(r*l+i*p+n*m),this.data[13]=-(o*l+s*p+h*m),this.data[14]=-(u*l+f*p+d*m),this.data[15]=1,this)},t.prototype.Perspective=function(t,e,a,r){var i=a*Math.tan(t*Math.PI/360),n=2*(i*e),o=2*i,s=r-a;return this.data[0]=2*a/n,this.data[1]=0,this.data[2]=0,this.data[3]=0,this.data[4]=0,this.data[5]=2*a/o,this.data[6]=0,this.data[7]=0,this.data[8]=0,this.data[9]=0,this.data[10]=-(r+a)/s,this.data[11]=-1,this.data[12]=0,this.data[13]=0,this.data[14]=-r*a*2/s,this.data[15]=0,this},t.prototype.Ortho=function(t,e,a,r,i,n){var o=e-t,s=a-r,h=n-i;return this.data[0]=2/o,this.data[1]=0,this.data[2]=0,this.data[3]=0,this.data[4]=0,this.data[5]=2/s,this.data[6]=0,this.data[7]=0,this.data[8]=0,this.data[9]=0,this.data[10]=-2/h,this.data[11]=0,this.data[12]=-(t+e)/o,this.data[13]=-(a+r)/s,this.data[14]=-(n+i)/h,this.data[15]=1,this},t.prototype.Transpose=function(){var e=new t;return e.data[0]=this.data[0],e.data[1]=this.data[4],e.data[2]=this.data[8],e.data[3]=this.data[12],e.data[4]=this.data[1],e.data[5]=this.data[5],e.data[6]=this.data[9],e.data[7]=this.data[13],e.data[8]=this.data[2],e.data[9]=this.data[6],e.data[10]=this.data[10],e.data[11]=this.data[14],e.data[12]=this.data[3],e.data[13]=this.data[7],e.data[14]=this.data[11],e.data[15]=this.data[15],e},t.prototype.Transpose_b=function(){var e=new t;return e.data[0]=this.data[0],e.data[1]=this.data[4],e.data[2]=this.data[8],e.data[3]=this.data[12],e.data[4]=this.data[1],e.data[5]=this.data[5],e.data[6]=this.data[9],e.data[7]=this.data[13],e.data[8]=this.data[2],e.data[9]=this.data[6],e.data[10]=this.data[10],e.data[11]=this.data[14],e.data[12]=this.data[3],e.data[13]=this.data[7],e.data[14]=this.data[11],e.data[15]=this.data[15],this.data=e.data,this},t.prototype.Inverse=function(){var e=new t,a=this.data[0],r=this.data[1],i=this.data[2],n=this.data[3],o=this.data[4],s=this.data[5],h=this.data[6],u=this.data[7],f=this.data[8],d=this.data[9],c=this.data[10],l=this.data[11],p=this.data[12],m=this.data[13],y=this.data[14],b=this.data[15],g=a*s-r*o,G=a*h-i*o,v=a*u-n*o,R=r*h-i*s,_=r*u-n*s,w=i*u-n*h,x=f*m-d*p,M=f*y-c*p,F=f*b-l*p,A=d*y-c*m,C=d*b-l*m,S=c*b-l*y,O=1/(g*S-G*C+v*A+R*F-_*M+w*x);return e.data[0]=(s*S-h*C+u*A)*O,e.data[1]=(-r*S+i*C-n*A)*O,e.data[2]=(m*w-y*_+b*R)*O,e.data[3]=(-d*w+c*_-l*R)*O,e.data[4]=(-o*S+h*F-u*M)*O,e.data[5]=(a*S-i*F+n*M)*O,e.data[6]=(-p*w+y*v-b*G)*O,e.data[7]=(f*w-c*v+l*G)*O,e.data[8]=(o*C-s*F+u*x)*O,e.data[9]=(-a*C+r*F-n*x)*O,e.data[10]=(p*_-m*v+b*g)*O,e.data[11]=(-f*_+d*v-l*g)*O,e.data[12]=(-o*A+s*M-h*x)*O,e.data[13]=(a*A-r*M+i*x)*O,e.data[14]=(-p*R+m*G-y*g)*O,e.data[15]=(f*R-d*G+c*g)*O,e},t.prototype.Inverse_b=function(){var t=this.data[0],e=this.data[1],a=this.data[2],r=this.data[3],i=this.data[4],n=this.data[5],o=this.data[6],s=this.data[7],h=this.data[8],u=this.data[9],f=this.data[10],d=this.data[11],c=this.data[12],l=this.data[13],p=this.data[14],m=this.data[15],y=t*n-e*i,b=t*o-a*i,g=t*s-r*i,G=e*o-a*n,v=e*s-r*n,R=a*s-r*o,_=h*l-u*c,w=h*p-f*c,x=h*m-d*c,M=u*p-f*l,F=u*m-d*l,A=f*m-d*p,C=1/(y*A-b*F+g*M+G*x-v*w+R*_);return this.data[0]=(n*A-o*F+s*M)*C,this.data[1]=(-e*A+a*F-r*M)*C,this.data[2]=(l*R-p*v+m*G)*C,this.data[3]=(-u*R+f*v-d*G)*C,this.data[4]=(-i*A+o*x-s*w)*C,this.data[5]=(t*A-a*x+r*w)*C,this.data[6]=(-c*R+p*g-m*b)*C,this.data[7]=(h*R-f*g+d*b)*C,this.data[8]=(i*F-n*x+s*_)*C,this.data[9]=(-t*F+e*x-r*_)*C,this.data[10]=(c*v-l*g+m*y)*C,this.data[11]=(-h*v+u*g-d*y)*C,this.data[12]=(-i*M+n*w-o*_)*C,this.data[13]=(t*M-e*w+a*_)*C,this.data[14]=(-c*G+l*b-p*y)*C,this.data[15]=(h*G-u*b+f*y)*C,this},t.prototype.ToQuaternion=function(){n[0]=this.data[0]-this.data[5]-this.data[10]+1,n[1]=-this.data[0]+this.data[5]-this.data[10]+1,n[2]=-this.data[0]-this.data[5]+this.data[10]+1,n[3]=this.data[0]+this.data[5]+this.data[10]+1;for(var t=0,e=1;e<4;e++)n[e]>n[t]&&(t=e);var a=new i.default,r=.5*Math.sqrt(n[t]);a.data[t]=r;var o=.25/r;switch(t){case 0:a.data[1]=(this.data[1]+this.data[4])*o,a.data[2]=(this.data[2]+this.data[8])*o,a.data[3]=(this.data[9]-this.data[6])*o;break;case 1:a.data[0]=(this.data[1]+this.data[4])*o,a.data[2]=(this.data[9]+this.data[6])*o,a.data[3]=(this.data[2]-this.data[8])*o;break;case 2:a.data[0]=(this.data[2]+this.data[8])*o,a.data[1]=(this.data[9]+this.data[6])*o,a.data[3]=(this.data[4]-this.data[1])*o;break;case 3:a.data[0]=(this.data[9]-this.data[6])*o,a.data[1]=(this.data[2]-this.data[8])*o,a.data[2]=(this.data[4]-this.data[1])*o}return a},t}();e.default=o},function(t,e,a){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(a(2)),n=function(){function t(t){this.graphicDevice=t,this.transform=new i.default}return t.prototype.Atach=function(){this.graphicDevice.context.uniform3fv(this.graphicDevice.shader.uniformLocations[4],this.transform.Position.xyz)},t}();e.default=n},function(t,e,a){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(a(1)),s=function(){},h=function(t){function e(e,a,r,i,n,o,h){var u=t.call(this)||this;return u.info=new s,u.transform=null,u.layer=n,u.info.shaderName=r,u.info.color=i,u.info.fontTextureName=a,u.text=e,h&&(u.transform=h),u.info.billBoard=o,u}return i(e,t),Object.defineProperty(e.prototype,"Layer",{get:function(){return this.layer},enumerable:!1,configurable:!0}),e.prototype.OnSet=function(){this.transform||(this.transform=this.gameObject.transform),this.model=this.gameObject.Manager.Scene.GetSceneManager().GetModelCreater().CreateModelFromText(this.info.billBoard,this.info.color,this.text,this.info.fontTextureName,this.info.shaderName,this.transform),this.RegistDraw()},e.prototype.SetText=function(t){this.text=t,this.UnRegistDraw(),this.model=this.gameObject.Manager.Scene.GetSceneManager().GetModelCreater().CreateModelFromText(this.info.billBoard,this.info.color,this.text,this.info.fontTextureName,this.info.shaderName,this.transform),this.RegistDraw()},e.prototype.RegistDraw=function(){this.modelID||(this.modelID=this.gameObject.GetRenderer().Regist(this.model,this.layer))},e.prototype.UnRegistDraw=function(){this.modelID&&(this.gameObject.GetRenderer().UnRegist(this.modelID,this.layer),this.modelID=null)},e.prototype.OnRemove=function(){this.UnRegistDraw()},e}(o.default);e.default=h},function(t,e,a){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(a(10)),h=n(a(1)),u=n(a(3)),f=n(a(0)),d=n(a(5)),c=n(a(2));!function(t){t[t.sphere=0]="sphere",t[t.box_AABB=1]="box_AABB",t[t.box_OBB=2]="box_OBB",t[t.point=3]="point"}(o||(o={}));var l=function(t){function e(e){var a=t.call(this)||this;return a.isGet=!1,a.stage=e,a}return i(e,t),e.prototype.OnSet=function(){var t=new c.default(new f.default(0,.25,0),new f.default(180,180,0),new f.default(.0025,.0025,.0025));t.BaseTransform=this.gameObject.transform,this.drawComponent=new u.default(!0,"sphere","yellow","onlyMaterial",1,!1,"coin",t),this.gameObject.SetComponent(this.drawComponent),this.gameObject.SetComponent(new s.default(o.sphere,new f.default(.3,.3,.3),0))},e.prototype.Update=function(){},e.prototype.OnCollision=function(t){t.objectID!=d.default.GetID("player")||this.isGet||(this.stage.GetCoin(),this.gameObject.Dead(),this.isGet=!0)},e.prototype.ReSet=function(){this.drawComponent.RegistDraw(),this.isGet=!1},e}(h.default);e.default=l},function(t,e,a){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return t.call(this)||this}return i(e,t),e.prototype.Destroy=function(){},e}(n(a(1)).default);e.default=o},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.LoadText=function(t,e){var a=new XMLHttpRequest;return e?a.open("GET",t,e):a.open("GET",t,!1),a.send(null),a.responseText},t.LoadBin=function(t,e){var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){!function(t,e){t.buffer=e,t.Initialize()}(e,a.response)},a.send(null)},t}();e.default=r},function(t,e,a){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(a(1)),h=n(a(10)),u=n(a(5));!function(t){t[t.sphere=0]="sphere",t[t.box_AABB=1]="box_AABB",t[t.box_OBB=2]="box_OBB",t[t.point=3]="point"}(o||(o={}));var f=function(t){function e(e,a){var r=t.call(this)||this;return r.stage=e,r.size=a,r}return i(e,t),e.prototype.OnSet=function(){this.gameObject.objectID=u.default.GetID("damageObstacle"),this.gameObject.SetComponent(new h.default(o.box_AABB,this.size,0))},e.prototype.OnRemove=function(){},e.prototype.Update=function(){},e.prototype.OnCollision=function(t){t.objectID,u.default.GetID("player")},e}(s.default);e.default=f},function(t,e,a){a(25)},function(t,e,a){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(a(26)),n=r(a(27)),o=r(a(36)),s=r(a(40)),h=r(a(8)),u=r(a(42));onload=function(){var t=document.getElementById("myCanvas");t.setAttribute("tabindex",""),t.width=1200,t.height=675,h.default.canvas=t;var e=new n.default,a=new i.default(t),r=new o.default(a,e),f=new s.default(r,e,a);f.AddScene(new u.default(f),"title"),f.ChangeScene("title");var d=performance.now(),c=performance.now();!function t(){(c=performance.now())-d>14&&(f.Update(),d=c);requestAnimationFrame(t)}()}},function(t,e,a){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(a(4)),n=r(a(12)),o=function(){function t(t){this.canvas=t,this.context=this.canvas.getContext("webgl"),this.context.enable(this.context.CULL_FACE),this.context.enable(this.context.DEPTH_TEST),this.context.depthFunc(this.context.LEQUAL),this.clearColor=new i.default(0,0,0,0),this.size=new n.default(t.width,t.height),this.clearFunc=this.Clear,this.context.clearColor(this.clearColor.x,this.clearColor.y,this.clearColor.z,this.clearColor.w),this.context.clearDepth(1),this.context.blendFunc(this.context.SRC_ALPHA,this.context.ONE_MINUS_SRC_ALPHA),this.context.enable(this.context.BLEND)}return Object.defineProperty(t.prototype,"TempMatrix",{get:function(){return this.tempMatrix},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ViewMatrix",{get:function(){return this.viewMatrix},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ProjectionMatrix",{get:function(){return this.projectionMatrix},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"CameraPosition",{get:function(){return this.camPosition},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"CameraRotationInv",{get:function(){return this.camRotationInv},enumerable:!1,configurable:!0}),t.prototype.SetClearColor=function(t){return this.clearColor=t,this.context.clearColor(this.clearColor.x,this.clearColor.y,this.clearColor.z,this.clearColor.w),t},t.prototype.EnableStencil=function(){this.context.enable(this.context.STENCIL_TEST),this.context.clearStencil(0)},t.prototype.Clear=function(){this.context.clear(this.context.COLOR_BUFFER_BIT|this.context.DEPTH_BUFFER_BIT)},t.prototype.ClearDepth=function(){this.context.clear(this.context.DEPTH_BUFFER_BIT)},t.prototype.ClearStencil=function(){this.context.clear(this.context.COLOR_BUFFER_BIT|this.context.DEPTH_BUFFER_BIT|this.context.STENCIL_BUFFER_BIT)},t.prototype.GetSize=function(){return this.size},t.prototype.Present=function(){this.context.flush()},t.prototype.SetShader=function(t){this.shader=t,this.context.useProgram(this.shader.programObject)},t.prototype.CreateProgram=function(t,e){var a=this.context.createProgram();if(this.context.attachShader(a,t),this.context.attachShader(a,e),this.context.linkProgram(a),this.context.getProgramParameter(a,this.context.LINK_STATUS))return this.context.useProgram(a),a;alert(this.context.getProgramInfoLog(a))},t.prototype.CreateVBO=function(t){var e=this.context.createBuffer();return this.context.bindBuffer(this.context.ARRAY_BUFFER,e),this.context.bufferData(this.context.ARRAY_BUFFER,new Float32Array(t),this.context.STATIC_DRAW),this.context.bindBuffer(this.context.ARRAY_BUFFER,null),e},t.prototype.CreateIBO=function(t){var e=this.context.createBuffer();return this.context.bindBuffer(this.context.ELEMENT_ARRAY_BUFFER,e),this.context.bufferData(this.context.ELEMENT_ARRAY_BUFFER,new Int16Array(t),this.context.STATIC_DRAW),this.context.bindBuffer(this.context.ELEMENT_ARRAY_BUFFER,null),e},t.prototype.CreateVertexShader=function(t){var e;return e=this.context.createShader(this.context.VERTEX_SHADER),this.context.shaderSource(e,t),this.context.compileShader(e),this.context.getShaderParameter(e,this.context.COMPILE_STATUS)?e:(console.log("vertex shader failed"),void alert(this.context.getShaderInfoLog(e)))},t.prototype.CreateFragmentShader=function(t){var e;return e=this.context.createShader(this.context.FRAGMENT_SHADER),this.context.shaderSource(e,t),this.context.compileShader(e),this.context.getShaderParameter(e,this.context.COMPILE_STATUS)?e:(console.log("fragment shader failed"),void alert(this.context.getShaderInfoLog(e)))},t.prototype.CreateTexture=function(t,e){var a=new Image;a.onload=function(t,e,a,r){return function(){r.OnLoadTexture(t,e,a)}}(a,e,t,this),a.src=t},t.prototype.SetVBO=function(t){for(var e in t)this.context.bindBuffer(this.context.ARRAY_BUFFER,t[e]),this.context.enableVertexAttribArray(this.shader.attributeLocations[e]),this.context.vertexAttribPointer(this.shader.attributeLocations[e],this.shader.attributeStrides[e],this.context.FLOAT,!1,0,0)},t.prototype.OnLoadTexture=function(t,e,a){var r=this.context.createTexture();this.context.bindTexture(this.context.TEXTURE_2D,r),this.context.texImage2D(this.context.TEXTURE_2D,0,this.context.RGBA,this.context.RGBA,this.context.UNSIGNED_BYTE,t),this.context.generateMipmap(this.context.TEXTURE_2D),this.context.bindTexture(this.context.TEXTURE_2D,null),e.data=r,e.Loaded(),console.log(a+" loaded")},t.prototype.OnLoadShader=function(t,e){var a=t.responseText;console.log(a),e=this.context.createShader(this.context.VERTEX_SHADER),this.context.shaderSource(e,a),this.context.compileShader(e)},t.prototype.SetCameraStatus=function(t,e,a,r){this.viewMatrix=t,this.projectionMatrix=e,this.tempMatrix=this.projectionMatrix.Multiply(this.viewMatrix),this.camPosition=r,this.camRotationInv=a},t}();e.default=o},function(t,e,a){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(a(7)),n=function(){function t(){this.iGeometries=new Map,this.iMaterials=new Map,this.iShaders=new Map,this.iSounds=new Map,this.iTextures=new Map,this.iMeshes=new Map,this.loadingObjectCount=0}return t.prototype.GetShader=function(t){return this.iShaders[t]?this.iShaders[t]:(console.log("key is not fond."),null)},t.prototype.AddShader=function(t,e){return this.iShaders[e]=t,t},t.prototype.RemoveShader=function(t){delete this.iShaders[t]},t.prototype.GetTexture=function(t){return this.iTextures[t]?this.iTextures[t]:null},t.prototype.AddTexture=function(t,e){return this.iTextures[e]=t,t.SetContainer(this),t},t.prototype.AddTextureFromFile=function(t,e){if(this.iTextures[t])return this.iTextures[t];var a=i.default.CreateTexture(t,e);return a.SetContainer(this),this.iTextures[t]=a,this.iTextures[t]},t.prototype.RemoveTexture=function(t){delete this.iTextures[t]},t.prototype.GetMaterial=function(t){return this.iMaterials[t]?this.iMaterials[t]:null},t.prototype.AddMaterial=function(t,e){return this.iMaterials[e]=t,t},t.prototype.AddMaterialFromFile=function(t,e){return this.iMaterials[t]||(this.iMaterials[t]=i.default.CreateMaterialFromFile(t,this,e),this.LoadStart()),this.iMaterials[t]},t.prototype.RemoveMaterial=function(t){delete this.iMaterials[t]},t.prototype.GetGeometry=function(t){return this.iGeometries[t]?this.iGeometries[t]:null},t.prototype.AddGeometry=function(t,e){return this.iGeometries[e]=t,t},t.prototype.RemoveGeometry=function(t){delete this.iGeometries[t]},t.prototype.GetMesh=function(t){return this.iMeshes[t]?this.iMeshes[t]:null},t.prototype.AddMesh=function(t,e){return this.iMeshes[e]=t,t},t.prototype.RemoveMesh=function(t){delete this.iMeshes[t]},t.prototype.GetSound=function(t){return this.iSounds[t]?this.iSounds[t]:null},t.prototype.AddSound=function(t,e){return this.iSounds[e]=t,t},t.prototype.AddSoundFromFile=function(t,e){return this.iSounds[e]=i.default.CreateSound(t),this.iSounds[e]},t.prototype.RemoveSound=function(t){delete this.iSounds[t]},t.prototype.LoadEnd=function(){this.loadingObjectCount--},t.prototype.LoadStart=function(){this.loadingObjectCount++},t.prototype.GetLoadingObjCount=function(){return this.loadingObjectCount<=0?0:this.loadingObjectCount},t}();e.default=n},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){this.isLoaded=!1,this.graphicDevice=e,this.path=t}return t.prototype.Loaded=function(){this.isLoaded=!0,this.resourceContainer&&this.resourceContainer.LoadEnd()},t.prototype.IsLoaded=function(){return this.isLoaded},t.prototype.Initialize=function(){this.graphicDevice.CreateTexture(this.path,this)},t.prototype.Attach=function(t){this.graphicDevice.context.activeTexture(this.graphicDevice.context.TEXTURE0),this.graphicDevice.context.bindTexture(this.graphicDevice.context.TEXTURE_2D,this.data),this.graphicDevice.context.uniform1i(this.graphicDevice.shader.GetTextureSlot(t),t),this.graphicDevice.context.texParameteri(this.graphicDevice.context.TEXTURE_2D,this.graphicDevice.context.TEXTURE_MIN_FILTER,this.graphicDevice.context.NEAREST),this.graphicDevice.context.texParameteri(this.graphicDevice.context.TEXTURE_2D,this.graphicDevice.context.TEXTURE_MAG_FILTER,this.graphicDevice.context.NEAREST)},t.prototype.SetContainer=function(t){this.resourceContainer=t,this.resourceContainer.LoadStart()},t}();e.default=r},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,a){switch(this.slot=t,this.param=a,this.size=e,e){case 1:this.atachFunc=this.Atach1f;break;case 2:this.atachFunc=this.Atach2f;break;case 3:this.atachFunc=this.Atach3f;break;case 4:this.atachFunc=this.Atach4f;break;case 16:this.atachFunc=this.AtachMat}}return t.prototype.Atach1f=function(t){t.context.uniform1fv(t.shader.uniformLocations[this.slot],this.param.data)},t.prototype.Atach2f=function(t){t.context.uniform2fv(t.shader.uniformLocations[this.slot],this.param.data)},t.prototype.Atach3f=function(t){t.context.uniform3fv(t.shader.uniformLocations[this.slot],this.param.data)},t.prototype.Atach4f=function(t){t.context.uniform4fv(t.shader.uniformLocations[this.slot],this.param.data)},t.prototype.AtachMat=function(t){t.context.uniformMatrix4fv(t.shader.uniformLocations[this.slot],!1,this.param.data)},t}(),i=function(){function t(){}return t.prototype.SetParameter=function(t,e,a,r){var i=this;this.ambientColor=t,this.device=e,this.textures=a||new Array,this.exParams=new Array,r&&r.foreach((function(t){return i.AddExParam(t.n,t.s,t.p)}))},t.prototype.SetTexture=function(t,e){this.textures[e]=t},t.prototype.AddExParam=function(t,e,a){this.exParams.push(new r(t,e,a))},t.prototype.Attach=function(){this.device.shader.ambientSlot&&this.device.context.uniform4fv(this.device.shader.uniformLocations[this.device.shader.ambientSlot],this.ambientColor.xyzw);for(var t=0;t<this.textures.length;t++)null!=this.textures[t]&&this.textures[t].Attach(t);for(t=0;t<this.exParams.length;t++)this.exParams[t].atachFunc(this.device)},t}();e.default=i},function(t,e,a){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(a(22));function n(t){switch(t){case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;case"int":case"float":return 1}return console.log("Type undifined."),0}var o=function(){function t(t,e,a,r,o){var s;this.graphicDevice=a,s=r?document.getElementById(t).text:i.default.LoadText(t);var h,u=this.graphicDevice.CreateVertexShader(s);h=o?document.getElementById(e).text:i.default.LoadText(e);var f=this.graphicDevice.CreateFragmentShader(h);this.ambientSlot=-1,this.lightPosSlot=-1,this.lightDirSlot=-1,this.programObject=this.graphicDevice.CreateProgram(u,f),this.attributeLocations=new Array,this.attributeStrides=new Array,this.uniformLocations=new Array,this.textureSlots=new Array;var d=s.split(";");d=d.filter((function(t){return-1!=t.indexOf("attribute")}));for(var c=new Array,l=0;l<d.length;l++)d[l]=d[l].replace(/\r?\n/g,"");d.forEach((function(t){return c.push(t.split(" "))}));for(l=0;l<c.length;l++)c[l]=c[l].filter((function(t){return""!=t})),this.attributeLocations[l]=this.graphicDevice.context.getAttribLocation(this.programObject,c[l][2]),this.attributeStrides[l]=n(c[l][1]);var p=h.split(";");p=(p=s.split(";").concat(p)).filter((function(t){return-1!=t.indexOf("uniform")}));var m=new Array;for(l=0;l<p.length;l++)p[l]=p[l].replace(/\r?\n/g,"");p.forEach((function(t){return m.push(t.split(" "))}));for(l=0;l<m.length;l++)m[l]=m[l].filter((function(t){return""!=t})),this.uniformLocations.push(this.graphicDevice.context.getUniformLocation(this.programObject,m[l][2])),"ambientColor"==m[l][2]?this.ambientSlot=l:"lightPosition"==m[l][2]?this.lightPosSlot=l:"lightDirection"==m[l][2]?this.lightDirSlot=l:"sampler2D"==m[l][1]&&this.textureSlots.push(l)}return t.prototype.GetTextureSlot=function(t){if(null!=this.textureSlots[t])return this.uniformLocations[this.textureSlots[t]]},t.prototype.Attach=function(){this.graphicDevice.SetShader(this)},t}();e.default=o},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,a,r,i){this.device=i,this.vboList=new Array,this.vboList.push(i.CreateVBO(t.p)),e&&this.vboList.push(i.CreateVBO(t.uv)),a&&this.vboList.push(i.CreateVBO(t.n)),r&&this.vboList.push(i.CreateVBO(t.c)),this.ibo=i.CreateIBO(t.i),this.indexSize=t.i.length,this.subset=new Array,this.subset.push(t.i.length)}return t.prototype.ChangeVBO=function(t,e){this.vboList[e]=t},t.prototype.GetIndexSize=function(){return this.indexSize},t.prototype.Draw=function(){this.device.SetVBO(this.vboList),this.device.context.bindBuffer(this.device.context.ELEMENT_ARRAY_BUFFER,this.ibo)},t.prototype.SetSubset=function(t){this.subset=t},t.prototype.GetSubSet=function(){return this.subset},t}();e.default=r},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,a){this.width=e,this.height=a,this.graphicDevice=t,this.frameBuffer=this.graphicDevice.context.createFramebuffer(),this.graphicDevice.context.bindFramebuffer(this.graphicDevice.context.FRAMEBUFFER,this.frameBuffer),this.depthBuffer=this.graphicDevice.context.createRenderbuffer(),this.graphicDevice.context.bindRenderbuffer(this.graphicDevice.context.RENDERBUFFER,this.depthBuffer),this.graphicDevice.context.renderbufferStorage(this.graphicDevice.context.RENDERBUFFER,this.graphicDevice.context.DEPTH_COMPONENT16,e,a),this.graphicDevice.context.framebufferRenderbuffer(this.graphicDevice.context.FRAMEBUFFER,this.graphicDevice.context.DEPTH_ATTACHMENT,this.graphicDevice.context.RENDERBUFFER,this.depthBuffer),this.data=this.graphicDevice.context.createTexture(),this.graphicDevice.context.bindTexture(this.graphicDevice.context.TEXTURE_2D,this.data),this.graphicDevice.context.texImage2D(this.graphicDevice.context.TEXTURE_2D,0,this.graphicDevice.context.RGBA,e,a,0,this.graphicDevice.context.RGBA,this.graphicDevice.context.UNSIGNED_BYTE,null),this.graphicDevice.context.texParameteri(this.graphicDevice.context.TEXTURE_2D,this.graphicDevice.context.TEXTURE_MAG_FILTER,this.graphicDevice.context.LINEAR),this.graphicDevice.context.texParameteri(this.graphicDevice.context.TEXTURE_2D,this.graphicDevice.context.TEXTURE_MIN_FILTER,this.graphicDevice.context.LINEAR),this.graphicDevice.context.framebufferTexture2D(this.graphicDevice.context.FRAMEBUFFER,this.graphicDevice.context.COLOR_ATTACHMENT0,this.graphicDevice.context.TEXTURE_2D,this.data,0),this.graphicDevice.context.bindTexture(this.graphicDevice.context.TEXTURE_2D,null),this.graphicDevice.context.bindRenderbuffer(this.graphicDevice.context.RENDERBUFFER,null),this.graphicDevice.context.bindFramebuffer(this.graphicDevice.context.FRAMEBUFFER,null)}return t.prototype.SetContainer=function(t){},t.prototype.Loaded=function(){},t.prototype.IsLoaded=function(){return!0},t.prototype.Initialize=function(){},t.prototype.Attach=function(t){this.graphicDevice.context.activeTexture(this.graphicDevice.context.TEXTURE0),this.graphicDevice.context.bindTexture(this.graphicDevice.context.TEXTURE_2D,this.data),this.graphicDevice.context.uniform1i(this.graphicDevice.shader.GetTextureSlot(t),t)},t}();e.default=r},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.SetParameter=function(t,e){this.geometry=t,this.ary_materials=e},t}();e.default=r},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.bufferView=new DataView(t),this.point=0}return t.prototype.GetString=function(t){for(var e="",a=0;a<t;a++){var r=this.bufferView.getInt8(this.point);if(r>9)e+=String.fromCharCode(r);else switch(r){case 0:e+="0";break;case 1:e+="1";break;case 2:e+="2";break;case 3:e+="3";break;case 4:e+="4";break;case 5:e+="5";break;case 6:e+="6";break;case 7:e+="7";break;case 8:e+="8";break;case 9:e+="9"}this.point++}return e},t.prototype.GetWString=function(t){for(var e="",a=0;a<2*t;a++)e+=String.fromCharCode(this.bufferView.getInt8(this.point)),this.point++;return e},t.prototype.GetChar=function(){var t=this.bufferView.getInt8(this.point);return this.point+=1,t},t.prototype.GetFloat=function(){var t=this.bufferView.getFloat32(this.point,!0);return this.point+=4,t},t.prototype.GetDouble=function(){var t=this.bufferView.getFloat64(this.point,!0);return this.point+=5,t},t.prototype.GetInt=function(t){if(!t){var e=this.bufferView.getInt32(this.point,!0);return this.point+=4,e}if(1==t){e=this.bufferView.getInt8(this.point);return this.point+=1,e}if(2==t){e=this.bufferView.getInt16(this.point,!0);return this.point+=2,e}if(4==t){e=this.bufferView.getInt32(this.point,!0);return this.point+=4,e}},t.prototype.GetUInt=function(t){if(!t){var e=this.bufferView.getUint32(this.point,!0);return this.point+=4,e}if(1==t){e=this.bufferView.getUint8(this.point);return this.point+=1,e}if(2==t){e=this.bufferView.getUint16(this.point,!0);return this.point+=2,e}if(4==t){e=this.bufferView.getUint32(this.point,!0);return this.point+=4,e}},t}();e.default=r},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.audioElement=document.createElement("audio"),this.audioElement.src=t,this.audioElement.preload="auto"}return t.prototype.Play=function(){this.audioElement.play()},t.prototype.Play_new=function(){var t=document.createElement("audio");t.src=this.audioElement.src,t.preload="auto",t.play()},t.prototype.Pause=function(){this.audioElement.pause()},t.prototype.Mute=function(){this.audioElement.muted=!0},t.prototype.SetVolume=function(t){this.audioElement.volume=t},t.prototype.GetVolume=function(){return this.audioElement.volume},t.prototype.DisMute=function(){this.audioElement.muted=!1},t.prototype.Reset=function(){this.audioElement.currentTime=0},t.prototype.SetLoop=function(t){this.audioElement.loop=t},t}();e.default=r},function(t,e,a){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(a(37)),n=r(a(7)),o=r(a(14)),s=r(a(39)),h=new Map([[" ",0],["!",1],['"',2],["#",3],["$",4],["%",5],["&",6],["'",7],["(",8],[")",9],["*",10],["+",11],[",",12],["-",13],[".",14],["/",15],["0",16],["1",17],["2",18],["3",19],["4",20],["5",21],["6",22],["7",23],["8",24],["9",25],[":",26],[";",27],["<",28],["=",29],[">",30],["?",31],["@",32],["A",33],["B",34],["C",35],["D",36],["E",37],["F",38],["G",39],["H",40],["I",41],["J",42],["K",43],["L",44],["M",45],["N",46],["O",47],["P",48],["Q",49],["R",50],["S",51],["T",52],["U",53],["V",54],["W",55],["X",56],["Y",57],["Z",58],["[",59],["\\",60],["]",61],["^",62],["_",63],["`",64],["a",65],["b",66],["c",67],["d",68],["e",69],["f",70],["g",71],["h",72],["i",73],["j",74],["k",75],["l",76],["m",77],["n",78],["o",79],["p",80],["q",81],["r",82],["s",83],["t",84],["u",85],["v",86],["w",87],["x",88],["y",89],["z",90],["{",99],["|",92],["}",93],["~",94]]);var u=function(){function t(t,e){this.resourceContainer=e,this.graphicDevice=t,this.fontUVContainer=new Map}return t.prototype.CreateModel=function(t,e,a,r,n,o){var s=new i.default(t,e);return s.Initialize_geom(this.graphicDevice,this.resourceContainer.GetGeometry(a),this.resourceContainer.GetMaterial(r),this.resourceContainer.GetShader(n),o),s},t.prototype.CreateModelFromMesh=function(t,e,a,r,n){var o=new i.default(t,e);return o.Initialize_mesh(this.graphicDevice,this.resourceContainer.GetMesh(a),this.resourceContainer.GetShader(r),n),o},t.prototype.CreateModelFromText=function(t,e,a,r,i,u){var f=new s.default(t),d=e.data[0]+""+e.data[1]+e.data[2]+e.data[3]+r,c=this.resourceContainer.GetMaterial(d);null==c&&(c=this.resourceContainer.AddMaterial(n.default.CreateMaterial(e,this.graphicDevice,[this.resourceContainer.GetTexture(r)]),d));var l="Text:"+a.length,p=this.resourceContainer.GetGeometry(l);null==p&&(p=this.resourceContainer.AddGeometry(n.default.CreateGeometry(o.default.CreateTextGeometry(a.length),!0,!1,!1,this.graphicDevice),l)),f.Initialize_geom(this.graphicDevice,p,c,this.resourceContainer.GetShader(i),u);var m,y=this.fontUVContainer[a];if(!y){for(var b=new Array,g=0;g<a.length;g++){var G=(m=a[g],h.get(m)),v=G%18,R=Math.floor(G/18);b.push(v*(1/128*7),(R+1)*(1/14),(v+1)*(1/128*7),(R+1)*(1/14),v*(1/128*7),R*(1/14),(v+1)*(1/128*7),R*(1/14))}y=this.graphicDevice.CreateVBO(b),this.fontUVContainer[a]=y}return f.SetUVData(y),f},t}();e.default=u},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,a){switch(this.slot=t,this.param=a,this.size=e,e){case 1:this.atachFunc=this.Atach1f;break;case 2:this.atachFunc=this.Atach2f;break;case 3:this.atachFunc=this.Atach3f;break;case 4:this.atachFunc=this.Atach4f;break;case 16:this.atachFunc=this.AtachMat}}return t.prototype.Atach1f=function(t){t.context.uniform1fv(t.shader.uniformLocations[this.slot],this.param.data)},t.prototype.Atach2f=function(t){t.context.uniform2fv(t.shader.uniformLocations[this.slot],this.param.data)},t.prototype.Atach3f=function(t){t.context.uniform3fv(t.shader.uniformLocations[this.slot],this.param.data)},t.prototype.Atach4f=function(t){t.context.uniform4fv(t.shader.uniformLocations[this.slot],this.param.data)},t.prototype.AtachMat=function(t){t.context.uniformMatrix4fv(t.shader.uniformLocations[this.slot],!1,this.param.data)},t}(),i=function(){function t(t,e){this.Draw=1==e?t?this.Draw_BillBoard_Light:this.Draw_BillBoard_NonLight:t?this.Draw_Light:this.Draw_NonLight,this.exParams=new Array}return t.prototype.Initialize_geom=function(t,e,a,r,i){this.graphicDevice=t,this.geometry=e,this.materials=new Array,this.materials.push(a),this.subsets=new Array,this.subsets.push(this.geometry.GetIndexSize()),this.shader=r,this.transform=i,this.lights=new Array},t.prototype.Initialize_mesh=function(t,e,a,r){this.graphicDevice=t,this.geometry=e.geometry,this.materials=e.ary_materials,this.subsets=this.geometry.GetSubSet(),this.shader=a,this.transform=r,this.lights=new Array},t.prototype.SetLight=function(t){this.lights.push(t)},t.prototype.AddExParam=function(t,e,a){this.exParams.push(new r(t,e,a))},t.prototype.Draw_NonLight=function(){this.shader.Attach();var t=this.graphicDevice.TempMatrix.Multiply(this.transform.Matrix),e=this.transform.Matrix.Inverse();this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[0],!1,t.data),this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[1],!1,this.transform.Matrix.data),this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[2],!1,e.data);for(var a=0;a<this.exParams.length;a++)this.exParams[a].atachFunc(this.graphicDevice);this.geometry.Draw();var r=0;for(a=0;a<this.subsets.length;a++)this.materials[a].Attach(),this.graphicDevice.context.drawElements(this.graphicDevice.context.TRIANGLES,this.subsets[a],this.graphicDevice.context.UNSIGNED_SHORT,2*r),r+=this.subsets[a]},t.prototype.Draw_Light=function(){this.shader.Attach();var t=this.graphicDevice.TempMatrix.Multiply(this.transform.Matrix),e=this.transform.Matrix.Inverse();this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[0],!1,t.data),this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[1],!1,this.transform.Matrix.data),this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[2],!1,e.data),this.lights.forEach((function(t){return t.Atach()}));for(var a=0;a<this.exParams.length;a++)this.exParams[a].atachFunc(this.graphicDevice);this.geometry.Draw();var r=0;for(a=0;a<this.subsets.length;a++)this.materials[a].Attach(),this.graphicDevice.context.drawElements(this.graphicDevice.context.TRIANGLES,this.subsets[a],this.graphicDevice.context.UNSIGNED_SHORT,2*r),r+=this.subsets[a]},t.prototype.Draw_BillBoard_Light=function(){this.shader.Attach();var t=this.transform.Matrix.Multiply(this.graphicDevice.CameraRotationInv),e=this.graphicDevice.TempMatrix.Multiply(t),a=this.transform.Matrix.Inverse();this.lights.forEach((function(t){return t.Atach()})),this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[0],!1,e.data),this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[1],!1,this.transform.Matrix.data),this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[2],!1,a.data);for(var r=0;r<this.exParams.length;r++)this.exParams[r].atachFunc(this.graphicDevice);this.geometry.Draw();var i=0;for(r=0;r<this.subsets.length;r++)this.materials[r].Attach(),this.graphicDevice.context.drawElements(this.graphicDevice.context.TRIANGLES,this.subsets[r],this.graphicDevice.context.UNSIGNED_SHORT,2*i),i+=this.subsets[r]},t.prototype.Draw_BillBoard_NonLight=function(){this.shader.Attach();var t=this.transform.Matrix.Multiply(this.graphicDevice.CameraRotationInv),e=this.graphicDevice.TempMatrix.Multiply(t),a=this.transform.Matrix.Inverse();this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[0],!1,e.data),this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[1],!1,this.transform.Matrix.data),this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[2],!1,a.data);for(var r=0;r<this.exParams.length;r++)this.exParams[r].atachFunc(this.graphicDevice);this.geometry.Draw();var i=0;for(r=0;r<this.subsets.length;r++)this.materials[r].Attach(),this.graphicDevice.context.drawElements(this.graphicDevice.context.TRIANGLES,this.subsets[r],this.graphicDevice.context.UNSIGNED_SHORT,2*i),i+=this.subsets[r]},t}();e.default=i},function(t,e,a){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(a(4)),n=function(){function t(){}return t.hsva=function(t,e,a,r){if(!(e>1||a>1||r>1)){var n,o=t%360,s=Math.floor(o/60),h=o/60-s,u=a*(1-e),f=a*(1-e*h),d=a*(1-e*(1-h));if(e>0||e<0){var c=new Array(a,f,u,u,d,a),l=new Array(d,a,a,f,u,u),p=new Array(u,u,d,a,a,f);n=new i.default(c[s],l[s],p[s],r)}else n=new i.default(a,a,a,r);return n}},t}();e.default=n},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.Draw=1==t?this.Draw_BillBoard_NonLight:this.Draw_NonLight}return t.prototype.SetUVData=function(t){this.uvData=t},t.prototype.AddExParam=function(t,e,a){},t.prototype.Initialize_geom=function(t,e,a,r,i){this.graphicDevice=t,this.geometry=e,this.materials=a,this.indexSize=this.geometry.GetIndexSize(),this.shader=r,this.transform=i},t.prototype.SetLight=function(t){},t.prototype.Draw_NonLight=function(){this.shader.Attach();var t=this.graphicDevice.TempMatrix.Multiply(this.transform.Matrix),e=this.transform.Matrix.Inverse();this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[0],!1,t.data),this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[1],!1,this.transform.Matrix.data),this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[2],!1,e.data),this.geometry.ChangeVBO(this.uvData,1),this.geometry.Draw(),this.materials.Attach(),this.graphicDevice.context.drawElements(this.graphicDevice.context.TRIANGLES,this.indexSize,this.graphicDevice.context.UNSIGNED_SHORT,0)},t.prototype.Draw_BillBoard_NonLight=function(){this.shader.Attach();var t=this.transform.Matrix.Multiply(this.graphicDevice.CameraRotationInv),e=this.graphicDevice.TempMatrix.Multiply(t),a=this.transform.Matrix.Inverse();this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[0],!1,e.data),this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[1],!1,this.transform.Matrix.data),this.graphicDevice.context.uniformMatrix4fv(this.shader.uniformLocations[2],!1,a.data),this.geometry.ChangeVBO(this.uvData,1),this.geometry.Draw(),this.materials.Attach(),this.graphicDevice.context.drawElements(this.graphicDevice.context.TRIANGLES,this.indexSize,this.graphicDevice.context.UNSIGNED_SHORT,0)},t}();e.default=r},function(t,e,a){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(a(41)),n=function(){function t(t,e,a){this.map_scenes=new Map,this.resourceContainer=e,this.modelCreater=t,this.graphicDevice=a,this.gameTime=new i.default}return t.prototype.GetGraphicDevice=function(){return this.graphicDevice},t.prototype.GetModelCreater=function(){return this.modelCreater},t.prototype.GetResourceContainer=function(){return this.resourceContainer},t.prototype.GetGameTime=function(){return this.gameTime},t.prototype.Update=function(){this.currentScene.IsLoaded()?(this.currentScene.Update(),this.gameTime.Count()):this.currentScene.Draw()},t.prototype.AddScene=function(t,e){return t.Load(),this.map_scenes[e]=t,t},t.prototype.GetScene=function(t){return this.map_scenes[t]},t.prototype.GetCurrentScene=function(){return this.currentScene},t.prototype.ChangeScene=function(t,e){this.currentScene&&(this.currentScene.SetCurrentScene(!1),this.currentScene.End()),this.currentScene=this.map_scenes[t],this.currentScene.SetCurrentScene(!0),this.currentScene.Start()},t.prototype.RemoveScene=function(t){this.map_scenes[t]&&(this.map_scenes[t].Release(),delete this.map_scenes[t])},t}();e.default=n},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this.time=(new Date).getTime(),this.absFrame=0,this.relFrame=0,this.timePase=1}return t.prototype.Count=function(){this.absFrame++,this.relFrame+=this.timePase},Object.defineProperty(t.prototype,"elapsedTime",{get:function(){return this.time-(new Date).getTime()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"AbsoluteFrame",{get:function(){return this.absFrame},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"RelativeFrame",{get:function(){return this.relFrame},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"TimePase",{get:function(){return this.timePase},set:function(t){this.timePase=t},enumerable:!1,configurable:!0}),t}();e.default=r},function(t,e,a){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),n=this&&this.__awaiter||function(t,e,a,r){return new(a||(a=Promise))((function(i,n){function o(t){try{h(r.next(t))}catch(t){n(t)}}function s(t){try{h(r.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(o,s)}h((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var a,r,i,n,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return n={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function s(n){return function(s){return function(n){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,r&&(i=2&n[0]?r.return:n[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return o.label++,{value:n[1],done:!1};case 5:o.label++,r=n[1],n=[0];continue;case 7:n=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==n[0]&&2!==n[0])){o=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){o.label=n[1];break}if(6===n[0]&&o.label<i[1]){o.label=i[1],i=n;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(n);break}i[2]&&o.ops.pop(),o.trys.pop();continue}n=e.call(t,o)}catch(t){n=[6,t],r=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var h=s(a(15)),u=s(a(7)),f=s(a(14)),d=s(a(13)),c=s(a(4)),l=s(a(0)),p=s(a(18)),m=s(a(3)),y=s(a(12)),b=s(a(19)),g=s(a(2)),G=s(a(51)),v=s(a(8)),R=s(a(9)),_=s(a(73)),w=s(a(6)),x=s(a(74)),M=function(){this.data=new Float32Array(1)},F=function(t){function e(e){var a=t.call(this,e)||this;return a.aQuaternion=(new d.default).Identity(),a.bQuaternion=(new d.default).Identity(),a.sQuaternion=(new d.default).Identity(),a.zoomData=new M,a.isLoad=!1,a.zoomDirection=1,a.zoomData.data[0]=.5,a}return i(e,t),e.prototype.LoadingUpdate=function(){},e.prototype.OnLoad=function(){return n(this,void 0,void 0,(function(){return o(this,(function(t){return this.sceneManager.GetResourceContainer().AddShader(u.default.CreateShader("shader/UVNormalColorVS.glsl","shader/DefaultFS.glsl",this.sceneManager.GetGraphicDevice()),"texShader"),this.sceneManager.GetResourceContainer().AddShader(u.default.CreateShader("shader/UVNormalColorVS.glsl","shader/FontShaderFS.glsl",this.sceneManager.GetGraphicDevice()),"fontShader"),this.sceneManager.GetResourceContainer().AddGeometry(u.default.CreateGeometry(f.default.CreatePlane(new y.default(1,1),!1,new c.default(1,1,1,1)),!0,!1,!1,this.sceneManager.GetGraphicDevice()),"plane"),this.sceneManager.GetResourceContainer().AddSoundFromFile("audio/title_se3.wav","title"),this.sceneManager.GetResourceContainer().GetSound("title").SetVolume(.5),this.sceneManager.GetResourceContainer().AddTexture(u.default.CreateTexture("image/charmap.png",this.sceneManager.GetGraphicDevice()),"font"),this.sceneManager.GetResourceContainer().AddTexture(u.default.CreateFrameBuffer(1024,1024,this.sceneManager.GetGraphicDevice()),"titleCamera"),this.sceneManager.GetResourceContainer().AddTexture(u.default.CreateFrameBuffer(1024,1024,this.sceneManager.GetGraphicDevice()),"loadingCamera"),this.sceneManager.GetResourceContainer().AddMaterial(u.default.CreateMaterial(new c.default(.1,.1,.1,1),this.sceneManager.GetGraphicDevice(),[this.sceneManager.GetResourceContainer().GetTexture("titleCamera")]),"titleCameraMaterial").AddExParam(4,1,this.zoomData),this.sceneManager.GetResourceContainer().AddMaterial(u.default.CreateMaterial(new c.default(.1,.1,.1,1),this.sceneManager.GetGraphicDevice(),[this.sceneManager.GetResourceContainer().GetTexture("loadingCamera")]),"loadingCameraMaterial"),[2]}))}))},e.prototype.OnInitialize=function(){this.sceneManager.AddScene(new G.default(this.sceneManager),"load"),this.renderer.AddLayer(),this.AddCamera(0,1,"main",!1,this.sceneManager.GetResourceContainer().GetTexture("titleCamera"));var t=new p.default(this.sceneManager.GetGraphicDevice());t.transform.Position=new l.default(-5,-5,10),this.renderer.SetLight(t,1),this.sceneManager.GetGraphicDevice().EnableStencil(),this.GetCamera("main").transform.Position=new l.default(0,0,10),this.GetCamera("main").transform.LookAt(new l.default(0,0,0),l.default.yAxis),this.GetCamera("main").clearColor=new c.default(1,1,1,1),this.texts=this.gameObjectManager.AddGameObject("text"),this.projectionPlane=this.gameObjectManager.AddGameObject("projectionPlane"),(new g.default).Position=new l.default(1,1,1),(new g.default).Position=new l.default(-1,-1,2);var e=new g.default;e.Scale=new l.default(.5,.5,.5),e.Position=new l.default(0,-1,0);var a=new g.default;a.Scale=new l.default(.25,.25,.25),a.Position=new l.default(0,1,0);var r=new g.default;r.Scale=new l.default(.4,.4,.4),r.Position=new l.default(0,1,0),this.texts.SetComponent(new b.default("Now Loading","font","fontShader",new c.default(.75,.75,.25,1),1,!0,e)),this.texts.SetComponent(new R.default(60,!0,r,a)),this.projectionPlane.SetComponent(new m.default(!1,"plane","titleCameraMaterial","texShader",0,!1)),this.projectionPlane.transform.Scale=new l.default(300,300,1),this.texts.transform.Position=new l.default(0,0,.5),this.projectionPlane.transform.Position=new l.default(0,0,-1)},e.prototype.OnUpdate=function(){this.sceneManager.GetScene("load").IsLoaded()&&this.sceneManager.GetScene("sample").IsLoaded()&&this.ZoomOut()},e.prototype.OnStart=function(){if(v.default.AddKeyDownEvent(this,"titleSceneEvent",!0),this.IsLoaded()){var t=new g.default(new l.default(0,0,-1),new l.default(0,0,0),new l.default(300,300,1));this.texts.SetComponent(new R.default(90,!1,t,this.projectionPlane.transform,w.default.EaseInOutCirc))}},e.prototype.OnEnd=function(){v.default.RemoveKeyDownEvent("titleSceneEvent"),this.gameObjectManager.GetGameObject("sceneChanger").Dead()},e.prototype.ZoomOut=function(){var t=this.gameObjectManager.GetGameObject("sceneChanger");if(!t){this.sceneManager.GetResourceContainer().GetSound("title").Play(),(t=this.gameObjectManager.AddGameObject("sceneChanger")).SetComponent(new _.default("load",100,null));var e=new g.default(new l.default(0,0,-1),new l.default(0,0,0),new l.default(0,0,0));t.SetComponent(new R.default(90,!1,e,this.projectionPlane.transform,w.default.EaseInOutCirc)),t.SetComponent(new x.default(100))}},e.prototype.OnKeyDown=function(t){},e}(h.default);e.default=F},function(t,e,a){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(a(16)),n=function(){function t(){this.ary_IDs=new Array,this.ary_IModels=new Array,this.ary_lights=new Array}return t.prototype.SetLight=function(t){return this.ary_lights.push(t),t},t.prototype.Regist=function(t){this.ary_lights.length>0&&t.SetLight(this.ary_lights[0]);var e=new i.default(this.ary_IModels.length);return this.ary_IModels.push(t),this.ary_IDs.push(e),e},t.prototype.UnRegist=function(t){if(!(t.num>this.ary_IDs.length)){this.ary_IModels.splice(t.num,1),this.ary_IDs.splice(t.num,1);for(var e=t.num;e<this.ary_IDs.length;e++)this.ary_IDs[e].num--}},t.prototype.Draw=function(){this.ary_IModels.forEach((function(t){return t.Draw()}))},t.prototype.Release=function(){this.ary_IDs.length=0,this.ary_IModels.length=0,this.ary_lights.length=0},t}(),o=function(){function t(){this.layers=new Array,this.layers.push(new n)}return t.prototype.Regist=function(t,e){return this.layers.length<=e&&(e=0),this.layers[e].Regist(t)},t.prototype.UnRegist=function(t,e){this.layers.length<=e&&(e=0),this.layers[e].UnRegist(t)},t.prototype.SetLight=function(t,e){return this.layers.length<=e&&(e=0),this.layers[e].SetLight(t)},t.prototype.AddLayer=function(){this.layers.push(new n)},t.prototype.Draw=function(t){this.layers.length<=t.layer||(t.Attach(),this.layers[t.layer].Draw())},t.prototype.Release=function(){this.layers.forEach((function(t){return t.Release()}))},t}();e.default=o},function(t,e,a){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(a(17)),n=r(a(2)),o=r(a(4)),s=function(){function t(t,e,a,r){this.targetFrame=null,this.isClear=!0,this.device=t,this.transform=new n.default,this.layer=e,this.clearColor=new o.default(0,0,0,0),r?(this.targetFrame=r,this.projectionMatrix=a?(new i.default).Ortho(-this.targetFrame.width/2,this.targetFrame.width/2,this.targetFrame.height/2,-this.targetFrame.height/2,.1,100):(new i.default).Perspective(45,this.targetFrame.width/this.targetFrame.height,.1,100)):this.projectionMatrix=a?(new i.default).Ortho(-this.device.GetSize().x/2,this.device.GetSize().x/2,this.device.GetSize().y/2,-this.device.GetSize().y/2,.1,100):(new i.default).Perspective(45,this.device.GetSize().x/this.device.GetSize().y,.1,100)}return t.prototype.Attach=function(){this.device.SetClearColor(this.clearColor),this.device.SetCameraStatus(this.transform.Matrix.Inverse(),this.projectionMatrix,this.transform.Rotation,this.transform.Position),this.targetFrame?(this.device.context.viewport(0,0,this.targetFrame.width,this.targetFrame.height),this.device.context.bindFramebuffer(this.device.context.FRAMEBUFFER,this.targetFrame.frameBuffer),this.isClear&&this.device.clearFunc()):(this.device.context.viewport(0,0,this.device.GetSize().x,this.device.GetSize().y),this.device.context.bindFramebuffer(this.device.context.FRAMEBUFFER,null),this.isClear&&this.device.clearFunc())},t}();e.default=s},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Math.PI/180,i=new Float32Array(360),n=function(){function t(){}return Object.defineProperty(t.prototype,"Rad",{get:function(){return r},enumerable:!1,configurable:!0}),t.InitSinRets=function(){if(!this.isInitSin){for(var t=0;t<360;t++)i[t]=Math.sin(this.ToRadian(t));this.isInitSin=!0}},t.ToRadian=function(t){return t*r},t.GetSinPos=function(t){return i[t%360]},t.isInitSin=!1,t}();e.default=n},function(t,e,a){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(a(47)),n=r(a(2)),o=function(){function t(t){this.gameObjects=new Array,this.newGameObjects=new Array,this.map_gameObjects=new Map,this.scene=t}return Object.defineProperty(t.prototype,"Scene",{get:function(){return this.scene},enumerable:!1,configurable:!0}),t.prototype.AddGameObject=function(t,e,a,r){var o;if(this.map_gameObjects[t]){for(var s=1,h=t+"_"+s;this.map_gameObjects[h];)h=t+"_"+ ++s;t=h}return a||(a="none"),o=e?r?new i.default(this,t,e,a,r):new i.default(this,t,e,a):r?new i.default(this,t,new n.default,a,r):new i.default(this,t,new n.default,a),this.map_gameObjects[t]=o,this.newGameObjects.push(o),o},t.prototype.RemoveObject=function(t){this.map_gameObjects[t].Dead()},t.prototype.UnRegistObject=function(t){this.map_gameObjects[t]=null},t.prototype.Update=function(){this.gameObjects=this.gameObjects.concat(this.newGameObjects),this.newGameObjects=new Array,this.gameObjects.forEach((function(t){return t.Update()})),this.gameObjects.filter((function(t){return t.IsRemove})).forEach((function(t){return t.Remove()})),this.gameObjects=this.gameObjects.filter((function(t){return!t.IsRemove}))},t.prototype.GetGameObject=function(t){return this.map_gameObjects[t]},t.prototype.GetGameObjects=function(t){return this.gameObjects.filter((function(e){return e.objectID.Equal(t)}))},t.prototype.RegistObj=function(t){this.map_gameObjects[t.Name]=t},t.prototype.LogObjectCount=function(){console.log("gameObjectCounts:"+this.gameObjects.length)},t.prototype.Release=function(){this.map_gameObjects.clear(),this.newGameObjects.forEach((function(t){return t.Release()})),this.newGameObjects.length=0,this.gameObjects.forEach((function(t){return t.Release()})),this.gameObjects.length=0,this.scene=null},t}();e.default=o},function(t,e,a){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(a(5)),n=function(){function t(t,e,a,r,n){var o=this;this.isComplexHit=!1,this.transform=a,this.Collision=this.Collision_Simple,this.newComponents=new Array,this.isRemove=!1,this.name=e,this.manager=t,this.components=n||new Array,this.objectID=i.default.GetID(r),this.components.forEach((function(t){return t.Set(o)})),this.ary_currentHitObjects=new Array,this.ary_befHitObjects=new Array}return Object.defineProperty(t.prototype,"IsRemove",{get:function(){return this.isRemove},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Name",{get:function(){return this.name},set:function(t){this.manager.UnRegistObject(this.name),this.name=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Manager",{get:function(){return this.manager},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ComplexHit",{get:function(){return this.isComplexHit},set:function(t){this.isComplexHit=t,this.isComplexHit?this.Collision=this.Collision_Complex:this.Collision=this.Collision_Simple},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"GameTime",{get:function(){return this.Manager.Scene.GetSceneManager().GetGameTime()},enumerable:!1,configurable:!0}),t.prototype.Remove=function(){this.components.forEach((function(t){return t.Remove()})),this.components.length=0,this.manager.UnRegistObject(this.name),this.manager=null},t.prototype.Release=function(){this.components.forEach((function(t){return t.Remove()})),this.components.length=0,this.manager=null},t.prototype.Dead=function(){this.isRemove=!0},t.prototype.GetRenderer=function(){return this.manager.Scene.GetRenderer()},t.prototype.GetCollisionManager=function(){return this.manager.Scene.GetCollisionManager()},t.prototype.Update=function(){this.Collision(),this.components=this.components.concat(this.newComponents),this.newComponents=new Array,this.components.forEach((function(t){return t.Update()})),this.components.filter((function(t){return t.IsRemove})).forEach((function(t){return t.Remove()})),this.components=this.components.filter((function(t){return!t.IsRemove}))},t.prototype.Initialize=function(){},t.prototype.SetComponent=function(t){return t.Set(this),this.newComponents.push(t),t},t.prototype.GetComponent=function(t,e){return this.components.filter((function(e){return e.GetComponentName()==t}))[e]},t.prototype.Hit=function(t){this.ary_currentHitObjects.push(t)},t.prototype.Collision_Simple=function(){var t=this;this.ary_currentHitObjects.forEach((function(e){t.components.forEach((function(t){return t.OnCollision(e)}))})),this.ary_currentHitObjects.length=0},t.prototype.Collision_Complex=function(){var t=this;this.ary_currentHitObjects.forEach((function(e){t.ary_befHitObjects.includes(e)?t.components.forEach((function(t){return t.OnCollision(e)})):t.components.forEach((function(t){return t.OnCollisionEnter(e)}))})),this.ary_befHitObjects.forEach((function(e){t.ary_currentHitObjects.includes(e)||t.components.forEach((function(t){return t.OnCollisionRelease(e)}))})),this.ary_befHitObjects=this.ary_currentHitObjects,this.ary_currentHitObjects=new Array},t}();e.default=n},function(t,e,a){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(a(0)),n=r(a(49)),o=function(){function t(){this.list_objStack=new Array,this.vec_collisionObjects=new Array,this.octree=new n.default(6,new i.default(-20,-20,-20),new i.default(20,20,20))}return t.prototype.Regist=function(t){return this.octree.RegistCollisionObj(t)},t.prototype.UnRegist=function(t){this.octree.UnRegistCollisionObj(t)},t.prototype.Check=function(){this.octree.Update(),this.vec_collisionObjects.length=0,this.list_objStack.length=0,this.octree.CreateCollisionObjectList(0,this.vec_collisionObjects,this.list_objStack);for(var t=this.vec_collisionObjects.length,e=0;e<t;e+=2)this.vec_collisionObjects[e].HitCheck(this.vec_collisionObjects[e+1])},t.prototype.Release=function(){this.octree.Release()},t}(),s=function(){function t(){this.layers=new Array,this.layers.push(new o)}return t.prototype.Regist=function(t,e){return this.layers.length<=e&&(e=0),this.layers[e].Regist(t)},t.prototype.UnRegist=function(t,e){this.layers.length<=e&&(e=0),this.layers[e].UnRegist(t)},t.prototype.AddLayer=function(){this.layers.push(new o)},t.prototype.Check=function(){this.layers.forEach((function(t){return t.Check()}))},t.prototype.Release=function(){this.layers.forEach((function(t){return t.Release()})),this.layers.length=0},t}();e.default=s},function(t,e,a){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(a(0)),n=r(a(16)),o=r(a(50)),s=function(){function t(){}return t.BitSeparate=function(t){var e=t;return e=2396745&((e=798915&((e=61455&(e|e<<8))|e<<4))|e<<2)},t.GetLevel=function(t,e){for(var a=1,r=0;r<e;r++){0!=(t>>3*r&7)&&(a=r+1)}return a},t}(),h=new i.default(0,0,0),u=new i.default(0,0,0),f=function(){function t(t,e,a){this.OctPow=Array(8),this.OctPowSevenDevided=Array(8),this.maxLevel=t<=7?t:7,this.rangeMax=a,this.rangeMin=e,this.width=this.rangeMax.Sub(this.rangeMin),this.OctPow[0]=1,this.OctPowSevenDevided[0]=0;for(var r=1;r<8;r++)this.OctPow[r]=8*this.OctPow[r-1],this.OctPowSevenDevided[r]=(this.OctPow[r]-1)/7;this.maxCellNum=this.OctPowSevenDevided[6],this.unit=this.width.Div(1<<this.maxLevel),this.ary_cells=new Array(this.maxCellNum),this.CreateCell(0),this.vec_shp_collisionObjs=new Array,this.vec_index=new Array}return t.prototype.Release=function(){this.vec_shp_collisionObjs.length=0,this.vec_index.length=0;for(var t=0;t<this.maxCellNum;t++)this.ary_cells[t]&&this.ary_cells[t].Release();this.ary_cells.length=0},t.prototype.RegistCollisionObj=function(t){var e=new n.default(this.vec_shp_collisionObjs.length);return this.vec_shp_collisionObjs.push(t),this.vec_index.push(e),e},t.prototype.UnRegistCollisionObj=function(t){var e=t.num;if(!(e>=this.vec_shp_collisionObjs.length)){this.vec_shp_collisionObjs[e].Remove(),this.vec_shp_collisionObjs.splice(e,1),this.vec_index.splice(e,1);for(var a=e;a<this.vec_index.length;a++)this.vec_index[a].num--}},t.prototype.Initialize=function(){},t.prototype.Update=function(){this.RegistOctree()},t.prototype.RegistOctree=function(){for(var t=this.vec_shp_collisionObjs.length,e=0;e<t;e++){this.vec_shp_collisionObjs[e].collisionPrimitive.GetMaxPointAndMinPoint(u,h);var a=this.GetMortonSpace(h,u);a>this.maxCellNum||(this.ary_cells[a]||this.CreateCell(a),this.ary_cells[a].RegistObject(this.vec_shp_collisionObjs[e]))}},t.prototype.Get3DMortonNumber=function(t,e,a){return s.BitSeparate(t)|s.BitSeparate(e)<<1|s.BitSeparate(a)<<2},t.prototype.Get3DMortonNumber_Vec3=function(t){return this.Get3DMortonNumber((t.x-this.rangeMin.x)/this.unit.x,(t.y-this.rangeMin.y)/this.unit.y,(t.z-this.rangeMin.z)/this.unit.z)},t.prototype.GetMortonSpace=function(t,e){var a=this.Get3DMortonNumber_Vec3(e),r=this.Get3DMortonNumber_Vec3(t)^a,i=s.GetLevel(r,this.maxLevel),n=a>>3*i;return n+=this.OctPowSevenDevided[this.maxLevel-i]},t.prototype.CreateCollisionObjectList=function(t,e,a){for(var r=this.ary_cells[t].GetHead();null!=r;){for(var i=r.shp_next;null!=i;)e.push(r),e.push(i),i=i.shp_next;for(var n=0;n<a.length;n++)e.push(r),e.push(a[n]);r=r.shp_next}var o,s=!1,h=0;for(o=0;o<8;o++)if(8*t+1+o<this.maxCellNum&&this.ary_cells[8*t+1+o]){if(!s)for(r=this.ary_cells[t].GetHead();r;)a.push(r),h++,r=r.shp_next;s=!0,this.CreateCollisionObjectList(8*t+1+o,e,a)}if(s)for(o=0;o<h;o++)a.pop()},t.prototype.CreateCell=function(t){for(;!(this.ary_cells[t]||(this.ary_cells[t]=new o.default,(t=t-1>>3)>=this.maxCellNum)););},t}();e.default=f},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.Release=function(){for(;null!=this.shp_head&&null!=this.shp_head.shp_next;)this.shp_head=this.shp_head.shp_next,this.shp_head.shp_bef=null;this.shp_head=null},t.prototype.RegistObject=function(t){t.p_cell!=this&&null!=t&&(t.Remove(),t.p_cell=this,this.shp_head&&(t.shp_next=this.shp_head,this.shp_head.shp_bef=t,this.shp_head=t),this.shp_head=t)},t.prototype.OnRemove=function(t){this.shp_head==t&&t&&(this.shp_head=this.shp_head.shp_next)},t.prototype.GetHead=function(){return this.shp_head},t}();e.default=r},function(t,e,a){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),n=this&&this.__awaiter||function(t,e,a,r){return new(a||(a=Promise))((function(i,n){function o(t){try{h(r.next(t))}catch(t){n(t)}}function s(t){try{h(r.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(o,s)}h((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var a,r,i,n,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return n={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function s(n){return function(s){return function(n){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,r&&(i=2&n[0]?r.return:n[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return o.label++,{value:n[1],done:!1};case 5:o.label++,r=n[1],n=[0];continue;case 7:n=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==n[0]&&2!==n[0])){o=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){o.label=n[1];break}if(6===n[0]&&o.label<i[1]){o.label=i[1],i=n;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(n);break}i[2]&&o.ops.pop(),o.trys.pop();continue}n=e.call(t,o)}catch(t){n=[6,t],r=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var h,u=s(a(15)),f=s(a(7)),d=s(a(14)),c=s(a(13)),l=s(a(4)),p=s(a(0)),m=s(a(18)),y=s(a(3)),b=s(a(12)),g=s(a(19)),G=s(a(2)),v=s(a(52));!function(t){t[t.sphere=0]="sphere",t[t.box_AABB=1]="box_AABB",t[t.box_OBB=2]="box_OBB",t[t.point=3]="point"}(h||(h={}));var R=function(){this.data=new Float32Array(1)},_=function(t){function e(e){var a=t.call(this,e)||this;return a.aQuaternion=(new c.default).Identity(),a.bQuaternion=(new c.default).Identity(),a.sQuaternion=(new c.default).Identity(),a.zoomData=new R,a.zoomDirection=1,a.zoomData.data[0]=.5,a}return i(e,t),e.prototype.BefLoad=function(){this.renderer.AddLayer(),this.AddCamera(0,1,"main",!1,this.sceneManager.GetResourceContainer().GetTexture("loadingCamera"));var t=new m.default(this.sceneManager.GetGraphicDevice());t.transform.Position=new p.default(-5,-5,10),this.renderer.SetLight(t,1),this.sceneManager.GetGraphicDevice().EnableStencil(),this.GetCamera("main").transform.Position=new p.default(0,-3,10),this.GetCamera("main").transform.LookAt(new p.default(0,0,0),p.default.yAxis),this.GetCamera("main").clearColor=new l.default(0,0,0,1),this.cube=this.gameObjectManager.AddGameObject("cube"),this.anotherCube=this.gameObjectManager.AddGameObject("cube"),this.projectionPlane=this.gameObjectManager.AddGameObject("projectionCube"),(new G.default).Position=new p.default(1,1,1),(new G.default).Position=new p.default(-1,-1,2),this.cube.SetComponent(new g.default("loading","font","fontShader",new l.default(.75,.75,.25,1),1,!0)),this.projectionPlane.SetComponent(new y.default(!1,"plane","loadingCameraMaterial","texShader",0,!1)),this.projectionPlane.transform.Scale=new p.default(500,500,1),this.cube.transform.Position=new p.default(.5,0,.5),this.anotherCube.transform.Position=new p.default(-1,-5,10),this.projectionPlane.transform.Position=new p.default(0,0,-1)},e.prototype.OnLoadingUpdate=function(){},e.prototype.OnLoad=function(){return n(this,void 0,void 0,(function(){var t;return o(this,(function(e){return this.sceneManager.GetResourceContainer().AddShader(f.default.CreateShader("shader/PointLightVS.glsl","shader/PointLightFS.glsl",this.sceneManager.GetGraphicDevice()),"pointLight"),this.sceneManager.GetResourceContainer().AddShader(f.default.CreateShader("shader/UVNormalVS.glsl","shader/DefaultFS_light.glsl",this.sceneManager.GetGraphicDevice()),"texShader_light"),this.sceneManager.GetResourceContainer().AddShader(f.default.CreateShader("shader/UVNormalColorVS.glsl","shader/BlackTestFS.glsl",this.sceneManager.GetGraphicDevice()),"black"),this.sceneManager.GetResourceContainer().AddShader(f.default.CreateShader("shader/VertexPositionVS.glsl","shader/AmbientFS.glsl",this.sceneManager.GetGraphicDevice()),"ambient"),this.sceneManager.GetResourceContainer().AddShader(f.default.CreateShader("shader/VertexPositionVS.glsl","shader/SimpleColorFS.glsl",this.sceneManager.GetGraphicDevice()),"simpleColor"),this.sceneManager.GetResourceContainer().AddShader(f.default.CreateShader("shader/UVNormalVS.glsl","shader/OnlyMaterialFS.glsl",this.sceneManager.GetGraphicDevice()),"onlyMaterial"),this.sceneManager.GetResourceContainer().AddShader(f.default.CreateShader("shader/UVNormalVS.glsl","shader/RainbowFS.glsl",this.sceneManager.GetGraphicDevice()),"rainbow"),this.sceneManager.GetResourceContainer().AddShader(f.default.CreateShader("shader/UVNormalVS.glsl","RainbowAlpha",this.sceneManager.GetGraphicDevice(),!1,!0),"rainbowAlpha"),this.sceneManager.GetResourceContainer().AddGeometry(f.default.CreateGeometry(d.default.CreateTorus(32,32,.5,1),!1,!0,!0,this.sceneManager.GetGraphicDevice()),"hsvTorus"),this.sceneManager.GetResourceContainer().AddGeometry(f.default.CreateGeometry(d.default.CreateCube(1,new l.default(1,1,1,1)),!0,!0,!0,this.sceneManager.GetGraphicDevice()),"cube"),this.sceneManager.GetResourceContainer().AddGeometry(f.default.CreateGeometry(d.default.CreateCube(1,new l.default(1,1,1,1)),!1,!1,!1,this.sceneManager.GetGraphicDevice()),"cube_position"),this.sceneManager.GetResourceContainer().AddGeometry(f.default.CreateGeometry(d.default.CreateCubeSandWitch(1,new l.default(1,1,1,1)),!1,!1,!1,this.sceneManager.GetGraphicDevice()),"sandwitchCube_position"),this.sceneManager.GetResourceContainer().AddGeometry(f.default.CreateGeometry(d.default.CreateCube(1,new l.default(1,1,1,1)),!1,!0,!0,this.sceneManager.GetGraphicDevice()),"nonTexcube"),this.sceneManager.GetResourceContainer().AddGeometry(f.default.CreateGeometry(d.default.CreateSphere(12,12,.5,new l.default(0,0,0,1)),!1,!0,!0,this.sceneManager.GetGraphicDevice()),"sphere"),this.sceneManager.GetResourceContainer().AddGeometry(f.default.CreateGeometry(d.default.CreateSphere(4,4,.5,new l.default(0,0,0,1)),!0,!0,!1,this.sceneManager.GetGraphicDevice()),"effectSphere"),this.sceneManager.GetResourceContainer().AddGeometry(f.default.CreateGeometry(d.default.CreatePlane(new b.default(1,1),!1,new l.default(1,1,1,1)),!0,!1,!1,this.sceneManager.GetGraphicDevice()),"plane"),this.sceneManager.GetResourceContainer().AddGeometry(f.default.CreateGeometry(d.default.CreatePlane(new b.default(1,1),!1,new l.default(1,1,1,1)),!1,!1,!1,this.sceneManager.GetGraphicDevice()),"plane_position"),this.sceneManager.GetResourceContainer().AddGeometry(f.default.CreateGeometry(d.default.CreatePlane(new b.default(1,1),!1,new l.default(1,1,1,1)),!0,!0,!1,this.sceneManager.GetGraphicDevice()),"uvNormalPlane"),this.sceneManager.GetResourceContainer().AddGeometry(f.default.CreateGeometry(d.default.CreateBar(new b.default(1,1),!1,new l.default(1,1,1,1)),!0,!0,!1,this.sceneManager.GetGraphicDevice()),"uvNormalBar"),this.sceneManager.GetResourceContainer().AddGeometry(f.default.CreateGeometry(d.default.CreatePlane(new b.default(1,1),!1,new l.default(1,1,1,1)),!1,!0,!0,this.sceneManager.GetGraphicDevice()),"floor"),this.sceneManager.GetResourceContainer().AddMesh(f.default.CreateMeshResourceFromFile("model/Maguro/maguro.b3m",this.sceneManager.GetResourceContainer(),this.sceneManager.GetGraphicDevice()),"maguro"),this.sceneManager.GetResourceContainer().AddMesh(f.default.CreateMeshResourceFromFile("model/FBX/crab.b3m",this.sceneManager.GetResourceContainer(),this.sceneManager.GetGraphicDevice()),"crab"),this.sceneManager.GetResourceContainer().AddMesh(f.default.CreateMeshResourceFromFile("model/FBX/sango.b3m",this.sceneManager.GetResourceContainer(),this.sceneManager.GetGraphicDevice()),"sango"),this.sceneManager.GetResourceContainer().AddMesh(f.default.CreateMeshResourceFromFile("model/FBX/turtle.b3m",this.sceneManager.GetResourceContainer(),this.sceneManager.GetGraphicDevice()),"turtle"),this.sceneManager.GetResourceContainer().AddMesh(f.default.CreateMeshResourceFromFile("model/FBX/utubo.b3m",this.sceneManager.GetResourceContainer(),this.sceneManager.GetGraphicDevice()),"utubo"),this.sceneManager.GetResourceContainer().AddMesh(f.default.CreateMeshResourceFromFile("model/FBX/fishes.b3m",this.sceneManager.GetResourceContainer(),this.sceneManager.GetGraphicDevice()),"fishes"),this.sceneManager.GetResourceContainer().AddMesh(f.default.CreateMeshResourceFromFile("model/FBX/clownfish.b3m",this.sceneManager.GetResourceContainer(),this.sceneManager.GetGraphicDevice()),"clownfish"),this.sceneManager.GetResourceContainer().AddMesh(f.default.CreateMeshResourceFromFile("model/FBX/seaweed.b3m",this.sceneManager.GetResourceContainer(),this.sceneManager.GetGraphicDevice()),"seaweed"),this.sceneManager.GetResourceContainer().AddMesh(f.default.CreateMeshResourceFromFile("model/FBX/scallops.b3m",this.sceneManager.GetResourceContainer(),this.sceneManager.GetGraphicDevice()),"scallops"),this.sceneManager.GetResourceContainer().AddMesh(f.default.CreateMeshResourceFromFile("model/FBX/coin.b3m",this.sceneManager.GetResourceContainer(),this.sceneManager.GetGraphicDevice()),"coin"),this.sceneManager.GetResourceContainer().AddMesh(f.default.CreateMeshResourceFromFile("model/FBX/rock.b3m",this.sceneManager.GetResourceContainer(),this.sceneManager.GetGraphicDevice()),"rock"),this.sceneManager.GetResourceContainer().AddMesh(f.default.CreateMeshResourceFromFile("model/FBX/sango_another.b3m",this.sceneManager.GetResourceContainer(),this.sceneManager.GetGraphicDevice()),"sango_another"),this.sceneManager.GetResourceContainer().AddSoundFromFile("audio/kill2.wav","kill"),this.sceneManager.GetResourceContainer().AddSoundFromFile("audio/up_se.wav","up"),this.sceneManager.GetResourceContainer().AddSoundFromFile("audio/muteki7.wav","muteki"),this.sceneManager.GetResourceContainer().GetSound("kill").SetVolume(.5),this.sceneManager.GetResourceContainer().GetSound("muteki").SetVolume(1),t=f.default.CreateTexture("image/calory.png",this.sceneManager.GetGraphicDevice()),this.sceneManager.GetResourceContainer().AddTexture(t,"calory"),this.sceneManager.GetResourceContainer().AddTextureFromFile("image/magurossy.png",this.sceneManager.GetGraphicDevice()),this.sceneManager.GetResourceContainer().AddTextureFromFile("image/circle32.png",this.sceneManager.GetGraphicDevice()),this.sceneManager.GetResourceContainer().AddMaterial(f.default.CreateMaterial(new l.default(.1,.1,.1,1),this.sceneManager.GetGraphicDevice(),[this.sceneManager.GetResourceContainer().GetTexture("calory")]),"caloryMaterial"),this.sceneManager.GetResourceContainer().AddMaterial(f.default.CreateMaterial(new l.default(.1,.1,.1,1),this.sceneManager.GetGraphicDevice(),[this.sceneManager.GetResourceContainer().GetTexture("image/magurossy.png")]),"logoMaterial").AddExParam(4,3,new p.default(5,5,10)),this.sceneManager.GetResourceContainer().AddMaterial(f.default.CreateMaterial(new l.default(.1,.1,.1,1),this.sceneManager.GetGraphicDevice(),[this.sceneManager.GetResourceContainer().GetTexture("image/circle32.png")]),"circleMaterial").AddExParam(4,3,new p.default(5,5,10)),this.sceneManager.GetResourceContainer().AddMaterial(f.default.CreateMaterial(new l.default(1,.5,.5,1),this.sceneManager.GetGraphicDevice()),"red"),this.sceneManager.GetResourceContainer().AddMaterial(f.default.CreateMaterial(new l.default(.5,.5,.5,1),this.sceneManager.GetGraphicDevice()),"gray"),this.sceneManager.GetResourceContainer().AddMaterial(f.default.CreateMaterial(new l.default(.8,.8,.8,1),this.sceneManager.GetGraphicDevice()),"white"),this.sceneManager.GetResourceContainer().AddMaterial(f.default.CreateMaterial(new l.default(.9,.8,.3,1),this.sceneManager.GetGraphicDevice()),"yellow"),this.sceneManager.GetResourceContainer().AddMaterial(f.default.CreateMaterial(new l.default(.5,.5,1,1),this.sceneManager.GetGraphicDevice()),"blue"),this.sceneManager.GetResourceContainer().AddMaterial(f.default.CreateMaterial(new l.default(.4,.6,.9,1),this.sceneManager.GetGraphicDevice()),"road"),this.sceneManager.GetResourceContainer().AddMaterial(f.default.CreateMaterial(new l.default(.36,.54,.81,1),this.sceneManager.GetGraphicDevice()),"road_d"),this.sceneManager.GetResourceContainer().AddMaterial(f.default.CreateMaterial(new l.default(.32,.48,.72,1),this.sceneManager.GetGraphicDevice()),"road_d_d"),this.sceneManager.GetResourceContainer().AddMaterial(f.default.CreateMaterial(new l.default(.8,.8,.7,1),this.sceneManager.GetGraphicDevice()),"safe"),this.sceneManager.GetResourceContainer().AddMaterial(f.default.CreateMaterial(new l.default(.72,.72,.63,1),this.sceneManager.GetGraphicDevice()),"safe_d"),this.sceneManager.GetResourceContainer().AddMaterial(f.default.CreateMaterial(new l.default(.64,.64,.56,1),this.sceneManager.GetGraphicDevice()),"safe_d_d"),this.sceneManager.GetResourceContainer().AddMaterial(f.default.CreateMaterial(new l.default(.6,.5,.6,1),this.sceneManager.GetGraphicDevice()),"rail"),this.sceneManager.GetResourceContainer().AddMaterial(f.default.CreateMaterial(new l.default(.54,.45,.54,1),this.sceneManager.GetGraphicDevice()),"rail_d"),this.sceneManager.GetResourceContainer().AddMaterial(f.default.CreateMaterial(new l.default(.48,.4,.48,1),this.sceneManager.GetGraphicDevice()),"rail_d_d"),this.sceneManager.GetResourceContainer().AddMaterial(f.default.CreateMaterial(new l.default(.5,1,.5,1),this.sceneManager.GetGraphicDevice()),"green"),this.sceneManager.GetResourceContainer().AddMaterial(f.default.CreateMaterial(new l.default(.1,.1,.1,1),this.sceneManager.GetGraphicDevice()),"zoomEffect"),this.sceneManager.AddScene(new v.default(this.sceneManager),"sample"),[2]}))}))},e.prototype.OnInitialize=function(){this.isCurrent&&this.sceneManager.ChangeScene("sample")},e.prototype.OnStart=function(){this.sceneManager.ChangeScene("sample")},e}(u.default);e.default=_},function(t,e,a){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),n=this&&this.__awaiter||function(t,e,a,r){return new(a||(a=Promise))((function(i,n){function o(t){try{h(r.next(t))}catch(t){n(t)}}function s(t){try{h(r.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(o,s)}h((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var a,r,i,n,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return n={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function s(n){return function(s){return function(n){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,r&&(i=2&n[0]?r.return:n[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return o.label++,{value:n[1],done:!1};case 5:o.label++,r=n[1],n=[0];continue;case 7:n=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==n[0]&&2!==n[0])){o=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){o.label=n[1];break}if(6===n[0]&&o.label<i[1]){o.label=i[1],i=n;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(n);break}i[2]&&o.ops.pop(),o.trys.pop();continue}n=e.call(t,o)}catch(t){n=[6,t],r=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,s])}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var h,u=s(a(15)),f=s(a(7)),d=s(a(13)),c=s(a(4)),l=s(a(0)),p=s(a(18)),m=s(a(3)),y=s(a(2)),b=s(a(8)),g=s(a(9)),G=s(a(6)),v=s(a(53));!function(t){t[t.sphere=0]="sphere",t[t.box_AABB=1]="box_AABB",t[t.box_OBB=2]="box_OBB",t[t.point=3]="point"}(h||(h={}));var R=function(){this.data=new Float32Array(1)},_=function(t){function e(e){var a=t.call(this,e)||this;return a.aQuaternion=(new d.default).Identity(),a.bQuaternion=(new d.default).Identity(),a.sQuaternion=(new d.default).Identity(),a.zoomData=new R,a.zoomData.data[0]=.5,a}return i(e,t),e.prototype.LoadingUpdate=function(){},e.prototype.OnLoad=function(){return n(this,void 0,void 0,(function(){return o(this,(function(t){return this.sceneManager.GetResourceContainer().AddTexture(f.default.CreateFrameBuffer(1024,1024,this.sceneManager.GetGraphicDevice()),"playCamera"),this.sceneManager.GetResourceContainer().AddMaterial(f.default.CreateMaterial(new c.default(.1,.1,.1,1),this.sceneManager.GetGraphicDevice(),[this.sceneManager.GetResourceContainer().GetTexture("playCamera")]),"playCameraMaterial"),[2]}))}))},e.prototype.OnInitialize=function(){this.renderer.AddLayer(),this.renderer.AddLayer(),this.UseCollisionManager(),this.AddCamera(0,1,"main",!1,this.sceneManager.GetResourceContainer().GetTexture("playCamera")),this.AddCamera(1,2,"UI",!0,this.sceneManager.GetResourceContainer().GetTexture("playCamera"));var t=new p.default(this.sceneManager.GetGraphicDevice());t.transform.Position=new l.default(-5,-5,10),this.renderer.SetLight(t,1),this.sceneManager.GetGraphicDevice().EnableStencil(),this.GetCamera("main").transform.Position=new l.default(1.5,-9,8),this.GetCamera("main").transform.LookAt(new l.default(0,0,-1),l.default.yAxis),this.GetCamera("main").clearColor=new c.default(.3,.3,.3,1),this.GetCamera("UI").isClear=!1,this.projectionPlane=this.gameObjectManager.AddGameObject("projectionCube");var e=new m.default(!1,"plane","playCameraMaterial","texShader",0,!1);this.projectionPlane.SetComponent(e),this.projectionPlane.transform.Scale=new l.default(0,0,0),this.projectionPlane.transform.Position=new l.default(0,0,0),this.stage=new v.default(this,e),this.gameObjectManager.AddGameObject("stage",new y.default(new l.default(0,0,0),new l.default(0,0,0)),"stage",[this.stage])},e.prototype.OnStart=function(){if(b.default.AddKeyDownEvent(this,"sampleSceneEvent",!0),this.IsLoaded()){var t=new y.default(new l.default(0,0,-1),new l.default(0,0,0),new l.default(600,600,1));this.projectionPlane.SetComponent(new g.default(90,!1,t,this.projectionPlane.transform,G.default.EaseInOutCirc)),this.stage.ToStart()}},e.prototype.OnEnd=function(){b.default.RemoveKeyDownEvent("sampleSceneEvent"),this.stage.Reset()},e.prototype.OnUpdate=function(){},e.prototype.OnKeyDown=function(t){},e}(u.default);e.default=_},function(t,e,a){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(a(54)),h=n(a(10)),u=n(a(1)),f=n(a(0)),d=n(a(5)),c=n(a(8)),l=n(a(11)),p=n(a(2)),m=n(a(61)),y=n(a(62)),b=n(a(65)),g=n(a(67)),G=n(a(70));!function(t){t[t.sphere=0]="sphere",t[t.box_AABB=1]="box_AABB",t[t.box_OBB=2]="box_OBB",t[t.point=3]="point"}(o||(o={}));var v=[[1,1,2,2,2,3],[1,1,1,2,2,2],[1,1,2,3,3,4]],R=[0,0,1,1,1,2,2,2],_=["crab","turtle","turtle","utubo"],w=[new f.default(1,1,1),new f.default(1,1,1),new f.default(1,1,1),new f.default(5,1,1)],x=[new f.default(0,90,0),new f.default(0,0,0),new f.default(0,0,0),new f.default(0,180,0)],M=function(t){function e(e,a){var r=t.call(this)||this;return r.coin=0,r.arrival=0,r.fadeCount=-1,r.startCount=-1,r.stageStock=2,r.feverGage=0,r.gageMinLine=0,r.gageDownPase=.4,r.gageUpPase=10,r.rank=null,r.firstScore=null,r.playScene=e,r.startPos=new f.default(0,-.5,1),r.projectionComponent=a,r.coinse=r.playScene.GetSceneManager().GetResourceContainer().GetSound("title"),r.ary_stagePrts=new Array,r.stageArray=new Int16Array(512),r.StageArrayCreate(),r}return i(e,t),e.prototype.StageArrayCreate=function(){for(var t=0;t<512;)for(var e=R[l.default.GetRandomInt(0,R.length-1)],a=v[e][l.default.GetRandomInt(1,5)],r=0;r<a;r++,t++)this.stageArray[t]=e},e.prototype.OnSet=function(){this.playerComponent=new y.default(15,this),this.player=this.playScene.GetGameManager().AddGameObject("player",new p.default(this.startPos.Clone(),new f.default(0,0,0),new f.default(1,1,1)),"player",[this.playerComponent]),this.player.SetComponent(new h.default(o.box_AABB,new f.default(1,1,1),0)),this.player.transform.BaseTransform=this.gameObject.transform,this.ui=new m.default,this.playScene.GetGameManager().AddGameObject("ui",new p.default,"ui",[this.ui]);var t=this.playScene.GetGameManager().AddGameObject("cameraman",this.playScene.GetCamera("main").transform);t.SetComponent(new s.default(.02,this.player.transform)),t.transform.BaseTransform=this.gameObject.transform,this.Create(),this.ui.HideIn()},e.prototype.OnRemove=function(){this.playScene=null},e.prototype.GetCoin=function(){this.coinse.Play_new(),this.coin++,this.playerComponent.IsFever||(this.gageMinLine+=this.gageUpPase),this.GageUp()},e.prototype.GageUp=function(){this.feverGage<100&&!this.playerComponent.IsFever&&(this.feverGage+=this.gageUpPase),this.gageDownPase=.2,this.feverGage>=100&&(this.ui.FeverStart(),this.gageMinLine=0,this.playerComponent.FeverStart())},e.prototype.GoFront=function(t){1==(t=Math.floor(-t)+2)&&this.ui.HideOut(),this.arrival<t&&(this.arrival=t,this.GageUp(),this.gameObject.transform.TranslateZ(1),this.ui.SetArrival(this.arrival),this.arrival>this.stageStock&&(this.StageAdd(this.arrival+8),this.StageDestroy()))},e.prototype.Create=function(){this.CreateSafeZone(3);for(var t=0;t<11;t++)this.StageAdd(t)},e.prototype.Destroy=function(){this.gameObject.Manager.GetGameObjects(d.default.GetID("coin")).forEach((function(t){return t.Dead()})),this.ary_stagePrts.forEach((function(t){return t.Destroy()})),this.ary_stagePrts.length=0},e.prototype.StageAdd=function(t){var e=new p.default(new f.default(0,0,-t));e.BaseTransform=this.gameObject.transform;var a="";switch(t%2!=0&&(a="_d"),this.stageArray[t%512]){case 0:var r=new g.default(this,"safe"+a,l.default.GetRandomInt(1,2));this.ary_stagePrts.push(r),this.playScene.GetGameManager().AddGameObject("safeArea",e,"safeArea",[r]);break;case 1:var i=l.default.GetRandomInt(0,3),n=new b.default(this,"road"+a,_[i],w[i].Clone(),x[i],l.default.GetRandomInt(1,2));this.ary_stagePrts.push(n),this.playScene.GetGameManager().AddGameObject("road",e,"road",[n]);break;case 2:var o=new G.default(this,"rail"+a,"fishes",new f.default(1,1,1));this.ary_stagePrts.push(o),this.playScene.GetGameManager().AddGameObject("rail",e,"rail",[o])}},e.prototype.CreateSafeZone=function(t){for(var e=0;e<t;e++){var a=new p.default(new f.default(0,0,t-e));a.BaseTransform=this.gameObject.transform;var r="";(e+1)%2!=0&&(r="_d");var i=l.default.GetRandomInt(0,2),n=new g.default(this,"safe"+r,i,!0);this.ary_stagePrts.push(n),this.playScene.GetGameManager().AddGameObject("safeArea",a,"safeArea",[n])}},e.prototype.StageDestroy=function(){this.ary_stagePrts[0].Destroy(),this.ary_stagePrts.splice(0,1)},e.prototype.Update=function(){this.ui.SetComboMater(this.feverGage/100),this.feverGage-=this.gageDownPase,this.feverGage<this.gageMinLine&&(this.feverGage=this.gageMinLine,this.gageDownPase=0,this.playerComponent.FeverEnd(),this.ui.FeverEnd()),0==this.fadeCount&&null!=this.rank?(this.ShowRanking(),this.Reset()):this.fadeCount>0&&this.fadeCount--,0==this.startCount?(this.playerComponent.SetCanControll(!0),this.startCount=-1):this.startCount>0&&this.startCount--},e.prototype.SendArrival=function(){var t=new XMLHttpRequest;t.open("POST","/score",!0),t.setRequestHeader("content-type","application/json"),t.onreadystatechange=function(t,e){return function(){var a=t.responseText.split(",");e.rank=parseInt(a[0]),e.firstScore=parseInt(a[1])}}(t,this),t.send('{"score":'+this.arrival+"}")},e.prototype.Failed=function(){this.isFailed||(this.ui.ShowRetry(),c.default.AddKeyDownEvent(this,"stage_retry",!0),this.playerComponent.SetCanControll(!1),this.isFailed=!0,this.SendArrival())},e.prototype.ToStart=function(){this.playerComponent.ToStart()},e.prototype.ShowRanking=function(){this.ui.ShowRanking(this.arrival,this.rank,this.firstScore),this.rank=null},e.prototype.ReRegistScreen=function(){this.projectionComponent.UnRegistDraw(),this.projectionComponent.RegistDraw()},e.prototype.Reset=function(){this.StageArrayCreate(),this.gameObject.transform.SetPositionZ(0),this.coin=0,this.arrival=0,this.Destroy(),this.Create(),this.ui.SetArrival(this.arrival),this.feverGage=0,this.gageDownPase=.2,this.gageUpPase=10,this.gageMinLine=0,this.fadeCount=-1,this.isFailed=!1},e.prototype.OnKeyDown=function(t){if(!this.isFailed)return this.fadeCount=-1,this.playerComponent.Reset(),this.player.transform.Position=new f.default(0,-.5,1),this.playScene.GetCamera("main").transform.Position=new f.default(1.5,-9,8),this.player.Update(),this.ui.MaskOut(),this.rank=null,this.ui.HideRanking(),c.default.RemoveKeyDownEvent("stage_retry"),void(this.startCount=30);this.fadeCount>0||(this.ui.HideRetry(),this.ui.Reset(),this.ui.HideIn(),this.ui.MaskIn(),this.ReRegistScreen(),this.fadeCount=60)},e}(u.default);e.default=M},function(t,e,a){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(a(0)),s=n(a(1)),h=function(t){function e(e,a){var r=t.call(this)||this;return r.speed=e,r.targetTransform=a,r.velocity=new o.default(0,0,0),r}return i(e,t),e.prototype.OnSet=function(){this.offsetX=this.gameObject.transform.Position.x-this.targetTransform.Position.x,this.offsetZ=this.gameObject.transform.Position.y-this.targetTransform.Position.y},e.prototype.Update=function(){var t=this.gameObject.transform.Position.x-this.targetTransform.Position.x+this.offsetX;t*this.speed>1?this.velocity.x=t/2:this.velocity.x=t>3?-1*(t-3)*(t-3)*this.speed:t<2?(t-2)*(t-2)*this.speed:0;var e=this.gameObject.transform.Position.z-this.targetTransform.Position.z+this.offsetZ;this.velocity.z=e>-2.25?-1*(e- -2.25)*(e- -2.25)*this.speed:e<-2.5?(e- -2.5)*(e- -2.5)*this.speed*2:0,this.gameObject.transform.SetPosition.Add_b(this.velocity)},e}(s.default);e.default=h},function(t,e,a){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(a(56)),n=r(a(57)),o=r(a(58)),s=r(a(59)),h=r(a(0)),u=r(a(60)),f=function(){function t(){}return t.CreatePoint=function(t){return new u.default(t,new d(t.transform))},t.CreateSphere=function(t,e){return new u.default(e,new c(t,e.transform))},t.CreateCube_AABB=function(t,e){return new u.default(e,new l(t,e.transform))},t.CreateCube_OBB=function(t,e){return new u.default(e,new p(t,e.transform))},t}();e.default=f;var d=function(){function t(t){this.transform=t,this.position=this.transform.Position}return t.prototype.Initialize=function(){},t.prototype.PreInitialize=function(){},t.prototype.Update=function(){this.position=this.transform.Position},t.prototype.GetPosition=function(){return this.transform.Position},t.prototype.IsHit=function(t){return t.IsHitPoint(this)},t.prototype.GetMaxPointAndMinPoint=function(t,e){var a=this.transform.Position;t.data=a.data,e.data=a.data},t.prototype.IsHitPoint=function(t){return t.GetPosition()==this.GetPosition()},t.prototype.IsHitSphere=function(t){return o.default.IsHitPointSphere(this.position,t.geometry)},t.prototype.IsHitBox_AABB=function(t){return o.default.IsHitPointBox_AABB(this.position,t.geometry)},t.prototype.IsHitBox_OBB=function(t){return o.default.IsHitPointBox_OBB(this.position,t.geometry)},t}(),c=function(){function t(t,e){this.transform=e,this.geometry=new s.default(t,this.transform.Position,this.transform.Scale.x)}return t.prototype.Initialize=function(){},t.prototype.PreInitialize=function(){},t.prototype.GetMaxPointAndMinPoint=function(t,e){t.data=this.geometry.position.Add(new h.default(this.geometry.radius,this.geometry.radius,this.geometry.radius)).data,e.data=this.geometry.position.Sub(new h.default(this.geometry.radius,this.geometry.radius,this.geometry.radius)).data},t.prototype.Update=function(){this.geometry.position=this.transform.Position,this.geometry.radius=this.transform.Scale.x*this.geometry.initRadius},t.prototype.IsHit=function(t){return t.IsHitSphere(this)},t.prototype.IsHitBox_OBB=function(t){return o.default.IsHitSphereBox_OBB(this.geometry,t.geometry)},t.prototype.IsHitPoint=function(t){return o.default.IsHitPointSphere(t.position,this.geometry)},t.prototype.IsHitSphere=function(t){return o.default.IsHitSphereSphere(this.geometry,t.geometry)},t.prototype.IsHitBox_AABB=function(t){return o.default.IsHitSphereBox_AABB(this.geometry,t.geometry)},t}(),l=function(){function t(t,e){this.geometry=new i.default(t,e.Position),this.transform=e,this.geometry.initLengthes=t.Div(2)}return t.prototype.Initialize=function(){},t.prototype.PreInitialize=function(){},t.prototype.GetMaxPointAndMinPoint=function(t,e){t.data=this.geometry.position.Add(this.geometry.halfLengthes).data,e.data=this.geometry.position.Sub(this.geometry.halfLengthes).data},t.prototype.Update=function(){this.geometry.position=this.transform.Position,this.geometry.halfLengthes=this.geometry.initLengthes.Multiply_Vec3(this.transform.Scale)},t.prototype.IsHit=function(t){return t.IsHitBox_AABB(this)},t.prototype.IsHitBox_OBB=function(t){return o.default.IsHitBox_OBBBox_AABB(this.geometry,t.geometry)},t.prototype.IsHitPoint=function(t){return o.default.IsHitPointBox_AABB(t.position,this.geometry)},t.prototype.IsHitSphere=function(t){return o.default.IsHitSphereBox_AABB(t.geometry,this.geometry)},t.prototype.IsHitBox_AABB=function(t){return o.default.IsHitBox_AABB(this.geometry,t.geometry)},t}(),p=function(){function t(t,e){this.geometry=new n.default(t),this.transform=e,this.geometry.initLengthes=t.Div(2)}return t.prototype.Initialize=function(){},t.prototype.PreInitialize=function(){},t.prototype.GetMaxPointAndMinPoint=function(t,e){var a=o.default.GetBox_OBBContainAABBLength(this.geometry);t.data=this.geometry.position.Add(a).data,e.data=this.geometry.position.Sub(a).data},t.prototype.Update=function(){this.geometry.position=this.transform.Position,this.geometry.directs[0]=this.transform.GetRight(),this.geometry.directs[1]=this.transform.GetUp(),this.geometry.directs[2]=this.transform.GetFront(),this.geometry.halfLengthes=this.geometry.initLengthes.Multiply_Vec3(this.transform.Scale)},t.prototype.IsHit=function(t){return t.IsHitBox_OBB(this)},t.prototype.IsHitBox_OBB=function(t){return o.default.IsHitBox_OBB(t.geometry,this.geometry)},t.prototype.IsHitPoint=function(t){return o.default.IsHitPointBox_OBB(t.position,this.geometry)},t.prototype.IsHitSphere=function(t){return o.default.IsHitSphereBox_OBB(t.geometry,this.geometry)},t.prototype.IsHitBox_AABB=function(t){return o.default.IsHitBox_OBBBox_AABB(t.geometry,this.geometry)},t}()},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){this.halfLengthes=t.Multiply_b(.5),e&&(this.position=e)}return t.prototype.Length=function(t){return this.halfLengthes.data[t]},t.prototype.GetMin=function(t){return this.position.data[t]-this.halfLengthes.data[t]},t.prototype.GetMax=function(t){return this.position.data[t]+this.halfLengthes.data[t]},t}();e.default=r},function(t,e,a){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(a(0)),n=function(){function t(t){this.halfLengthes=t.Multiply(.5),this.directs=new Array(3),this.position=new i.default(0,0,0),this.directs[0]=i.default.xAxis.Clone(),this.directs[1]=i.default.yAxis.Clone(),this.directs[2]=i.default.zAxis.Clone()}return t.prototype.GetDirect=function(t){return this.directs[t]},t.prototype.Length=function(t){return this.halfLengthes.data[t]},t.prototype.GetPos=function(){return this.position},t}();e.default=n},function(t,e,a){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(a(0));function n(t){return t<0?-1*t:t}var o=function(){function t(){}return t.GetDistance=function(t,e,a){return n(a.Dot(t.Sub(e)))/a.Length()},t.GetDistanceLineLine=function(t,e){return t.velocity.Cross(e.velocity).Normalize().Dot(e.point.Sub(t.point))},t.IsHitPointLine=function(t,e){return!!t.Sub(e.point).Cross(e.velocity).Length()},t.IsHitPointSegment=function(t,e){var a=t.Sub(e.point);return!!(a.Cross(e.velocity).Length()&&a.LengthSqr()<=e.velocity.LengthSqr())},t.GetDistancePointSegment=function(t,e){var a=e.GetEndPoint().Sub(e.point),r=t.Sub(e.point),i=a.Normalize().Dot(r)/a.Length();return i>1?e.GetEndPoint().Sub(t):i<0?e.point.Sub(t):a.Multiply_b(i).Sub_b(r)},t.GetPolygonY=function(t,e,a,r,i){var n=t.Sub(e).Cross(t.Sub(a));return n.y<0&&n.Multiply(-1),t.y-(n.x*(r-t.x)+n.z*(i-t.z))/n.y},t.IsHitLineLine=function(t,e){var a=e.point.Sub(t.point),r=t.velocity.Cross(e.velocity),i=t.velocity.Cross(a);return!i.LengthSqr()||0!=r.LengthSqr()&&0==r.Cross(i).LengthSqr()},t.IsHitLineSurface=function(t,e,a){return 0==t.point.Sub(e).Dot(a)||!!t.velocity.Dot(a)},t.IsHitSegmentSurface=function(t,e,a){var r=t.point.Sub(e),i=t.GetEndPoint().Sub(e);return a.Dot(r)*a.Dot(i)<=0},t.GetDitancePointBox_AABBSqrt=function(t,e){for(var a=0,r=0;r<3;r++)t.data[r]<e.GetMin(r)&&(a+=(t.data[r]-e.GetMin(r))*(t.data[r]-e.GetMin(r))),t.data[r]>e.GetMax(r)&&(a+=(t.data[r]-e.GetMax(r))*(t.data[r]-e.GetMax(r)));return a},t.GetDitancePointBox_AABB=function(e,a){return t.GetDitancePointBox_AABBSqrt(e,a)},t.GetDitancePointBox_OBB_Static=function(t,e){for(var a=new i.default(0,0,0),r=0;r<3;r++){var o=e.Length(r);if(!(o<=0)){var s=t.Sub(e.GetPos()).Dot(e.GetDirect(r))/o;(s=n(s))>1&&a.Add_b(e.GetDirect(r).Multiply(1-s).Multiply(o))}}return a.Length()},t.IsHitPointBox_OBB=function(e,a){return!t.GetDitancePointBox_OBB_Static(e,a)},t.IsHitSphereBox_OBB=function(e,a){return e.radius>=t.GetDitancePointBox_OBB_Static(e.position,a)},t.IsHitPointBox_AABB=function(e,a){return!t.GetDitancePointBox_AABB(e,a)},t.IsHitSphereBox_AABB=function(e,a){return e.radius>=t.GetDitancePointBox_AABB(e.position,a)},t.LengthSeparatedAxis=function(t,e,a,r){return void 0===r&&(r=null),n(t.Dot(e))+n(t.Dot(a))+(r?n(t.Dot(r)):0)},t.IsHitBox_AABB=function(e,a){var r=i.default.xAxis.Multiply(e.Length(0)),o=i.default.yAxis.Multiply(e.Length(1)),s=i.default.zAxis.Multiply(e.Length(2)),h=i.default.xAxis.Multiply(a.Length(0)),u=i.default.yAxis.Multiply(a.Length(1)),f=i.default.zAxis.Multiply(a.Length(2)),d=e.position.Sub(a.position),c=r.Length(),l=t.LengthSeparatedAxis(i.default.xAxis,h,u,f),p=n(d.Dot(i.default.xAxis));return!(p>c+l)&&(c=o.Length(),l=t.LengthSeparatedAxis(i.default.yAxis,h,u,f),!((p=n(d.Dot(i.default.yAxis)))>c+l)&&(c=s.Length(),l=t.LengthSeparatedAxis(i.default.zAxis,h,u,f),!((p=n(d.Dot(i.default.zAxis)))>c+l)&&(c=t.LengthSeparatedAxis(i.default.xAxis,r,o,s),l=h.Length(),!((p=n(d.Dot(i.default.xAxis)))>c+l)&&(c=t.LengthSeparatedAxis(i.default.yAxis,r,o,s),l=u.Length(),!((p=n(d.Dot(i.default.yAxis)))>c+l)&&(c=t.LengthSeparatedAxis(i.default.zAxis,r,o,s),l=f.Length(),!((p=n(d.Dot(i.default.zAxis)))>c+l))))))},t.IsHitBox_OBBBox_AABB=function(e,a){var r=i.default.xAxis.Multiply(e.Length(0)),o=i.default.yAxis.Multiply(e.Length(1)),s=i.default.zAxis.Multiply(e.Length(2)),h=a.GetDirect(0),u=h.Multiply(a.Length(0)),f=a.GetDirect(1),d=f.Multiply(a.Length(1)),c=a.GetDirect(2),l=c.Multiply(a.Length(2)),p=e.position.Sub(a.GetPos()),m=r.Length(),y=t.LengthSeparatedAxis(i.default.xAxis,u,d,l),b=n(p.Dot(i.default.xAxis));return!(b>m+y)&&(m=o.Length(),y=t.LengthSeparatedAxis(i.default.yAxis,u,d,l),!((b=n(p.Dot(i.default.yAxis)))>m+y)&&(m=s.Length(),y=t.LengthSeparatedAxis(i.default.zAxis,u,d,l),!((b=n(p.Dot(i.default.zAxis)))>m+y)&&(m=t.LengthSeparatedAxis(h,r,o,s),y=u.Length(),!((b=n(p.Dot(h)))>m+y)&&(m=t.LengthSeparatedAxis(f,r,o,s),y=d.Length(),!((b=n(p.Dot(f)))>m+y)&&(m=t.LengthSeparatedAxis(c,r,o,s),y=l.Length(),!((b=n(p.Dot(c)))>m+y))))))},t.GetBox_OBBContainAABBLength=function(e){var a=e.GetDirect(0).Multiply(e.Length(0)),r=e.GetDirect(1).Multiply(e.Length(1)),n=e.GetDirect(2).Multiply(e.Length(2));return new i.default(t.LengthSeparatedAxis(i.default.xAxis,a,r,n),t.LengthSeparatedAxis(i.default.yAxis,a,r,n),t.LengthSeparatedAxis(i.default.zAxis,a,r,n))},t.IsHitBox_OBB=function(e,a){var r=e.GetDirect(0),i=r.Multiply(e.Length(0)),o=e.GetDirect(1),s=o.Multiply(e.Length(1)),h=e.GetDirect(2),u=h.Multiply(e.Length(2)),f=a.GetDirect(0),d=f.Multiply(a.Length(0)),c=a.GetDirect(1),l=c.Multiply(a.Length(1)),p=a.GetDirect(2),m=p.Multiply(a.Length(2)),y=e.GetPos().Sub(a.GetPos()),b=i.Length(),g=t.LengthSeparatedAxis(r,d,l,m),G=n(y.Dot(r));if(G>b+g)return!1;if(b=s.Length(),g=t.LengthSeparatedAxis(o,d,l,m),(G=n(y.Dot(o)))>b+g)return!1;if(b=u.Length(),g=t.LengthSeparatedAxis(h,d,l,m),(G=n(y.Dot(h)))>b+g)return!1;if(b=t.LengthSeparatedAxis(f,i,s,u),g=d.Length(),(G=n(y.Dot(f)))>b+g)return!1;if(b=t.LengthSeparatedAxis(c,i,s,u),g=l.Length(),(G=n(y.Dot(c)))>b+g)return!1;if(b=t.LengthSeparatedAxis(p,i,s,u),g=m.Length(),(G=n(y.Dot(p)))>b+g)return!1;var v=r.Cross(f);return b=t.LengthSeparatedAxis(v,s,u),g=t.LengthSeparatedAxis(v,l,m),!((G=n(y.Dot(v)))>b+g)&&(v=r.Cross(c),b=t.LengthSeparatedAxis(v,s,u),g=t.LengthSeparatedAxis(v,d,m),!((G=n(y.Dot(v)))>b+g)&&(v=r.Cross(p),b=t.LengthSeparatedAxis(v,s,u),g=t.LengthSeparatedAxis(v,d,l),!((G=n(y.Dot(v)))>b+g)&&(v=o.Cross(f),b=t.LengthSeparatedAxis(v,i,u),g=t.LengthSeparatedAxis(v,l,m),!((G=n(y.Dot(v)))>b+g)&&(v=o.Cross(c),b=t.LengthSeparatedAxis(v,i,u),g=t.LengthSeparatedAxis(v,d,m),!((G=n(y.Dot(v)))>b+g)&&(v=o.Cross(p),b=t.LengthSeparatedAxis(v,i,u),g=t.LengthSeparatedAxis(v,d,l),!((G=n(y.Dot(v)))>b+g)&&(v=h.Cross(f),b=t.LengthSeparatedAxis(v,i,s),g=t.LengthSeparatedAxis(v,l,m),!((G=n(y.Dot(v)))>b+g)&&(v=h.Cross(c),b=t.LengthSeparatedAxis(v,i,s),g=t.LengthSeparatedAxis(v,d,m),!((G=n(y.Dot(v)))>b+g)&&(v=h.Cross(p),b=t.LengthSeparatedAxis(v,i,s),g=t.LengthSeparatedAxis(v,d,l),!((G=n(y.Dot(v)))>b+g)))))))))},t.IsHitSphereSphere=function(t,e){return t.position.Sub(e.position).Length()<=t.radius+e.radius},t.IsHitPointSphere=function(t,e){return t.Sub(e.position).Length()<=e.radius},t}();e.default=o},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e,a){this.radius=t,this.initRadius=t,this.position=e,this.radius=t*a};e.default=r},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){this.p_cell=null,this.object=t,this.collisionPrimitive=e}return t.prototype.Remove=function(){return null!=this.p_cell&&(this.shp_next&&(this.shp_next.shp_bef=this.shp_bef),this.shp_bef&&(this.shp_bef.shp_next=this.shp_next),this.p_cell.OnRemove(this),this.shp_next=null,this.shp_bef=null,this.p_cell=null,!0)},t.prototype.RegistCell=function(t){this.p_cell=t},t.prototype.GetBefObj=function(){return this.shp_bef},t.prototype.GetNextObj=function(){return this.shp_next},t.prototype.Update=function(){this.collisionPrimitive.Update()},t.prototype.HitCheck=function(t){t.collisionPrimitive.IsHit(this.collisionPrimitive)&&(this.object.Hit(t.object),t.object.Hit(this.object))},t}();e.default=r},function(t,e,a){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(a(1)),s=n(a(3)),h=n(a(19)),u=n(a(9)),f=n(a(0)),d=n(a(4)),c=n(a(6)),l=n(a(2)),p=function(t){function e(){var e=t.call(this)||this;return e.maskDir=-1,e.maskPer=0,e.isMask=!1,e}return i(e,t),e.prototype.OnSet=function(){var t=new l.default(new f.default(0,0,-1),new f.default(0,0,0),new f.default(1,1,1)),e=new l.default(new f.default(0,250,0),new f.default(0,0,0),new f.default(50,10,1));e.BaseTransform=t,this.feverBarDrawComponent=new s.default(!1,"uvNormalPlane","yellow","rainbow",2,!1,null,e),this.comboBarDrawComponent=new s.default(!1,"uvNormalPlane","yellow","onlyMaterial",2,!1,null,e),this.gameObject.SetComponent(this.comboBarDrawComponent),this.gameObject.SetComponent(this.feverBarDrawComponent),this.activeBarDrawComponent=this.comboBarDrawComponent;var a=new l.default(new f.default(-400,-200,-1),new f.default(0,0,0),new f.default(50,50,50));this.arrivalText=new h.default("0","font","fontShader",new d.default(.9,.9,.25,1),2,!1,a),this.gameObject.SetComponent(this.arrivalText),this.retryTransform=new l.default(new f.default(-1e3,300,-1),new f.default(0,0,0),new f.default(40,40,40)),this.retry=new h.default("Press any Key","font","fontShader",new d.default(.9,.9,1,1),2,!1,this.retryTransform),this.retryTransform_Hide=new l.default(new f.default(1e3,200,-1),new f.default(0,0,0),new f.default(40,40,40)),this.retryTransform_Show=new l.default(new f.default(0,200,-1),new f.default(0,0,0),new f.default(40,40,40)),this.maskColor=new d.default(.5,.5,1,0),this.mask=new s.default(!1,"plane_position","red","simpleColor",2,!1,null,new l.default(new f.default(0,0,-.8),new f.default(0,0,0),new f.default(600,600,600))),this.gameObject.Manager.AddGameObject("mask",new l.default,"mask",[this.mask]),this.mask.UnRegistDraw(),this.mask.model.AddExParam(4,4,this.maskColor),this.gameObject.SetComponent(this.retry),this.retry.UnRegistDraw(),this.logo=new s.default(!1,"plane","logoMaterial","texShader",2,!1,null,new l.default(new f.default(-1110,-150,-.5),new f.default(0,0,180),new f.default(300,300,300))),this.gameObject.SetComponent(this.logo),this.rankingBaseTransform=new l.default;var r=new l.default(new f.default(0,0,-.5),new f.default(0,0,0),new f.default(40,40,50));r.BaseTransform=this.rankingBaseTransform;var i=new l.default(new f.default(0,100,-.5),new f.default(0,0,0),new f.default(40,40,50));i.BaseTransform=this.rankingBaseTransform;var n=new l.default(new f.default(0,200,-.5),new f.default(0,0,0),new f.default(40,40,50));n.BaseTransform=this.rankingBaseTransform;var o=new l.default(new f.default(0,0,-.5),new f.default(0,0,0),new f.default(40,40,50));o.BaseTransform=this.rankingBaseTransform;var u=new l.default(new f.default(0,200,-.5),new f.default(0,0,0),new f.default(40,40,50));u.BaseTransform=this.rankingBaseTransform,this.firstScore=new h.default("1st Score:","font","fontShader",new d.default(.9,.9,.25,1),2,!1,n),this.first=new h.default(" You are No.1!!","font","fontShader",new d.default(.9,.9,.25,1),2,!1,o),this.yourScore=new h.default("Score:","font","fontShader",new d.default(1,1,1,1),2,!1,i),this.yourRank=new h.default("Rank:","font","fontShader",new d.default(1,1,1,1),2,!1,r),this.yourFirstScore=new h.default("Score:","font","fontShader",new d.default(.9,.9,.25,1),2,!1,u),this.gameObject.SetComponent(this.firstScore),this.gameObject.SetComponent(this.first),this.gameObject.SetComponent(this.yourScore),this.gameObject.SetComponent(this.yourRank),this.gameObject.SetComponent(this.yourFirstScore),this.firstScore.UnRegistDraw(),this.first.UnRegistDraw(),this.yourScore.UnRegistDraw(),this.yourRank.UnRegistDraw(),this.yourFirstScore.UnRegistDraw(),this.logoTransform_Show=new l.default(new f.default(-20,-150,-.5),new f.default(0,0,180),new f.default(300,300,300)),this.logoTransform_Hide=new l.default(new f.default(1100,-150,-.5),new f.default(0,0,180),new f.default(300,300,300)),this.rankingTransform_Show=new l.default,this.rankingTransform_Hide=new l.default(new f.default(1100,0,0))},e.prototype.Update=function(){this.isMask&&(this.maskPer+=this.maskDir,this.maskPer>60&&(this.maskPer=60),this.maskPer<0&&(this.maskPer=0,this.isMask=!1,this.mask.UnRegistDraw()),this.maskColor.data[3]=this.maskPer/30)},e.prototype.ShowRanking=function(t,e,a){this.logo.UnRegistDraw(),this.first.UnRegistDraw(),this.yourFirstScore.UnRegistDraw(),this.firstScore.UnRegistDraw(),this.yourRank.UnRegistDraw(),this.yourScore.UnRegistDraw(),e<=1?(this.yourFirstScore.SetText(" Score:"+t),this.first.RegistDraw(),this.yourFirstScore.RegistDraw()):(this.firstScore.SetText(" 1st Score:"+a),this.yourRank.SetText(" Rank:"+e),this.yourScore.SetText(" Score:"+t),this.firstScore.RegistDraw(),this.yourRank.RegistDraw(),this.yourScore.RegistDraw()),this.logo.RegistDraw(),this.gameObject.SetComponent(new u.default(45,!1,this.rankingTransform_Show,this.rankingBaseTransform,c.default.EaseInOutCirc,c.default.EaseInOutCirc))},e.prototype.HideRanking=function(){this.gameObject.SetComponent(new u.default(45,!1,this.rankingTransform_Hide,this.rankingBaseTransform,c.default.EaseInOutCirc,c.default.EaseInOutCirc))},e.prototype.SetArrival=function(t){this.arrivalText.SetText(t+"")},e.prototype.SetComboMater=function(t){this.activeBarDrawComponent.transform.SetScaleX(500*t)},e.prototype.FeverStart=function(){this.activeBarDrawComponent=this.feverBarDrawComponent,this.comboBarDrawComponent.UnRegistDraw(),this.feverBarDrawComponent.RegistDraw()},e.prototype.FeverEnd=function(){this.activeBarDrawComponent=this.comboBarDrawComponent,this.comboBarDrawComponent.RegistDraw(),this.feverBarDrawComponent.UnRegistDraw()},e.prototype.ShowRetry=function(){this.retry.transform.Position=new f.default(-1e3,200,0);var t=new u.default(60,!1,this.retryTransform_Show,this.retryTransform,c.default.EaseInOutQuint,c.default.EaseInOutCirc,!0);this.gameObject.SetComponent(t),this.retry.RegistDraw()},e.prototype.HideRetry=function(){var t=new u.default(60,!1,this.retryTransform_Hide,this.retryTransform,c.default.EaseInOutQuint,c.default.EaseInOutCirc,!0);this.gameObject.SetComponent(t),this.retry.UnRegistDraw()},e.prototype.HideIn=function(){var t=new u.default(60,!1,this.logoTransform_Show,this.logo.transform,c.default.EaseInOutBack,c.default.EaseInOutCirc);this.gameObject.SetComponent(t)},e.prototype.HideOut=function(){var t=new u.default(60,!1,this.logoTransform_Hide,this.logo.transform,c.default.EaseInOutBack,c.default.EaseInOutCirc);this.gameObject.SetComponent(t)},e.prototype.MaskIn=function(){this.maskDir=1,this.isMask=!0,this.mask.RegistDraw(),this.logo.UnRegistDraw(),this.logo.RegistDraw()},e.prototype.MaskOut=function(){this.maskDir=-1},e.prototype.Reset=function(){this.logo.transform.Position=new f.default(-1110,-150,-.5),this.rankingBaseTransform.Position=new f.default(-1e3,0,0),this.maskColor.data[3]=0},e}(o.default);e.default=p},function(t,e,a){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(a(0)),s=n(a(5)),h=n(a(8)),u=n(a(2)),f=n(a(1)),d=n(a(3)),c=n(a(9)),l=n(a(63)),p=n(a(64)),m=n(a(6));var y=function(t){function e(e,a){var r=t.call(this)||this;return r.direction=1,r.isMove=!1,r.keyboardEvent=null,r.canControll=!0,r.isInvisible=!1,r.isfailed=!1,r.movePase=e,r.isPush=!1,r.stage=a,r.ary_sensor=new Array,r}return i(e,t),e.prototype.OnSet=function(){var t=this;this.startY=this.gameObject.transform.Position.y,this.deadSe=this.gameObject.Manager.Scene.GetSceneManager().GetResourceContainer().GetSound("kill"),this.mutekiSe=this.gameObject.Manager.Scene.GetSceneManager().GetResourceContainer().GetSound("muteki"),this.upSe=this.gameObject.Manager.Scene.GetSceneManager().GetResourceContainer().GetSound("up"),this.poppingComponent=new l.default(this,this.movePase,!1),this.modelTransform=new u.default(new o.default(0,0,0),new o.default(0,0,0),new o.default(.2,.2,.15)),this.modelTransform.BaseTransform=this.gameObject.transform,this.gameObject.SetComponent(this.poppingComponent),this.gameObject.SetComponent(new d.default(!0,"cube","caloryMaterial","texShader_light",1,!1,"maguro",this.modelTransform));var e=new u.default(new o.default(0,0,0),new o.default(0,0,0),new o.default(0,0,0));e.BaseTransform=this.gameObject.transform,this.invisibleEffect=new d.default(!1,"effectSphere","yellow","rainbowAlpha",1,!1,null,e),this.gameObject.SetComponent(this.invisibleEffect),this.invisibleEffect.UnRegistDraw(),this.minimumTransform=new u.default(new o.default(0,.1,0),new o.default(0,0,0),new o.default(.3,.16,.18)),this.maximumTransform=new u.default(new o.default(0,-.1,0),new o.default(0,0,0),new o.default(.2,.2,.15)),this.scaleComponent=new c.default(30,!0,this.minimumTransform,this.modelTransform,m.default.EaseInOutCirc),this.gameObject.SetComponent(this.scaleComponent),this.ary_targets=new Array(4),this.ary_targets[0]=new u.default(this.gameObject.transform.Position.Add_b(new o.default(0,0,-1))),this.ary_targets[1]=new u.default(this.gameObject.transform.Position.Add_b(new o.default(0,0,1)),new o.default(0,180,0)),this.ary_targets[2]=new u.default(this.gameObject.transform.Position.Add_b(new o.default(1,0,0)),new o.default(0,-90,0)),this.ary_targets[3]=new u.default(this.gameObject.transform.Position.Add_b(new o.default(-1,0,0)),new o.default(0,90,0)),this.ary_targets.forEach((function(e){return e.BaseTransform=t.stage.gameObject.transform})),this.ary_sensor[0]=new p.default(this.gameObject,new o.default(0,0,-1)),this.ary_sensor[1]=new p.default(this.gameObject,new o.default(0,0,1)),this.ary_sensor[2]=new p.default(this.gameObject,new o.default(1,0,0)),this.ary_sensor[3]=new p.default(this.gameObject,new o.default(-1,0,0)),this.ary_sensor.forEach((function(e){t.gameObject.Manager.AddGameObject("sensor",new u.default,null,[e]).transform.BaseTransform=t.stage.gameObject.transform})),this.gameObject.ComplexHit=!0},e.prototype.GetComponentName=function(){return"PlayerComponent"},e.prototype.Update=function(){var t;if((this.isInvisible&&(this.invisibleEffect.transform.RollX_Local_Degrees(2),this.invisibleEffect.transform.RollY_Local_Degrees(2)),this.canControll)&&(this.isPush,this.keyboardEvent&&!this.poppingComponent.IsMove())){var e;switch("w"==(t=this.keyboardEvent.key)||"ArrowUp"==t?"w":"s"==t||"ArrowDown"==t?"s":"a"==t||"ArrowLeft"==t?"a":"d"==t||"ArrowRight"==t?"d":""){case"w":e=this.ary_targets[0],this.ary_sensor[0].CanMove()?(e.Position=this.ary_sensor[0].GetPosition(),this.stage.GoFront(this.gameObject.transform.LocalPosition.z)):e.Position=this.gameObject.transform.LocalPosition,this.poppingComponent.SetTarget(this.movePase,e);break;case"s":if(this.gameObject.transform.Position.z>4)break;e=this.ary_targets[1],this.ary_sensor[1].CanMove()?e.Position=this.ary_sensor[1].GetPosition():e.Position=this.gameObject.transform.LocalPosition,this.poppingComponent.SetTarget(this.movePase,e);break;case"a":if(this.gameObject.transform.Position.x<=-4)break;e=this.ary_targets[3],this.ary_sensor[3].CanMove()?e.Position=this.ary_sensor[3].GetPosition():e.Position=this.gameObject.transform.LocalPosition,this.poppingComponent.SetTarget(this.movePase,e);break;case"d":if(this.gameObject.transform.Position.x>=4)break;e=this.ary_targets[2],this.ary_sensor[2].CanMove()?e.Position=this.ary_sensor[2].GetPosition():e.Position=this.gameObject.transform.LocalPosition,this.poppingComponent.SetTarget(this.movePase,e)}this.upSe.Play(),this.keyboardEvent=null}},e.prototype.FeverStart=function(){this.isInvisible=!0,this.gameObject.SetComponent(new c.default(40,!1,new u.default(new o.default(0,0,0),new o.default(0,0,0),new o.default(1,1,1)),this.invisibleEffect.transform)),this.invisibleEffect.UnRegistDraw(),this.invisibleEffect.RegistDraw(),this.mutekiSe.Play()},e.prototype.FeverEnd=function(){this.isInvisible=!1,this.gameObject.SetComponent(new c.default(30,!1,new u.default(new o.default(0,0,0),new o.default(0,0,0),new o.default(0,0,0)),this.invisibleEffect.transform))},Object.defineProperty(e.prototype,"IsFever",{get:function(){return this.isInvisible},enumerable:!1,configurable:!0}),e.prototype.OnMoveEnd=function(){var t=this;this.ary_sensor.forEach((function(e){return e.SetPosition(t.gameObject.transform.LocalPosition)}))},e.prototype.SetCanControll=function(t){this.canControll=t},e.prototype.OnKeyDown=function(t){this.canControll&&(this.isfailed||null==this.keyboardEvent&&(this.isPush||(this.scaleComponent&&this.scaleComponent.Remove(),this.scaleComponent=new c.default(5,!1,this.minimumTransform,this.modelTransform),this.gameObject.SetComponent(this.scaleComponent),this.isPush=!0,this.keyboardEvent=t)))},e.prototype.OnKeyUp=function(t){this.isfailed||this.canControll&&null==this.keyboardEvent&&(this.scaleComponent&&this.scaleComponent.Remove(),this.scaleComponent=new c.default(10,!1,this.maximumTransform,this.modelTransform),this.gameObject.SetComponent(this.scaleComponent),this.isPush=!1)},e.prototype.ToStart=function(){h.default.AddKeyUpEvent(this,"playerEvent",!1),h.default.AddKeyDownEvent(this,"playerEvent",!1),this.isPush=!1},e.prototype.Reset=function(){h.default.RemoveKeyUpEvent("playerEvent"),h.default.RemoveKeyDownEvent("playerEvent"),this.gameObject.transform.Position=new o.default(0,-.5,1),this.gameObject.transform.BaseTransform=this.stage.gameObject.transform,this.OnMoveEnd();var t=this.ary_targets[0];t.Position=new o.default(0,-.5,1),t.BaseTransform=this.stage.gameObject.transform,this.modelTransform.Scale=new o.default(.2,.2,.15),this.poppingComponent.Start(),this.poppingComponent.SetTarget(this.movePase,t),this.scaleComponent&&this.scaleComponent.Remove(),this.scaleComponent=new c.default(30,!0,this.minimumTransform,this.modelTransform,m.default.EaseInOutCirc),this.gameObject.SetComponent(this.scaleComponent),this.isfailed=!1},e.prototype.DeadAnimation_Press=function(t){this.scaleComponent&&this.scaleComponent.Remove();var e=new u.default(new o.default(0,.2,0),new o.default(0,0,0),new o.default(.4,.05,.22));this.scaleComponent=new c.default(10,!1,e,this.modelTransform,m.default.EaseInOutCirc),this.gameObject.SetComponent(this.scaleComponent),this.poppingComponent.Stop()},e.prototype.DeadAnimation_Strike=function(t){this.gameObject.transform.SetPositionX(this.gameObject.transform.Position.Sub(t.transform.Position).x),this.gameObject.transform.SetPositionY(this.gameObject.transform.LocalPosition.y),this.gameObject.transform.SetPositionZ(.55),this.gameObject.transform.BaseTransform=t.transform,this.scaleComponent&&this.scaleComponent.Remove();var e=new u.default(new o.default(0,0,0),new o.default(0,0,0),new o.default(.22,.22,.05));this.scaleComponent=new c.default(10,!1,e,this.modelTransform),this.gameObject.SetComponent(this.scaleComponent),this.poppingComponent.Stop()},e.prototype.OnCollisionEnter=function(t){if(t.objectID==s.default.GetID("damageObstacle")&&!this.isInvisible&&!this.isfailed)return t.transform.Position.z,this.gameObject.transform.Position.z,this.DeadAnimation_Press(t),this.deadSe.Play(),this.isfailed=!0,void this.stage.Failed()},e}(f.default);e.default=y},function(t,e,a){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(a(6)),s=function(t){function e(e,a,r,i,n,s){var h=t.call(this)||this;return h.currentTime=0,h.direction=1,h.isStop=!1,h.playerCompoent=e,h.time=a,h.linerPase=1/a,i&&(h.targetTransform=i),n&&(h.transform=n),h.easingFunction=s||o.default.EaseInOutCubic,h.TimeUpdate=r?h.TimeUpdate_Loop:h.TimeUpdate_NoLoop,h}return i(e,t),e.prototype.OnSet=function(){this.transform||(this.transform=this.gameObject.transform),this.targetTransform||(this.targetTransform=this.gameObject.transform),this.offset=this.targetTransform.Position.Sub(this.transform.Position),this.scalePase=this.targetTransform.Scale.Sub(this.transform.Scale),this.initPosition=this.transform.Position,this.initScale=this.transform.Scale,this.rotateQuat=this.transform.Rotation.ToQuaternion(),this.targetRotateQuat=this.targetTransform.Rotation.ToQuaternion()},e.prototype.SetTarget=function(t,e){this.currentTime=0,this.time=t,this.targetTransform=e,this.offset=this.targetTransform.Position.Sub(this.transform.Position),this.scalePase=this.targetTransform.Scale.Sub(this.transform.Scale),this.initPosition=this.transform.LocalPosition,this.initScale=this.transform.Scale,this.rotateQuat=this.transform.Rotation.ToQuaternion(),this.targetRotateQuat=this.targetTransform.Rotation.ToQuaternion()},e.prototype.TimeUpdate_Loop=function(){this.currentTime>=this.time?(this.currentTime=this.time,this.direction=-1):this.currentTime<=0&&(this.currentTime=0,this.direction=1),this.currentTime+=this.direction},e.prototype.TimeUpdate_NoLoop=function(){this.currentTime>this.time||this.currentTime==this.time&&this.playerCompoent.OnMoveEnd(),this.currentTime+=this.direction},e.prototype.IsMove=function(){return!(this.currentTime>this.time+1)},e.prototype.Stop=function(){this.isStop=!0},e.prototype.Start=function(){this.isStop=!1},e.prototype.Update=function(){if(!this.isStop){this.TimeUpdate();var t=this.easingFunction(this.currentTime/this.time);t>1||(this.transform.Position=this.initPosition.Add(this.offset.Multiply(t).AddY(.8*-o.default.Parabola(t))),this.transform.Scale=this.initScale.Add(this.scalePase.Multiply(t)),this.transform.Rotation=this.rotateQuat.SphereLerp(this.targetRotateQuat,t).ToMatrix4x4())}},e}(n(a(1)).default);e.default=s},function(t,e,a){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(a(10)),h=n(a(1)),u=n(a(0)),f=n(a(5));!function(t){t[t.sphere=0]="sphere",t[t.box_AABB=1]="box_AABB",t[t.box_OBB=2]="box_OBB",t[t.point=3]="point"}(o||(o={}));var d=function(t){function e(e,a){var r=t.call(this)||this;return r.hitNum=0,r.parentObject=e,r.offSet=a,r}return i(e,t),e.prototype.OnSet=function(){this.gameObject.transform.Position=this.parentObject.transform.Position.Add_b(this.offSet),this.gameObject.transform.Scale=new u.default(.5,.5,.5),this.gameObject.ComplexHit=!0,this.gameObject.SetComponent(new s.default(o.box_AABB,new u.default(1,1,1),0))},e.prototype.SetPosition=function(t){this.gameObject.transform.Position=t.Add(this.offSet)},e.prototype.GetPosition=function(){return this.gameObject.transform.LocalPosition},e.prototype.CanMove=function(){return!this.hitNum},e.prototype.OnCollisionEnter=function(t){t.objectID==f.default.GetID("obstacle")&&(this.hitNum+=1)},e.prototype.OnCollisionRelease=function(t){t.objectID==f.default.GetID("obstacle")&&(this.hitNum-=1)},e}(h.default);e.default=d},function(t,e,a){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(a(3)),s=n(a(0)),h=n(a(11)),u=n(a(2)),f=n(a(20)),d=n(a(23)),c=n(a(66)),l=n(a(21)),p=[0,1,2,3,4,-4,-3,-2,-1],m=p.slice(),y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1],b=function(t){function e(e,a,r,i,n,o){var s=t.call(this)||this;return s.meshName=r,s.size=i,s.carCount=o,s.ary_cars=new Array(s.carCount),s.rotate=n,s.stage=e,s.baseMaterialName=a,s}return i(e,t),e.prototype.OnSet=function(){var t=new u.default(new s.default(0,.5,0),new s.default(0,0,0),new s.default(9,1,1));t.BaseTransform=this.gameObject.transform,this.gameObject.SetComponent(new o.default(!1,"cube_position",this.baseMaterialName,"ambient",1,!1,null,t)),this.gameObject.SetComponent(new o.default(!1,"sandwitchCube_position",this.baseMaterialName+"_d","ambient",1,!1,null,t));var e=h.default.GetRandomInt(0,1);e<1&&(e=-1);for(var a=h.default.GetRandomInt(3,6),r=0;r<this.carCount;r++){var i=new u.default(new s.default(0,0,0),new s.default(0,0,0));i.BaseTransform=this.gameObject.transform;var n=new d.default(this.stage,this.size),l=new u.default(new s.default(0,0,0),new s.default(180,90*e,0).Add_b(this.rotate),new s.default(.0025,.0025,.0025));l.BaseTransform=i;var b=new o.default(!1,"nonTexcube","red","onlyMaterial",1,!1,this.meshName,l),g=new c.default(new s.default(8*e,-.5,0),new s.default(-8*e,-.5,0),50*a,50*h.default.GetRandomInt(0,a-1),!0);this.ary_cars.push(this.gameObject.Manager.AddGameObject("car",i,"car",[n,g,b]))}var G=y[h.default.GetRandomInt(0,y.length-1)];for(r=0;r<G;r++){var v=h.default.GetRandomInt(0,9-r),R=new f.default(this.stage),_=new u.default(new s.default(m[v],-.5,0));_.BaseTransform=this.gameObject.transform,this.ary_cars.push(this.gameObject.Manager.AddGameObject("coin",_,"coin",[R])),m.splice(v,1)}m=p.slice()},e.prototype.Destroy=function(){this.stage=null,this.gameObject.Dead(),this.ary_cars.forEach((function(t){return t.Dead()})),this.ary_cars.length=0},e}(l.default);e.default=b},function(t,e,a){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,a,r,i,n){var o=t.call(this)||this;return o.currentTime=0,o.start=e,o.end=a.Sub(o.start),o.time=r,o.currentTime=i,o.TimeUpdate=n?o.TimeUpdate_Loop:o.TimeUpdate_NoLoop,o}return i(e,t),e.prototype.TimeUpdate_NoLoop=function(){this.currentTime++,this.currentTime>this.time&&(this.currentTime=0,this.Dead())},e.prototype.TimeUpdate_Loop=function(){this.currentTime++,this.currentTime>this.time&&(this.currentTime=0)},e.prototype.Update=function(){this.TimeUpdate(),this.gameObject.transform.Position=this.start.Add(this.end.Multiply(this.currentTime/this.time))},e}(n(a(1)).default);e.default=o},function(t,e,a){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(a(3)),s=n(a(0)),h=a(68),u=n(a(11)),f=n(a(2)),d=n(a(20)),c=n(a(69)),l=n(a(21)),p=["sango","sango","sango_another","sango_another","sango","rock"],m=[.4,.4,.4,.4,.4,.2],y=["scallops","seaweed"],b=[0,1,2,3,4,-4,-3,-2,-1],g=[0,-.5],G=b.slice(),v=[0,0,0,1],R=function(t){function e(e,a,r,i){var n=t.call(this)||this;return n.isStart=!1,i&&(n.isStart=i,G[0]=G[1]),n.carCount=r,n.ary_obstacles=new Array(n.carCount),n.stage=e,n.baseMaterialName=a,n.ary_coins=new Array,n}return i(e,t),e.prototype.OnSet=function(){(_=new f.default(new s.default(0,.5,0),new s.default(0,0,0),new s.default(9,1,1))).BaseTransform=this.gameObject.transform,this.gameObject.SetComponent(new o.default(!1,"cube_position",this.baseMaterialName,"ambient",1,!1,null,_)),this.gameObject.SetComponent(new o.default(!1,"sandwitchCube_position",this.baseMaterialName+"_d","ambient",1,!1,null,_));for(var t=0;t<this.carCount;t++){var e=u.default.GetRandomInt(0,8-t),a=new f.default(new s.default(G[e],-.5,0));G.splice(e,1),a.BaseTransform=this.gameObject.transform;var r=u.default.GetRandomInt(0,5);(_=new f.default(new s.default(0,m[r],0),new s.default(180,0,0),new s.default(.0025,.0025,.0025))).BaseTransform=a;var i=new o.default(!1,"nonTexcube","red","onlyMaterial",1,!1,p[r],_),n=new c.default(h.PrimitiveType.box_AABB,new s.default(1,1,1),this.stage),l=this.gameObject.Manager.AddGameObject("obstacle",a,"obstacle",[n,i]);this.ary_obstacles.push(l)}var R=u.default.GetRandomInt(1,3);for(t=0;t<R;t++){e=u.default.GetRandomInt(0,8-(t+this.carCount));var _,w=u.default.GetRandomInt(0,1);a=new f.default(new s.default(G[e],g[w],0));G.splice(e,1),a.BaseTransform=this.gameObject.transform,(_=new f.default(new s.default(0,0,0),new s.default(0,90*u.default.GetRandomInt(0,3),0),new s.default(.0025,.0025,.0025))).BaseTransform=a;i=new o.default(!1,"nonTexcube","red","onlyMaterial",1,!1,y[w],_);this.gameObject.SetComponent(i)}var x=v[u.default.GetRandomInt(0,3)];if(!this.isStart)for(t=0;t<x;t++){e=u.default.GetRandomInt(1,8-(t+this.carCount+R));var M=new d.default(this.stage),F=G[e],A=new f.default(new s.default(F,-.5,0));A.BaseTransform=this.gameObject.transform,this.ary_coins.push(this.gameObject.Manager.AddGameObject("coin",A,"coin",[M])),G.splice(e,1)}G=b.slice()},e.prototype.Destroy=function(){this.stage=null,this.gameObject.Dead(),this.ary_coins.forEach((function(t){t.Dead()})),this.ary_coins.length=0,this.ary_obstacles.forEach((function(t){t.Dead()}))},e}(l.default);e.default=R},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PrimitiveType=void 0,function(t){t[t.sphere=0]="sphere",t[t.box_AABB=1]="box_AABB",t[t.box_OBB=2]="box_OBB",t[t.point=3]="point"}(e.PrimitiveType||(e.PrimitiveType={}))},function(t,e,a){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(a(1)),h=n(a(10)),u=n(a(5));!function(t){t[t.sphere=0]="sphere",t[t.box_AABB=1]="box_AABB",t[t.box_OBB=2]="box_OBB",t[t.point=3]="point"}(o||(o={}));var f=function(t){function e(e,a,r){var i=t.call(this)||this;return i.type=e,i.size=a,i.stage=r,i}return i(e,t),e.prototype.OnSet=function(){switch(this.gameObject.objectID=u.default.GetID("obstacle"),this.type){case o.sphere:this.gameObject.SetComponent(new h.default(o.sphere,this.size,0));break;case o.point:break;case o.box_AABB:this.gameObject.SetComponent(new h.default(o.box_AABB,this.size,0));break;case o.box_OBB:this.gameObject.SetComponent(new h.default(o.box_OBB,this.size,0))}},e.prototype.OnRemove=function(){},e.prototype.Update=function(){},e.prototype.OnCollision=function(t){t.objectID,u.default.GetID("player")},e}(s.default);e.default=f},function(t,e,a){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(a(3)),s=n(a(0)),h=n(a(11)),u=n(a(2)),f=n(a(20)),d=n(a(23)),c=n(a(71)),l=n(a(72)),p=n(a(21)),m=[0,1,2,3,4,-4,-3,-2,-1],y=m.slice(),b=[0,0,0,0,0,0,0,0,0,,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,1,3],g=function(t){function e(e,a,r,i){var n=t.call(this)||this;return n.meshName=r,n.size=i,n.stage=e,n.baseMaterialName=a,n.ary_coins=new Array,n}return i(e,t),e.prototype.OnSet=function(){var t=new u.default(new s.default(0,.5,0),new s.default(0,0,0),new s.default(9,1,1));t.BaseTransform=this.gameObject.transform,this.gameObject.SetComponent(new o.default(!1,"cube_position",this.baseMaterialName,"ambient",1,!1,null,t)),this.gameObject.SetComponent(new o.default(!1,"sandwitchCube_position",this.baseMaterialName+"_d","ambient",1,!1,null,t));var e=h.default.GetRandomInt(0,1);e<1&&(e=-1);var a=h.default.GetRandomInt(3,5),r=h.default.GetRandomInt(1,4);r=100*Math.min(a,r),a*=200;var i=new u.default;i.BaseTransform=this.gameObject.transform;var n=new d.default(this.stage,new s.default(15,1,1)),p=new u.default(new s.default(0,0,0),new s.default(180,90*-e,0),new s.default(.0025,.0025,.0025));p.BaseTransform=i;var g=new o.default(!1,"nonTexcube","red","onlyMaterial",1,!1,this.meshName,p),G=new c.default(new s.default(20*e,-.5,0),new s.default(-20*e,-.5,0),70,0,a,r,!0);this.train=this.gameObject.Manager.AddGameObject("train",i,"train",[n,G,g]);var v=new l.default(a,r,a-120,120);this.gameObject.SetComponent(v);for(var R=b[h.default.GetRandomInt(0,b.length-1)],_=0;_<R;_++){var w=h.default.GetRandomInt(0,9-_),x=new f.default(this.stage),M=new u.default(new s.default(y[w],-.5,0));M.BaseTransform=this.gameObject.transform,this.ary_coins.push(this.gameObject.Manager.AddGameObject("coin",M,"coin",[x])),y.splice(w,1)}y=m.slice()},e.prototype.Destroy=function(){this.stage=null,this.gameObject.Dead(),this.train.Dead(),this.ary_coins.forEach((function(t){t.Dead()})),this.ary_coins.length=0},e}(p.default);e.default=g},function(t,e,a){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,a,r,i,n,o,s){var h=t.call(this)||this;return h.start=e,h.end=a.Sub(h.start),h.time=r,h.currentTime=i,h.waitTime=n,h.currentWaitTime=o,h.currentWaitTime&&(h.currentTime=h.time+1),h.TimeUpdate=s?h.TimeUpdate_Loop:h.TimeUpdate_NoLoop,h}return i(e,t),e.prototype.TimeUpdate_NoLoop=function(){this.currentTime++,this.currentTime>this.time&&(this.currentTime=0,this.Dead())},e.prototype.TimeUpdate_Loop=function(){this.currentWaitTime<=0&&this.currentTime++,this.currentTime>this.time&&(this.currentWaitTime++,this.currentWaitTime>this.waitTime&&(this.currentTime=0,this.currentWaitTime=0))},e.prototype.Update=function(){this.TimeUpdate(),this.gameObject.transform.Position=this.start.Add(this.end.Multiply(this.currentTime/this.time))},e}(n(a(1)).default);e.default=o},function(t,e,a){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(a(1)),s=n(a(3)),h=n(a(9)),u=n(a(0)),f=n(a(11)),d=n(a(2)),c=function(t){function e(e,a,r,i){var n=t.call(this)||this;return n.currentTime=0,n.isOn=!1,n.time=e,n.currentTime=a,n.alertTime=i,n.alertTiming=r,n}return i(e,t),e.prototype.OnSet=function(){var t=new d.default(new u.default(-.5,-1,.4),new u.default(0,0,0),new u.default(.125,2,.125));t.BaseTransform=this.gameObject.transform;var e=f.default.GetRandomInt(2,-2)/4;this.fishBaseTransform=new d.default(new u.default(-.5,-2+e,.4),new u.default(0,0,0),new u.default(1,1,1)),this.crownFishTransform=new d.default(new u.default(0,0,.5),new u.default(0,0,0),new u.default(.0025,.0025,.0025)),this.fishBaseTransform.BaseTransform=this.gameObject.transform,this.crownFishTransform.BaseTransform=this.fishBaseTransform,this.gameObject.SetComponent(new s.default(!0,"nonTexcube","blue","pointLight",1,!1,null,t)),this.gameObject.SetComponent(new s.default(!0,"nonTexcube","red","onlyMaterial",1,!1,"clownfish",this.crownFishTransform)),this.gameObject.SetComponent(new h.default(20*f.default.GetRandomInt(4,8),!0,new d.default(new u.default(0,.5,.5),new u.default(0,0,0),new u.default(.0025,.0025,.0025)),this.crownFishTransform))},e.prototype.SignalOn=function(){this.fishBaseTransform.RollY_Local_Degrees(6),this.isOn=!0},e.prototype.SignalOff=function(){this.isOn=!1},e.prototype.Update=function(){this.currentTime++,this.currentTime>this.time&&(this.currentTime=0),this.currentTime>this.alertTiming+this.alertTime?this.SignalOff():this.currentTime>this.alertTiming&&this.SignalOn()},e}(o.default);e.default=c},function(t,e,a){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,a,r){var i=t.call(this)||this;return i.sceneName=e,i.sceneChangeValue=r,i.waitFrame=a,i}return i(e,t),e.prototype.Update=function(){this.waitFrame--,this.waitFrame>0||(this.gameObject.Manager.Scene.GetSceneManager().ChangeScene(this.sceneName,this.sceneChangeValue),this.Dead())},e}(n(a(1)).default);e.default=o},function(t,e,a){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){var a=t.call(this)||this;return a.waitFrame=e,a}return i(e,t),e.prototype.Update=function(){this.waitFrame--,this.waitFrame>0||this.gameObject.Dead()},e}(n(a(1)).default);e.default=o}]);